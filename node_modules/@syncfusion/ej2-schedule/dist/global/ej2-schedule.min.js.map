{"version":3,"file":"ej2-schedule.min.js","sources":["../../src/schedule/base/util.js","../../src/recurrence-editor/date-generator.js","../../src/schedule/base/constant.js","../../src/schedule/base/css-constant.js","../../src/schedule/renderer/header-renderer.js","../../src/schedule/actions/scroll.js","../../src/schedule/actions/touch.js","../../src/schedule/actions/keyboard.js","../../src/schedule/actions/data.js","../../src/common/calendar-util.js","../../src/schedule/timezone/timezone.js","../../src/schedule/event-renderer/event-base.js","../../src/schedule/event-renderer/vertical-view.js","../../src/schedule/event-renderer/month.js","../../src/schedule/event-renderer/timeline-view.js","../../src/schedule/event-renderer/inline-edit.js","../../src/schedule/popups/form-validator.js","../../src/schedule/popups/quick-popups.js","../../src/schedule/popups/event-tooltip.js","../../src/recurrence-editor/recurrence-editor.js","../../src/schedule/popups/event-window.js","../../src/schedule/actions/virtual-scroll.js","../../src/schedule/renderer/renderer.js","../../src/schedule/models/work-hours.js","../../src/schedule/models/time-scale.js","../../src/schedule/models/quick-info-templates.js","../../src/schedule/models/header-rows.js","../../src/schedule/actions/crud.js","../../src/schedule/actions/work-cells.js","../../src/schedule/models/field-options.js","../../src/schedule/models/fields.js","../../src/schedule/models/event-settings.js","../../src/schedule/models/group.js","../../src/schedule/models/resources.js","../../src/schedule/base/resource.js","../../src/schedule/base/schedule.js","../../src/schedule/actions/action-base.js","../../src/schedule/actions/resize.js","../../src/schedule/event-renderer/year.js","../../src/schedule/actions/drag.js","../../src/schedule/renderer/view-base.js","../../src/schedule/renderer/vertical-view.js","../../src/schedule/renderer/day.js","../../src/schedule/renderer/week.js","../../src/schedule/renderer/work-week.js","../../src/schedule/renderer/month.js","../../src/schedule/renderer/year.js","../../src/schedule/event-renderer/agenda-base.js","../../src/schedule/renderer/agenda.js","../../src/schedule/renderer/month-agenda.js","../../src/schedule/renderer/timeline-header-row.js","../../src/schedule/renderer/timeline-view.js","../../src/schedule/renderer/timeline-month.js","../../src/schedule/renderer/timeline-year.js","../../src/schedule/exports/calendar-export.js","../../src/schedule/exports/calendar-import.js","../../src/schedule/exports/excel-export.js","../../src/schedule/exports/print.js","../../src/global.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * Schedule common utilities\n */\nexport var WEEK_LENGTH = 7;\nexport var MS_PER_DAY = 86400000;\nexport var MS_PER_MINUTE = 60000;\n/**\n * Method to get height from element\n *\n * @param {Element} container Accepts the DOM element\n * @param {string} elementClass Accepts the element class\n * @returns {number} Returns the height of the element\n */\nexport function getElementHeightFromClass(container, elementClass) {\n    var height = 0;\n    var el = createElement('div', { className: elementClass }).cloneNode();\n    el.style.visibility = 'hidden';\n    el.style.position = 'absolute';\n    container.appendChild(el);\n    height = el.getBoundingClientRect().height;\n    remove(el);\n    return height;\n}\n/**\n * Method to get translateY value\n *\n * @param {HTMLElement | Element} element Accepts the DOM element\n * @returns {number} Returns the translateY value of given element\n */\nexport function getTranslateY(element) {\n    var style = getComputedStyle(element);\n    return window.WebKitCSSMatrix ?\n        new WebKitCSSMatrix(style.webkitTransform).m42 : 0;\n}\n/**\n * Method to get week first date\n *\n * @param {Date} date Accepts the date object\n * @param {number} firstDayOfWeek Accepts the first day of week number\n * @returns {Date} Returns the date object\n */\nexport function getWeekFirstDate(date, firstDayOfWeek) {\n    var date1 = new Date(date.getTime());\n    firstDayOfWeek = (firstDayOfWeek - date1.getDay() + 7 * (-1)) % 7;\n    return new Date(date1.setDate(date1.getDate() + firstDayOfWeek));\n}\n/**\n * Method to get week last date\n *\n * @param {Date} date Accepts the date object\n * @param {number} firstDayOfWeek Accepts the first day of week number\n * @returns {Date} Returns the date object\n */\nexport function getWeekLastDate(date, firstDayOfWeek) {\n    var weekFirst = getWeekFirstDate(date, firstDayOfWeek);\n    var weekLast = new Date(weekFirst.getFullYear(), weekFirst.getMonth(), weekFirst.getDate() + 6);\n    return new Date(weekLast.getTime());\n}\n/**\n * Method to get first date of month\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\nexport function firstDateOfMonth(date) {\n    return new Date(date.getFullYear(), date.getMonth(), 1);\n}\n/**\n * Method to get last date of month\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\nexport function lastDateOfMonth(date) {\n    return new Date(date.getFullYear(), date.getMonth() + 1, 0);\n}\n/**\n * Method to get week number\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the week number\n */\nexport function getWeekNumber(date) {\n    var date1 = new Date(date.getFullYear(), 0, 1).valueOf();\n    var currentDate = new Date(date.getFullYear(), date.getMonth(), date.getDate()).valueOf();\n    var dayOfYear = ((currentDate - date1 + MS_PER_DAY) / MS_PER_DAY);\n    return Math.ceil(dayOfYear / 7);\n}\n/**\n * Method to get week middle date\n *\n * @param {Date} weekFirst Accepts the week first date object\n * @param {Date} weekLast Accepts the week last date object\n * @returns {Date} Returns the date object\n */\nexport function getWeekMiddleDate(weekFirst, weekLast) {\n    return new Date(weekLast.valueOf() - ((weekLast.valueOf() - weekFirst.valueOf()) / 2));\n}\n/**\n * Method to set time to date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} time Accepts the milliseconds\n * @returns {Date} Returns the date object\n */\nexport function setTime(date, time) {\n    var tzOffsetBefore = date.getTimezoneOffset();\n    var d = new Date(date.getTime() + time);\n    var tzOffsetDiff = d.getTimezoneOffset() - tzOffsetBefore;\n    date.setTime(d.getTime() + tzOffsetDiff * MS_PER_MINUTE);\n    return date;\n}\n/**\n * Method the reset hours in date object\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\nexport function resetTime(date) {\n    return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n}\n/**\n * Method to get milliseconds from date object\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the milliseconds from date object\n */\nexport function getDateInMs(date) {\n    var localOffset = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTimezoneOffset();\n    var dateOffset = date.getTimezoneOffset();\n    var timezoneOffset = dateOffset - localOffset;\n    return ((date.getTime() - new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTime())\n        - (timezoneOffset * 60 * 1000));\n}\n/**\n * Method to get date count between two dates\n *\n * @param {Date} startDate Accepts the date object\n * @param {Date} endDate Accepts the date object\n * @returns {number} Returns the date count\n */\nexport function getDateCount(startDate, endDate) {\n    return Math.ceil((endDate.getTime() - startDate.getTime()) / MS_PER_DAY);\n}\n/**\n * Method to add no of days in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfDays Accepts the number of days count\n * @returns {Date} Returns the date object\n */\nexport function addDays(date, noOfDays) {\n    date = new Date('' + date);\n    return new Date(date.setDate(date.getDate() + noOfDays));\n}\n/**\n * Method to add no of months in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfMonths Accepts the number of month count\n * @returns {Date} Returns the date object\n */\nexport function addMonths(date, noOfMonths) {\n    date = new Date('' + date);\n    var day = date.getDate();\n    date.setDate(1);\n    date.setMonth(date.getMonth() + noOfMonths);\n    date.setDate(Math.min(day, getMaxDays(date)));\n    return date;\n}\n/**\n * Method to add no of years in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfYears Accepts the number of month count\n * @returns {Date} Returns the date object\n */\nexport function addYears(date, noOfYears) {\n    date = new Date('' + date);\n    var day = date.getDate();\n    date.setDate(1);\n    date.setFullYear(date.getFullYear() + noOfYears);\n    date.setDate(Math.min(day, getMaxDays(date)));\n    return date;\n}\n/**\n * Method to get start and end hours\n *\n * @param {Date} date Accepts the date object\n * @param {Date} startHour Accepts the start hour date object\n * @param {Date} endHour Accepts the end hour date object\n * @returns {Object} Returns the start and end hour date objects\n */\nexport function getStartEndHours(date, startHour, endHour) {\n    var date1 = new Date(date.getTime());\n    date1.setHours(startHour.getHours());\n    date1.setMinutes(startHour.getMinutes());\n    date1.setSeconds(startHour.getSeconds());\n    var date2 = new Date(date.getTime());\n    if (endHour.getHours() === 0) {\n        date2 = addDays(date2, 1);\n    }\n    else {\n        date2.setHours(endHour.getHours());\n        date2.setMinutes(endHour.getMinutes());\n        date2.setSeconds(endHour.getSeconds());\n    }\n    return { startHour: date1, endHour: date2 };\n}\n/**\n * Method to get month last date\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the month last date\n */\nexport function getMaxDays(date) {\n    return lastDateOfMonth(date).getDate();\n}\n/**\n * Method to get days count between two dates\n *\n * @param {Date} startDate Accepts the date object\n * @param {Date} endDate Accepts the date object\n * @returns {number} Returns the days count\n */\nexport function getDaysCount(startDate, endDate) {\n    var strTime = resetTime(new Date(startDate));\n    var endTime = resetTime(new Date(endDate));\n    return Math.round((endTime.getTime() - strTime.getTime()) / MS_PER_DAY);\n}\n/**\n * Method to get date object from date string\n *\n * @param {string} date Accepts the date string\n * @returns {Date} Returns the date object\n */\nexport function getDateFromString(date) {\n    return date.indexOf('Date') !== -1 ? new Date(parseInt(date.match(/\\d+/g).toString(), 10)) :\n        date.indexOf('T') !== -1 ? new Date(date) : new Date(date.replace(/-/g, '/'));\n}\n/** @private */\nvar scrollWidth = null;\n/**\n * Method to get scrollbar width\n *\n * @returns {number} Returns the scrollbar width\n * @private\n */\nexport function getScrollBarWidth() {\n    if (scrollWidth !== null) {\n        return scrollWidth;\n    }\n    var divNode = createElement('div');\n    var value = 0;\n    divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n    document.body.appendChild(divNode);\n    var ratio = (devicePixelRatio) ? (devicePixelRatio.toFixed(2) === '1.10' || devicePixelRatio <= 1) ?\n        Math.ceil(devicePixelRatio % 1) : Math.floor(devicePixelRatio % 1) : 0;\n    value = (divNode.offsetWidth - divNode.clientWidth - ratio) | 0;\n    document.body.removeChild(divNode);\n    return scrollWidth = value;\n}\n/**\n * Method to find the index from data collection\n *\n * @param {Object} data Accepts the data as object\n * @param {string} field Accepts the field name\n * @param {string} value Accepts the value name\n * @param {Object} event Accepts the data as object\n * @param {Object[]} resourceCollection Accepts the data collections\n * @returns {number} Returns the index number\n */\n// eslint-disable-next-line max-len\nexport function findIndexInData(data, field, value, event, resourceCollection) {\n    for (var i = 0, length_1 = data.length; i < length_1; i++) {\n        if (data[i][field] === value) {\n            if (event) {\n                var field_1 = resourceCollection.slice(-2)[0].field;\n                var res = (event[field_1] instanceof Array ? event[field_1] : [event[field_1]]);\n                var resData = res.join(',');\n                if (resData.includes(data[i][resourceCollection.slice(-1)[0].groupIDField])) {\n                    return i;\n                }\n            }\n            else {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\n/**\n * Method to get element outer height\n *\n * @param {HTMLElement} element Accepts the DOM element\n * @returns {number} Returns the outer height of the given element\n */\nexport function getOuterHeight(element) {\n    var style = getComputedStyle(element);\n    return element.offsetHeight + (parseInt(style.marginTop, 10) || 0) + (parseInt(style.marginBottom, 10) || 0);\n}\n/**\n * Method to remove child elements\n *\n * @param {HTMLElement | Element} element Accepts the DOM element\n * @returns {void}\n */\nexport function removeChildren(element) {\n    var elementChildren = [].slice.call(element.children);\n    for (var _i = 0, elementChildren_1 = elementChildren; _i < elementChildren_1.length; _i++) {\n        var elementChild = elementChildren_1[_i];\n        if (!elementChild.classList.contains('blazor-template')) {\n            element.removeChild(elementChild);\n        }\n    }\n}\n/**\n * Method to check DST is present or not in date object\n *\n * @param {Date} date Accepts the date object\n * @returns {boolean} Returns the boolean value for either DST is present or not\n */\nexport function isDaylightSavingTime(date) {\n    var jan = new Date(date.getFullYear(), 0, 1);\n    var jul = new Date(date.getFullYear(), 6, 1);\n    return date.getTimezoneOffset() < Math.max(jan.getTimezoneOffset(), jul.getTimezoneOffset());\n}\n/**\n * Method to check the IPad device\n *\n * @returns {boolean} Returns the boolean value for either IPad device is present or not.\n */\nexport function isIPadDevice() {\n    var deviceCheck = window.navigator.userAgent.toLowerCase();\n    return deviceCheck.indexOf('ipad') > -1;\n}\n/**\n * Method to capitalize the first word in string\n *\n * @param {string} inputString Accepts the string value\n * @param {string} type Accepts the string type\n * @returns {string} Returns the output string\n */\nexport function capitalizeFirstWord(inputString, type) {\n    if (type === 'multiple') {\n        inputString = inputString.split(' ').map(function (e) { return e.charAt(0).toLocaleUpperCase() + e.substring(1); }).join(' ');\n    }\n    else if (type === 'single') {\n        if (inputString[0] >= '0' && inputString[0] <= '9') {\n            var array = inputString.match(/[a-zA-Z]/);\n            inputString = isNullOrUndefined(array) ? inputString :\n                inputString.slice(0, array.index) + inputString[array.index].toLocaleUpperCase() + inputString.slice(array.index + 1);\n        }\n        inputString = inputString[0].toLocaleUpperCase() + inputString.slice(1);\n    }\n    return inputString;\n}\n","/* eslint-disable max-len */\nimport { isNullOrUndefined, getDefaultDateObject, getValue, cldrData } from '@syncfusion/ej2-base';\nimport { MS_PER_DAY, addDays, resetTime, capitalizeFirstWord } from '../schedule/base/util';\nimport { Islamic, Gregorian } from '../common/calendar-util';\nimport { Timezone } from '../schedule/timezone/timezone';\n/**\n * Date Generator from Recurrence Rule\n */\n/**\n * Generate Summary from Recurrence Rule\n *\n * @param {string} rule Accepts the Recurrence rule\n * @param {L10n} localeObject Accepts the locale object\n * @param {string} locale Accepts the locale name\n * @param {CalendarType} calendarType Accepts the calendar type\n * @returns {string} Returns the summary string from given recurrence rule\n */\nexport function generateSummary(rule, localeObject, locale, calendarType) {\n    if (calendarType === void 0) { calendarType = 'Gregorian'; }\n    var ruleObject = extractObjectFromRule(rule);\n    var summary = localeObject.getConstant(EVERY) + ' ';\n    var cldrObj;\n    var cldrObj1;\n    var calendarMode = calendarType.toLowerCase();\n    if (locale === 'en' || locale === 'en-US') {\n        var nameSpace1 = 'months.stand-alone.abbreviated';\n        var nameSpace = 'days.stand-alone.abbreviated';\n        cldrObj1 = (getValue(nameSpace1, getDefaultDateObject(calendarMode)));\n        cldrObj = (getValue(nameSpace, getDefaultDateObject(calendarMode)));\n    }\n    else {\n        var nameSpace1 = 'main.' + locale + '.dates.calendars.' + calendarMode + '.months.stand-alone.abbreviated';\n        var nameSpace = 'main.' + locale + '.dates.calendars.' + calendarMode + '.days.stand-alone.abbreviated';\n        cldrObj1 =\n            (getValue(nameSpace1, cldrData));\n        cldrObj =\n            (getValue(nameSpace, cldrData));\n    }\n    if (ruleObject.interval > 1) {\n        summary += ruleObject.interval + ' ';\n    }\n    switch (ruleObject.freq) {\n        case 'DAILY':\n            summary += localeObject.getConstant(DAYS);\n            break;\n        case 'WEEKLY':\n            summary += localeObject.getConstant(WEEKS) + ' ' + localeObject.getConstant(ON) + ' ';\n            ruleObject.day.forEach(function (day, index) {\n                summary += capitalizeFirstWord(getValue(DAYINDEXOBJECT[day], cldrObj), 'single');\n                summary += (((ruleObject.day.length - 1) === index) ? '' : ', ');\n            });\n            break;\n        case 'MONTHLY':\n            summary += localeObject.getConstant(MONTHS) + ' ' + localeObject.getConstant(ON) + ' ';\n            summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n            break;\n        case 'YEARLY':\n            summary += localeObject.getConstant(YEARS) + ' ' + localeObject.getConstant(ON) + ' ';\n            summary += capitalizeFirstWord(getValue((ruleObject.month[0]).toString(), cldrObj1), 'single') + ' ';\n            summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n            break;\n    }\n    if (ruleObject.count) {\n        summary += ', ' + (ruleObject.count) + ' ' + localeObject.getConstant(TIMES);\n    }\n    else if (ruleObject.until) {\n        var tempDate = ruleObject.until;\n        summary += ', ' + localeObject.getConstant(UNTIL)\n            + ' ' + tempDate.getDate()\n            + ' ' + capitalizeFirstWord(getValue((tempDate.getMonth() + 1).toString(), cldrObj1), 'single')\n            + ' ' + tempDate.getFullYear();\n    }\n    return summary;\n}\n/**\n * Generates Month summary\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {string[]} cldrObj Accepts the collections of month name from calendar\n * @param {L10n} localeObj Accepts the locale object\n * @returns {string} Returns the month summary string from given recurrence rule object\n * @private\n */\nfunction getMonthSummary(ruleObject, cldrObj, localeObj) {\n    var summary = '';\n    if (ruleObject.monthDay.length) {\n        summary += ruleObject.monthDay[0];\n    }\n    else if (ruleObject.day) {\n        var pos = ruleObject.setPosition - 1;\n        summary += localeObj.getConstant(WEEKPOS[pos > -1 ? pos : (WEEKPOS.length - 1)])\n            + ' ' + capitalizeFirstWord(getValue(DAYINDEXOBJECT[ruleObject.day[0]], cldrObj), 'single');\n    }\n    return summary;\n}\n/**\n * Generates the date collections from the given recurrence rule\n *\n * @param {Date} startDate Accepts the rule start date\n * @param {string} rule Accepts the recurrence rule\n * @param {string} excludeDate Accepts the exception dates in string format\n * @param {number} startDayOfWeek Accepts the start day index of week\n * @param {number} maximumCount Accepts the maximum number count to generate date collections\n * @param {Date} viewDate Accepts the current date instead of start date\n * @param {CalendarType} calendarMode Accepts the calendar type\n * @param {string} oldTimezone Accepts the timezone name\n * @param {string} newTimezone Accepts the timezone name\n * @returns {number[]} Returns the collection of dates\n */\nexport function generate(startDate, rule, excludeDate, startDayOfWeek, maximumCount, viewDate, calendarMode, oldTimezone, newTimezone) {\n    if (maximumCount === void 0) { maximumCount = MAXOCCURRENCE; }\n    if (viewDate === void 0) { viewDate = null; }\n    if (calendarMode === void 0) { calendarMode = 'Gregorian'; }\n    if (oldTimezone === void 0) { oldTimezone = null; }\n    if (newTimezone === void 0) { newTimezone = null; }\n    var ruleObject = extractObjectFromRule(rule);\n    var cacheDate;\n    calendarUtil = getCalendarUtil(calendarMode);\n    var data = [];\n    var modifiedDate = new Date(startDate.getTime());\n    tempExcludeDate = [];\n    var tempDate = isNullOrUndefined(excludeDate) ? [] : excludeDate.split(',');\n    var tz = new Timezone();\n    tempDate.forEach(function (content) {\n        var parsedDate = getDateFromRecurrenceDateString(content);\n        if (oldTimezone && newTimezone) {\n            parsedDate = tz.convert(new Date(parsedDate.getTime()), oldTimezone, newTimezone);\n        }\n        tempExcludeDate.push(new Date(parsedDate.getTime()).setHours(0, 0, 0, 0));\n    });\n    ruleObject.recExceptionCount = !isNullOrUndefined(ruleObject.count) ? tempExcludeDate.length : 0;\n    if (viewDate && viewDate > startDate && !ruleObject.count) {\n        tempViewDate = new Date(new Date(viewDate.getTime()).setHours(0, 0, 0));\n    }\n    else {\n        tempViewDate = null;\n    }\n    if (!ruleObject.until && tempViewDate) {\n        cacheDate = new Date(tempViewDate.getTime());\n        cacheDate.setDate(tempViewDate.getDate() + maximumCount * (ruleObject.interval));\n        ruleObject.until = cacheDate;\n    }\n    if (ruleObject.until && startDate > ruleObject.until) {\n        return data;\n    }\n    maxOccurrence = maximumCount;\n    setFirstDayOfWeek(DAYINDEX[startDayOfWeek]);\n    switch (ruleObject.freq) {\n        case 'DAILY':\n            dailyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'WEEKLY':\n            weeklyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'MONTHLY':\n            monthlyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'YEARLY':\n            yearlyType(modifiedDate, ruleObject.until, data, ruleObject);\n    }\n    return data;\n}\n/**\n * Generate date object from given date string\n *\n * @param {string} recDateString Accepts the exception date as string\n * @returns {Date} Returns the date from exception date string\n */\nexport function getDateFromRecurrenceDateString(recDateString) {\n    return new Date(recDateString.substr(0, 4) +\n        '-' + recDateString.substr(4, 2) +\n        '-' + recDateString.substr(6, 5) +\n        ':' + recDateString.substr(11, 2) +\n        ':' + recDateString.substr(13));\n}\n/**\n * Internal method to handle exclude date\n *\n * @param {number[]} data Accepts the exception date collections\n * @param {number} date Accepts the new exclude date\n * @returns {void}\n * @private\n */\nfunction excludeDateHandler(data, date) {\n    var zeroIndex = new Date(date).setHours(0, 0, 0, 0);\n    if (tempExcludeDate.indexOf(zeroIndex) === -1 && (!tempViewDate || zeroIndex >= tempViewDate.getTime())) {\n        data.push(date);\n    }\n}\n/**\n * Internal method for get date count\n *\n * @param {Date} startDate Accepts the date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {number} Returns the number of date count\n * @private\n */\nfunction getDateCount(startDate, ruleObject) {\n    var count = maxOccurrence;\n    if (ruleObject.count) {\n        count = ruleObject.count;\n    }\n    else if (ruleObject.until) {\n        if (ruleObject.freq === 'DAILY' || ruleObject.freq === 'WEEKLY') {\n            count = Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1;\n        }\n        else if (ruleObject.freq === 'MONTHLY' || ruleObject.freq === 'YEARLY') {\n            count = Math.floor(((ruleObject.until.getMonth() + 12 * ruleObject.until.getFullYear()) -\n                (startDate.getMonth() + 12 * startDate.getFullYear())) / ruleObject.interval) +\n                (ruleObject.day.length > 1 ? (Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1) : 1);\n            if (ruleObject.freq === 'YEARLY') {\n                count = ruleObject.month.length > 1 ? (count * ruleObject.month.length) : count;\n            }\n        }\n    }\n    return count;\n}\n/**\n *  Internal method for daily type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction dailyType(startDate, endDate, data, ruleObject) {\n    var tempDate = new Date(startDate.getTime());\n    var interval = ruleObject.interval;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var state;\n    var expectedDays = ruleObject.day;\n    while (compareDates(tempDate, endDate)) {\n        state = true;\n        state = validateRules(tempDate, ruleObject);\n        if (state && (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1 || expectedDays.length === 0)) {\n            excludeDateHandler(data, tempDate.getTime());\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                break;\n            }\n        }\n        tempDate.setDate(tempDate.getDate() + interval);\n    }\n}\n/**\n * Internal method for weekly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction weeklyType(startDate, endDate, data, ruleObject) {\n    var tempDate = new Date(startDate.getTime());\n    if (!ruleObject.day.length) {\n        ruleObject.day.push(DAYINDEX[startDate.getDay()]);\n    }\n    var interval = ruleObject.interval;\n    var expectedDays = ruleObject.day;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var weekState = true;\n    var wkstIndex;\n    var weekCollection = [];\n    if (expectedDays.length > 1) {\n        if (isNullOrUndefined(ruleObject.wkst) || ruleObject.wkst === '') {\n            ruleObject.wkst = dayIndex[0];\n        }\n        wkstIndex = DAYINDEX.indexOf(ruleObject.wkst);\n        while (compareDates(tempDate, endDate)) {\n            var startDateDiff = DAYINDEX.indexOf(DAYINDEX[tempDate.getDay()]) - wkstIndex;\n            startDateDiff = startDateDiff === -1 ? 6 : startDateDiff;\n            var weekstartDate = addDays(tempDate, -startDateDiff);\n            var weekendDate = addDays(weekstartDate, 6);\n            var compareTempDate = new Date(tempDate.getTime());\n            resetTime(weekendDate);\n            resetTime(compareTempDate);\n            while (weekendDate >= compareTempDate) {\n                if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    weekCollection.push([tempDate.getTime()]);\n                }\n                if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                    break;\n                }\n                tempDate.setDate(tempDate.getDate() + 1);\n                compareTempDate = new Date(tempDate.getTime());\n                resetTime(compareTempDate);\n            }\n            tempDate.setDate(tempDate.getDate() - 1);\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                break;\n            }\n            tempDate.setDate((tempDate.getDate()) + 1 + ((interval - 1) * 7));\n            insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n            weekCollection = [];\n        }\n    }\n    else {\n        tempDate = getStartDateForWeek(startDate, ruleObject.day);\n        while (compareDates(tempDate, endDate)) {\n            weekState = validateRules(tempDate, ruleObject);\n            if (weekState && (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1)) {\n                excludeDateHandler(data, tempDate.getTime());\n            }\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                break;\n            }\n            tempDate.setDate(tempDate.getDate() + (interval * 7));\n        }\n        insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n        weekCollection = [];\n    }\n}\n/**\n *  Internal method for monthly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyType(startDate, endDate, data, ruleObject) {\n    // Set monthday value if BYDAY, BYMONTH and Month day property is not set based on start date\n    if (!ruleObject.month.length && !ruleObject.day.length && !ruleObject.monthDay.length) {\n        ruleObject.monthDay.push(startDate.getDate());\n        if (ruleObject.freq === 'YEARLY') {\n            ruleObject.month.push(startDate.getMonth() + 1);\n        }\n    }\n    else if (ruleObject.month.length > 0 && !ruleObject.day.length && !ruleObject.monthDay.length) {\n        ruleObject.monthDay.push(startDate.getDate());\n    }\n    var ruleType = validateMonthlyRuleType(ruleObject);\n    switch (ruleType) {\n        case 'day':\n            switch (ruleObject.freq) {\n                case 'MONTHLY':\n                    monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n                    break;\n                case 'YEARLY':\n                    monthlyDayTypeProcess(startDate, endDate, data, ruleObject);\n                    break;\n            }\n            break;\n        case 'both':\n        case 'date':\n            switch (ruleObject.freq) {\n                case 'MONTHLY':\n                    monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n                    break;\n                case 'YEARLY':\n                    monthlyDateTypeProcess(startDate, endDate, data, ruleObject);\n                    break;\n            }\n            break;\n    }\n}\n/**\n * Internal method for yearly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction yearlyType(startDate, endDate, data, ruleObject) {\n    var typeValue = checkYearlyType(ruleObject);\n    switch (typeValue) {\n        case 'MONTH':\n            monthlyType(startDate, endDate, data, ruleObject);\n            break;\n        case 'WEEKNO':\n            processWeekNo(startDate, endDate, data, ruleObject);\n            break;\n        case 'YEARDAY':\n            processYearDay(startDate, endDate, data, ruleObject);\n            break;\n    }\n}\n/**\n * Internal method for process week no\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction processWeekNo(startDate, endDate, data, ruleObject) {\n    var stDate = calendarUtil.getYearLastDate(startDate, 0);\n    var tempDate;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var state;\n    var startDay;\n    var firstWeekSpan;\n    var weekNos = ruleObject.weekNo;\n    var weekNo;\n    var maxDate;\n    var minDate;\n    var weekCollection = [];\n    var expectedDays = ruleObject.day;\n    while (compareDates(stDate, endDate)) {\n        startDay = dayIndex.indexOf(DAYINDEX[stDate.getDay()]);\n        firstWeekSpan = (6 - startDay) + 1;\n        for (var index = 0; index < weekNos.length; index++) {\n            weekNo = weekNos[index];\n            weekNo = (weekNo > 0) ? weekNo : 53 + weekNo + 1;\n            maxDate = (weekNo === 1) ? firstWeekSpan : firstWeekSpan + ((weekNo - 1) * 7);\n            minDate = (weekNo === 1) ? firstWeekSpan - 7 : firstWeekSpan + ((weekNo - 2) * 7);\n            while (minDate < maxDate) {\n                tempDate = new Date(stDate.getTime() + (MS_PER_DAY * minDate));\n                if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    if (isNullOrUndefined(ruleObject.setPosition)) {\n                        insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n                    }\n                    else {\n                        weekCollection.push([tempDate.getTime()]);\n                    }\n                }\n                minDate++;\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(weekCollection, state, startDate, endDate, data, ruleObject);\n        }\n        if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n            return;\n        }\n        stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n        weekCollection = [];\n    }\n}\n/**\n * Internal method for process year day\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction processYearDay(startDate, endDate, data, ruleObject) {\n    var stDate = calendarUtil.getYearLastDate(startDate, 0);\n    var tempDate;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var state;\n    var dateCollection = [];\n    var date;\n    var expectedDays = ruleObject.day;\n    while (compareDates(stDate, endDate)) {\n        for (var index = 0; index < ruleObject.yearDay.length; index++) {\n            date = ruleObject.yearDay[index];\n            tempDate = new Date(stDate.getTime());\n            if ((date === calendarUtil.getLeapYearDaysCount() || date === -calendarUtil.getLeapYearDaysCount()) &&\n                (!calendarUtil.isLeapYear(calendarUtil.getFullYear(tempDate), 1))) {\n                tempDate.setDate(tempDate.getDate() + 1);\n                continue;\n            }\n            tempDate.setDate(tempDate.getDate() + ((date < 0) ?\n                calendarUtil.getYearDaysCount(tempDate, 1) + 1 + date : date));\n            if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                if (ruleObject.setPosition == null) {\n                    insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n                }\n                else {\n                    dateCollection.push([tempDate.getTime()]);\n                }\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject);\n        }\n        if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n            return;\n        }\n        stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n        dateCollection = [];\n    }\n}\n/**\n * Internal method to check yearly type\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {YearRuleType} Returns the Yearly rule type object\n * @private\n */\nfunction checkYearlyType(ruleObject) {\n    if (ruleObject.yearDay.length) {\n        return 'YEARDAY';\n    }\n    else if (ruleObject.weekNo.length) {\n        return 'WEEKNO';\n    }\n    return 'MONTH';\n}\n/**\n * Internal method to initialize recurrence rule variables\n *\n * @param {Date} startDate Accepts the start date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {RuleData} Return the rule data object\n * @private\n */\nfunction initializeRecRuleVariables(startDate, ruleObject) {\n    var ruleData = {\n        monthCollection: [],\n        index: 0,\n        tempDate: new Date(startDate.getTime()),\n        mainDate: new Date(startDate.getTime()),\n        expectedCount: getDateCount(startDate, ruleObject),\n        monthInit: 0,\n        dateCollection: []\n    };\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(ruleData.tempDate, ruleObject.month[0], ruleData.tempDate.getDate());\n    }\n    return ruleData;\n}\n/**\n * Internal method for process monthly date type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDateTypeProcess(startDate, endDate, data, ruleObject) {\n    if (ruleObject.month.length) {\n        monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n        return;\n    }\n    var ruleData = initializeRecRuleVariables(startDate, ruleObject);\n    var currentMonthDate;\n    ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n    while (compareDates(ruleData.tempDate, endDate)) {\n        currentMonthDate = new Date(ruleData.tempDate.getTime());\n        while (calendarUtil.isSameYear(currentMonthDate, ruleData.tempDate) &&\n            (ruleData.expectedCount && (data.length + ruleObject.recExceptionCount) <= ruleData.expectedCount)) {\n            if (ruleObject.month.length === 0 || (ruleObject.month.length > 0\n                && !calendarUtil.checkMonth(ruleData.tempDate, ruleObject.month))) {\n                processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, false);\n                ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n                ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n            }\n            else {\n                calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n                ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n                break;\n            }\n        }\n        ruleData.tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());\n        insertDataCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n        if (calendarUtil.isLastMonth(ruleData.tempDate)) {\n            calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n            ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n        }\n        if (ruleData.expectedCount && (data.length + ruleObject.recExceptionCount) >= ruleData.expectedCount) {\n            return;\n        }\n        ruleData.tempDate.setFullYear(ruleData.tempDate.getFullYear() + ruleObject.interval - 1);\n        ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n        ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n        ruleData.dateCollection = [];\n    }\n}\n/**\n * Internal method for process monthly date type with month frequency from recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n    var ruleData = initializeRecRuleVariables(startDate, ruleObject);\n    ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n    if (((ruleObject.freq === 'MONTHLY' && ruleObject.interval === 12) || (ruleObject.freq === 'YEARLY')) &&\n        calendarUtil.getMonthDaysCount(startDate) < ruleObject.monthDay[0]) {\n        return;\n    }\n    while (compareDates(ruleData.tempDate, endDate)) {\n        ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n        processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, true, startDate, data);\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n        }\n        if (ruleData.expectedCount && (data.length + ruleObject.recExceptionCount) >= ruleData.expectedCount) {\n            return;\n        }\n        ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n        ruleData.dateCollection = [];\n    }\n}\n/**\n * To process date collection for Monthly & Yearly based on BYMONTH Day property\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {RuleData} recRuleVariables Accepts the rule data\n * @param {Date} endDate Accepts the end date\n * @param {boolean} isByMonth Accepts the boolean to validate either month or not\n * @param {Date} startDate Accepts the start date\n * @param {number[]} data Accepts the collection of dates\n * @returns {void}\n * @private\n */\nfunction processDateCollectionForByMonthDay(ruleObject, recRuleVariables, endDate, isByMonth, startDate, data) {\n    for (var index = 0; index < ruleObject.monthDay.length; index++) {\n        recRuleVariables.date = ruleObject.monthDay[index];\n        recRuleVariables.tempDate = calendarUtil.getMonthStartDate(recRuleVariables.tempDate);\n        var maxDate = calendarUtil.getMonthDaysCount(recRuleVariables.tempDate);\n        recRuleVariables.date = recRuleVariables.date > 0 ? recRuleVariables.date : (maxDate + recRuleVariables.date + 1);\n        if (validateProperDate(recRuleVariables.tempDate, recRuleVariables.date, recRuleVariables.mainDate)\n            && (recRuleVariables.date > 0)) {\n            calendarUtil.setDate(recRuleVariables.tempDate, recRuleVariables.date);\n            if (endDate && recRuleVariables.tempDate > endDate) {\n                return;\n            }\n            if (ruleObject.day.length === 0 || ruleObject.day.indexOf(DAYINDEX[recRuleVariables.tempDate.getDay()]) > -1) {\n                if (isByMonth && isNullOrUndefined(ruleObject.setPosition) && (recRuleVariables.expectedCount\n                    && (data.length + ruleObject.recExceptionCount) < recRuleVariables.expectedCount)) {\n                    insertDateCollection(recRuleVariables.state, startDate, endDate, data, ruleObject, recRuleVariables.tempDate.getTime());\n                }\n                else {\n                    recRuleVariables.dateCollection.push([recRuleVariables.tempDate.getTime()]);\n                }\n            }\n        }\n    }\n}\n/**\n * Internal method to set next valid date\n *\n * @param {Date} tempDate Accepts the date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} monthInit Accepts the initial month\n * @param {Date} beginDate Accepts the initial date\n * @param {number} interval Accepts the interval duration\n * @returns {number} Returnx the next valid date\n * @private\n */\nfunction setNextValidDate(tempDate, ruleObject, monthInit, beginDate, interval) {\n    if (beginDate === void 0) { beginDate = null; }\n    var monthData = beginDate ? beginDate.getMonth() : 0;\n    var startDate = calendarUtil.getMonthStartDate(tempDate);\n    interval = isNullOrUndefined(interval) ? ruleObject.interval : interval;\n    tempDate.setFullYear(startDate.getFullYear());\n    tempDate.setMonth(startDate.getMonth());\n    tempDate.setDate(startDate.getDate());\n    if (ruleObject.month.length) {\n        monthInit++;\n        monthInit = monthInit % ruleObject.month.length;\n        calendarUtil.setMonth(tempDate, ruleObject.month[monthInit], 1);\n        if (monthInit === 0) {\n            calendarUtil.addYears(tempDate, interval, ruleObject.month[0]);\n        }\n    }\n    else {\n        if (beginDate && (beginDate.getFullYear() < tempDate.getFullYear())) {\n            monthData = tempDate.getMonth() - 1;\n        }\n        calendarUtil.setValidDate(tempDate, interval, 1, monthData, beginDate);\n    }\n    return monthInit;\n}\n/**\n * To get month collection when BYDAY property having more than one value in list.\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction getMonthCollection(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var tempDate = new Date(startDate.getTime());\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    var monthCollection = [];\n    var dateCollection = [];\n    var dates = [];\n    var index;\n    var state;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var monthInit = 0;\n    var beginDate;\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)\n        && (expectedCount && (data.length + ruleObject.recExceptionCount) < expectedCount)) {\n        var currentMonthDate = new Date(tempDate.getTime());\n        var isHavingNumber = expectedDays.map(function (item) { return HASNUMBER.test(item); });\n        if (isHavingNumber.indexOf(true) > -1) {\n            for (var j = 0; j <= expectedDays.length - 1; j++) {\n                var expectedDaysArray = expectedDays[j].match(SPLITNUMBERANDSTRING);\n                var position = parseInt(expectedDaysArray[0], 10);\n                tempDate = new Date(tempDate.getTime());\n                tempDate = calendarUtil.getMonthStartDate(tempDate);\n                tempDate = getStartDateForWeek(tempDate, expectedDays);\n                currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n                while (calendarUtil.isSameYear(currentMonthDate, tempDate) && calendarUtil.isSameMonth(currentMonthDate, tempDate)) {\n                    if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentMonthDate.getDay()]) {\n                        monthCollection.push([currentMonthDate.getTime()]);\n                    }\n                    currentMonthDate.setDate(currentMonthDate.getDate() + (1));\n                }\n                currentMonthDate.setDate(currentMonthDate.getDate() - (1));\n                if (expectedDaysArray[0].indexOf('-') > -1) {\n                    index = monthCollection.length - (-1 * position);\n                }\n                else {\n                    index = position - 1;\n                }\n                index = isNaN(index) ? 0 : index;\n                if (monthCollection.length > 0) {\n                    if (isNullOrUndefined(ruleObject.setPosition)) {\n                        insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n                    }\n                    else {\n                        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, dates))];\n                    }\n                }\n                if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                    return;\n                }\n                monthCollection = [];\n            }\n            if (!isNullOrUndefined(ruleObject.setPosition)) {\n                insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n                dates = [];\n            }\n            monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n            monthCollection = [];\n        }\n        else {\n            var weekCollection = [];\n            var dayCycleData = processWeekDays(expectedDays);\n            currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n            var initialDate = new Date(tempDate.getTime());\n            beginDate = new Date(tempDate.getTime());\n            while (calendarUtil.isSameMonth(initialDate, tempDate)) {\n                weekCollection.push(tempDate.getTime());\n                if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    monthCollection.push(weekCollection);\n                    weekCollection = [];\n                }\n                tempDate.setDate(tempDate.getDate()\n                    + dayCycleData[DAYINDEX[tempDate.getDay()]]);\n            }\n            index = ((ruleObject.setPosition < 1) ? (monthCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n            if (isNullOrUndefined(ruleObject.setPosition)) {\n                index = 0;\n                var datas = [];\n                for (var week = 0; week < monthCollection.length; week++) {\n                    for (var row = 0; row < monthCollection[week].length; row++) {\n                        datas.push(monthCollection[week][row]);\n                    }\n                }\n                monthCollection = [datas];\n            }\n            if (monthCollection.length > 0) {\n                insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n            }\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                return;\n            }\n            monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n            monthCollection = [];\n        }\n    }\n}\n/**\n * To process monday day type for FREQ=MONTHLY\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    // When BYDAY property having more than 1 value.\n    if (expectedDays.length > 1) {\n        getMonthCollection(startDate, endDate, data, ruleObject);\n        return;\n    }\n    var tempDate = new Date(startDate.getTime());\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var monthCollection = [];\n    var beginDate;\n    var monthInit = 0;\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate) && (expectedCount && (data.length + ruleObject.recExceptionCount) < expectedCount)) {\n        beginDate = new Date(tempDate.getTime());\n        var currentMonthDate = new Date(tempDate.getTime());\n        while (calendarUtil.isSameMonth(tempDate, currentMonthDate)) {\n            monthCollection.push([currentMonthDate.getTime()]);\n            currentMonthDate.setDate(currentMonthDate.getDate() + (7));\n        }\n        // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n        insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n        monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        monthCollection = [];\n    }\n}\n/**\n * To process monday day type for FREQ=YEARLY\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDayTypeProcess(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var isHavingNumber = expectedDays.map(function (item) { return HASNUMBER.test(item); });\n    // If BYDAY property having more than 1 value in list\n    if (expectedDays.length > 1 && isHavingNumber.indexOf(true) > -1) {\n        processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject);\n        return;\n    }\n    else if (ruleObject.month.length && expectedDays.length === 1 && isHavingNumber.indexOf(true) > -1) {\n        monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n        return;\n    }\n    var tempDate = new Date(startDate.getTime());\n    var currentMonthDate;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var interval = ruleObject.interval;\n    var monthCollection = [];\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n    }\n    // Set the date as start date of the yeear if yearly freq having ByDay property alone\n    if (isNullOrUndefined(ruleObject.setPosition) && ruleObject.month.length === 0 && ruleObject.weekNo.length === 0) {\n        tempDate.setFullYear(startDate.getFullYear(), 0, 1);\n    }\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)) {\n        currentMonthDate = new Date(tempDate.getTime());\n        while (calendarUtil.isSameYear(currentMonthDate, tempDate) &&\n            (expectedCount && (data.length + ruleObject.recExceptionCount) <= expectedCount)) {\n            currentMonthDate = new Date(tempDate.getTime());\n            while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n                if (ruleObject.month.length === 0 || (ruleObject.month.length > 0\n                    && !calendarUtil.checkMonth(tempDate, ruleObject.month))) {\n                    if (expectedDays.length > 1) {\n                        if (calendarUtil.compareMonth(currentMonthDate, tempDate)) {\n                            calendarUtil.setValidDate(tempDate, 1, 1);\n                            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                            break;\n                        }\n                        if (expectedDays.indexOf(DAYINDEX[currentMonthDate.getDay()]) > -1) {\n                            monthCollection.push([currentMonthDate.getTime()]);\n                        }\n                        currentMonthDate.setDate(currentMonthDate.getDate() + (1));\n                    }\n                    else {\n                        // If BYDAY property having 1 value in list\n                        if (currentMonthDate.getFullYear() > tempDate.getFullYear()) {\n                            calendarUtil.setValidDate(tempDate, 1, 1);\n                            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                            break;\n                        }\n                        var newstr = getDayString(expectedDays[0]);\n                        if (DAYINDEX[currentMonthDate.getDay()] === newstr\n                            && new Date(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), 0)\n                                > new Date(startDate.getFullYear())) {\n                            monthCollection.push([currentMonthDate.getTime()]);\n                        }\n                        currentMonthDate.setDate(currentMonthDate.getDate() + (7));\n                    }\n                }\n                else {\n                    calendarUtil.setValidDate(tempDate, 1, 1);\n                    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                    break;\n                }\n            }\n        }\n        tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());\n        // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n        insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n        if (calendarUtil.isLastMonth(tempDate)) {\n            calendarUtil.setValidDate(tempDate, 1, 1);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        }\n        tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n        if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n            return;\n        }\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        monthCollection = [];\n    }\n}\n/**\n * To process the recurrence rule when BYDAY property having values with integer\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var tempDate = new Date(startDate.getTime());\n    var interval = ruleObject.interval;\n    var monthCollection = [];\n    var dateCollection = [];\n    var index;\n    var state;\n    var monthInit = 0;\n    var currentMonthDate;\n    var currentDate;\n    var beginDate;\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    var datas = [];\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)) {\n        currentMonthDate = new Date(tempDate.getTime());\n        for (var i = 0; i <= ruleObject.month.length; i++) {\n            for (var j = 0; j <= expectedDays.length - 1; j++) {\n                tempDate = calendarUtil.getMonthStartDate(tempDate);\n                tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                monthCollection = [];\n                while (calendarUtil.isSameYear(currentMonthDate, tempDate) &&\n                    (expectedCount && (data.length + ruleObject.recExceptionCount) <= expectedCount)) {\n                    while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n                        currentMonthDate = new Date(tempDate.getTime());\n                        if (ruleObject.month.length === 0 ||\n                            (ruleObject.month.length > 0 && ruleObject.month[i] === calendarUtil.getMonth(currentMonthDate))) {\n                            var expectedDaysArray = expectedDays[j].match(SPLITNUMBERANDSTRING);\n                            var position = parseInt(expectedDaysArray[0], 10);\n                            currentDate = new Date(tempDate.getTime());\n                            while (calendarUtil.isSameYear(currentDate, tempDate)\n                                && calendarUtil.isSameMonth(currentDate, tempDate)) {\n                                if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentDate.getDay()]) {\n                                    monthCollection.push([currentDate.getTime()]);\n                                }\n                                currentDate.setDate(currentDate.getDate() + (1));\n                            }\n                            currentDate.setDate(currentDate.getDate() - (1));\n                            if (expectedDaysArray[0].indexOf('-') > -1) {\n                                index = monthCollection.length - (-1 * position);\n                            }\n                            else {\n                                index = position - 1;\n                            }\n                            index = isNaN(index) ? 0 : index;\n                        }\n                        monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate, 1);\n                        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                    }\n                }\n                tempDate = j === 0 && currentDate ? new Date(currentDate.getTime()) : new Date(currentMonthDate.getTime());\n                if (monthCollection.length > 0) {\n                    if (isNullOrUndefined(ruleObject.setPosition)) {\n                        insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n                    }\n                    else {\n                        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, datas))];\n                    }\n                }\n                if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                    return;\n                }\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n            datas = [];\n        }\n        if (calendarUtil.isLastMonth(tempDate)) {\n            calendarUtil.setValidDate(tempDate, 1, 1);\n            tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n        }\n        else {\n            tempDate.setFullYear(tempDate.getFullYear() + interval);\n        }\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        if (ruleObject.month.length) {\n            calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n        }\n    }\n}\n/**\n * To get recurrence collection if BYSETPOS is null\n *\n * @param {number[]} monthCollection Accepts the month collection dates\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {RuleData} Returns the rule data object\n * @private\n */\nfunction getRecurrenceCollection(monthCollection, expectedDays) {\n    var index;\n    var recurrenceCollectionObject = { monthCollection: [], index: 0 };\n    if (expectedDays.length === 1) {\n        // To split numeric value from BYDAY property value\n        var expectedDaysArrays = expectedDays[0].match(SPLITNUMBERANDSTRING);\n        var arrPosition = void 0;\n        if (expectedDaysArrays.length > 1) {\n            arrPosition = parseInt(expectedDaysArrays[0], 10);\n            index = ((arrPosition < 1) ? (monthCollection.length + arrPosition) : arrPosition - 1);\n        }\n        else {\n            index = 0;\n            monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n        }\n    }\n    else {\n        index = 0;\n        monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n    }\n    recurrenceCollectionObject.monthCollection = monthCollection;\n    recurrenceCollectionObject.index = index;\n    return recurrenceCollectionObject;\n}\n/**\n * Internal method to process the data collections\n *\n * @param {number[]} dateCollection Accepts the date collections\n * @param {boolean} state Accepts the state\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of numbers\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction insertDataCollection(dateCollection, state, startDate, endDate, data, ruleObject) {\n    var index = ((ruleObject.setPosition < 1) ?\n        (dateCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n    if (isNullOrUndefined(ruleObject.setPosition)) {\n        index = 0;\n        dateCollection = getDateCollectionforBySetPosNull(dateCollection);\n    }\n    if (dateCollection.length > 0) {\n        insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject, index);\n    }\n}\n/**\n * To process month collection if BYSETPOS is null\n *\n * @param {number[]} monthCollection Accepts the month date collections\n * @returns {number[]} Returns the month date collections\n * @private\n */\nfunction getDateCollectionforBySetPosNull(monthCollection) {\n    var datas = [];\n    for (var week = 0; week < monthCollection.length; week++) {\n        for (var row = 0; row < monthCollection[week].length; row++) {\n            datas.push(new Date(monthCollection[week][row]).getTime());\n        }\n    }\n    monthCollection = datas.length > 0 ? [datas] : [];\n    return monthCollection;\n}\n/**\n * To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n *\n * @param {number[]} monthCollection Accepts the month date collections\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the date collections\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var state;\n    var datas = [];\n    var dateCollection = [];\n    var recurrenceCollections = getRecurrenceCollection(monthCollection, expectedDays);\n    monthCollection = recurrenceCollections.monthCollection;\n    var index = recurrenceCollections.index;\n    if (ruleObject.setPosition != null) {\n        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, datas))];\n        insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n    }\n    else {\n        if (monthCollection.length > 0) {\n            insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n        }\n    }\n    datas = [];\n}\n/**\n * To filter date collection when BYDAY property having values with number\n *\n * @param {number[]} monthCollection Accepts the date collections\n * @param {number} index Accepts the index of date collections\n * @param {number[]} datas Accepts the collection of dates\n * @returns {number[]} Returns the collection of dates\n * @private\n */\nfunction filterDateCollectionByIndex(monthCollection, index, datas) {\n    for (var week = 0; week < monthCollection[index].length; week++) {\n        datas.push(monthCollection[index][week]);\n    }\n    return datas;\n}\n/**\n * To insert processed date collection in final array element\n *\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} dayData Accepts the date index\n * @returns {void}\n * @private\n */\nfunction insertDateCollection(state, startDate, endDate, data, ruleObject, dayData) {\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var chDate = new Date(dayData);\n    state = validateRules(chDate, ruleObject);\n    if ((chDate >= startDate) && compareDates(chDate, endDate) && state\n        && expectedCount && (data.length + ruleObject.recExceptionCount) < expectedCount) {\n        excludeDateHandler(data, dayData);\n    }\n}\n/**\n * Return the last week number of given month and year.\n *\n * @param {number} Year Accepts the Year in number format\n * @param {number} startDayOfWeek Accepts the start date\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {number} week Accepts the week in number format\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction weekCount(year, startDayOfWeek, monthCollection, week, ruleObject) {\n    var firstDayOfWeek = startDayOfWeek || 0;\n    var firstOfMonth = new Date(year, ruleObject.month[0] - 1, 1);\n    var lastOfMonth = new Date(year, ruleObject.month[0] - 1, 0);\n    var numberOfDaysInMonth = lastOfMonth.getDate();\n    var firstWeekDay = (firstOfMonth.getDay() - firstDayOfWeek + 7) % 7;\n    var used = firstWeekDay + numberOfDaysInMonth;\n    var count = Math.ceil(used / 7) - 1;\n    var dayData = monthCollection[week][count];\n    var chDate = new Date(dayData);\n    var state = validateRules(chDate, ruleObject);\n    return (state) ? count : count - 1;\n}\n/**\n * To process date collection based on Byset position after process the collection based on BYDAY property value index: EX:BYDAY=1SUm-1SU\n *\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction insertDateCollectionBasedonBySetPos(monthCollection, state, startDate, endDate, data, ruleObject) {\n    if (monthCollection.length > 0) {\n        for (var week = 0; week < monthCollection.length; week++) {\n            monthCollection[week].sort();\n            var expectedDays = ruleObject.day;\n            var isHavingNumber = expectedDays.map(function (item) { return HASNUMBER.test(item); });\n            var weekIndex = (ruleObject.freq === 'YEARLY' && (ruleObject.validRules.indexOf(\"BYMONTH\") > -1) &&\n                !(isHavingNumber.indexOf(true) > -1)) ?\n                weekCount(new Date(monthCollection[0][0]).getFullYear(), 0, monthCollection, week, ruleObject)\n                : (monthCollection[week].length + ruleObject.setPosition);\n            var index = ((ruleObject.setPosition < 1) ? weekIndex : ruleObject.setPosition - 1);\n            var dayData = monthCollection[week][index];\n            insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n        }\n    }\n}\n/**\n * To insert datas into existing collection which is processed from previous loop.\n *\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} index Accepts the index value\n * @returns {void}\n * @private\n */\nfunction insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index) {\n    if (monthCollection.length > 0) {\n        index = !isNullOrUndefined(index) ? index :\n            ((ruleObject.setPosition < 1)\n                ? (monthCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n        monthCollection[index].sort();\n        for (var week = 0; week < monthCollection[index].length; week++) {\n            var dayData = monthCollection[index][week];\n            insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n        }\n    }\n}\n/**\n * Internal method to compare dates\n *\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @returns {boolean} Returns the result of checking start and end dates\n * @private\n */\nfunction compareDates(startDate, endDate) {\n    return endDate ? (startDate <= endDate) : true;\n}\n/**\n * Internal method to get day string\n *\n * @param {string} expectedDays Accepts the exception date string\n * @returns {string} Returns the valid string\n * @private\n */\nfunction getDayString(expectedDays) {\n    // To get BYDAY value without numeric value\n    var newstr = expectedDays.replace(REMOVENUMBERINSTRING, '');\n    return newstr;\n}\n/**\n * Internal method to check day index\n *\n * @param {number} day Accepts the day index\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {boolean} Returns the index date\n * @private\n */\nfunction checkDayIndex(day, expectedDays) {\n    var sortedExpectedDays = [];\n    expectedDays.forEach(function (element) {\n        var expectedDaysNumberSplit = element.match(SPLITNUMBERANDSTRING);\n        if (expectedDaysNumberSplit.length === 2) {\n            sortedExpectedDays.push(expectedDaysNumberSplit[1]);\n        }\n        else {\n            sortedExpectedDays.push(expectedDaysNumberSplit[0]);\n        }\n    });\n    return (sortedExpectedDays.indexOf(DAYINDEX[day]) === -1);\n}\n/**\n * Internal method to get start date of week\n *\n * @param {Date} startDate Accepts the start date\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {Date} Return the week start date\n * @private\n */\nfunction getStartDateForWeek(startDate, expectedDays) {\n    var tempDate = new Date(startDate.getTime());\n    var newstr;\n    if (expectedDays.length > 0) {\n        var expectedDaysArr = [];\n        for (var i = 0; i <= expectedDays.length - 1; i++) {\n            newstr = getDayString(expectedDays[i]);\n            expectedDaysArr.push(newstr);\n        }\n        if (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1) {\n            do {\n                tempDate.setDate(tempDate.getDate() + 1);\n            } while (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1);\n        }\n    }\n    return tempDate;\n}\n/**\n * Method to generate recurrence rule object from given rule\n *\n * @param {string} rules Accepts the recurrence rule\n * @returns {RecRule} Returns the recurrence rule object\n */\nexport function extractObjectFromRule(rules) {\n    var ruleObject = {\n        freq: null,\n        interval: 1,\n        count: null,\n        until: null,\n        day: [],\n        wkst: null,\n        month: [],\n        weekNo: [],\n        monthDay: [],\n        yearDay: [],\n        setPosition: null,\n        validRules: []\n    };\n    var rulesList = rules.split(';');\n    var splitData = [];\n    var temp;\n    rulesList.forEach(function (data) {\n        splitData = data.split('=');\n        switch (splitData[0]) {\n            case 'UNTIL':\n                temp = splitData[1];\n                ruleObject.until = getDateFromRecurrenceDateString(temp);\n                break;\n            case 'BYDAY':\n                ruleObject.day = splitData[1].split(',');\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYMONTHDAY':\n                ruleObject.monthDay = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYMONTH':\n                ruleObject.month = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYYEARDAY':\n                ruleObject.yearDay = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYWEEKNO':\n                ruleObject.weekNo = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'INTERVAL':\n                ruleObject.interval = parseInt(splitData[1], 10);\n                break;\n            case 'COUNT':\n                ruleObject.count = parseInt(splitData[1], 10);\n                break;\n            case 'BYSETPOS':\n                ruleObject.setPosition = parseInt(splitData[1], 10) > 4 ? -1 : parseInt(splitData[1], 10);\n                break;\n            case 'FREQ':\n                ruleObject.freq = splitData[1];\n                break;\n            case 'WKST':\n                ruleObject.wkst = splitData[1];\n                break;\n        }\n    });\n    if ((ruleObject.freq === 'MONTHLY') && (ruleObject.monthDay.length === 0)) {\n        var index = ruleObject.validRules.indexOf('BYDAY');\n        ruleObject.validRules.splice(index, 1);\n    }\n    return ruleObject;\n}\n/**\n * Internal method to validate proper date\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number} data Accepts the data value\n * @param {Date} startDate Accepts the start date\n * @returns {boolean} Returns the result of date validate\n * @private\n */\nfunction validateProperDate(tempDate, data, startDate) {\n    var maxDate = calendarUtil.getMonthDaysCount(tempDate);\n    return (data <= maxDate) && (tempDate >= startDate);\n}\n/**\n * Internal method to process week days\n *\n * @param {string[]} expectedDays Accepts the expection dates\n * @returns {Object} Returns the weekdays object\n * @private\n */\nfunction processWeekDays(expectedDays) {\n    var dayCycle = {};\n    expectedDays.forEach(function (element, index) {\n        if (index === expectedDays.length - 1) {\n            var startIndex = dayIndex.indexOf(element);\n            var temp = startIndex;\n            while (temp % 7 !== dayIndex.indexOf(expectedDays[0])) {\n                temp++;\n            }\n            dayCycle[element] = temp - startIndex;\n        }\n        else {\n            dayCycle[element] = dayIndex.indexOf(expectedDays[(index + 1)]) - dayIndex.indexOf(element);\n        }\n    });\n    return dayCycle;\n}\n/**\n * Internal method to check date\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number[]} expectedDate Accepts the exception dates\n * @returns {boolean} Returns the boolean value\n * @private\n */\nfunction checkDate(tempDate, expectedDate) {\n    var temp = expectedDate.slice(0);\n    var data;\n    var maxDate = calendarUtil.getMonthDaysCount(tempDate);\n    data = temp.shift();\n    while (data) {\n        if (data < 0) {\n            data = data + maxDate + 1;\n        }\n        if (data === tempDate.getDate()) {\n            return false;\n        }\n        data = temp.shift();\n    }\n    return true;\n}\n/**\n * Internal method to check the year value\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number[]} expectedyearDay Accepts the exception dates in year\n * @returns {boolean} Returns the boolean value\n * @private\n */\nfunction checkYear(tempDate, expectedyearDay) {\n    var temp = expectedyearDay.slice(0);\n    var data;\n    var yearDay = getYearDay(tempDate);\n    data = temp.shift();\n    while (data) {\n        if (data < 0) {\n            data = data + calendarUtil.getYearDaysCount(tempDate, 0) + 1;\n        }\n        if (data === yearDay) {\n            return false;\n        }\n        data = temp.shift();\n    }\n    return true;\n}\n/**\n * Internal method to get the year day\n *\n * @param {Date} currentDate Accepts the date value\n * @returns {number} Returns the boolean value\n * @private\n */\nfunction getYearDay(currentDate) {\n    if (!startDateCollection[calendarUtil.getFullYear(currentDate)]) {\n        startDateCollection[calendarUtil.getFullYear(currentDate)] = calendarUtil.getYearLastDate(currentDate, 0);\n    }\n    var tempDate = startDateCollection[calendarUtil.getFullYear(currentDate)];\n    var diff = currentDate.getTime() - tempDate.getTime();\n    return Math.ceil(diff / MS_PER_DAY);\n}\n/**\n * Internal method to validate monthly rule type\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {MonthlyType} Returns the monthly type object\n * @private\n */\nfunction validateMonthlyRuleType(ruleObject) {\n    if (ruleObject.monthDay.length && !ruleObject.day.length) {\n        return 'date';\n    }\n    else if (!ruleObject.monthDay.length && ruleObject.day.length) {\n        return 'day';\n    }\n    return 'both';\n}\n/**\n * Internal method to re-order the week days based on first day of week\n *\n * @param {string[]} days Accepts the week days value\n * @returns {void}\n * @private\n */\nfunction rotate(days) {\n    var data = days.shift();\n    days.push(data);\n}\n/**\n * Internal method to set first day of week\n *\n * @param {string} day Accepts the first day string\n * @returns {void}\n * @private\n */\nfunction setFirstDayOfWeek(day) {\n    while (dayIndex[0] !== day) {\n        rotate(dayIndex);\n    }\n}\n/**\n * Internal method to validate recurrence rule\n *\n * @param {Date} tempDate Accepts the date value\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {boolean} Returns the boolean value\n * @private\n */\nfunction validateRules(tempDate, ruleObject) {\n    var state = true;\n    var expectedDays = ruleObject.day;\n    var expectedMonth = ruleObject.month;\n    var expectedDate = calendarUtil.getExpectedDays(tempDate, ruleObject.monthDay);\n    var expectedyearDay = ruleObject.yearDay;\n    ruleObject.validRules.forEach(function (rule) {\n        switch (rule) {\n            case 'BYDAY':\n                if (checkDayIndex(tempDate.getDay(), expectedDays)) {\n                    state = false;\n                }\n                break;\n            case 'BYMONTH':\n                if (calendarUtil.checkMonth(tempDate, expectedMonth)) {\n                    state = false;\n                }\n                break;\n            case 'BYMONTHDAY':\n                if (checkDate(tempDate, expectedDate)) {\n                    state = false;\n                }\n                break;\n            case 'BYYEARDAY':\n                if (checkYear(tempDate, expectedyearDay)) {\n                    state = false;\n                }\n                break;\n        }\n    });\n    return state;\n}\n/**\n * Internal method to get calendar util\n *\n * @param {CalendarType} calendarMode Accepts the calendar type object\n * @returns {CalendarUtil} Returns the calendar util object\n * @private\n */\nexport function getCalendarUtil(calendarMode) {\n    if (calendarMode === 'Islamic') {\n        return new Islamic();\n    }\n    return new Gregorian();\n}\nvar startDateCollection = {};\nvar tempExcludeDate;\nvar dayIndex = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nvar maxOccurrence;\nvar tempViewDate;\nvar calendarUtil;\nvar DAYINDEX = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nvar MAXOCCURRENCE = 43;\nvar WEEKPOS = ['first', 'second', 'third', 'fourth', 'last'];\nvar TIMES = 'summaryTimes';\nvar ON = 'summaryOn';\nvar EVERY = 'every';\nvar UNTIL = 'summaryUntil';\nvar DAYS = 'summaryDay';\nvar WEEKS = 'summaryWeek';\nvar MONTHS = 'summaryMonth';\nvar YEARS = 'summaryYear';\nvar DAYINDEXOBJECT = {\n    SU: 'sun',\n    MO: 'mon',\n    TU: 'tue',\n    WE: 'wed',\n    TH: 'thu',\n    FR: 'fri',\n    SA: 'sat'\n};\n// To check string has number\nvar HASNUMBER = /\\d/;\n// To find the numbers in string\nvar REMOVENUMBERINSTRING = /[^A-Z]+/;\n// To split number and string\nvar SPLITNUMBERANDSTRING = /[a-z]+|[^a-z]+/gi;\n/**\n * Method to generate string from date\n *\n * @param {Date} date Accepts the date value\n * @returns {string} Returns the string value\n */\nexport function getRecurrenceStringFromDate(date) {\n    return [date.getUTCFullYear(),\n        roundDateValues(date.getUTCMonth() + 1),\n        roundDateValues(date.getUTCDate()),\n        'T',\n        roundDateValues(date.getUTCHours()),\n        roundDateValues(date.getUTCMinutes()),\n        roundDateValues(date.getUTCSeconds()),\n        'Z'].join('');\n}\n/**\n * Internal method to round the date values\n *\n * @param {string | number} date Accepts the date value in either string or number format\n * @returns {string} Returns the date value in string format\n * @private\n */\nfunction roundDateValues(date) {\n    return ('0' + date).slice(-2);\n}\n","/**\n * Constants\n */\n/** @private */\nexport var cellClick = 'cellClick';\n/** @private */\nexport var cellDoubleClick = 'cellDoubleClick';\n/** @private */\nexport var moreEventsClick = 'moreEventsClick';\n/** @private */\nexport var select = 'select';\n/** @private */\nexport var hover = 'hover';\n/** @private */\nexport var actionBegin = 'actionBegin';\n/** @private */\nexport var actionComplete = 'actionComplete';\n/** @private */\nexport var actionFailure = 'actionFailure';\n/** @private */\nexport var navigating = 'navigating';\n/** @private */\nexport var renderCell = 'renderCell';\n/** @private */\nexport var eventClick = 'eventClick';\n/** @private */\nexport var eventRendered = 'eventRendered';\n/** @private */\nexport var dataBinding = 'dataBinding';\n/** @private */\nexport var dataBound = 'dataBound';\n/** @private */\nexport var popupOpen = 'popupOpen';\n/** @private */\nexport var popupClose = 'popupClose';\n/** @private */\nexport var dragStart = 'dragStart';\n/** @private */\nexport var drag = 'drag';\n/** @private */\nexport var dragStop = 'dragStop';\n/** @private */\nexport var resizeStart = 'resizeStart';\n/** @private */\nexport var resizing = 'resizing';\n/** @private */\nexport var resizeStop = 'resizeStop';\n/** @private */\nexport var inlineClick = 'inlineClick';\n/**\n * Specifies schedule internal events\n */\n/** @private */\nexport var initialLoad = 'initial-load';\n/** @private */\nexport var initialEnd = 'initial-end';\n/** @private */\nexport var dataReady = 'data-ready';\n/** @private */\nexport var eventsLoaded = 'events-loaded';\n/** @private */\nexport var contentReady = 'content-ready';\n/** @private */\nexport var scroll = 'scroll';\n/** @private */\nexport var virtualScroll = 'virtual-scroll';\n/** @private */\nexport var scrollUiUpdate = 'scroll-ui-update';\n/** @private */\nexport var uiUpdate = 'ui-update';\n/** @private */\nexport var documentClick = 'document-click';\n/** @private */\nexport var cellMouseDown = 'cell-mouse-down';\n","/**\n * CSS Constants\n */\n/** @private */\nexport var ROOT = 'e-schedule';\n/** @private */\nexport var RTL = 'e-rtl';\n/** @private */\nexport var DEVICE_CLASS = 'e-device';\n/** @private */\nexport var MULTI_DRAG = 'e-multi-drag';\n/** @private */\nexport var ICON = 'e-icons';\n/** @private */\nexport var ENABLE_CLASS = 'e-enable';\n/** @private */\nexport var DISABLE_CLASS = 'e-disable';\n/** @private */\nexport var TABLE_CONTAINER_CLASS = 'e-table-container';\n/** @private */\nexport var SCHEDULE_TABLE_CLASS = 'e-schedule-table';\n/** @private */\nexport var ALLDAY_CELLS_CLASS = 'e-all-day-cells';\n/** @private */\nexport var HEADER_POPUP_CLASS = 'e-header-popup';\n/** @private */\nexport var HEADER_CALENDAR_CLASS = 'e-header-calendar';\n/** @private */\nexport var ALLDAY_ROW_CLASS = 'e-all-day-row';\n/** @private */\nexport var CONTENT_TABLE_CLASS = 'e-content-table';\n/** @private */\nexport var WORK_CELLS_CLASS = 'e-work-cells';\n/** @private */\nexport var WORK_HOURS_CLASS = 'e-work-hours';\n/** @private */\nexport var POPUP_OPEN = 'e-popup-open';\n/** @private */\nexport var POPUP_CLOSE = 'e-popup-close';\n/** @private */\nexport var DATE_HEADER_WRAP_CLASS = 'e-date-header-wrap';\n/** @private */\nexport var DATE_HEADER_CONTAINER_CLASS = 'e-date-header-container';\n/** @private */\nexport var HEADER_CELLS_CLASS = 'e-header-cells';\n/** @private */\nexport var WORKDAY_CLASS = 'e-work-days';\n/** @private */\nexport var OTHERMONTH_CLASS = 'e-other-month';\n/** @private */\nexport var CURRENT_DAY_CLASS = 'e-current-day';\n/** @private */\nexport var CURRENTDATE_CLASS = 'e-current-date';\n/** @private */\nexport var CURRENT_PANEL_CLASS = 'e-current-panel';\n/** @private */\nexport var PREVIOUS_PANEL_CLASS = 'e-previous-panel';\n/** @private */\nexport var NEXT_PANEL_CLASS = 'e-next-panel';\n/** @private */\nexport var PREVIOUS_DATE_CLASS = 'e-prev';\n/** @private */\nexport var NEXT_DATE_CLASS = 'e-next';\n/** @private */\nexport var TRANSLATE_CLASS = 'e-translate';\n/** @private */\nexport var LEFT_INDENT_CLASS = 'e-left-indent';\n/** @private */\nexport var LEFT_INDENT_WRAP_CLASS = 'e-left-indent-wrap';\n/** @private */\nexport var EVENT_TABLE_CLASS = 'e-event-table';\n/** @private */\nexport var RESOURCE_LEFT_TD_CLASS = 'e-resource-left-td';\n/** @private */\nexport var RESOURCE_GROUP_CELLS_CLASS = 'e-resource-group-cells';\n/** @private */\nexport var RESOURCE_TEXT_CLASS = 'e-resource-text';\n/** @private */\nexport var RESOURCE_COLUMN_WRAP_CLASS = 'e-resource-column-wrap';\n/** @private */\nexport var RESOURCE_COLUMN_TABLE_CLASS = 'e-resource-column-table';\n/** @private */\nexport var RESOURCE_CHILD_CLASS = 'e-child-node';\n/** @private */\nexport var RESOURCE_PARENT_CLASS = 'e-parent-node';\n/** @private */\nexport var RESOURCE_EXPAND_CLASS = 'e-resource-expand';\n/** @private */\nexport var RESOURCE_COLLAPSE_CLASS = 'e-resource-collapse';\n/** @private */\nexport var RESOURCE_TREE_ICON_CLASS = 'e-resource-tree-icon';\n/** @private */\nexport var RESOURCE_CELLS_CLASS = 'e-resource-cells';\n/** @private */\nexport var TIME_CELLS_WRAP_CLASS = 'e-time-cells-wrap';\n/** @private */\nexport var TIME_CELLS_CLASS = 'e-time-cells';\n/** @private */\nexport var TIME_SLOT_CLASS = 'e-time-slots';\n/** @private */\nexport var ALTERNATE_CELLS_CLASS = 'e-alternate-cells';\n/** @private */\nexport var CURRENT_TIME_CLASS = 'e-current-time';\n/** @private */\nexport var CURRENT_TIMELINE_CLASS = 'e-current-timeline';\n/** @private */\nexport var PREVIOUS_TIMELINE_CLASS = 'e-previous-timeline';\n/** @private */\nexport var HIDE_CHILDS_CLASS = 'e-hide-childs';\n/** @private */\nexport var SCROLL_CONTAINER_CLASS = 'e-scroll-container';\n/** @private */\nexport var WRAPPER_CLASS = 'e-wrapper';\n/** @private */\nexport var TIMELINE_WRAPPER_CLASS = 'e-timeline-wrapper';\n/** @private */\nexport var APPOINTMENT_WRAPPER_CLASS = 'e-appointment-wrapper';\n/** @private */\nexport var DAY_WRAPPER_CLASS = 'e-day-wrapper';\n/** @private */\nexport var TOOLBAR_CONTAINER = 'e-schedule-toolbar-container';\n/** @private */\nexport var RESOURCE_TOOLBAR_CONTAINER = 'e-schedule-resource-toolbar-container';\n/** @private */\nexport var HEADER_TOOLBAR = 'e-schedule-toolbar';\n/** @private */\nexport var RESOURCE_HEADER_TOOLBAR = 'e-schedule-resource-toolbar';\n/** @private */\nexport var SELECTED_CELL_CLASS = 'e-selected-cell';\n/** @private */\nexport var WEEK_NUMBER_WRAPPER_CLASS = 'e-week-number-wrapper';\n/** @private */\nexport var WEEK_NUMBER_CLASS = 'e-week-number';\n/** @private */\nexport var APPOINTMENT_WRAP_CLASS = 'e-appointment-wrap';\n/** @private */\nexport var WRAPPER_CONTAINER_CLASS = 'e-wrapper-container';\n/** @private */\nexport var APPOINTMENT_CONTAINER_CLASS = 'e-appointment-container';\n/** @private */\nexport var APPOINTMENT_CLASS = 'e-appointment';\n/** @private */\nexport var BLOCK_APPOINTMENT_CLASS = 'e-block-appointment';\n/** @private */\nexport var BLOCK_INDICATOR_CLASS = 'e-block-indicator';\n/** @private */\nexport var APPOINTMENT_BORDER = 'e-appointment-border';\n/** @private */\nexport var APPOINTMENT_DETAILS = 'e-appointment-details';\n/** @private */\nexport var SUBJECT_WRAP = 'e-subject-wrap';\n/** @private */\nexport var RESOURCE_NAME = 'e-resource-name';\n/** @private */\nexport var APPOINTMENT_TIME = 'e-time';\n/** @private */\nexport var TABLE_WRAP_CLASS = 'e-table-wrap';\n/** @private */\nexport var OUTER_TABLE_CLASS = 'e-outer-table';\n/** @private */\nexport var CONTENT_WRAP_CLASS = 'e-content-wrap';\n/** @private */\nexport var VIRTUAL_TRACK_CLASS = 'e-virtual-track';\n/** @private */\nexport var AGENDA_CELLS_CLASS = 'e-agenda-cells';\n/** @private */\nexport var AGENDA_CURRENT_DAY_CLASS = 'e-current-day';\n/** @private */\nexport var AGENDA_SELECTED_CELL = 'e-active-appointment-agenda';\n/** @private */\nexport var MONTH_HEADER_CLASS = 'e-month-header';\n/** @private */\nexport var AGENDA_HEADER_CLASS = 'e-day-date-header';\n/** @private */\nexport var AGENDA_RESOURCE_CLASS = 'e-resource-column';\n/** @private */\nexport var AGENDA_DATE_CLASS = 'e-date-column';\n/** @private */\nexport var NAVIGATE_CLASS = 'e-navigate';\n/** @private */\nexport var DATE_HEADER_CLASS = 'e-date-header';\n/** @private */\nexport var AGENDA_DAY_BORDER_CLASS = 'e-day-border';\n/** @private */\nexport var DATE_BORDER_CLASS = 'e-date-border';\n/** @private */\nexport var AGENDA_DAY_PADDING_CLASS = 'e-day-padding';\n/** @private */\nexport var DATE_TIME_CLASS = 'e-date-time';\n/** @private */\nexport var DATE_TIME_WRAPPER_CLASS = 'e-date-time-wrapper';\n/** @private */\nexport var AGENDA_EMPTY_EVENT_CLASS = 'e-empty-event';\n/** @private */\nexport var AGENDA_NO_EVENT_CLASS = 'e-no-event';\n/** @private */\nexport var APPOINTMENT_INDICATOR_CLASS = 'e-appointment-indicator';\n/** @private */\nexport var EVENT_INDICATOR_CLASS = 'e-indicator';\n/** @private */\nexport var EVENT_ICON_UP_CLASS = 'e-up-icon';\n/** @private */\nexport var EVENT_ICON_DOWN_CLASS = 'e-down-icon';\n/** @private */\nexport var EVENT_ICON_LEFT_CLASS = 'e-left-icon';\n/** @private */\nexport var EVENT_ICON_RIGHT_CLASS = 'e-right-icon';\n/** @private */\nexport var EVENT_ACTION_CLASS = 'e-event-action';\n/** @private */\nexport var NEW_EVENT_CLASS = 'e-new-event';\n/** @private */\nexport var CLONE_ELEMENT_CLASS = 'e-schedule-event-clone';\n/** @private */\nexport var MONTH_CLONE_ELEMENT_CLASS = 'e-month-event';\n/** @private */\nexport var CLONE_TIME_INDICATOR_CLASS = 'e-clone-time-indicator';\n/** @private */\nexport var DRAG_CLONE_CLASS = 'e-drag-clone';\n/** @private */\nexport var EVENT_RESIZE_CLASS = 'e-event-resize';\n/** @private */\nexport var RESIZE_CLONE_CLASS = 'e-resize-clone';\n/** @private */\nexport var LEFT_RESIZE_HANDLER = 'e-left-handler';\n/** @private */\nexport var RIGHT_RESIZE_HANDLER = 'e-right-handler';\n/** @private */\nexport var TOP_RESIZE_HANDLER = 'e-top-handler';\n/** @private */\nexport var BOTTOM_RESIZE_HANDLER = 'e-bottom-handler';\n/** @private */\nexport var EVENT_RECURRENCE_ICON_CLASS = 'e-recurrence-icon';\n/** @private */\nexport var EVENT_RECURRENCE_EDIT_ICON_CLASS = 'e-recurrence-edit-icon';\n/** @private */\nexport var HEADER_ROW_CLASS = 'e-header-row';\n/** @private */\nexport var ALLDAY_APPOINTMENT_WRAPPER_CLASS = 'e-all-day-appointment-wrapper';\n/** @private */\nexport var ALLDAY_APPOINTMENT_CLASS = 'e-all-day-appointment';\n/** @private */\nexport var EVENT_COUNT_CLASS = 'e-appointment-hide';\n/** @private */\nexport var ROW_COUNT_WRAPPER_CLASS = 'e-row-count-wrapper';\n/** @private */\nexport var ALLDAY_APPOINTMENT_SECTION_CLASS = 'e-all-day-appointment-section';\n/** @private */\nexport var APPOINTMENT_ROW_EXPAND_CLASS = 'e-appointment-expand';\n/** @private */\nexport var APPOINTMENT_ROW_COLLAPSE_CLASS = 'e-appointment-collapse';\n/** @private */\nexport var MORE_INDICATOR_CLASS = 'e-more-indicator';\n/** @private */\nexport var CELL_POPUP_CLASS = 'e-cell-popup';\n/** @private */\nexport var EVENT_POPUP_CLASS = 'e-event-popup';\n/** @private */\nexport var MULTIPLE_EVENT_POPUP_CLASS = 'e-multiple-event-popup';\n/** @private */\nexport var POPUP_HEADER_CLASS = 'e-popup-header';\n/** @private */\nexport var POPUP_HEADER_ICON_WRAPPER = 'e-header-icon-wrapper';\n/** @private */\nexport var POPUP_CONTENT_CLASS = 'e-popup-content';\n/** @private */\nexport var POPUP_FOOTER_CLASS = 'e-popup-footer';\n/** @private */\nexport var DATE_TIME_DETAILS_CLASS = 'e-date-time-details';\n/** @private */\nexport var RECURRENCE_SUMMARY_CLASS = 'e-recurrence-summary';\n/** @private */\nexport var QUICK_POPUP_EVENT_DETAILS_CLASS = 'e-event-details';\n/** @private */\nexport var EVENT_CREATE_CLASS = 'e-event-create';\n/** @private */\nexport var EDIT_EVENT_CLASS = 'e-event-edit';\n/** @private */\nexport var DELETE_EVENT_CLASS = 'e-event-delete';\n/** @private */\nexport var TEXT_ELLIPSIS = 'e-text-ellipsis';\n/** @private */\nexport var MORE_POPUP_WRAPPER_CLASS = 'e-more-popup-wrapper';\n/** @private */\nexport var MORE_EVENT_POPUP_CLASS = 'e-more-event-popup';\n/** @private */\nexport var MORE_EVENT_HEADER_CLASS = 'e-more-event-header';\n/** @private */\nexport var MORE_EVENT_DATE_HEADER_CLASS = 'e-more-event-date-header';\n/** @private */\nexport var MORE_EVENT_HEADER_DAY_CLASS = 'e-header-day';\n/** @private */\nexport var MORE_EVENT_HEADER_DATE_CLASS = 'e-header-date';\n/** @private */\nexport var MORE_EVENT_CLOSE_CLASS = 'e-more-event-close';\n/** @private */\nexport var MORE_EVENT_CONTENT_CLASS = 'e-more-event-content';\n/** @private */\nexport var MORE_EVENT_WRAPPER_CLASS = 'e-more-appointment-wrapper';\n/** @private */\nexport var QUICK_DIALOG_CLASS = 'e-quick-dialog';\n/** @private */\nexport var QUICK_DIALOG_OCCURRENCE_CLASS = 'e-quick-dialog-occurrence-event';\n/** @private */\nexport var QUICK_DIALOG_SERIES_CLASS = 'e-quick-dialog-series-event';\n/** @private */\nexport var QUICK_DIALOG_FOLLOWING_EVENTS_CLASS = 'e-quick-dialog-following-events';\n/** @private */\nexport var FOLLOWING_EVENTS_DIALOG = 'e-following-events-dialog';\n/** @private */\nexport var QUICK_DIALOG_DELETE_CLASS = 'e-quick-dialog-delete';\n/** @private */\nexport var QUICK_DIALOG_CANCEL_CLASS = 'e-quick-dialog-cancel';\n/** @private */\nexport var QUICK_DIALOG_ALERT_OK = 'e-quick-alertok';\n/** @private */\nexport var QUICK_DIALOG_ALERT_CANCEL = 'e-quick-alertcancel';\n/** @private */\nexport var QUICK_DIALOG_ALERT_FOLLOWING = 'e-quick-alertfollowing';\n/** @private */\nexport var QUICK_DIALOG_ALERT_BTN_CLASS = 'e-quick-dialog-alert-btn';\n/** @private */\nexport var EVENT_WINDOW_DIALOG_CLASS = 'e-schedule-dialog';\n/** @private */\nexport var FORM_CONTAINER_CLASS = 'e-form-container';\n/** @private */\nexport var FORM_CLASS = 'e-schedule-form';\n/** @private */\nexport var EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS = 'e-all-day-time-zone-row';\n/** @private */\nexport var EVENT_WINDOW_ALL_DAY_CLASS = 'e-all-day';\n/** @private */\nexport var TIME_ZONE_CLASS = 'e-time-zone';\n/** @private */\nexport var TIME_ZONE_ICON_CLASS = 'e-time-zone-icon';\n/** @private */\nexport var TIME_ZONE_DETAILS_CLASS = 'e-time-zone-details';\n/** @private */\nexport var EVENT_WINDOW_REPEAT_DIV_CLASS = 'e-repeat-parent-row';\n/** @private */\nexport var EVENT_WINDOW_REPEAT_CLASS = 'e-repeat';\n/** @private */\nexport var EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS = 'e-title-location-row';\n/** @private */\nexport var SUBJECT_CLASS = 'e-subject';\n/** @private */\nexport var LOCATION_CLASS = 'e-location';\n/** @private */\nexport var LOCATION_ICON_CLASS = 'e-location-icon';\n/** @private */\nexport var LOCATION_DETAILS_CLASS = 'e-location-details';\n/** @private */\nexport var EVENT_WINDOW_START_END_DIV_CLASS = 'e-start-end-row';\n/** @private */\nexport var EVENT_WINDOW_START_CLASS = 'e-start';\n/** @private */\nexport var EVENT_WINDOW_END_CLASS = 'e-end';\n/** @private */\nexport var EVENT_WINDOW_RESOURCES_DIV_CLASS = 'e-resources-row';\n/** @private */\nexport var DESCRIPTION_CLASS = 'e-description';\n/** @private */\nexport var DESCRIPTION_ICON_CLASS = 'e-description-icon';\n/** @private */\nexport var DESCRIPTION_DETAILS_CLASS = 'e-description-details';\n/** @private */\nexport var EVENT_WINDOW_TIME_ZONE_DIV_CLASS = 'e-time-zone-row';\n/** @private */\nexport var EVENT_WINDOW_START_TZ_CLASS = 'e-start-time-zone';\n/** @private */\nexport var EVENT_WINDOW_END_TZ_CLASS = 'e-end-time-zone';\n/** @private */\nexport var EVENT_WINDOW_BACK_ICON_CLASS = 'e-back-icon';\n/** @private */\nexport var EVENT_WINDOW_SAVE_ICON_CLASS = 'e-save-icon';\n/** @private */\nexport var EVENT_WINDOW_CANCEL_BUTTON_CLASS = 'e-event-cancel';\n/** @private */\nexport var EVENT_WINDOW_SAVE_BUTTON_CLASS = 'e-event-save';\n/** @private */\nexport var EVENT_WINDOW_DIALOG_PARENT_CLASS = 'e-dialog-parent';\n/** @private */\nexport var EVENT_WINDOW_TITLE_TEXT_CLASS = 'e-title-text';\n/** @private */\nexport var EVENT_WINDOW_ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @private */\nexport var EDIT_CLASS = 'e-edit';\n/** @private */\nexport var EDIT_ICON_CLASS = 'e-edit-icon';\n/** @private */\nexport var DELETE_CLASS = 'e-delete';\n/** @private */\nexport var DELETE_ICON_CLASS = 'e-delete-icon';\n/** @private */\nexport var CLOSE_CLASS = 'e-close';\n/** @private */\nexport var CLOSE_ICON_CLASS = 'e-close-icon';\n/** @private */\nexport var ERROR_VALIDATION_CLASS = 'e-schedule-error';\n/** @private */\nexport var EVENT_TOOLTIP_ROOT_CLASS = 'e-schedule-event-tooltip';\n/** @private */\nexport var ALLDAY_ROW_ANIMATE_CLASS = 'e-animate';\n/** @private */\nexport var TIMESCALE_DISABLE = 'e-timescale-disable';\n/** @private */\nexport var DISABLE_DATE = 'e-disable-date';\n/** @private */\nexport var HIDDEN_CLASS = 'e-hidden';\n/** @private */\nexport var DISABLE_DATES = 'e-disable-dates';\n/** @private */\nexport var POPUP_WRAPPER_CLASS = 'e-quick-popup-wrapper';\n/** @private */\nexport var POPUP_TABLE_CLASS = 'e-popup-table';\n/** @private */\nexport var RESOURCE_MENU = 'e-resource-menu';\n/** @private */\nexport var RESOURCE_MENU_ICON = 'e-icon-menu';\n/** @private */\nexport var RESOURCE_LEVEL_TITLE = 'e-resource-level-title';\n/** @private */\nexport var RESOURCE_TREE = 'e-resource-tree';\n/** @private */\nexport var RESOURCE_TREE_POPUP_OVERLAY = 'e-resource-tree-popup-overlay';\n/** @private */\nexport var RESOURCE_TREE_POPUP = 'e-resource-tree-popup';\n/** @private */\nexport var RESOURCE_CLASS = 'e-resource';\n/** @private */\nexport var RESOURCE_ICON_CLASS = 'e-resource-icon';\n/** @private */\nexport var RESOURCE_DETAILS_CLASS = 'e-resource-details';\n/** @private */\nexport var DATE_TIME_ICON_CLASS = 'e-date-time-icon';\n/** @private */\nexport var VIRTUAL_SCROLL_CLASS = 'e-virtual-scroll';\n/** @private */\nexport var ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @private */\nexport var AUTO_HEIGHT = 'e-auto-height';\n/** @private */\nexport var IGNORE_WHITESPACE = 'e-ignore-whitespace';\n/** @private */\nexport var EVENT_TEMPLATE = 'e-template';\n/** @private */\nexport var READ_ONLY = 'e-read-only';\n/** @private */\nexport var MONTH_HEADER_WRAPPER = 'e-month-header-wrapper';\n/** @private */\nexport var INLINE_SUBJECT_CLASS = 'e-inline-subject';\n/** @private */\nexport var INLINE_APPOINTMENT_CLASS = 'e-inline-appointment';\n/** @hidden */\nexport var SCROLL_HIDDEN = 'e-scroll-hidden';\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, createElement, remove, closest, addClass, removeClass, extend } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { Calendar } from '@syncfusion/ej2-calendars';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\n/**\n * Header module\n */\nvar HeaderRenderer = /** @class */ (function () {\n    function HeaderRenderer(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.renderHeader();\n        this.addEventListener();\n    }\n    HeaderRenderer.prototype.addEventListener = function () {\n        this.parent.on(events.documentClick, this.closeHeaderPopup, this);\n    };\n    HeaderRenderer.prototype.removeEventListener = function () {\n        this.parent.off(events.documentClick, this.closeHeaderPopup);\n    };\n    HeaderRenderer.prototype.closeHeaderPopup = function (e) {\n        var closestEle = closest(e.event.target, '.e-date-range,.e-header-popup,.e-day,.e-selected');\n        var closestPop = closest(e.event.target, '.e-hor-nav,.e-toolbar-pop');\n        var contentWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.parent.isAdaptive) {\n            if (!isNullOrUndefined(closestPop) && (closestPop.classList.contains('e-toolbar-pop') ||\n                closestPop.classList.contains('e-hor-nav')) && !(closestPop.classList.contains('e-hor-nav') &&\n                this.element.querySelector('.e-toolbar-pop').classList.contains(cls.POPUP_OPEN))) {\n                addClass([contentWrap], cls.SCROLL_HIDDEN);\n            }\n            else {\n                removeClass([contentWrap], cls.SCROLL_HIDDEN);\n                var popupObj = this.element.querySelector('.e-toolbar-pop').ej2_instances[0];\n                if (popupObj && !(!isNullOrUndefined(closestPop) && closestPop.classList.contains('e-hor-nav') &&\n                    this.element.querySelector('.e-toolbar-pop').classList.contains(cls.POPUP_OPEN))) {\n                    popupObj.hide();\n                }\n            }\n        }\n        if (!isNullOrUndefined(closestEle)) {\n            return;\n        }\n        this.hideHeaderPopup();\n    };\n    HeaderRenderer.prototype.hideHeaderPopup = function () {\n        if (this.headerPopup) {\n            this.headerPopup.hide();\n        }\n    };\n    HeaderRenderer.prototype.renderHeader = function () {\n        this.element = createElement('div', { className: cls.TOOLBAR_CONTAINER });\n        var toolbarEle = createElement('div', { className: cls.HEADER_TOOLBAR });\n        this.element.appendChild(toolbarEle);\n        this.parent.element.insertBefore(this.element, this.parent.element.firstElementChild);\n        this.renderToolbar();\n    };\n    HeaderRenderer.prototype.renderToolbar = function () {\n        var _this = this;\n        var items = this.getItems();\n        this.parent.trigger(events.actionBegin, { requestType: 'toolbarItemRendering', items: items }, function (args) {\n            _this.toolbarObj = new Toolbar({\n                items: args.items,\n                overflowMode: 'Popup',\n                clicked: _this.toolbarClickHandler.bind(_this),\n                enableRtl: _this.parent.enableRtl,\n                locale: _this.parent.locale\n            });\n            _this.toolbarObj.appendTo(_this.parent.element.querySelector('.' + cls.HEADER_TOOLBAR));\n            var prevNavEle = _this.toolbarObj.element.querySelector('.e-prev');\n            if (prevNavEle) {\n                prevNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('previous'));\n            }\n            var nextNavEle = _this.toolbarObj.element.querySelector('.e-next');\n            if (nextNavEle) {\n                nextNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('next'));\n            }\n            _this.updateActiveView();\n            _this.parent.trigger(events.actionComplete, { requestType: 'toolBarItemRendered', items: _this.toolbarObj.items });\n        });\n    };\n    HeaderRenderer.prototype.updateItems = function () {\n        var _this = this;\n        if (this.toolbarObj) {\n            var items = this.getItems();\n            this.parent.trigger(events.actionBegin, { requestType: 'toolbarItemRendering', items: items }, function (args) {\n                _this.toolbarObj.items = args.items;\n                _this.toolbarObj.dataBind();\n                _this.parent.trigger(events.actionComplete, { requestType: 'toolBarItemRendered', items: _this.toolbarObj.items });\n            });\n        }\n    };\n    HeaderRenderer.prototype.getPopUpRelativeElement = function () {\n        if (this.parent.isAdaptive) {\n            return this.toolbarObj.element;\n        }\n        return this.element.querySelector('.e-date-range');\n    };\n    HeaderRenderer.prototype.setDayOfWeek = function (index) {\n        if (this.headerCalendar) {\n            this.headerCalendar.firstDayOfWeek = index;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.setCalendarDate = function (date) {\n        if (this.headerCalendar) {\n            this.headerCalendar.value = date;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.setCalendarMinMaxDate = function () {\n        if (this.headerCalendar) {\n            this.headerCalendar.min = this.parent.minDate;\n            this.headerCalendar.max = this.parent.maxDate;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.getCalendarView = function () {\n        if (['Month', 'MonthAgenda', 'TimelineMonth'].indexOf(this.parent.currentView) > -1) {\n            return 'Year';\n        }\n        else if (['Year', 'TimelineYear'].indexOf(this.parent.currentView) > -1) {\n            return 'Decade';\n        }\n        else {\n            return 'Month';\n        }\n    };\n    HeaderRenderer.prototype.setCalendarView = function () {\n        if (this.headerCalendar) {\n            var calendarView = this.getCalendarView();\n            this.headerCalendar.depth = calendarView;\n            this.headerCalendar.start = calendarView;\n            this.headerCalendar.refresh();\n        }\n    };\n    HeaderRenderer.prototype.updateActiveView = function () {\n        var selEle = [].slice.call(this.toolbarObj.element.querySelectorAll('.e-views'));\n        removeClass(selEle, ['e-active-view']);\n        if (selEle.length > 0 && selEle[this.parent.viewIndex]) {\n            addClass([selEle[this.parent.viewIndex]], ['e-active-view']);\n        }\n    };\n    HeaderRenderer.prototype.updateDateRange = function (text) {\n        var selEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (selEle) {\n            selEle.setAttribute('aria-label', text);\n            selEle.querySelector('.e-tbar-btn-text').innerHTML = text;\n            this.toolbarObj.refreshOverflow();\n        }\n    };\n    HeaderRenderer.prototype.getDateRangeText = function () {\n        var dateString = this.parent.globalize.formatDate(this.parent.selectedDate, {\n            format: 'MMMM y', calendar: this.parent.getCalendarMode()\n        });\n        return util.capitalizeFirstWord(dateString, 'single');\n    };\n    HeaderRenderer.prototype.getItems = function () {\n        var items = [];\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-prev', tooltipText: 'Previous', overflow: 'Show',\n            cssClass: 'e-prev', htmlAttributes: { 'aria-label': 'previous period', 'role': 'navigation' }\n        });\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-next', tooltipText: 'Next', overflow: 'Show',\n            cssClass: 'e-next', htmlAttributes: { 'aria-label': 'next period', 'role': 'navigation' }\n        });\n        items.push({\n            align: 'Left', text: this.getDateRangeText(), suffixIcon: 'e-icon-down-arrow', cssClass: 'e-date-range',\n            overflow: 'Show',\n            htmlAttributes: { 'aria-atomic': 'true', 'aria-live': 'assertive', 'aria-label': 'title', 'role': 'navigation' }\n        });\n        if (this.parent.isAdaptive) {\n            items.push({\n                align: 'Right', showAlwaysInPopup: this.parent.isAdaptive, prefixIcon: 'e-icon-add',\n                text: this.l10n.getConstant('newEvent'), cssClass: 'e-add', overflow: 'Show'\n            });\n            items.push({\n                align: 'Right', showAlwaysInPopup: this.parent.isAdaptive, prefixIcon: 'e-icon-today',\n                text: this.l10n.getConstant('today'), cssClass: 'e-today', overflow: 'Show'\n            });\n        }\n        else {\n            items.push({\n                align: 'Right', showAlwaysInPopup: this.parent.isAdaptive, prefixIcon: 'e-icon-day',\n                text: this.l10n.getConstant('today'), cssClass: 'e-today', overflow: 'Show'\n            });\n            if (this.parent.views.length > 1) {\n                items.push({ align: 'Right', type: 'Separator', cssClass: 'e-schedule-seperator' });\n            }\n        }\n        if (this.parent.views.length > 1) {\n            for (var _i = 0, _a = this.parent.views; _i < _a.length; _i++) {\n                var item = _a[_i];\n                items.push(this.getItemObject(item));\n            }\n        }\n        return items;\n    };\n    HeaderRenderer.prototype.getItemObject = function (item) {\n        var viewName;\n        var displayName;\n        if (typeof (item) === 'string') {\n            viewName = item.toLowerCase();\n            displayName = null;\n        }\n        else {\n            viewName = item.option.toLowerCase();\n            displayName = item.displayName;\n        }\n        var view;\n        var orientationClass;\n        switch (viewName) {\n            case 'day':\n                view = {\n                    align: 'Right', showAlwaysInPopup: this.parent.isAdaptive, prefixIcon: 'e-icon-day',\n                    text: displayName || this.l10n.getConstant('day'), cssClass: 'e-views e-day'\n                };\n                break;\n            case 'week':\n                view = {\n                    align: 'Right', showAlwaysInPopup: this.parent.isAdaptive, prefixIcon: 'e-icon-week',\n                    text: displayName || this.l10n.getConstant('week'), cssClass: 'e-views e-week'\n                };\n                break;\n            case 'workweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: this.parent.isAdaptive, prefixIcon: 'e-icon-workweek',\n                    text: displayName || this.l10n.getConstant('workWeek'), cssClass: 'e-views e-work-week'\n                };\n                break;\n            case 'month':\n                view = {\n                    align: 'Right', showAlwaysInPopup: this.parent.isAdaptive, prefixIcon: 'e-icon-month',\n                    text: displayName || this.l10n.getConstant('month'), cssClass: 'e-views e-month'\n                };\n                break;\n            case 'year':\n                view = {\n                    align: 'Right', showAlwaysInPopup: this.parent.isAdaptive, prefixIcon: 'e-icon-year',\n                    text: displayName || this.l10n.getConstant('year'), cssClass: 'e-views e-year'\n                };\n                break;\n            case 'agenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: this.parent.isAdaptive, prefixIcon: 'e-icon-agenda',\n                    text: displayName || this.l10n.getConstant('agenda'), cssClass: 'e-views e-agenda'\n                };\n                break;\n            case 'monthagenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: this.parent.isAdaptive, prefixIcon: 'e-icon-month-agenda',\n                    text: displayName || this.l10n.getConstant('monthAgenda'), cssClass: 'e-views e-month-agenda'\n                };\n                break;\n            case 'timelineday':\n                view = {\n                    align: 'Right', showAlwaysInPopup: this.parent.isAdaptive, prefixIcon: 'e-icon-timeline-day',\n                    text: displayName || this.l10n.getConstant('timelineDay'), cssClass: 'e-views e-timeline-day'\n                };\n                break;\n            case 'timelineweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: this.parent.isAdaptive, prefixIcon: 'e-icon-timeline-week',\n                    text: displayName || this.l10n.getConstant('timelineWeek'), cssClass: 'e-views e-timeline-week'\n                };\n                break;\n            case 'timelineworkweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: this.parent.isAdaptive, prefixIcon: 'e-icon-timeline-workweek',\n                    text: displayName || this.l10n.getConstant('timelineWorkWeek'), cssClass: 'e-views e-timeline-work-week'\n                };\n                break;\n            case 'timelinemonth':\n                view = {\n                    align: 'Right', showAlwaysInPopup: this.parent.isAdaptive, prefixIcon: 'e-icon-timeline-month',\n                    text: displayName || this.l10n.getConstant('timelineMonth'), cssClass: 'e-views e-timeline-month'\n                };\n                break;\n            case 'timelineyear':\n                orientationClass = (item.orientation === 'Vertical') ? 'vertical' : 'horizontal';\n                view = {\n                    align: 'Right', showAlwaysInPopup: this.parent.isAdaptive, prefixIcon: 'e-icon-timeline-year-' + orientationClass,\n                    text: displayName || this.l10n.getConstant('timelineYear'), cssClass: 'e-views e-timeline-year'\n                };\n                break;\n        }\n        return view;\n    };\n    HeaderRenderer.prototype.renderHeaderPopup = function () {\n        var headerPopupEle = createElement('div', { className: cls.HEADER_POPUP_CLASS });\n        var headerCalendarEle = createElement('div', { className: cls.HEADER_CALENDAR_CLASS });\n        headerPopupEle.appendChild(headerCalendarEle);\n        this.element.appendChild(headerPopupEle);\n        this.headerPopup = new Popup(headerPopupEle, {\n            actionOnScroll: 'hide',\n            targetType: 'relative',\n            relateTo: this.getPopUpRelativeElement(),\n            position: { X: 'left', Y: 'bottom' },\n            enableRtl: this.parent.enableRtl\n        });\n        var calendarView = this.getCalendarView();\n        this.headerCalendar = new Calendar({\n            value: this.parent.selectedDate,\n            min: this.parent.minDate,\n            max: this.parent.maxDate,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            depth: calendarView,\n            start: calendarView,\n            calendarMode: this.parent.calendarMode,\n            change: this.calendarChange.bind(this)\n        });\n        this.setCalendarTimezone();\n        this.headerCalendar.appendTo(headerCalendarEle);\n        this.headerPopup.hide();\n    };\n    HeaderRenderer.prototype.calendarChange = function (args) {\n        if (args.value.getTime() !== this.parent.selectedDate.getTime()) {\n            var calendarDate = util.resetTime(new Date(args.value));\n            this.parent.changeDate(calendarDate);\n        }\n        this.headerPopup.hide();\n    };\n    HeaderRenderer.prototype.setCalendarTimezone = function () {\n        if (this.headerCalendar) {\n            this.headerCalendar.timezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        }\n    };\n    HeaderRenderer.prototype.calculateViewIndex = function (args) {\n        var target = closest(args.originalEvent.target, '.e-views');\n        var views = [].slice.call(this.element.querySelectorAll('.e-views'));\n        return views.indexOf(target);\n    };\n    HeaderRenderer.prototype.toolbarClickHandler = function (args) {\n        if (!args.item) {\n            return;\n        }\n        var strClass = args.item.cssClass.replace('e-views ', '');\n        var data;\n        var isSameTime;\n        switch (strClass) {\n            case 'e-date-range':\n                if (!this.headerPopup) {\n                    this.renderHeaderPopup();\n                }\n                if (this.headerPopup.element.classList.contains(cls.POPUP_OPEN)) {\n                    this.headerPopup.hide();\n                }\n                else {\n                    this.headerPopup.show();\n                }\n                break;\n            case 'e-day':\n                this.parent.changeView('Day', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-week':\n                this.parent.changeView('Week', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-work-week':\n                this.parent.changeView('WorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-month':\n                this.parent.changeView('Month', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-year':\n                this.parent.changeView('Year', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-agenda':\n                this.parent.changeView('Agenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-month-agenda':\n                this.parent.changeView('MonthAgenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-day':\n                this.parent.changeView('TimelineDay', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-week':\n                this.parent.changeView('TimelineWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-work-week':\n                this.parent.changeView('TimelineWorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-month':\n                this.parent.changeView('TimelineMonth', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-year':\n                this.parent.changeView('TimelineYear', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-today':\n                if (!this.parent.isSelectedDate(util.resetTime(this.parent.getCurrentTime()))) {\n                    this.parent.changeDate(util.resetTime(this.parent.getCurrentTime()), args.originalEvent);\n                }\n                break;\n            case 'e-prev':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), args.originalEvent);\n                break;\n            case 'e-next':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), args.originalEvent);\n                break;\n            case 'e-add':\n                isSameTime = this.parent.activeCellsData.startTime.getTime() === this.parent.activeCellsData.endTime.getTime();\n                if (this.parent.activeCellsData && !isSameTime) {\n                    data = this.parent.activeCellsData;\n                }\n                else {\n                    var interval = this.parent.activeViewOptions.timeScale.interval;\n                    var slotCount = this.parent.activeViewOptions.timeScale.slotCount;\n                    var msInterval = (interval * util.MS_PER_MINUTE) / slotCount;\n                    var startTime = new Date(this.parent.selectedDate.getTime());\n                    var currentTime = this.parent.getCurrentTime();\n                    startTime.setHours(currentTime.getHours(), (Math.round(startTime.getMinutes() / msInterval) * msInterval), 0);\n                    var endTime = new Date(new Date(startTime.getTime()).setMilliseconds(startTime.getMilliseconds() + msInterval));\n                    data = { startTime: startTime, endTime: endTime, isAllDay: false };\n                }\n                this.parent.eventWindow.openEditor(extend(data, { cancel: false, event: args.originalEvent }), 'Add');\n                break;\n        }\n        if (isNullOrUndefined(this.toolbarObj)) {\n            return;\n        }\n        var toolbarPopUp = this.toolbarObj.element.querySelector('.e-toolbar-pop');\n        if (toolbarPopUp && args.item.type !== 'Input') {\n            toolbarPopUp.ej2_instances[0].hide({ name: 'SlideUp', duration: 100 });\n        }\n    };\n    HeaderRenderer.prototype.getHeaderElement = function () {\n        return this.toolbarObj.element;\n    };\n    HeaderRenderer.prototype.updateHeaderItems = function (classType) {\n        var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n        var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n        var dateRangeEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (prevNavEle) {\n            if (classType === 'add') {\n                addClass([prevNavEle], cls.HIDDEN_CLASS);\n            }\n            else {\n                removeClass([prevNavEle], cls.HIDDEN_CLASS);\n            }\n        }\n        if (nextNavEle) {\n            if (classType === 'add') {\n                addClass([nextNavEle], cls.HIDDEN_CLASS);\n            }\n            else {\n                removeClass([nextNavEle], cls.HIDDEN_CLASS);\n            }\n        }\n        if (dateRangeEle) {\n            if (classType === 'add') {\n                addClass([dateRangeEle], cls.TEXT_ELLIPSIS);\n            }\n            else {\n                removeClass([dateRangeEle], cls.TEXT_ELLIPSIS);\n            }\n        }\n    };\n    HeaderRenderer.prototype.previousNextIconHandler = function () {\n        var dates = (this.parent.currentView === 'Agenda' ?\n            [this.parent.getCurrentViewDates()[0]] : this.parent.getCurrentViewDates());\n        var prevNavEle = this.toolbarObj.element.querySelector('.' + cls.PREVIOUS_DATE_CLASS);\n        var nextNavEle = this.toolbarObj.element.querySelector('.' + cls.NEXT_DATE_CLASS);\n        var firstDate = new Date(dates[0].getTime());\n        var lastDate = new Date(dates[dates.length - 1].getTime());\n        if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n            firstDate = util.getWeekFirstDate(util.resetTime(this.parent.selectedDate), this.parent.firstDayOfWeek);\n            lastDate = util.addDays(firstDate, 7 * this.parent.activeViewOptions.interval);\n        }\n        if (this.parent.currentView === 'Month') {\n            firstDate = util.firstDateOfMonth(this.parent.selectedDate);\n            var lastMonthFirstDate = util.addMonths(firstDate, this.parent.activeViewOptions.interval - 1);\n            lastDate = util.lastDateOfMonth(lastMonthFirstDate);\n        }\n        if (!isNullOrUndefined(prevNavEle)) {\n            this.toolbarObj.enableItems(prevNavEle, firstDate > this.parent.minDate);\n        }\n        if (!isNullOrUndefined(nextNavEle)) {\n            this.toolbarObj.enableItems(nextNavEle, lastDate < this.parent.maxDate);\n        }\n        this.setCalendarMinMaxDate();\n    };\n    HeaderRenderer.prototype.getModuleName = function () {\n        return 'headerbar';\n    };\n    HeaderRenderer.prototype.destroy = function () {\n        if (this.headerPopup && !this.headerPopup.isDestroyed) {\n            this.headerPopup.destroy();\n            this.headerPopup = null;\n        }\n        if (this.headerCalendar && !this.headerCalendar.isDestroyed) {\n            this.headerCalendar.destroy();\n            this.headerCalendar = null;\n        }\n        if (this.toolbarObj && !this.toolbarObj.isDestroyed) {\n            this.toolbarObj.destroy();\n            this.removeEventListener();\n            remove(this.element);\n            this.toolbarObj = null;\n        }\n    };\n    return HeaderRenderer;\n}());\nexport { HeaderRenderer };\n","import { formatUnit } from '@syncfusion/ej2-base';\nimport { contentReady, uiUpdate, scrollUiUpdate } from '../base/constant';\n/**\n * `Scroll` module\n */\nvar Scroll = /** @class */ (function () {\n    /**\n     * Constructor for the scrolling.\n     *\n     * @param {Schedule} parent Accepts the Schedule instance\n     */\n    function Scroll(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} Returns the module name.\n     * @private\n     */\n    Scroll.prototype.getModuleName = function () {\n        return 'scroll';\n    };\n    /**\n     * Internal method to set the element width\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.setWidth = function () {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n    };\n    /**\n     * Internal method to set the element height\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.setHeight = function () {\n        this.parent.element.style.height = formatUnit(this.parent.height);\n    };\n    /**\n     * Internal method to bind events\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.addEventListener = function () {\n        this.parent.on(contentReady, this.setDimensions, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n    };\n    /**\n     * Internal method to unbind events\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.removeEventListener = function () {\n        this.parent.off(contentReady, this.setDimensions);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n    };\n    /**\n     * Internal method to set the dimensions\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.setDimensions = function () {\n        this.setWidth();\n        this.setHeight();\n        var data = { cssProperties: this.parent.getCssProperties(), module: this.getModuleName() };\n        this.parent.notify(scrollUiUpdate, data);\n    };\n    /**\n     * Internal method to set the dimensions dynamically\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.onPropertyChanged = function () {\n        this.setDimensions();\n    };\n    /**\n     * Destroy the scroll module\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return Scroll;\n}());\nexport { Scroll };\n","import { addClass, removeClass, Touch, remove, EventHandler, Browser } from '@syncfusion/ej2-base';\nimport { closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * `touch` module is used to handle touch interactions.\n */\nvar ScheduleTouch = /** @class */ (function () {\n    function ScheduleTouch(parent) {\n        this.parent = parent;\n        this.element = this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS);\n        this.touchObj = new Touch(this.element, {\n            scroll: this.scrollHandler.bind(this),\n            swipe: this.swipeHandler.bind(this),\n            tapHold: this.tapHoldHandler.bind(this),\n            swipeSettings: { swipeThresholdDistance: 1 }\n        });\n        EventHandler.add(this.element, 'transitionend', this.onTransitionEnd, this);\n        this.touchLeftDirection = this.parent.enableRtl ? 'Right' : 'Left';\n        this.touchRightDirection = this.parent.enableRtl ? 'Left' : 'Right';\n    }\n    ScheduleTouch.prototype.scrollHandler = function (e) {\n        if (this.parent.currentView === 'Agenda' || this.parent.uiStateValues.action ||\n            (e.originalEvent && (e.originalEvent.target.classList.contains(cls.APPOINTMENT_CLASS) ||\n                closest(e.originalEvent.target, '.' + cls.APPOINTMENT_CLASS)))) {\n            return;\n        }\n        if (!this.timeStampStart) {\n            this.timeStampStart = Date.now();\n        }\n        if (this.element.classList.contains(cls.TRANSLATE_CLASS)) {\n            this.onTransitionEnd();\n        }\n        if (e.scrollDirection === 'Left' || e.scrollDirection === 'Right') {\n            var args = { requestType: 'dateNavigate', cancel: false, event: e.originalEvent };\n            this.parent.trigger(events.actionBegin, args);\n            if (args.cancel) {\n                return;\n            }\n            var scrollDiv = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            if (scrollDiv && scrollDiv.scrollWidth > scrollDiv.clientWidth) {\n                return;\n            }\n            else {\n                this.isScrollTriggered = true;\n                e.originalEvent.preventDefault();\n                e.originalEvent.stopPropagation();\n            }\n        }\n        if (e.scrollDirection === this.touchLeftDirection) {\n            if (!this.nextPanel) {\n                this.renderPanel(cls.NEXT_PANEL_CLASS, 'next');\n                this.nextPanel = {\n                    element: this.parent.activeView.getPanel(),\n                    selectedDate: new Date(this.parent.selectedDate.getTime())\n                };\n                this.setDimensions(this.nextPanel.element);\n            }\n            var x = this.parent.enableRtl ? e.distanceX : -e.distanceX;\n            this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + x) + 'px)';\n        }\n        else if (e.scrollDirection === this.touchRightDirection) {\n            var prevWidth = 0;\n            if (!this.previousPanel) {\n                this.renderPanel(cls.PREVIOUS_PANEL_CLASS, 'previous');\n                this.previousPanel = {\n                    element: this.parent.activeView.getPanel(),\n                    selectedDate: new Date(this.parent.selectedDate.getTime())\n                };\n                this.setDimensions(this.previousPanel.element);\n                prevWidth = this.previousPanel.element.offsetWidth;\n            }\n            var x = this.parent.enableRtl ? prevWidth - e.distanceX : -prevWidth + e.distanceX;\n            this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + x) + 'px)';\n        }\n    };\n    ScheduleTouch.prototype.swipeHandler = function (e) {\n        if (!this.isScrollTriggered || this.parent.uiStateValues.action) {\n            return;\n        }\n        this.isScrollTriggered = false;\n        var swipeDate = e.swipeDirection === 'Left' ?\n            this.parent.activeView.renderDates[0] : this.parent.activeView.renderDates.slice(-1)[0];\n        if ((e.swipeDirection === 'Left' && swipeDate < this.parent.maxDate) ||\n            (e.swipeDirection === 'Right' && swipeDate >= this.parent.minDate)) {\n            var time = Date.now() - this.timeStampStart;\n            var offsetDist = (e.distanceX * (Browser.isDevice ? 6 : 1.66));\n            if (offsetDist > time || (e.distanceX > (this.parent.element.offsetWidth / 2))) {\n                this.swapPanels(e.swipeDirection);\n                if (offsetDist > time && (e.distanceX > (this.parent.element.offsetWidth / 2))) {\n                    this.element.style.transitionDuration = ((offsetDist / time) / 10) + 's';\n                }\n                this.confirmSwipe(e.swipeDirection);\n            }\n            else {\n                this.cancelSwipe();\n            }\n            var args = { requestType: 'dateNavigate', cancel: false, event: e.originalEvent };\n            this.parent.trigger(events.actionComplete, args);\n        }\n        else {\n            this.cancelSwipe();\n        }\n        this.timeStampStart = null;\n    };\n    ScheduleTouch.prototype.tapHoldHandler = function (e) {\n        var target = closest(e.originalEvent.target, '.' + cls.APPOINTMENT_CLASS);\n        if (!isNullOrUndefined(target) && this.parent.isAdaptive) {\n            this.parent.quickPopup.tapHoldEventPopup(e.originalEvent);\n            return;\n        }\n    };\n    ScheduleTouch.prototype.renderPanel = function (clsName, nextPrevType) {\n        if (!this.currentPanel) {\n            this.currentPanel = {\n                element: this.parent.activeView.getPanel(),\n                selectedDate: new Date(this.parent.selectedDate.getTime())\n            };\n            this.setDimensions(this.currentPanel.element);\n        }\n        else {\n            this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);\n        }\n        this.parent.setProperties({ selectedDate: this.parent.activeView.getNextPreviousDate(nextPrevType) }, true);\n        if (this.parent.headerModule) {\n            this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n        }\n        this.parent.activeView.getRenderDates();\n        this.parent.activeView.renderLayout(clsName);\n    };\n    ScheduleTouch.prototype.swapPanels = function (direction) {\n        if (direction === this.touchLeftDirection) {\n            var temp = this.nextPanel;\n            this.nextPanel = this.currentPanel;\n            this.currentPanel = temp;\n        }\n        else {\n            var temp = this.previousPanel;\n            this.previousPanel = this.currentPanel;\n            this.currentPanel = temp;\n        }\n    };\n    ScheduleTouch.prototype.confirmSwipe = function (swipeDirection) {\n        var _this = this;\n        var previousDate = swipeDirection === this.touchLeftDirection ?\n            this.nextPanel.selectedDate : this.previousPanel.selectedDate;\n        var args = {\n            action: 'date', cancel: false, previousDate: previousDate, currentDate: this.currentPanel.selectedDate\n        };\n        this.parent.trigger(events.navigating, args, function (navArgs) {\n            if (navArgs.cancel) {\n                _this.swapPanels(swipeDirection);\n                _this.cancelSwipe();\n            }\n            else {\n                _this.parent.activeView.setPanel(_this.currentPanel.element);\n                _this.parent.setProperties({ selectedDate: _this.currentPanel.selectedDate }, true);\n                var translateX = void 0;\n                if (_this.parent.enableRtl) {\n                    translateX = swipeDirection === _this.touchLeftDirection ?\n                        (_this.previousPanel ? _this.previousPanel.element.offsetLeft : _this.currentPanel.element.offsetWidth) : 0;\n                }\n                else {\n                    translateX = swipeDirection === _this.touchLeftDirection ? -_this.currentPanel.element.offsetLeft : 0;\n                }\n                addClass([_this.element], cls.TRANSLATE_CLASS);\n                _this.element.style.transform = 'translatex(' + translateX + 'px)';\n                if (_this.parent.headerModule) {\n                    _this.parent.headerModule.updateDateRange(_this.parent.activeView.getDateRangeText());\n                }\n                _this.parent.renderTemplates();\n                _this.parent.renderModule.refreshDataManager();\n            }\n        });\n    };\n    ScheduleTouch.prototype.cancelSwipe = function () {\n        this.parent.activeView.setPanel(this.currentPanel.element);\n        this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);\n        this.parent.activeView.getRenderDates();\n        this.parent.activeView.generateColumnLevels();\n        addClass([this.element], cls.TRANSLATE_CLASS);\n        var prevWidth = this.previousPanel ? this.previousPanel.element.offsetWidth : 0;\n        this.element.style.transform = 'translatex(' + (this.parent.enableRtl ? prevWidth : -this.currentPanel.element.offsetLeft) + 'px)';\n    };\n    ScheduleTouch.prototype.onTransitionEnd = function () {\n        removeClass([this.element], cls.TRANSLATE_CLASS);\n        this.element.style.transitionDuration = '';\n        this.element.style.transform = '';\n        if (this.previousPanel) {\n            remove(this.previousPanel.element);\n            this.previousPanel = null;\n            removeClass([this.currentPanel.element], cls.PREVIOUS_PANEL_CLASS);\n            addClass([this.currentPanel.element], cls.CURRENT_PANEL_CLASS);\n        }\n        if (this.nextPanel) {\n            remove(this.nextPanel.element);\n            this.nextPanel = null;\n            removeClass([this.currentPanel.element], cls.NEXT_PANEL_CLASS);\n            addClass([this.currentPanel.element], cls.CURRENT_PANEL_CLASS);\n        }\n        this.currentPanel = null;\n        this.parent.activeView.getPanel().style.width = '';\n    };\n    ScheduleTouch.prototype.getTranslateX = function (element) {\n        var style = window.getComputedStyle(element);\n        return new WebKitCSSMatrix(style.webkitTransform).m41;\n    };\n    ScheduleTouch.prototype.setDimensions = function (element) {\n        element.style.width = (this.parent.element.clientWidth) + 'px';\n    };\n    ScheduleTouch.prototype.resetValues = function () {\n        this.currentPanel = null;\n        this.previousPanel = null;\n        this.nextPanel = null;\n        this.timeStampStart = null;\n        this.element.style.transform = '';\n        util.removeChildren(this.element);\n        removeClass([this.element], cls.TRANSLATE_CLASS);\n    };\n    ScheduleTouch.prototype.destroy = function () {\n        this.touchObj.destroy();\n        EventHandler.remove(this.element, 'transitionend', this.onTransitionEnd);\n        this.resetValues();\n    };\n    return ScheduleTouch;\n}());\nexport { ScheduleTouch };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { KeyboardEvents, closest, EventHandler, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport * as event from '../base/constant';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\n/**\n * Keyboard interaction\n */\nvar KeyboardInteraction = /** @class */ (function () {\n    function KeyboardInteraction(parent) {\n        this.selectedCells = [];\n        this.keyConfigs = {\n            downArrow: 'downarrow',\n            upArrow: 'uparrow',\n            rightArrow: 'rightarrow',\n            leftArrow: 'leftarrow',\n            shiftDownArrow: 'shift+downarrow',\n            shiftUpArrow: 'shift+uparrow',\n            shiftRightArrow: 'shift+rightarrow',\n            shiftLeftArrow: 'shift+leftarrow',\n            ctrlLeftArrow: 'ctrl+leftarrow',\n            ctrlRightArrow: 'ctrl+rightarrow',\n            altOne: 'alt+1',\n            altTwo: 'alt+2',\n            altThree: 'alt+3',\n            altFour: 'alt+4',\n            altFive: 'alt+5',\n            altSix: 'alt+6',\n            altSeven: 'alt+7',\n            altEight: 'alt+8',\n            altNine: 'alt+9',\n            enter: 'enter',\n            escape: 'escape',\n            delete: 'delete',\n            home: 'home',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            ctrlShiftUpArrow: 'ctrl+shift+uparrow',\n            ctrlShiftDownArrow: 'ctrl+shift+downarrow',\n            ctrlShiftLeftArrow: 'ctrl+shift+leftarrow',\n            ctrlShiftRightArrow: 'ctrl+shift+rightarrow'\n        };\n        this.parent = parent;\n        this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n        this.keyboardModule = new KeyboardEvents(this.parent.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        this.addEventListener();\n    }\n    KeyboardInteraction.prototype.keyActionHandler = function (e) {\n        switch (e.action) {\n            case 'downArrow':\n            case 'shiftDownArrow':\n                this.processDown(e, e.shiftKey);\n                break;\n            case 'upArrow':\n            case 'shiftUpArrow':\n                this.processUp(e, e.shiftKey);\n                break;\n            case 'leftArrow':\n            case 'shiftLeftArrow':\n                this.processLeft(e, e.shiftKey);\n                break;\n            case 'rightArrow':\n            case 'shiftRightArrow':\n                this.processRight(e, e.shiftKey);\n                break;\n            case 'ctrlLeftArrow':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.element.querySelector('.e-prev button').focus();\n                }\n                break;\n            case 'ctrlRightArrow':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.element.querySelector('.e-next button').focus();\n                }\n                break;\n            case 'altOne':\n            case 'altTwo':\n            case 'altThree':\n            case 'altFour':\n            case 'altFive':\n            case 'altSix':\n            case 'altSeven':\n            case 'altEight':\n            case 'altNine':\n                this.processViewNavigation(e);\n                break;\n            case 'enter':\n                this.processEnter(e);\n                break;\n            case 'home':\n                this.focusFirstCell();\n                break;\n            case 'tab':\n            case 'shiftTab':\n                this.processTab(e, e.shiftKey);\n                break;\n            case 'delete':\n                this.processDelete(e);\n                break;\n            case 'ctrlShiftUpArrow':\n            case 'ctrlShiftDownArrow':\n            case 'ctrlShiftLeftArrow':\n            case 'ctrlShiftRightArrow':\n                this.processCtrlShiftNavigationArrows(e);\n                break;\n            case 'escape':\n                this.processEscape();\n        }\n    };\n    KeyboardInteraction.prototype.addEventListener = function () {\n        this.parent.on(event.cellMouseDown, this.onCellMouseDown, this);\n    };\n    KeyboardInteraction.prototype.removeEventListener = function () {\n        this.parent.off(event.cellMouseDown, this.onCellMouseDown);\n    };\n    KeyboardInteraction.prototype.onCellMouseDown = function (e) {\n        if (e.event.shiftKey) {\n            return;\n        }\n        this.initialTarget = this.getClosestCell(e.event);\n        if (this.parent.activeViewOptions.readonly || this.parent.currentView === 'MonthAgenda' || !this.initialTarget) {\n            return;\n        }\n        if (e.event.target.classList.contains(cls.WORK_CELLS_CLASS) && e.event.which !== 3) {\n            this.parent.removeSelectedClass();\n            EventHandler.add(this.parent.getContentTable(), 'mousemove', this.onMouseSelection, this);\n            EventHandler.add(this.parent.getContentTable(), 'mouseup', this.onMoveup, this);\n        }\n        if (e.event.target.classList.contains(cls.ALLDAY_CELLS_CLASS) && e.event.which !== 3) {\n            this.parent.removeSelectedClass();\n            var allDayRow = this.parent.getAllDayRow();\n            EventHandler.add(allDayRow, 'mousemove', this.onMouseSelection, this);\n            EventHandler.add(allDayRow, 'mouseup', this.onMoveup, this);\n        }\n    };\n    KeyboardInteraction.prototype.onMouseSelection = function (e) {\n        var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        addClass(appointments, 'e-allow-select');\n        var selectionEdges = this.parent.boundaryValidation(e.pageY, e.pageX);\n        if (selectionEdges.bottom || selectionEdges.top || selectionEdges.left || selectionEdges.right) {\n            var parent_1 = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var yInBounds = parent_1.offsetHeight <= parent_1.scrollHeight && parent_1.scrollTop >= 0 &&\n                parent_1.scrollTop + parent_1.offsetHeight <= parent_1.scrollHeight;\n            var xInBounds = parent_1.offsetWidth <= parent_1.scrollWidth && parent_1.scrollLeft >= 0 &&\n                parent_1.scrollLeft + parent_1.offsetWidth <= parent_1.scrollWidth;\n            if (yInBounds && (selectionEdges.top || selectionEdges.bottom)) {\n                parent_1.scrollTop += selectionEdges.top ? -e.target.offsetHeight : e.target.offsetHeight;\n            }\n            if (xInBounds && (selectionEdges.left || selectionEdges.right)) {\n                parent_1.scrollLeft += selectionEdges.left ? -e.target.offsetWidth : e.target.offsetWidth;\n            }\n        }\n        var target = this.getClosestCell(e);\n        if (target) {\n            this.selectCells(true, target);\n        }\n    };\n    KeyboardInteraction.prototype.getClosestCell = function (e) {\n        return closest(e.target, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS);\n    };\n    KeyboardInteraction.prototype.onMoveup = function (e) {\n        var _this = this;\n        var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        removeClass(appointments, 'e-allow-select');\n        if (e.target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            EventHandler.remove(this.parent.getContentTable(), 'mousemove', this.onMouseSelection);\n            EventHandler.remove(this.parent.getContentTable(), 'mouseup', this.onMoveup);\n        }\n        if (e.target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var allDayRow = this.parent.getAllDayRow();\n            EventHandler.remove(allDayRow, 'mousemove', this.onMouseSelection);\n            EventHandler.remove(allDayRow, 'mouseup', this.onMoveup);\n        }\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        var queryStr = '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' + cls.HEADER_CELLS_CLASS;\n        var target = closest(e.target, queryStr);\n        this.parent.activeCellsData = this.getSelectedElements(target);\n        var cellData = {};\n        if (this.parent.eventWindow) {\n            this.parent.eventWindow.convertToEventData(this.parent.activeCellsData, cellData);\n        }\n        var args = {\n            data: cellData, element: this.parent.activeCellsData.element, event: e,\n            requestType: 'cellSelect', showQuickPopup: false\n        };\n        this.parent.trigger(event.select, args, function (selectArgs) {\n            var isPopupShow = selectArgs.showQuickPopup || _this.parent.quickInfoOnSelectionEnd;\n            if (isPopupShow) {\n                var cellArgs = extend(_this.parent.activeCellsData, { cancel: false, event: e, name: 'cellClick' });\n                _this.parent.notify(event.cellClick, cellArgs);\n            }\n        });\n    };\n    KeyboardInteraction.prototype.processEnter = function (e) {\n        if (this.parent.activeViewOptions.readonly || this.isPreventAction(e)) {\n            return;\n        }\n        var target = e.target;\n        if (closest(target, '.' + cls.POPUP_WRAPPER_CLASS)) {\n            if (target.classList.contains(cls.QUICK_POPUP_EVENT_DETAILS_CLASS) ||\n                target.classList.contains(cls.EVENT_CREATE_CLASS) ||\n                target.classList.contains(cls.EDIT_EVENT_CLASS) ||\n                target.classList.contains(cls.DELETE_EVENT_CLASS) ||\n                target.classList.contains(cls.CLOSE_CLASS)) {\n                target.click();\n                e.preventDefault();\n            }\n            else if (target.classList.contains(cls.SUBJECT_CLASS)) {\n                this.parent.element.querySelector('.' + cls.EVENT_CREATE_CLASS).click();\n                e.preventDefault();\n            }\n            return;\n        }\n        if (target.classList.contains(cls.RESOURCE_CELLS_CLASS) && target.classList.contains(cls.RESOURCE_PARENT_CLASS)) {\n            var resourceIcon = target.querySelector('.' + cls.RESOURCE_TREE_ICON_CLASS);\n            if (resourceIcon) {\n                resourceIcon.click();\n            }\n            return;\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) || target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            this.parent.activeCellsData = this.getSelectedElements(target);\n            var args = extend(this.parent.activeCellsData, { cancel: false, event: e });\n            if (this.parent.allowInline) {\n                var inlineArgs = {\n                    element: args.element,\n                    groupIndex: args.groupIndex, type: 'Cell'\n                };\n                this.parent.notify(event.inlineClick, inlineArgs);\n            }\n            else {\n                this.parent.notify(event.cellClick, args);\n            }\n            return;\n        }\n        if (target.classList.contains(cls.INLINE_SUBJECT_CLASS)) {\n            this.parent.inlineModule.inlineCrudActions(target);\n            return;\n        }\n        if (target.classList.contains(cls.APPOINTMENT_CLASS) || target.classList.contains(cls.MORE_EVENT_CLOSE_CLASS) ||\n            target.classList.contains(cls.ALLDAY_APPOINTMENT_SECTION_CLASS) || target.classList.contains(cls.MORE_INDICATOR_CLASS)) {\n            target.click();\n            return;\n        }\n        if (target.classList.contains(cls.MORE_EVENT_HEADER_DATE_CLASS)) {\n            this.parent.setScheduleProperties({ selectedDate: this.parent.getDateFromElement(target) });\n            this.parent.changeView(this.parent.getNavigateView(), e);\n            this.processEscape();\n            return;\n        }\n    };\n    KeyboardInteraction.prototype.getSelectedElements = function (target) {\n        var cellDetails;\n        if (this.selectedCells.length > 1 && target.classList.contains(cls.SELECTED_CELL_CLASS)) {\n            var start = this.parent.getCellDetails(this.selectedCells[0]);\n            var end = this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);\n            start.endTime = end.endTime;\n            start.element = target;\n            cellDetails = start;\n        }\n        else {\n            cellDetails = this.parent.getCellDetails(target);\n        }\n        return cellDetails;\n    };\n    KeyboardInteraction.prototype.getCells = function (isInverseTable, start, end) {\n        var tableEle = this.parent.getContentTable();\n        var cells = [].slice.call(tableEle.querySelectorAll('td'));\n        var maxRow = tableEle.rows.length;\n        var maxColumn = tableEle.rows[0].cells.length;\n        if (start.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var allDayRow = this.parent.getAllDayRow();\n            cells = [].slice.call(allDayRow.cells);\n            maxRow = 1;\n            maxColumn = allDayRow.cells.length;\n        }\n        var startIndex = cells.indexOf(start);\n        var endIndex = cells.indexOf(end);\n        var inverseCells = [];\n        if (isInverseTable) {\n            for (var i = 0; i < maxColumn; i++) {\n                for (var j = 0; j < maxRow; j++) {\n                    inverseCells.push(cells[maxColumn * j + i]);\n                }\n            }\n            startIndex = inverseCells.indexOf(start);\n            endIndex = inverseCells.indexOf(end);\n        }\n        if (startIndex > endIndex) {\n            var temp = startIndex;\n            startIndex = endIndex;\n            endIndex = temp;\n        }\n        var sCells = isInverseTable ? inverseCells : cells;\n        return sCells.slice(startIndex, endIndex + 1);\n    };\n    KeyboardInteraction.prototype.focusFirstCell = function () {\n        if (this.parent.currentView === 'Agenda') {\n            var focusCell = this.parent.getContentTable().querySelector('.' + cls.AGENDA_CELLS_CLASS);\n            focusCell.setAttribute('tabindex', '0');\n            focusCell.focus();\n            return;\n        }\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        if (this.parent.activeView.isTimelineView()) {\n            var cell = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS +\n                ' tr:not(.' + cls.HIDDEN_CLASS + ') .' + cls.WORK_CELLS_CLASS + ':not(.' + cls.RESOURCE_GROUP_CELLS_CLASS + ')');\n            this.selectCells(false, cell);\n        }\n        else {\n            this.selectCells(false, this.parent.getWorkCellElements()[0]);\n        }\n    };\n    KeyboardInteraction.prototype.isInverseTableSelect = function () {\n        return this.parent.activeView.isInverseTableSelect;\n    };\n    /**\n     * Internal method to select cells\n     *\n     * @param {boolean} isMultiple Accepts to select multiple cells or not\n     * @param {HTMLTableCellElement} targetCell Accepts the target cells\n     * @returns {void}\n     * @private\n     */\n    KeyboardInteraction.prototype.selectCells = function (isMultiple, targetCell) {\n        var _this = this;\n        this.parent.removeSelectedClass();\n        var target = (targetCell instanceof Array) ? targetCell.slice(-1)[0] : targetCell;\n        if (isMultiple) {\n            var initialId_1;\n            var views_1 = ['Day', 'Week', 'WorkWeek', 'Month', 'TimelineDay', 'TimelineWeek', 'TimelineWorkWeek', 'TimelineMonth'];\n            var args = { element: targetCell, requestType: 'mousemove', allowMultipleRow: true };\n            this.parent.inlineModule.removeInlineAppointmentElement();\n            this.parent.trigger(event.select, args, function (selectArgs) {\n                var allowMultipleRow = (!selectArgs.allowMultipleRow) || (!_this.parent.allowMultiRowSelection);\n                if (allowMultipleRow && (views_1.indexOf(_this.parent.currentView) > -1)) {\n                    target = target.parentElement.children[_this.initialTarget.cellIndex];\n                }\n                var selectedCells = _this.getCells(_this.isInverseTableSelect(), _this.initialTarget, target);\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    initialId_1 = _this.initialTarget.getAttribute('data-group-index');\n                    var resourceSelectedCells = [];\n                    for (var _i = 0, selectedCells_1 = selectedCells; _i < selectedCells_1.length; _i++) {\n                        var cell = selectedCells_1[_i];\n                        if (cell.getAttribute('data-group-index') === initialId_1) {\n                            resourceSelectedCells.push(cell);\n                        }\n                    }\n                    selectedCells = resourceSelectedCells;\n                }\n                if (!_this.parent.allowMultiCellSelection) {\n                    selectedCells = [_this.initialTarget];\n                }\n                _this.selectedCells = selectedCells;\n                if (selectedCells.length > 2 && !target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n                    var allDayCells = _this.getAllDayCells(selectedCells);\n                    if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                        var resourceAllDayCells = [];\n                        for (var _a = 0, allDayCells_1 = allDayCells; _a < allDayCells_1.length; _a++) {\n                            var cell = allDayCells_1[_a];\n                            if (cell.getAttribute('data-group-index') === initialId_1) {\n                                resourceAllDayCells.push(cell);\n                            }\n                        }\n                        allDayCells = resourceAllDayCells;\n                    }\n                    selectedCells = selectedCells.concat(allDayCells);\n                }\n                if ((target.getAttribute('data-group-index') !== initialId_1) && _this.parent.activeViewOptions.group.resources.length > 0) {\n                    target = _this.selectedCells[_this.selectedCells.length - 1];\n                }\n                _this.parent.addSelectedClass(selectedCells, target);\n            });\n        }\n        else {\n            this.initialTarget = target;\n            this.selectedCells = [target];\n            this.parent.addSelectedClass([target], target);\n        }\n    };\n    KeyboardInteraction.prototype.selectAppointment = function (isReverse, target) {\n        var appointments = this.getAppointmentElements();\n        if (appointments.length < 0) {\n            return;\n        }\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        var nextAppEle;\n        if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            var targetIndex = appointments.indexOf(target);\n            nextAppEle = appointments[(isReverse ? targetIndex - 1 : targetIndex + 1)];\n        }\n        else {\n            nextAppEle = isReverse ? appointments[appointments.length - 1] : appointments[0];\n        }\n        if (nextAppEle) {\n            this.parent.eventBase.addSelectedAppointments([nextAppEle]);\n            nextAppEle.focus();\n            addClass([nextAppEle], cls.AGENDA_SELECTED_CELL);\n        }\n    };\n    KeyboardInteraction.prototype.selectAppointmentElementFromWorkCell = function (isReverse, target) {\n        var _this = this;\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        this.parent.removeSelectedClass();\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) || target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var appointmentElements_1 = this.getUniqueAppointmentElements();\n            var filteredElements_1 = [];\n            var selectedDate_1 = this.parent.getDateFromElement(target).getTime();\n            var selectedSeriesEvents = this.parent.eventsProcessed.filter(function (eventObject) {\n                return (!isReverse ? (eventObject[_this.parent.eventFields.startTime].getTime() >= selectedDate_1) :\n                    (eventObject[_this.parent.eventFields.startTime].getTime() <= selectedDate_1));\n            });\n            selectedSeriesEvents.filter(function (event) {\n                appointmentElements_1.filter(function (element) {\n                    if (JSON.stringify(event.Guid) === JSON.stringify(element.getAttribute('data-guid'))) {\n                        filteredElements_1.push(element);\n                    }\n                });\n            });\n            if (filteredElements_1.length > 0) {\n                var selectedElement = isReverse ? filteredElements_1[filteredElements_1.length - 1] : filteredElements_1[0];\n                var focusElements = this.getAppointmentElementsByGuid(selectedElement.getAttribute('data-guid'));\n                this.parent.eventBase.addSelectedAppointments(focusElements);\n                (focusElements[focusElements.length - 1]).focus();\n            }\n        }\n    };\n    KeyboardInteraction.prototype.getAllDayCells = function (cells) {\n        var allDayRow = this.parent.getAllDayRow();\n        if (!allDayRow) {\n            return [];\n        }\n        var startCell = cells[0];\n        var endCell = cells[cells.length - 1];\n        var start = this.parent.getCellDetails(startCell);\n        var end = this.parent.getCellDetails(endCell);\n        if (end.endTime.getTime() - start.startTime.getTime() >= util.MS_PER_DAY) {\n            var allDayCells = [].slice.call(allDayRow.cells);\n            return allDayCells.slice(startCell.cellIndex, endCell.cellIndex + 1);\n        }\n        return [];\n    };\n    KeyboardInteraction.prototype.getAppointmentElements = function () {\n        return [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n    };\n    KeyboardInteraction.prototype.getAppointmentElementsByGuid = function (guid) {\n        return [].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]'));\n    };\n    KeyboardInteraction.prototype.getUniqueAppointmentElements = function () {\n        var appointments = this.getAppointmentElements();\n        var appointmentElements = [];\n        appointments.map(function (value) { return value.getAttribute('data-guid'); }).filter(function (value, index, self) {\n            if (self.indexOf(value) === index) {\n                appointmentElements.push(appointments[index]);\n            }\n        });\n        return appointmentElements;\n    };\n    KeyboardInteraction.prototype.getWorkCellFromAppointmentElement = function (target) {\n        var selectedObject = this.parent.eventBase.getEventByGuid(target.getAttribute('data-guid'));\n        return this.parent.eventBase.selectWorkCellByTime([selectedObject]);\n    };\n    KeyboardInteraction.prototype.processViewNavigation = function (e) {\n        var index = parseInt(e.key, 10) - 1;\n        if (index < this.parent.views.length) {\n            var view = this.parent.viewCollections[index].option;\n            this.parent.changeView(view, e, undefined, index);\n            if (this.parent.headerModule) {\n                this.parent.headerModule.element.querySelector('.e-active-view button').focus();\n            }\n        }\n    };\n    KeyboardInteraction.prototype.processUp = function (e, isMultiple) {\n        if ((isMultiple && (this.parent.activeView.isTimelineView() || this.parent.currentView === 'MonthAgenda'))) {\n            return;\n        }\n        var target = (e.target);\n        var selectedElements = this.parent.getSelectedElements();\n        var selectedEventElements = this.parent.eventBase.getSelectedAppointments();\n        var moreEventWrapper = this.parent.element.querySelector('.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        var quickPopupWrapper = this.getQuickPopupElement();\n        if (selectedElements.length > 0 && !e.target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            target = selectedElements[selectedElements.length - 1];\n        }\n        if (selectedEventElements.length > 0 && !moreEventWrapper.classList.contains(cls.POPUP_OPEN) &&\n            !quickPopupWrapper.classList.contains(cls.POPUP_OPEN) &&\n            ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n            target = this.getWorkCellFromAppointmentElement(selectedEventElements[selectedEventElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n        }\n        if (!target) {\n            return;\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + cls.POPUP_OPEN)) {\n            var tableRows = this.parent.getTableRows();\n            var curRowIndex = tableRows.indexOf(target.parentElement);\n            if (curRowIndex > 0 && curRowIndex < tableRows.length) {\n                this.selectCells(isMultiple, (tableRows[curRowIndex - 1]).cells[target.cellIndex]);\n            }\n        }\n        else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            this.selectAppointment(true, target);\n        }\n    };\n    KeyboardInteraction.prototype.processDown = function (e, isMultiple) {\n        if (isMultiple && (this.parent.activeView.isTimelineView() || this.parent.currentView === 'MonthAgenda')) {\n            return;\n        }\n        var target = (e.target);\n        var selectedCells = this.parent.getSelectedElements();\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        var moreEventWrapper = this.parent.element.querySelector('.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        var quickPopupWrapper = this.getQuickPopupElement();\n        if (selectedCells.length > 0 && !e.target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        if (selectedElements.length > 0 && !moreEventWrapper.classList.contains(cls.POPUP_OPEN) &&\n            !quickPopupWrapper.classList.contains(cls.POPUP_OPEN) &&\n            ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n            target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n        }\n        var tableRows = this.parent.getTableRows();\n        if (!target) {\n            return;\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + cls.POPUP_OPEN)) {\n            var curRowIndex = tableRows.indexOf(target.parentElement);\n            if (curRowIndex >= 0 && curRowIndex < tableRows.length - 1) {\n                this.selectCells(isMultiple, (tableRows[curRowIndex + 1]).cells[target.cellIndex]);\n            }\n        }\n        else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            this.selectAppointment(false, target);\n        }\n    };\n    KeyboardInteraction.prototype.processLeftRight = function (target) {\n        var tableEle = this.parent.getContentTable();\n        var curRowIndex = target.parentNode.sectionRowIndex;\n        var key = {\n            element: tableEle,\n            rowIndex: curRowIndex,\n            columnIndex: target.cellIndex,\n            maxIndex: tableEle.rows[curRowIndex].cells.length\n        };\n        return key;\n    };\n    KeyboardInteraction.prototype.getQuickPopupElement = function () {\n        return (this.parent.isAdaptive ? document.body : this.parent.element).querySelector('.' + cls.POPUP_WRAPPER_CLASS);\n    };\n    KeyboardInteraction.prototype.isCancelLeftRightAction = function (e, isMultiple) {\n        if (this.parent.currentView === 'Agenda' || (isMultiple && this.parent.currentView === 'MonthAgenda')) {\n            return true;\n        }\n        if (this.isPreventAction(e) && isMultiple) {\n            return true;\n        }\n        var moreEventWrapper = this.parent.element.querySelector('.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        var quickPopupWrapper = this.getQuickPopupElement();\n        if (moreEventWrapper.classList.contains(cls.POPUP_OPEN) || quickPopupWrapper.classList.contains(cls.POPUP_OPEN)) {\n            return true;\n        }\n        return false;\n    };\n    KeyboardInteraction.prototype.processRight = function (e, isMultiple) {\n        if (this.isCancelLeftRightAction(e, isMultiple)) {\n            return;\n        }\n        var selectedCells = this.parent.getSelectedElements();\n        var targetCell;\n        var selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n        var target = (e.target);\n        if (selectedCells.length > 0 && !target.classList.contains(cls.WORK_CELLS_CLASS) &&\n            !target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        if (selectedAppointments.length > 0) {\n            target = this.getWorkCellFromAppointmentElement(selectedAppointments[selectedAppointments.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!target) {\n                return;\n            }\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) &&\n            (e.target).classList.contains(cls.WORK_CELLS_CLASS)) {\n            var key = this.processLeftRight(target);\n            if (key.columnIndex >= 0 && key.columnIndex < key.maxIndex - 1) {\n                targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex + 1], 'right');\n                if (!isNullOrUndefined(targetCell)) {\n                    this.selectCells(isMultiple, targetCell);\n                }\n            }\n            else if (key.columnIndex === key.maxIndex - 1) {\n                if (!this.isInverseTableSelect() && key.rowIndex < key.element.rows.length - 1) {\n                    targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex + 1].cells[0], 'right');\n                    if (!isNullOrUndefined(targetCell)) {\n                        this.selectCells(isMultiple, targetCell);\n                    }\n                }\n                else if (!isMultiple) {\n                    var rowIndex = this.isInverseTableSelect() ? key.rowIndex : 0;\n                    this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n                    var tableEle = this.parent.getContentTable();\n                    this.selectCells(false, tableEle.rows[rowIndex].cells[0]);\n                }\n            }\n        }\n        else if (target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var curColIndex = target.cellIndex;\n            var allDayRow = this.parent.getAllDayRow();\n            var maxColIndex = allDayRow.cells.length;\n            if (curColIndex >= 0 && curColIndex < maxColIndex - 1) {\n                this.selectCells(isMultiple, allDayRow.cells[curColIndex + 1]);\n            }\n            else if (curColIndex === maxColIndex - 1 && !isMultiple) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n                var allDayRow_1 = this.parent.getAllDayRow();\n                this.selectCells(false, allDayRow_1.cells[0]);\n            }\n        }\n    };\n    KeyboardInteraction.prototype.processLeft = function (e, isMultiple) {\n        if (this.isCancelLeftRightAction(e, isMultiple)) {\n            return;\n        }\n        var target = (e.target);\n        var selectedCells = this.parent.getSelectedElements();\n        var targetCell;\n        if (selectedCells.length > 0 && !target.classList.contains(cls.WORK_CELLS_CLASS) &&\n            !target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        if (selectedElements.length > 0) {\n            target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!target) {\n                return;\n            }\n        }\n        if ((e.target).classList.contains(cls.WORK_CELLS_CLASS) &&\n            target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            var key = this.processLeftRight(target);\n            if (key.columnIndex > 0 && key.columnIndex < key.maxIndex) {\n                targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex - 1], 'left');\n                if (!isNullOrUndefined(targetCell)) {\n                    this.selectCells(isMultiple, targetCell);\n                }\n            }\n            else if (key.columnIndex === 0) {\n                if (!this.isInverseTableSelect() && key.rowIndex > 0) {\n                    targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex - 1].cells[key.maxIndex - 1], 'left');\n                    if (!isNullOrUndefined(targetCell)) {\n                        this.selectCells(isMultiple, targetCell);\n                    }\n                }\n                else if (!isMultiple) {\n                    this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n                    var tableEle = this.parent.getContentTable();\n                    var rowIndex = this.isInverseTableSelect() ? key.rowIndex : tableEle.rows.length - 1;\n                    this.selectCells(false, tableEle.rows[rowIndex].cells[key.maxIndex - 1]);\n                }\n            }\n        }\n        else if (target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var curColIndex = target.cellIndex;\n            var allDayRow = this.parent.getAllDayRow();\n            var maxColIndex = allDayRow.cells.length;\n            if (curColIndex > 0 && curColIndex < maxColIndex) {\n                this.selectCells(isMultiple, allDayRow.cells[curColIndex - 1]);\n            }\n            else if (curColIndex === 0 && !isMultiple) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n                var allDayRow_2 = this.parent.getAllDayRow();\n                this.selectCells(false, allDayRow_2.cells[maxColIndex - 1]);\n            }\n        }\n    };\n    KeyboardInteraction.prototype.calculateNextPrevDate = function (currentCell, target, type) {\n        var initialId = this.initialTarget.getAttribute('data-group-index');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.currentView === 'Month') {\n            if (currentCell && target && target.getAttribute('data-group-index') !== initialId) {\n                var currentDate = this.parent.getDateFromElement(currentCell);\n                var nextPrevDate = (type === 'right') ? new Date(currentDate.setDate(currentDate.getDate() + 1))\n                    : new Date(currentDate.setDate(currentDate.getDate() - 1));\n                target = [].slice.call(this.parent.element.querySelectorAll('td[data-date=\"'\n                    + nextPrevDate.getTime().toString() + '\"]' + '[data-group-index=\"' + initialId + '\"]'))[0];\n            }\n        }\n        return target;\n    };\n    KeyboardInteraction.prototype.getFocusableElements = function (container) {\n        var queryString = 'a[href]:not([tabindex=\"-1\"]),input:not([disabled]):not([tabindex=\"-1\"]),' +\n            'textarea:not([disabled]):not([tabindex=\"-1\"]),button:not([disabled]):not([tabindex=\"-1\"]),' +\n            'select:not([disabled]):not([tabindex=\"-1\"]),[tabindex]:not([tabindex=\"-1\"]),[contentEditable=true]:not([tabindex=\"-1\"])';\n        return [].slice.call(container.querySelectorAll(queryString));\n    };\n    KeyboardInteraction.prototype.processTabOnPopup = function (e, popupElement) {\n        var _this = this;\n        var focusableElements = this.getFocusableElements(popupElement);\n        focusableElements = focusableElements.filter(function (element) {\n            var footerEle = _this.parent.element.querySelector('.' + cls.POPUP_FOOTER_CLASS);\n            if (footerEle && footerEle.offsetParent) {\n                return !(element.classList.contains(cls.EDIT_CLASS) || element.classList.contains(cls.DELETE_CLASS));\n            }\n            else {\n                return !(element.classList.contains(cls.EDIT_EVENT_CLASS) || element.classList.contains(cls.DELETE_EVENT_CLASS));\n            }\n        });\n        var firstEle = focusableElements[0];\n        var lastEle = focusableElements[focusableElements.length - 1];\n        if (!isNullOrUndefined(lastEle) && document.activeElement === lastEle && !e.shiftKey) {\n            e.preventDefault();\n            firstEle.focus();\n        }\n        if (!isNullOrUndefined(firstEle) && document.activeElement === firstEle && e.shiftKey) {\n            e.preventDefault();\n            lastEle.focus();\n        }\n    };\n    KeyboardInteraction.prototype.processTab = function (e, isReverse) {\n        var target = e.target;\n        var popupWrapper = closest(target, '.' + cls.POPUP_WRAPPER_CLASS + ',.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        if (popupWrapper && popupWrapper.classList.contains(cls.POPUP_OPEN)) {\n            if (popupWrapper.classList.contains(cls.MORE_POPUP_WRAPPER_CLASS)) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n            }\n            this.processTabOnPopup(e, popupWrapper);\n            return;\n        }\n        if (target.classList.contains(cls.ROOT)) {\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            return;\n        }\n        if (target.classList.contains(cls.RESOURCE_CELLS_CLASS) && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            var index = parseInt(target.getAttribute('data-group-index'), 10);\n            var appSelector = \".\" + cls.APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + (isReverse ? index - 1 : index) + \"\\\"]\";\n            var appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));\n            if (appElements.length > 0) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n                var focusAppointment = isReverse ? appElements.slice(-1)[0] : appElements[0];\n                this.parent.eventBase.addSelectedAppointments([focusAppointment]);\n                focusAppointment.focus();\n                e.preventDefault();\n            }\n            else if (index + 1 === this.parent.resourceBase.lastResourceLevel.length) {\n                this.parent.element.focus();\n                e.preventDefault();\n            }\n            return;\n        }\n        if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            var appElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n            if (this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {\n                var index = parseInt(target.getAttribute('data-group-index'), 10);\n                appElements = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\"));\n                var resCellSelector = \".\" + cls.RESOURCE_CELLS_CLASS + \"[data-group-index=\\\"\" + (isReverse ? index : index + 1) + \"\\\"]\";\n                var resourceCell = this.parent.element.querySelector(resCellSelector);\n                if (resourceCell && (isReverse && target.getAttribute('data-guid') === appElements[0].getAttribute('data-guid') ||\n                    !isReverse && target.getAttribute('data-guid') === appElements.slice(-1)[0].getAttribute('data-guid'))) {\n                    this.parent.eventBase.removeSelectedAppointmentClass();\n                    resourceCell.focus();\n                    e.preventDefault();\n                    return;\n                }\n            }\n            var selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n            if (selectedAppointments.length > 0) {\n                target = selectedAppointments[selectedAppointments.length - 1];\n            }\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!isReverse && target.getAttribute('data-guid') === appElements[appElements.length - 1].getAttribute('data-guid') ||\n                isReverse && target.getAttribute('data-guid') === appElements[0].getAttribute('data-guid')) {\n                return;\n            }\n            if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n                this.selectAppointment(isReverse, target);\n                e.preventDefault();\n            }\n            return;\n        }\n        var selectedCells = this.parent.getSelectedElements();\n        if (selectedCells.length > 0 && !target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n            this.selectAppointmentElementFromWorkCell(isReverse, target);\n            e.preventDefault();\n            return;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    KeyboardInteraction.prototype.processDelete = function (e) {\n        var activeEle = document.activeElement;\n        if (this.parent.currentView === 'MonthAgenda') {\n            var selectedEle = this.parent.eventBase.getSelectedEvents().element;\n            activeEle = ((selectedEle && isNullOrUndefined(selectedEle.length)) ? selectedEle : selectedEle[0]);\n        }\n        if (activeEle && activeEle.classList.contains(cls.APPOINTMENT_CLASS)) {\n            addClass([activeEle], cls.APPOINTMENT_BORDER);\n            this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n            if (this.parent.activeViewOptions.readonly || activeEle.classList.contains(cls.READ_ONLY)) {\n                return;\n            }\n            this.parent.quickPopup.deleteClick();\n        }\n    };\n    KeyboardInteraction.prototype.processCtrlShiftNavigationArrows = function (e) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && document.activeElement.classList.contains(cls.APPOINTMENT_CLASS)) {\n            var groupIndex = parseInt(document.activeElement.getAttribute('data-group-index'), 10);\n            var index = (e.action === 'ctrlShiftLeftArrow' || e.action === 'ctrlShiftUpArrow') ? groupIndex - 1 : groupIndex + 1;\n            index = index < 0 ? 0 : index > this.parent.resourceBase.lastResourceLevel.length ?\n                this.parent.resourceBase.lastResourceLevel.length : index;\n            var eventEle = [];\n            while (eventEle.length === 0 && index >= 0 && index <= this.parent.resourceBase.lastResourceLevel.length) {\n                eventEle = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\"));\n                index = (e.action === 'ctrlShiftLeftArrow' || e.action === 'ctrlShiftUpArrow') ? index - 1 : index + 1;\n            }\n            var nextAppEle = eventEle[0];\n            if (nextAppEle) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n                this.parent.eventBase.addSelectedAppointments([nextAppEle]);\n                nextAppEle.focus();\n            }\n        }\n        else if (this.parent.activeViewOptions.group.resources.length > 0 &&\n            !document.activeElement.classList.contains(cls.APPOINTMENT_CLASS)) {\n            var index = this.parent.resourceBase.renderedResources[0].groupIndex;\n            var appSelector = \".\" + cls.APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\";\n            var appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));\n            if (appElements.length > 0) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n                var focusAppointment = appElements[0];\n                this.parent.eventBase.addSelectedAppointments([focusAppointment]);\n                focusAppointment.focus();\n                e.preventDefault();\n            }\n        }\n    };\n    KeyboardInteraction.prototype.processEscape = function () {\n        this.parent.quickPopup.onClosePopup();\n        this.parent.quickPopup.morePopup.hide();\n        if (this.parent.headerModule) {\n            this.parent.headerModule.hideHeaderPopup();\n        }\n        if (this.parent.inlineModule) {\n            this.parent.inlineModule.removeInlineAppointmentElement();\n        }\n    };\n    KeyboardInteraction.prototype.isPreventAction = function (e) {\n        var target = closest(e.target, '.' + cls.RESOURCE_GROUP_CELLS_CLASS);\n        if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    KeyboardInteraction.prototype.getModuleName = function () {\n        return 'keyboard';\n    };\n    /**\n     * To destroy the keyboard module.\n     *\n     * @returns {void}\n     * @private\n     */\n    KeyboardInteraction.prototype.destroy = function () {\n        this.removeEventListener();\n        this.keyboardModule.destroy();\n    };\n    return KeyboardInteraction;\n}());\nexport { KeyboardInteraction };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * data module is used to generate query and data source.\n *\n * @private\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module\n     *\n     * @param {Object | DataManager} dataSource Accepts the datasource as JSON objects or DataManager\n     * @param {Query} query Accepts the query to process the data\n     * @private\n     */\n    function Data(dataSource, query) {\n        this.initDataManager(dataSource, query);\n    }\n    /**\n     * The function used to initialize dataManager and query\n     *\n     * @param {Object | DataManager} dataSource Accepts the datasource as JSON objects or DataManager\n     * @param {Query} query Accepts the query to process the data\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.initDataManager = function (dataSource, query) {\n        this.dataManager = dataSource instanceof DataManager ? dataSource : new DataManager(dataSource);\n        this.query = query instanceof Query ? query : new Query();\n    };\n    /**\n     * The function used to generate updated Query from schedule model\n     *\n     * @param {Date} startDate Accepts the start date\n     * @param {Date} endDate Accepts the end date\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.generateQuery = function (startDate, endDate) {\n        var query = this.query.clone();\n        if (startDate) {\n            query.addParams('StartDate', startDate.toISOString());\n        }\n        if (endDate) {\n            query.addParams('EndDate', endDate.toISOString());\n        }\n        return query;\n    };\n    /**\n     * The function used to get dataSource by executing given Query\n     *\n     * @param  {Query} query - A Query that specifies to generate dataSource\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.getData = function (query) {\n        return this.dataManager.executeQuery(query);\n    };\n    return Data;\n}());\nexport { Data };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { HijriParser, isNullOrUndefined } from '@syncfusion/ej2-base';\n/** @private */\nvar Gregorian = /** @class */ (function () {\n    function Gregorian() {\n    }\n    Gregorian.prototype.firstDateOfMonth = function (date) {\n        return new Date(date.getFullYear(), date.getMonth());\n    };\n    Gregorian.prototype.lastDateOfMonth = function (dt) {\n        return new Date(dt.getFullYear(), dt.getMonth() + 1, 0);\n    };\n    Gregorian.prototype.isMonthStart = function (date) {\n        return (date.getDate() === 1);\n    };\n    Gregorian.prototype.getLeapYearDaysCount = function () {\n        return 366;\n    };\n    Gregorian.prototype.getYearDaysCount = function (date, interval) {\n        return ((date.getFullYear() + interval) % 4 === 0) ? 366 : 365;\n    };\n    Gregorian.prototype.getDate = function (date) {\n        return date.getDate();\n    };\n    Gregorian.prototype.getMonth = function (date) {\n        return (date.getMonth() + 1);\n    };\n    Gregorian.prototype.getFullYear = function (date) {\n        return date.getFullYear();\n    };\n    Gregorian.prototype.getYearLastDate = function (date, interval) {\n        return new Date(date.getFullYear() + interval, 0, 0);\n    };\n    Gregorian.prototype.getMonthDaysCount = function (date) {\n        return this.lastDateOfMonth(date).getDate();\n    };\n    Gregorian.prototype.getMonthStartDate = function (date) {\n        return new Date(date.getFullYear(), date.getMonth(), 1, date.getHours(), date.getMinutes());\n    };\n    Gregorian.prototype.getMonthEndDate = function (date) {\n        date.setDate(1);\n        return new Date(date.setMonth(date.getMonth() + 1));\n    };\n    Gregorian.prototype.getExpectedDays = function (date, days) {\n        return days;\n    };\n    Gregorian.prototype.setDate = function (dateObj, date) {\n        dateObj.setDate(date);\n    };\n    Gregorian.prototype.setValidDate = function (date, interval, startDate, monthValue, beginDate) {\n        if (!isNullOrUndefined(beginDate)) {\n            date.setMonth((beginDate ? monthValue : date.getMonth()) + interval);\n        }\n        else {\n            date.setMonth(date.getMonth() + interval, startDate);\n        }\n    };\n    Gregorian.prototype.setMonth = function (date, interval, startDate) {\n        date.setFullYear(date.getFullYear());\n        date.setMonth(interval - 1);\n        date.setDate(startDate);\n    };\n    Gregorian.prototype.addYears = function (date, interval) {\n        date.setFullYear(date.getFullYear() + interval);\n    };\n    Gregorian.prototype.isSameMonth = function (date1, date2) {\n        return (date1.getMonth() === date2.getMonth());\n    };\n    Gregorian.prototype.checkMonth = function (date, months) {\n        return (months.indexOf(date.getMonth() + 1) === -1);\n    };\n    Gregorian.prototype.compareMonth = function (date1, date2) {\n        return (date1.getMonth() > date2.getMonth());\n    };\n    Gregorian.prototype.isSameYear = function (date1, date2) {\n        return (date1.getFullYear() === date2.getFullYear());\n    };\n    Gregorian.prototype.isLastMonth = function (date) {\n        return (date.getMonth() === 11);\n    };\n    Gregorian.prototype.isLeapYear = function (year, interval) {\n        return ((year + interval) % 4 === 0);\n    };\n    return Gregorian;\n}());\nexport { Gregorian };\n/** @private */\nvar Islamic = /** @class */ (function () {\n    function Islamic() {\n    }\n    Islamic.prototype.firstDateOfMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, 1);\n        return gDate;\n    };\n    Islamic.prototype.lastDateOfMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        var daysInMonth = this.getDaysInMonth(hDate.month, hDate.year);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, daysInMonth);\n        var finalGDate = new Date(gDate.getTime());\n        finalGDate = new Date(finalGDate.setDate(finalGDate.getDate() + 1));\n        var finalHDate = this.getHijriDate(finalGDate);\n        if (hDate.month === finalHDate.month) {\n            return finalGDate;\n        }\n        finalHDate = this.getHijriDate(gDate);\n        if (hDate.month === finalHDate.month) {\n            return gDate;\n        }\n        return new Date(gDate.setDate(gDate.getDate() - 1));\n    };\n    Islamic.prototype.isMonthStart = function (date) {\n        var hijriDate = this.getHijriDate(date);\n        return (hijriDate.date === 1);\n    };\n    Islamic.prototype.getLeapYearDaysCount = function () {\n        return 355;\n    };\n    Islamic.prototype.getYearDaysCount = function (date, interval) {\n        var hDate = this.getHijriDate(date);\n        return this.isLeapYear(hDate.year, interval) ? 355 : 354;\n    };\n    Islamic.prototype.getDate = function (date) {\n        var hijriDate = this.getHijriDate(date);\n        return hijriDate.date;\n    };\n    Islamic.prototype.getMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        return hDate.month;\n    };\n    Islamic.prototype.getFullYear = function (date) {\n        var hDate = this.getHijriDate(date);\n        return hDate.year;\n    };\n    Islamic.prototype.getYearLastDate = function (date, interval) {\n        var hDate = this.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year + interval, 1, 0);\n        return gDate;\n    };\n    Islamic.prototype.getMonthDaysCount = function (date) {\n        var maxDate = this.lastDateOfMonth(date);\n        var hijriDate = this.getHijriDate(maxDate);\n        return hijriDate.date;\n    };\n    Islamic.prototype.getMonthStartDate = function (date) {\n        var firstDate = this.firstDateOfMonth(date);\n        return new Date(firstDate.getFullYear(), firstDate.getMonth(), firstDate.getDate(), date.getHours(), date.getMinutes());\n    };\n    Islamic.prototype.getMonthEndDate = function (date) {\n        var lastDate = this.lastDateOfMonth(date);\n        lastDate.setDate(lastDate.getDate() + 1);\n        return new Date(lastDate.setMonth(lastDate.getMonth()));\n    };\n    Islamic.prototype.getExpectedDays = function (date, days) {\n        var hDate = this.getHijriDate(date);\n        var day = [];\n        for (var i = 0; i < days.length; i++) {\n            var gDate = HijriParser.toGregorian(hDate.year, hDate.month, days[i]);\n            day.push(gDate.getDate());\n        }\n        return day;\n    };\n    Islamic.prototype.setDate = function (dateObj, date) {\n        var hDate = this.getHijriDate(dateObj);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, date);\n        this.updateDateObj(dateObj, gDate);\n    };\n    Islamic.prototype.setValidDate = function (date, interval, startDate, monthValue, beginDate) {\n        var firstDate = (!isNullOrUndefined(beginDate)) ? this.firstDateOfMonth(beginDate) : date;\n        var hDate = this.getHijriDate(firstDate);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month + interval, startDate);\n        this.updateDateObj(date, gDate);\n    };\n    Islamic.prototype.setMonth = function (date, interval, startDate) {\n        var hDate = this.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year, interval, startDate);\n        this.updateDateObj(date, gDate);\n    };\n    Islamic.prototype.addYears = function (date, interval, monthValue) {\n        var hDate = this.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year + interval, monthValue, 1);\n        this.updateDateObj(date, gDate);\n    };\n    Islamic.prototype.isSameMonth = function (date1, date2) {\n        var currentHijri = this.getHijriDate(date1);\n        var tempHijri = this.getHijriDate(date2);\n        return (currentHijri.month === tempHijri.month);\n    };\n    Islamic.prototype.checkMonth = function (date, months) {\n        var hDate = this.getHijriDate(date);\n        return (months.indexOf(hDate.month) === -1);\n    };\n    Islamic.prototype.compareMonth = function (date1, date2) {\n        var hDate = this.getHijriDate(date1);\n        var hDate1 = this.getHijriDate(date2);\n        return (hDate.month > hDate1.month);\n    };\n    Islamic.prototype.isSameYear = function (date1, date2) {\n        var hDate = this.getHijriDate(date1);\n        var hDate1 = this.getHijriDate(date2);\n        return (hDate.year === hDate1.year);\n    };\n    Islamic.prototype.isLastMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        return (hDate.month === 12);\n    };\n    Islamic.prototype.updateDateObj = function (date, gDate) {\n        date.setFullYear(gDate.getFullYear(), gDate.getMonth(), gDate.getDate());\n    };\n    Islamic.prototype.isLeapYear = function (year, interval) {\n        return (14 + 11 * (year + interval)) % 30 < 11;\n    };\n    Islamic.prototype.getDaysInMonth = function (month, year) {\n        var length = 0;\n        length = 29 + ((month + 1) % 2);\n        if (month === 11 && this.isLeapYear(year, 0)) {\n            length++;\n        }\n        return length;\n    };\n    Islamic.prototype.getHijriDate = function (date) {\n        return HijriParser.getHijriDate(date);\n    };\n    return Islamic;\n}());\nexport { Islamic };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Time zone\n */\nvar Timezone = /** @class */ (function () {\n    function Timezone() {\n        this.timezoneData = [];\n        this.timezoneData = this.getTimezoneData();\n    }\n    Timezone.prototype.offset = function (date, timezone) {\n        var localOffset = date.getTimezoneOffset();\n        try {\n            var convertedDate = new Date(date.toLocaleString('en-US', { timeZone: timezone }));\n            if (!isNaN(convertedDate.getTime())) {\n                return ((date.getTime() - convertedDate.getTime()) / 60000) + localOffset;\n            }\n            return 0;\n        }\n        catch (error) {\n            return 0;\n        }\n    };\n    Timezone.prototype.convert = function (date, fromOffset, toOffset) {\n        if (typeof fromOffset === 'string') {\n            fromOffset = this.offset(date, fromOffset);\n        }\n        if (typeof toOffset === 'string') {\n            toOffset = this.offset(date, toOffset);\n        }\n        var fromLocalOffset = date.getTimezoneOffset();\n        date = new Date(date.getTime() + (fromOffset - toOffset) * 60000);\n        var toLocalOffset = date.getTimezoneOffset();\n        return new Date(date.getTime() + (toLocalOffset - fromLocalOffset) * 60000);\n    };\n    Timezone.prototype.add = function (date, timezone) {\n        return this.convert(date, date.getTimezoneOffset(), timezone);\n    };\n    Timezone.prototype.remove = function (date, timezone) {\n        return this.convert(date, timezone, date.getTimezoneOffset());\n    };\n    Timezone.prototype.removeLocalOffset = function (date) {\n        return new Date(date.getTime() - (date.getTimezoneOffset() * 60000));\n    };\n    Timezone.prototype.getLocalTimezoneName = function () {\n        return window.Intl ? Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC' : 'UTC';\n    };\n    Timezone.prototype.getTimezoneData = function () {\n        return timezoneData;\n    };\n    return Timezone;\n}());\nexport { Timezone };\nexport var timezoneData = [\n    { Value: 'Pacific/Niue', Text: '(UTC-11:00) Niue' },\n    { Value: 'Pacific/Pago_Pago', Text: '(UTC-11:00) Pago Pago' },\n    { Value: 'Pacific/Honolulu', Text: '(UTC-10:00) Hawaii Time' },\n    { Value: 'Pacific/Rarotonga', Text: '(UTC-10:00) Rarotonga' },\n    { Value: 'Pacific/Tahiti', Text: '(UTC-10:00) Tahiti' },\n    { Value: 'Pacific/Marquesas', Text: '(UTC-09:30) Marquesas' },\n    { Value: 'America/Anchorage', Text: '(UTC-09:00) Alaska Time' },\n    { Value: 'Pacific/Gambier', Text: '(UTC-09:00) Gambier' },\n    { Value: 'America/Los_Angeles', Text: '(UTC-08:00) Pacific Time' },\n    { Value: 'America/Tijuana', Text: '(UTC-08:00) Pacific Time - Tijuana' },\n    { Value: 'America/Vancouver', Text: '(UTC-08:00) Pacific Time - Vancouver' },\n    { Value: 'America/Whitehorse', Text: '(UTC-08:00) Pacific Time - Whitehorse' },\n    { Value: 'Pacific/Pitcairn', Text: '(UTC-08:00) Pitcairn' },\n    { Value: 'America/Denver', Text: '(UTC-07:00) Mountain Time' },\n    { Value: 'America/Phoenix', Text: '(UTC-07:00) Mountain Time - Arizona' },\n    { Value: 'America/Mazatlan', Text: '(UTC-07:00) Mountain Time - Chihuahua, Mazatlan' },\n    { Value: 'America/Dawson_Creek', Text: '(UTC-07:00) Mountain Time - Dawson Creek' },\n    { Value: 'America/Edmonton', Text: '(UTC-07:00) Mountain Time - Edmonton' },\n    { Value: 'America/Hermosillo', Text: '(UTC-07:00) Mountain Time - Hermosillo' },\n    { Value: 'America/Yellowknife', Text: '(UTC-07:00) Mountain Time - Yellowknife' },\n    { Value: 'America/Belize', Text: '(UTC-06:00) Belize' },\n    { Value: 'America/Chicago', Text: '(UTC-06:00) Central Time' },\n    { Value: 'America/Mexico_City', Text: '(UTC-06:00) Central Time - Mexico City' },\n    { Value: 'America/Regina', Text: '(UTC-06:00) Central Time - Regina' },\n    { Value: 'America/Tegucigalpa', Text: '(UTC-06:00) Central Time - Tegucigalpa' },\n    { Value: 'America/Winnipeg', Text: '(UTC-06:00) Central Time - Winnipeg' },\n    { Value: 'America/Costa_Rica', Text: '(UTC-06:00) Costa Rica' },\n    { Value: 'America/El_Salvador', Text: '(UTC-06:00) El Salvador' },\n    { Value: 'Pacific/Galapagos', Text: '(UTC-06:00) Galapagos' },\n    { Value: 'America/Guatemala', Text: '(UTC-06:00) Guatemala' },\n    { Value: 'America/Managua', Text: '(UTC-06:00) Managua' },\n    { Value: 'America/Cancun', Text: '(UTC-05:00) America Cancun' },\n    { Value: 'America/Bogota', Text: '(UTC-05:00) Bogota' },\n    { Value: 'Pacific/Easter', Text: '(UTC-05:00) Easter Island' },\n    { Value: 'America/New_York', Text: '(UTC-05:00) Eastern Time' },\n    { Value: 'America/Iqaluit', Text: '(UTC-05:00) Eastern Time - Iqaluit' },\n    { Value: 'America/Toronto', Text: '(UTC-05:00) Eastern Time - Toronto' },\n    { Value: 'America/Guayaquil', Text: '(UTC-05:00) Guayaquil' },\n    { Value: 'America/Havana', Text: '(UTC-05:00) Havana' },\n    { Value: 'America/Jamaica', Text: '(UTC-05:00) Jamaica' },\n    { Value: 'America/Lima', Text: '(UTC-05:00) Lima' },\n    { Value: 'America/Nassau', Text: '(UTC-05:00) Nassau' },\n    { Value: 'America/Panama', Text: '(UTC-05:00) Panama' },\n    { Value: 'America/Port-au-Prince', Text: '(UTC-05:00) Port-au-Prince' },\n    { Value: 'America/Rio_Branco', Text: '(UTC-05:00) Rio Branco' },\n    { Value: 'America/Halifax', Text: '(UTC-04:00) Atlantic Time - Halifax' },\n    { Value: 'America/Barbados', Text: '(UTC-04:00) Barbados' },\n    { Value: 'Atlantic/Bermuda', Text: '(UTC-04:00) Bermuda' },\n    { Value: 'America/Boa_Vista', Text: '(UTC-04:00) Boa Vista' },\n    { Value: 'America/Caracas', Text: '(UTC-04:00) Caracas' },\n    { Value: 'America/Curacao', Text: '(UTC-04:00) Curacao' },\n    { Value: 'America/Grand_Turk', Text: '(UTC-04:00) Grand Turk' },\n    { Value: 'America/Guyana', Text: '(UTC-04:00) Guyana' },\n    { Value: 'America/La_Paz', Text: '(UTC-04:00) La Paz' },\n    { Value: 'America/Manaus', Text: '(UTC-04:00) Manaus' },\n    { Value: 'America/Martinique', Text: '(UTC-04:00) Martinique' },\n    { Value: 'America/Port_of_Spain', Text: '(UTC-04:00) Port of Spain' },\n    { Value: 'America/Porto_Velho', Text: '(UTC-04:00) Porto Velho' },\n    { Value: 'America/Puerto_Rico', Text: '(UTC-04:00) Puerto Rico' },\n    { Value: 'America/Santo_Domingo', Text: '(UTC-04:00) Santo Domingo' },\n    { Value: 'America/Thule', Text: '(UTC-04:00) Thule' },\n    { Value: 'America/St_Johns', Text: '(UTC-03:30) Newfoundland Time - St. Johns' },\n    { Value: 'America/Araguaina', Text: '(UTC-03:00) Araguaina' },\n    { Value: 'America/Asuncion', Text: '(UTC-03:00) Asuncion' },\n    { Value: 'America/Belem', Text: '(UTC-03:00) Belem' },\n    { Value: 'America/Argentina/Buenos_Aires', Text: '(UTC-03:00) Buenos Aires' },\n    { Value: 'America/Campo_Grande', Text: '(UTC-03:00) Campo Grande' },\n    { Value: 'America/Cayenne', Text: '(UTC-03:00) Cayenne' },\n    { Value: 'America/Cuiaba', Text: '(UTC-03:00) Cuiaba' },\n    { Value: 'America/Fortaleza', Text: '(UTC-03:00) Fortaleza' },\n    { Value: 'America/Godthab', Text: '(UTC-03:00) Godthab' },\n    { Value: 'America/Maceio', Text: '(UTC-03:00) Maceio' },\n    { Value: 'America/Miquelon', Text: '(UTC-03:00) Miquelon' },\n    { Value: 'America/Montevideo', Text: '(UTC-03:00) Montevideo' },\n    { Value: 'Antarctica/Palmer', Text: '(UTC-03:00) Palmer' },\n    { Value: 'America/Paramaribo', Text: '(UTC-03:00) Paramaribo' },\n    { Value: 'America/Punta_Arenas', Text: '(UTC-03:00) Punta Arenas' },\n    { Value: 'America/Recife', Text: '(UTC-03:00) Recife' },\n    { Value: 'Antarctica/Rothera', Text: '(UTC-03:00) Rothera' },\n    { Value: 'America/Bahia', Text: '(UTC-03:00) Salvador' },\n    { Value: 'America/Santiago', Text: '(UTC-03:00) Santiago' },\n    { Value: 'Atlantic/Stanley', Text: '(UTC-03:00) Stanley' },\n    { Value: 'America/Noronha', Text: '(UTC-02:00) Noronha' },\n    { Value: 'America/Sao_Paulo', Text: '(UTC-02:00) Sao Paulo' },\n    { Value: 'Atlantic/South_Georgia', Text: '(UTC-02:00) South Georgia' },\n    { Value: 'Atlantic/Azores', Text: '(UTC-01:00) Azores' },\n    { Value: 'Atlantic/Cape_Verde', Text: '(UTC-01:00) Cape Verde' },\n    { Value: 'America/Scoresbysund', Text: '(UTC-01:00) Scoresbysund' },\n    { Value: 'Africa/Abidjan', Text: '(UTC+00:00) Abidjan' },\n    { Value: 'Africa/Accra', Text: '(UTC+00:00) Accra' },\n    { Value: 'Africa/Bissau', Text: '(UTC+00:00) Bissau' },\n    { Value: 'Atlantic/Canary', Text: '(UTC+00:00) Canary Islands' },\n    { Value: 'Africa/Casablanca', Text: '(UTC+00:00) Casablanca' },\n    { Value: 'America/Danmarkshavn', Text: '(UTC+00:00) Danmarkshavn' },\n    { Value: 'Europe/Dublin', Text: '(UTC+00:00) Dublin' },\n    { Value: 'Africa/El_Aaiun', Text: '(UTC+00:00) El Aaiun' },\n    { Value: 'Atlantic/Faroe', Text: '(UTC+00:00) Faeroe' },\n    { Value: 'Etc/UTC', Text: '(UTC+00:00) UTC (no daylight saving)' },\n    { Value: 'Europe/Lisbon', Text: '(UTC+00:00) Lisbon' },\n    { Value: 'Europe/London', Text: '(UTC+00:00) London' },\n    { Value: 'Africa/Monrovia', Text: '(UTC+00:00) Monrovia' },\n    { Value: 'Atlantic/Reykjavik', Text: '(UTC+00:00) Reykjavik' },\n    { Value: 'UTC', Text: 'UTC' },\n    { Value: 'Africa/Algiers', Text: '(UTC+01:00) Algiers' },\n    { Value: 'Europe/Amsterdam', Text: '(UTC+01:00) Amsterdam' },\n    { Value: 'Europe/Andorra', Text: '(UTC+01:00) Andorra' },\n    { Value: 'Europe/Berlin', Text: '(UTC+01:00) Berlin' },\n    { Value: 'Europe/Brussels', Text: '(UTC+01:00) Brussels' },\n    { Value: 'Europe/Budapest', Text: '(UTC+01:00) Budapest' },\n    { Value: 'Europe/Belgrade', Text: '(UTC+01:00) Central European Time - Belgrade' },\n    { Value: 'Europe/Prague', Text: '(UTC+01:00) Central European Time - Prague' },\n    { Value: 'Africa/Ceuta', Text: '(UTC+01:00) Ceuta' },\n    { Value: 'Europe/Copenhagen', Text: '(UTC+01:00) Copenhagen' },\n    { Value: 'Europe/Gibraltar', Text: '(UTC+01:00) Gibraltar' },\n    { Value: 'Africa/Lagos', Text: '(UTC+01:00) Lagos' },\n    { Value: 'Europe/Luxembourg', Text: '(UTC+01:00) Luxembourg' },\n    { Value: 'Europe/Madrid', Text: '(UTC+01:00) Madrid' },\n    { Value: 'Europe/Malta', Text: '(UTC+01:00) Malta' },\n    { Value: 'Europe/Monaco', Text: '(UTC+01:00) Monaco' },\n    { Value: 'Africa/Ndjamena', Text: '(UTC+01:00) Ndjamena' },\n    { Value: 'Europe/Oslo', Text: '(UTC+01:00) Oslo' },\n    { Value: 'Europe/Paris', Text: '(UTC+01:00) Paris' },\n    { Value: 'Europe/Rome', Text: '(UTC+01:00) Rome' },\n    { Value: 'Europe/Stockholm', Text: '(UTC+01:00) Stockholm' },\n    { Value: 'Europe/Tirane', Text: '(UTC+01:00) Tirane' },\n    { Value: 'Africa/Tunis', Text: '(UTC+01:00) Tunis' },\n    { Value: 'Europe/Vienna', Text: '(UTC+01:00) Vienna' },\n    { Value: 'Europe/Warsaw', Text: '(UTC+01:00) Warsaw' },\n    { Value: 'Europe/Zurich', Text: '(UTC+01:00) Zurich' },\n    { Value: 'Asia/Amman', Text: '(UTC+02:00) Amman' },\n    { Value: 'Europe/Athens', Text: '(UTC+02:00) Athens' },\n    { Value: 'Asia/Beirut', Text: '(UTC+02:00) Beirut' },\n    { Value: 'Europe/Bucharest', Text: '(UTC+02:00) Bucharest' },\n    { Value: 'Africa/Cairo', Text: '(UTC+02:00) Cairo' },\n    { Value: 'Europe/Chisinau', Text: '(UTC+02:00) Chisinau' },\n    { Value: 'Asia/Damascus', Text: '(UTC+02:00) Damascus' },\n    { Value: 'Asia/Gaza', Text: '(UTC+02:00) Gaza' },\n    { Value: 'Europe/Helsinki', Text: '(UTC+02:00) Helsinki' },\n    { Value: 'Asia/Jerusalem', Text: '(UTC+02:00) Jerusalem' },\n    { Value: 'Africa/Johannesburg', Text: '(UTC+02:00) Johannesburg' },\n    { Value: 'Africa/Khartoum', Text: '(UTC+02:00) Khartoum' },\n    { Value: 'Europe/Kiev', Text: '(UTC+02:00) Kiev' },\n    { Value: 'Africa/Maputo', Text: '(UTC+02:00) Maputo' },\n    { Value: 'Europe/Kaliningrad', Text: '(UTC+02:00) Moscow-01 - Kaliningrad' },\n    { Value: 'Asia/Nicosia', Text: '(UTC+02:00) Nicosia' },\n    { Value: 'Europe/Riga', Text: '(UTC+02:00) Riga' },\n    { Value: 'Europe/Sofia', Text: '(UTC+02:00) Sofia' },\n    { Value: 'Europe/Tallinn', Text: '(UTC+02:00) Tallinn' },\n    { Value: 'Africa/Tripoli', Text: '(UTC+02:00) Tripoli' },\n    { Value: 'Europe/Vilnius', Text: '(UTC+02:00) Vilnius' },\n    { Value: 'Africa/Windhoek', Text: '(UTC+02:00) Windhoek' },\n    { Value: 'Asia/Baghdad', Text: '(UTC+03:00) Baghdad' },\n    { Value: 'Europe/Istanbul', Text: '(UTC+03:00) Istanbul' },\n    { Value: 'Europe/Minsk', Text: '(UTC+03:00) Minsk' },\n    { Value: 'Europe/Moscow', Text: '(UTC+03:00) Moscow+00 - Moscow' },\n    { Value: 'Africa/Nairobi', Text: '(UTC+03:00) Nairobi' },\n    { Value: 'Asia/Qatar', Text: '(UTC+03:00) Qatar' },\n    { Value: 'Asia/Riyadh', Text: '(UTC+03:00) Riyadh' },\n    { Value: 'Antarctica/Syowa', Text: '(UTC+03:00) Syowa' },\n    { Value: 'Asia/Tehran', Text: '(UTC+03:30) Tehran' },\n    { Value: 'Asia/Baku', Text: '(UTC+04:00) Baku' },\n    { Value: 'Asia/Dubai', Text: '(UTC+04:00) Dubai' },\n    { Value: 'Indian/Mahe', Text: '(UTC+04:00) Mahe' },\n    { Value: 'Indian/Mauritius', Text: '(UTC+04:00) Mauritius' },\n    { Value: 'Europe/Samara', Text: '(UTC+04:00) Moscow+01 - Samara' },\n    { Value: 'Indian/Reunion', Text: '(UTC+04:00) Reunion' },\n    { Value: 'Asia/Tbilisi', Text: '(UTC+04:00) Tbilisi' },\n    { Value: 'Asia/Yerevan', Text: '(UTC+04:00) Yerevan' },\n    { Value: 'Asia/Kabul', Text: '(UTC+04:30) Kabul' },\n    { Value: 'Asia/Aqtau', Text: '(UTC+05:00) Aqtau' },\n    { Value: 'Asia/Aqtobe', Text: '(UTC+05:00) Aqtobe' },\n    { Value: 'Asia/Ashgabat', Text: '(UTC+05:00) Ashgabat' },\n    { Value: 'Asia/Dushanbe', Text: '(UTC+05:00) Dushanbe' },\n    { Value: 'Asia/Karachi', Text: '(UTC+05:00) Karachi' },\n    { Value: 'Indian/Kerguelen', Text: '(UTC+05:00) Kerguelen' },\n    { Value: 'Indian/Maldives', Text: '(UTC+05:00) Maldives' },\n    { Value: 'Antarctica/Mawson', Text: '(UTC+05:00) Mawson' },\n    { Value: 'Asia/Yekaterinburg', Text: '(UTC+05:00) Moscow+02 - Yekaterinburg' },\n    { Value: 'Asia/Tashkent', Text: '(UTC+05:00) Tashkent' },\n    { Value: 'Asia/Colombo', Text: '(UTC+05:30) Colombo' },\n    { Value: 'Asia/Kolkata', Text: '(UTC+05:30) India Standard Time' },\n    { Value: 'Asia/Katmandu', Text: '(UTC+05:45) Katmandu' },\n    { Value: 'Asia/Almaty', Text: '(UTC+06:00) Almaty' },\n    { Value: 'Asia/Bishkek', Text: '(UTC+06:00) Bishkek' },\n    { Value: 'Indian/Chagos', Text: '(UTC+06:00) Chagos' },\n    { Value: 'Asia/Dhaka', Text: '(UTC+06:00) Dhaka' },\n    { Value: 'Asia/Omsk', Text: '(UTC+06:00) Moscow+03 - Omsk' },\n    { Value: 'Asia/Thimphu', Text: '(UTC+06:00) Thimphu' },\n    { Value: 'Antarctica/Vostok', Text: '(UTC+06:00) Vostok' },\n    { Value: 'Indian/Cocos', Text: '(UTC+06:30) Cocos' },\n    { Value: 'Asia/Yangon', Text: '(UTC+06:30) Rangoon' },\n    { Value: 'Asia/Bangkok', Text: '(UTC+07:00) Bangkok' },\n    { Value: 'Indian/Christmas', Text: '(UTC+07:00) Christmas' },\n    { Value: 'Antarctica/Davis', Text: '(UTC+07:00) Davis' },\n    { Value: 'Asia/Saigon', Text: '(UTC+07:00) Hanoi' },\n    { Value: 'Asia/Hovd', Text: '(UTC+07:00) Hovd' },\n    { Value: 'Asia/Jakarta', Text: '(UTC+07:00) Jakarta' },\n    { Value: 'Asia/Krasnoyarsk', Text: '(UTC+07:00) Moscow+04 - Krasnoyarsk' },\n    { Value: 'Asia/Brunei', Text: '(UTC+08:00) Brunei' },\n    { Value: 'Asia/Shanghai', Text: '(UTC+08:00) China Time - Beijing' },\n    { Value: 'Asia/Choibalsan', Text: '(UTC+08:00) Choibalsan' },\n    { Value: 'Asia/Hong_Kong', Text: '(UTC+08:00) Hong Kong' },\n    { Value: 'Asia/Kuala_Lumpur', Text: '(UTC+08:00) Kuala Lumpur' },\n    { Value: 'Asia/Macau', Text: '(UTC+08:00) Macau' },\n    { Value: 'Asia/Makassar', Text: '(UTC+08:00) Makassar' },\n    { Value: 'Asia/Manila', Text: '(UTC+08:00) Manila' },\n    { Value: 'Asia/Irkutsk', Text: '(UTC+08:00) Moscow+05 - Irkutsk' },\n    { Value: 'Asia/Singapore', Text: '(UTC+08:00) Singapore' },\n    { Value: 'Asia/Taipei', Text: '(UTC+08:00) Taipei' },\n    { Value: 'Asia/Ulaanbaatar', Text: '(UTC+08:00) Ulaanbaatar' },\n    { Value: 'Australia/Perth', Text: '(UTC+08:00) Western Time - Perth' },\n    { Value: 'Asia/Pyongyang', Text: '(UTC+08:30) Pyongyang' },\n    { Value: 'Asia/Dili', Text: '(UTC+09:00) Dili' },\n    { Value: 'Asia/Jayapura', Text: '(UTC+09:00) Jayapura' },\n    { Value: 'Asia/Yakutsk', Text: '(UTC+09:00) Moscow+06 - Yakutsk' },\n    { Value: 'Pacific/Palau', Text: '(UTC+09:00) Palau' },\n    { Value: 'Asia/Seoul', Text: '(UTC+09:00) Seoul' },\n    { Value: 'Asia/Tokyo', Text: '(UTC+09:00) Tokyo' },\n    { Value: 'Australia/Darwin', Text: '(UTC+09:30) Central Time - Darwin' },\n    { Value: 'Antarctica/DumontDUrville', Text: '(UTC+10:00) Dumont D\"Urville' },\n    { Value: 'Australia/Brisbane', Text: '(UTC+10:00) Eastern Time - Brisbane' },\n    { Value: 'Pacific/Guam', Text: '(UTC+10:00) Guam' },\n    { Value: 'Asia/Vladivostok', Text: '(UTC+10:00) Moscow+07 - Vladivostok' },\n    { Value: 'Pacific/Port_Moresby', Text: '(UTC+10:00) Port Moresby' },\n    { Value: 'Pacific / Chuuk', Text: '(UTC+10:00) Truk' },\n    { Value: 'Australia/Adelaide', Text: '(UTC+10:30) Central Time - Adelaide' },\n    { Value: 'Antarctica/Casey', Text: '(UTC+11:00) Casey' },\n    { Value: 'Australia/Hobart', Text: '(UTC+11:00) Eastern Time - Hobart' },\n    { Value: 'Australia/Sydney', Text: '(UTC+11:00) Eastern Time - Melbourne, Sydney' },\n    { Value: 'Pacific/Efate', Text: '(UTC+11:00) Efate' },\n    { Value: 'Pacific/Guadalcanal', Text: '(UTC+11:00) Guadalcanal' },\n    { Value: 'Pacific/Kosrae', Text: '(UTC+11:00) Kosrae' },\n    { Value: 'Asia/Magadan', Text: '(UTC+11:00) Moscow+08 - Magadan' },\n    { Value: 'Pacific / Norfolk', Text: '(UTC+11:00) Norfolk' },\n    { Value: 'Pacific/Noumea', Text: '(UTC+11:00) Noumea' },\n    { Value: 'Pacific/Pohnpei', Text: '(UTC+11:00) Ponape' },\n    { Value: 'Pacific/Funafuti', Text: '(UTC+12:00) Funafuti' },\n    { Value: 'Pacific/Kwajalein', Text: '(UTC+12:00) Kwajalein' },\n    { Value: 'Pacific/Majuro', Text: '(UTC+12:00) Majuro' },\n    { Value: 'Asia/Kamchatka', Text: '(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy' },\n    { Value: 'Pacific / Nauru', Text: '(UTC+12:00) Nauru' },\n    { Value: 'Pacific/Tarawa', Text: '(UTC+12:00) Tarawa' },\n    { Value: 'Pacific/Wake', Text: '(UTC+12:00) Wake' },\n    { Value: 'Pacific/Wallis', Text: '(UTC+12:00) Wallis' },\n    { Value: 'Pacific/Auckland', Text: '(UTC+13:00) Auckland' },\n    { Value: 'Pacific/Enderbury', Text: '(UTC+13:00) Enderbury' },\n    { Value: 'Pacific/Fakaofo', Text: '(UTC+13:00) Fakaofo' },\n    { Value: 'Pacific/Fiji', Text: '(UTC+13:00) Fiji' },\n    { Value: 'Pacific/Tongatapu', Text: '(UTC+13:00) Tongatapu' },\n    { Value: 'Pacific/Apia', Text: '(UTC+14:00) Apia' },\n    { Value: 'Pacific/Kiritimati', Text: '(UTC+14:00) Kiritimati' }\n];\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable max-len */\nimport { isNullOrUndefined, closest, extend, EventHandler } from '@syncfusion/ej2-base';\nimport { createElement, prepend, append, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Predicate } from '@syncfusion/ej2-data';\nimport { generate, getDateFromRecurrenceDateString } from '../../recurrence-editor/date-generator';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\n/**\n * EventBase for appointment rendering\n */\nvar EventBase = /** @class */ (function () {\n    /**\n     * Constructor for EventBase\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function EventBase(parent) {\n        this.slots = [];\n        this.isDoubleTapped = false;\n        this.parent = parent;\n    }\n    EventBase.prototype.processData = function (events, timeZonePropChanged, oldTimezone) {\n        var _this = this;\n        var start = this.parent.activeView.startDate();\n        var end = this.parent.activeView.endDate();\n        var fields = this.parent.eventFields;\n        var processed = [];\n        var temp = 1;\n        var generateID = false;\n        var resourceCollection = this.parent.resourceBase ? this.parent.resourceBase.resourceCollection : [];\n        if (events.length > 0 && isNullOrUndefined(events[0][fields.id])) {\n            generateID = true;\n        }\n        var _loop_1 = function (event_1) {\n            if (generateID) {\n                event_1[fields.id] = temp++;\n            }\n            if (typeof event_1[fields.startTime] === 'string') {\n                event_1[fields.startTime] = util.getDateFromString(event_1[fields.startTime]);\n            }\n            if (typeof event_1[fields.endTime] === 'string') {\n                event_1[fields.endTime] = util.getDateFromString(event_1[fields.endTime]);\n            }\n            if (timeZonePropChanged) {\n                this_1.processTimezoneChange(event_1, oldTimezone);\n            }\n            else {\n                event_1 = this_1.processTimezone(event_1);\n            }\n            for (var level = 0; level < resourceCollection.length; level++) {\n                if (event_1[resourceCollection[level].field] === null || event_1[resourceCollection[level].field] === 0) {\n                    event_1[resourceCollection[level].field] = undefined;\n                }\n            }\n            if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && event_1[fields.recurrenceRule] === '') {\n                event_1[fields.recurrenceRule] = null;\n            }\n            if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && isNullOrUndefined(event_1[fields.recurrenceID]) &&\n                !(this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction)) {\n                processed = processed.concat(this_1.generateOccurrence(event_1, null, oldTimezone, true));\n            }\n            else {\n                if (this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction) {\n                    if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && isNullOrUndefined(event_1[fields.recurrenceID])) {\n                        var recurrenceEvent = this_1.generateOccurrence(event_1, null, oldTimezone, true);\n                        var _loop_2 = function (occurrence) {\n                            var app = this_1.parent.eventsProcessed.filter(function (data) {\n                                return data[fields.startTime].getTime() - occurrence[fields.startTime].getTime() === 0 &&\n                                    data[fields.id] === occurrence[fields.id];\n                            });\n                            occurrence.Guid = (app.length > 0) ? app[0].Guid : this_1.generateGuid();\n                            processed.push(occurrence);\n                        };\n                        for (var _i = 0, recurrenceEvent_1 = recurrenceEvent; _i < recurrenceEvent_1.length; _i++) {\n                            var occurrence = recurrenceEvent_1[_i];\n                            _loop_2(occurrence);\n                        }\n                    }\n                    else {\n                        var app = this_1.parent.eventsProcessed.filter(function (data) {\n                            return data[_this.parent.eventFields.id] === event_1[_this.parent.eventFields.id];\n                        });\n                        event_1.Guid = (app.length > 0) ? app[0].Guid : this_1.generateGuid();\n                        processed.push(event_1);\n                    }\n                }\n                else {\n                    event_1.Guid = this_1.generateGuid();\n                    processed.push(event_1);\n                }\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\n            var event_1 = events_1[_i];\n            _loop_1(event_1);\n        }\n        this.parent.eventsProcessed = [];\n        var eventData = processed.filter(function (data) {\n            return !data[_this.parent.eventFields.isBlock];\n        });\n        this.parent.eventsProcessed = this.filterEvents(start, end, eventData);\n        var blockData = processed.filter(function (data) {\n            return data[_this.parent.eventFields.isBlock];\n        });\n        for (var _a = 0, blockData_1 = blockData; _a < blockData_1.length; _a++) {\n            var eventObj = blockData_1[_a];\n            if (eventObj[fields.isAllDay]) {\n                var isDifferentDate = util.resetTime(new Date(eventObj[fields.startTime].getTime())) <\n                    util.resetTime(new Date(eventObj[fields.endTime].getTime()));\n                if (!isDifferentDate) {\n                    eventObj[fields.startTime] = util.resetTime(eventObj[fields.startTime]);\n                    eventObj[fields.endTime] = util.addDays(util.resetTime(eventObj[fields.endTime]), 1);\n                }\n            }\n        }\n        this.parent.blockProcessed = blockData;\n        return eventData;\n    };\n    EventBase.prototype.getProcessedEvents = function (eventCollection) {\n        if (eventCollection === void 0) { eventCollection = this.parent.eventsData; }\n        var processed = [];\n        for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n            var event_2 = eventCollection_1[_i];\n            if (!isNullOrUndefined(event_2[this.parent.eventFields.recurrenceRule]) &&\n                isNullOrUndefined(event_2[this.parent.eventFields.recurrenceID])) {\n                processed = processed.concat(this.generateOccurrence(event_2));\n            }\n            else {\n                processed.push(event_2);\n            }\n        }\n        return processed;\n    };\n    EventBase.prototype.timezonePropertyChange = function (oldTimezone) {\n        var data = this.parent.eventsData.concat(this.parent.blockData);\n        var processed = this.processData(data, true, oldTimezone);\n        this.parent.notify(event.dataReady, { processedData: processed });\n    };\n    EventBase.prototype.timezoneConvert = function (eventData) {\n        var fields = this.parent.eventFields;\n        eventData[fields.startTimezone] = eventData[fields.startTimezone] || eventData[fields.endTimezone];\n        eventData[fields.endTimezone] = eventData[fields.endTimezone] || eventData[fields.startTimezone];\n        if (this.parent.timezone) {\n            var startTz = eventData[fields.startTimezone];\n            var endTz = eventData[fields.endTimezone];\n            eventData[fields.startTime] = this.parent.tzModule.convert(eventData[fields.startTime], this.parent.timezone, startTz);\n            eventData[fields.endTime] = this.parent.tzModule.convert(eventData[fields.endTime], this.parent.timezone, endTz);\n        }\n    };\n    EventBase.prototype.processTimezoneChange = function (event, oldTimezone) {\n        var fields = this.parent.eventFields;\n        if (event[fields.isAllDay]) {\n            return;\n        }\n        if (oldTimezone && this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], oldTimezone, this.parent.timezone);\n            event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], oldTimezone, this.parent.timezone);\n        }\n        else if (!oldTimezone && this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);\n            event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);\n        }\n        else if (oldTimezone && !this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], oldTimezone);\n            event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], oldTimezone);\n        }\n    };\n    EventBase.prototype.processTimezone = function (event, isReverse) {\n        if (isReverse === void 0) { isReverse = false; }\n        var fields = this.parent.eventFields;\n        if (event[fields.startTimezone] || event[fields.endTimezone]) {\n            var startTimezone = event[fields.startTimezone] || event[fields.endTimezone];\n            var endTimezone = event[fields.endTimezone] || event[fields.startTimezone];\n            if (isReverse) {\n                if (this.parent.timezone) {\n                    event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);\n                    event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);\n                    event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);\n                    event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);\n                }\n                else {\n                    event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], startTimezone);\n                    event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], endTimezone);\n                }\n            }\n            else {\n                event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], startTimezone);\n                event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], endTimezone);\n                if (this.parent.timezone) {\n                    event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);\n                    event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);\n                }\n            }\n        }\n        else if (this.parent.timezone) {\n            if (isReverse) {\n                event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);\n                event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);\n            }\n            else {\n                event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);\n                event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);\n            }\n        }\n        return event;\n    };\n    EventBase.prototype.filterBlockEvents = function (eventObj) {\n        var eStart = eventObj[this.parent.eventFields.startTime];\n        var eEnd = eventObj[this.parent.eventFields.endTime];\n        var resourceData;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var data = this.getGroupIndexFromEvent(eventObj);\n            resourceData = this.parent.resourceBase.lastResourceLevel[data];\n        }\n        return this.filterEvents(eStart, eEnd, this.parent.blockProcessed, resourceData);\n    };\n    EventBase.prototype.filterEvents = function (startDate, endDate, appointments, resourceTdData) {\n        if (appointments === void 0) { appointments = this.parent.eventsProcessed; }\n        var fieldMapping = this.parent.eventFields;\n        var predicate = new Predicate(fieldMapping.startTime, 'greaterthanorequal', startDate).\n            and(new Predicate(fieldMapping.endTime, 'greaterthanorequal', startDate)).\n            and(new Predicate(fieldMapping.startTime, 'lessthan', endDate)).\n            or(new Predicate(fieldMapping.startTime, 'lessthanorequal', startDate).\n            and(new Predicate(fieldMapping.endTime, 'greaterthan', startDate)));\n        var filter = new DataManager({ json: appointments }).executeLocal(new Query().where(predicate));\n        if (resourceTdData) {\n            filter = this.filterEventsByResource(resourceTdData, filter);\n        }\n        return this.sortByTime(filter);\n    };\n    EventBase.prototype.filterEventsByRange = function (eventCollection, startDate, endDate) {\n        var _this = this;\n        var filteredEvents = [];\n        if (startDate && endDate) {\n            filteredEvents = this.filterEvents(startDate, endDate, eventCollection);\n        }\n        else if (startDate && !endDate) {\n            filteredEvents = eventCollection.filter(function (e) { return e[_this.parent.eventFields.startTime] >= startDate; });\n        }\n        else if (!startDate && endDate) {\n            filteredEvents = eventCollection.filter(function (e) { return e[_this.parent.eventFields.endTime] <= endDate; });\n        }\n        else {\n            filteredEvents = eventCollection;\n        }\n        return this.sortByTime(filteredEvents);\n    };\n    EventBase.prototype.filterEventsByResource = function (resourceTdData, appointments) {\n        if (appointments === void 0) { appointments = this.parent.eventsProcessed; }\n        var predicate = {};\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        for (var level = 0; level < resourceCollection.length; level++) {\n            predicate[resourceCollection[level].field] = resourceTdData.groupOrder[level];\n        }\n        var keys = Object.keys(predicate);\n        var filteredCollection = appointments.filter(function (eventObj) { return keys.every(function (key) {\n            if (eventObj[key] instanceof Array) {\n                return eventObj[key].indexOf(predicate[key]) > -1;\n            }\n            else {\n                return eventObj[key] === predicate[key];\n            }\n        }); });\n        return filteredCollection;\n    };\n    EventBase.prototype.sortByTime = function (appointments) {\n        var fieldMapping = this.parent.eventFields;\n        appointments.sort(function (a, b) {\n            var d1 = a[fieldMapping.startTime];\n            var d2 = b[fieldMapping.startTime];\n            return d1.getTime() - d2.getTime();\n        });\n        return appointments;\n    };\n    EventBase.prototype.sortByDateTime = function (appointments) {\n        var fieldMapping = this.parent.eventFields;\n        appointments.sort(function (object1, object2) {\n            var d3 = object1[fieldMapping.startTime];\n            var d4 = object2[fieldMapping.startTime];\n            var d5 = object1[fieldMapping.endTime];\n            var d6 = object2[fieldMapping.endTime];\n            var d1 = d5.getTime() - d3.getTime();\n            var d2 = d6.getTime() - d4.getTime();\n            return (d3.getTime() - d4.getTime() || d2 - d1);\n        });\n        return appointments;\n    };\n    EventBase.prototype.getSmallestMissingNumber = function (array) {\n        var large = Math.max.apply(Math, array);\n        for (var i = 0; i < large; i++) {\n            if (array.indexOf(i) === -1) {\n                return i;\n            }\n        }\n        return large + 1;\n    };\n    EventBase.prototype.splitEventByDay = function (event) {\n        var eventFields = this.parent.eventFields;\n        var data = [];\n        var eventStartTime = event[eventFields.startTime];\n        var eventEndTime = event[eventFields.endTime];\n        var isDifferentDate = util.resetTime(new Date(eventStartTime.getTime())) <\n            util.resetTime(new Date(eventEndTime.getTime()));\n        if (isDifferentDate) {\n            var start = new Date(eventStartTime.getTime());\n            var end = util.addDays(util.resetTime(new Date(eventStartTime.getTime())), 1);\n            var endDate = (eventEndTime.getHours() === 0 && eventEndTime.getMinutes() === 0) ?\n                eventEndTime : util.addDays(eventEndTime, 1);\n            var index = 1;\n            var eventLength = util.getDaysCount(eventStartTime.getTime(), endDate.getTime());\n            while (end <= eventEndTime && start.getTime() !== end.getTime()) {\n                var app = extend({}, event);\n                app[eventFields.startTime] = start;\n                app[eventFields.endTime] = end;\n                app.data = { index: index, count: eventLength };\n                app.Guid = this.generateGuid();\n                app.isSpanned = true;\n                data.push(app);\n                start = end;\n                if ((util.resetTime(new Date(start.getTime())).getTime() === util.resetTime(new Date(eventEndTime.getTime())).getTime())\n                    && !(end.getTime() === eventEndTime.getTime())) {\n                    end = new Date(start.getTime());\n                    end = new Date(end.setHours(eventEndTime.getHours(), eventEndTime.getMinutes(), eventEndTime.getSeconds()));\n                }\n                else {\n                    end = util.addDays(util.resetTime(new Date(start.getTime())), 1);\n                }\n                index++;\n            }\n        }\n        else {\n            data.push(event);\n        }\n        return data;\n    };\n    EventBase.prototype.splitEvent = function (event, dateRender) {\n        var fields = this.parent.eventFields;\n        var start = util.resetTime(new Date(event[fields.startTime] + '')).getTime();\n        var end = util.resetTime(new Date(event[fields.endTime] + '')).getTime();\n        if (util.getDateInMs(event[fields.endTime]) <= 0) {\n            var temp = util.addDays(util.resetTime(new Date(event[fields.endTime] + '')), -1).getTime();\n            end = start > temp ? start : temp;\n        }\n        var orgStart = start;\n        var orgEnd = end;\n        var ranges = [];\n        if (start !== end) {\n            if (start < dateRender[0].getTime()) {\n                start = dateRender[0].getTime();\n            }\n            if (end > dateRender[dateRender.length - 1].getTime()) {\n                end = dateRender[dateRender.length - 1].getTime();\n            }\n            var cStart = start;\n            for (var level = 0; level < this.slots.length; level++) {\n                var slot = this.slots[level];\n                if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek'\n                    || this.parent.activeViewOptions.group.byDate || this.parent.activeViewOptions.showWeekend) {\n                    var slotDates = [];\n                    for (var _i = 0, slot_1 = slot; _i < slot_1.length; _i++) {\n                        var s = slot_1[_i];\n                        slotDates.push(new Date(s));\n                    }\n                    var renderedDates = this.getRenderedDates(slotDates);\n                    if (!isNullOrUndefined(renderedDates) && renderedDates.length > 0) {\n                        slot = [];\n                        for (var _a = 0, renderedDates_1 = renderedDates; _a < renderedDates_1.length; _a++) {\n                            var date = renderedDates_1[_a];\n                            slot.push(date.getTime());\n                        }\n                    }\n                }\n                if (typeof (slot) === \"number\") {\n                    var temp = slot;\n                    slot = [];\n                    slot.push(temp);\n                }\n                var firstSlot = slot[0];\n                cStart = (cStart <= firstSlot && end >= firstSlot) ? firstSlot : cStart;\n                if (cStart > end || firstSlot > end) {\n                    break;\n                }\n                if (!this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.showWeekend &&\n                    this.parent.currentView !== 'WorkWeek' && this.parent.currentView !== 'TimelineWorkWeek') {\n                    var startIndex = slot.indexOf(cStart);\n                    if (startIndex !== -1) {\n                        var endIndex = slot.indexOf(end);\n                        var hasBreak = endIndex !== -1;\n                        endIndex = hasBreak ? endIndex : slot.length - 1;\n                        var count = ((endIndex - startIndex) + 1);\n                        var isLeft = (slot[startIndex] !== orgStart);\n                        var isRight = (slot[endIndex] !== orgEnd);\n                        ranges.push(this.cloneEventObject(event, slot[startIndex], slot[endIndex], count, isLeft, isRight));\n                        if (hasBreak) {\n                            break;\n                        }\n                    }\n                }\n                else {\n                    if (this.dateInRange(cStart, slot[0], slot[slot.length - 1])) {\n                        var availSlot = [];\n                        for (var i = 0; i < slot.length; i++) {\n                            if (this.dateInRange(slot[i], orgStart, orgEnd)) {\n                                availSlot.push(slot[i]);\n                            }\n                        }\n                        if (availSlot.length > 0) {\n                            if (!this.parent.activeViewOptions.group.byDate) {\n                                var isLeft = (availSlot[0] !== orgStart);\n                                var isRight = (availSlot[availSlot.length - 1] !== orgEnd);\n                                ranges.push(this.cloneEventObject(event, availSlot[0], availSlot[availSlot.length - 1], availSlot.length, isLeft, isRight));\n                            }\n                            else {\n                                for (var _b = 0, availSlot_1 = availSlot; _b < availSlot_1.length; _b++) {\n                                    var slot_2 = availSlot_1[_b];\n                                    ranges.push(this.cloneEventObject(event, slot_2, slot_2, 1, (slot_2 !== orgStart), (slot_2 !== orgEnd)));\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            ranges.push(this.cloneEventObject(event, start, end, 1, false, false));\n        }\n        return ranges;\n    };\n    EventBase.prototype.cloneEventObject = function (event, start, end, count, isLeft, isRight) {\n        var fields = this.parent.eventFields;\n        var e = extend({}, event, null, true);\n        var data = { count: count, isLeft: isLeft, isRight: isRight };\n        data[fields.startTime] = event[fields.startTime];\n        data[fields.endTime] = event[fields.endTime];\n        e.data = data;\n        e[fields.startTime] = new Date(start);\n        e[fields.endTime] = new Date(end);\n        return e;\n    };\n    EventBase.prototype.dateInRange = function (date, start, end) {\n        return start <= date && date <= end;\n    };\n    EventBase.prototype.getSelectedEventElements = function (target) {\n        this.removeSelectedAppointmentClass();\n        if (this.parent.selectedElements.length <= 0) {\n            this.parent.selectedElements.push(target);\n        }\n        else {\n            var isAlreadySelected = this.parent.selectedElements.filter(function (element) {\n                return element.getAttribute('data-guid') === target.getAttribute('data-guid');\n            });\n            if (isAlreadySelected.length <= 0) {\n                var elementSelector = 'div[data-guid=\"' + target.getAttribute('data-guid') + '\"]';\n                var focusElements = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n                for (var _i = 0, focusElements_1 = focusElements; _i < focusElements_1.length; _i++) {\n                    var element = focusElements_1[_i];\n                    this.parent.selectedElements.push(element);\n                }\n            }\n            else {\n                var selectedElements = this.parent.selectedElements.filter(function (element) {\n                    return element.getAttribute('data-guid') !== target.getAttribute('data-guid');\n                });\n                this.parent.selectedElements = selectedElements;\n            }\n        }\n        if (target && this.parent.selectedElements.length > 0) {\n            this.addSelectedAppointments(this.parent.selectedElements);\n        }\n        return this.parent.selectedElements;\n    };\n    EventBase.prototype.getSelectedEvents = function () {\n        var _this = this;\n        var eventSelect = [];\n        var elementSelect = [];\n        var selectAppointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_BORDER));\n        selectAppointments.filter(function (element) {\n            var isAlreadyAdded = eventSelect.filter(function (event) {\n                return event.Guid === element.getAttribute('data-guid');\n            });\n            if (isAlreadyAdded.length === 0) {\n                eventSelect.push(_this.getEventByGuid(element.getAttribute('data-guid')));\n            }\n            elementSelect.push(element);\n        });\n        return {\n            event: eventSelect.length > 1 ? eventSelect : eventSelect[0],\n            element: elementSelect.length > 1 ? elementSelect : elementSelect[0]\n        };\n    };\n    EventBase.prototype.removeSelectedAppointmentClass = function () {\n        var selectedAppointments = this.getSelectedAppointments();\n        for (var _i = 0, selectedAppointments_1 = selectedAppointments; _i < selectedAppointments_1.length; _i++) {\n            var appointment = selectedAppointments_1[_i];\n            appointment.setAttribute('aria-selected', 'false');\n        }\n        removeClass(selectedAppointments, cls.APPOINTMENT_BORDER);\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            removeClass(selectedAppointments, cls.AGENDA_SELECTED_CELL);\n        }\n    };\n    EventBase.prototype.addSelectedAppointments = function (cells) {\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            cell.setAttribute('aria-selected', 'true');\n        }\n        if (this.parent.currentView !== 'MonthAgenda') {\n            this.parent.removeSelectedClass();\n        }\n        addClass(cells, cls.APPOINTMENT_BORDER);\n    };\n    EventBase.prototype.getSelectedAppointments = function () {\n        return [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_BORDER + ',.' + cls.APPOINTMENT_CLASS + ':focus'));\n    };\n    EventBase.prototype.focusElement = function () {\n        if (this.parent.eventWindow.dialogObject && this.parent.eventWindow.dialogObject.visible) {\n            return;\n        }\n        var selectedCell = this.parent.getSelectedElements();\n        if (selectedCell.length > 0) {\n            if (this.parent.keyboardInteractionModule) {\n                var target = ((!isNullOrUndefined(this.parent.activeCellsData) &&\n                    this.parent.activeCellsData.element) || selectedCell[selectedCell.length - 1]);\n                this.parent.keyboardInteractionModule.selectCells(target instanceof Array, target);\n            }\n            return;\n        }\n        var selectedAppointments = this.getSelectedAppointments();\n        if (selectedAppointments.length > 0) {\n            selectedAppointments[selectedAppointments.length - 1].focus();\n            return;\n        }\n    };\n    EventBase.prototype.selectWorkCellByTime = function (eventsData) {\n        var target;\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            return target;\n        }\n        if (eventsData.length > 0) {\n            var selectedObject = eventsData[eventsData.length - 1];\n            var eventStartTime = selectedObject[this.parent.eventFields.startTime];\n            var nearestTime = new Date(+eventStartTime).setMinutes(0, 0, 0);\n            var isAllDay = this.isAllDayAppointment(selectedObject);\n            if (this.parent.currentView === 'Month' || isAllDay) {\n                nearestTime = new Date(+eventStartTime).setHours(0, 0, 0, 0);\n            }\n            var targetArea = void 0;\n            if (isAllDay && ['Day', 'Week', 'WorkWeek'].indexOf(this.parent.currentView) !== -1) {\n                targetArea = this.parent.getAllDayRow();\n            }\n            else {\n                targetArea = this.parent.getContentTable();\n            }\n            var queryString = '[data-date=\"' + new Date(nearestTime).getTime() + '\"]';\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                queryString += '[data-group-index=\"' + this.getGroupIndexFromEvent(selectedObject) + '\"]';\n            }\n            target = targetArea.querySelector(queryString);\n            if (target) {\n                this.parent.activeCellsData = this.parent.getCellDetails(target);\n                if (this.parent.keyboardInteractionModule) {\n                    this.parent.keyboardInteractionModule.selectCells(false, target);\n                }\n                return target;\n            }\n        }\n        return target;\n    };\n    EventBase.prototype.getGroupIndexFromEvent = function (eventData) {\n        var levelIndex;\n        var resource;\n        var levelName;\n        var idField;\n        for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n            var resourceData = eventData[this.parent.resourceBase.resourceCollection[i].field];\n            if (!isNullOrUndefined(resourceData)) {\n                resource = this.parent.resourceBase.resourceCollection[i];\n                levelIndex = i;\n                levelName = resource.name;\n                idField = resource.field;\n                break;\n            }\n        }\n        if (isNullOrUndefined(levelName) && isNullOrUndefined(levelIndex)) {\n            levelName = this.parent.resourceCollection.slice(-1)[0].name;\n            levelIndex = this.parent.resourceCollection.length - 1;\n            idField = this.parent.resourceCollection.slice(-1)[0].field;\n            resource = this.parent.resourceCollection.filter(function (e, index) {\n                if (e.name === levelName) {\n                    levelIndex = index;\n                    return e;\n                }\n                return null;\n            })[0];\n        }\n        var id = ((eventData[idField] instanceof Array) ?\n            eventData[idField][0] : eventData[idField]);\n        if (levelIndex > 0) {\n            var parentField = this.parent.resourceCollection[levelIndex - 1].field;\n            return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource, eventData, parentField);\n        }\n        else {\n            return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource);\n        }\n    };\n    EventBase.prototype.isAllDayAppointment = function (event) {\n        var fieldMapping = this.parent.eventFields;\n        var isAllDay = event[fieldMapping.isAllDay];\n        var isFullDay = ((event[fieldMapping.endTime].getTime() - event[fieldMapping.startTime].getTime())\n            / util.MS_PER_DAY) >= 1;\n        return (isAllDay || isFullDay) ? true : false;\n    };\n    EventBase.prototype.addEventListener = function () {\n        this.parent.on(event.documentClick, this.appointmentBorderRemove, this);\n    };\n    EventBase.prototype.appointmentBorderRemove = function (event) {\n        var element = event.event.target;\n        if (closest(element, '.' + cls.APPOINTMENT_CLASS)) {\n            if (this.parent.currentView !== 'MonthAgenda') {\n                this.parent.removeSelectedClass();\n            }\n        }\n        else if (!closest(element, '.' + cls.POPUP_OPEN)) {\n            this.removeSelectedAppointmentClass();\n        }\n    };\n    EventBase.prototype.wireAppointmentEvents = function (element, event, isPreventCrud) {\n        if (isPreventCrud === void 0) { isPreventCrud = false; }\n        var isReadOnly = (!isNullOrUndefined(event)) ? event[this.parent.eventFields.isReadonly] : false;\n        EventHandler.add(element, 'click', this.eventClick, this);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'touchstart', this.eventTouchClick, this);\n        }\n        if (!this.parent.isAdaptive && !this.parent.activeViewOptions.readonly && !isReadOnly) {\n            EventHandler.add(element, 'dblclick', this.eventDoubleClick, this);\n        }\n        if (!this.parent.activeViewOptions.readonly && !isReadOnly && !isPreventCrud) {\n            if (this.parent.resizeModule) {\n                this.parent.resizeModule.wireResizeEvent(element);\n            }\n            if (this.parent.dragAndDropModule) {\n                this.parent.dragAndDropModule.wireDragEvent(element);\n            }\n        }\n    };\n    EventBase.prototype.eventTouchClick = function (e) {\n        var _this = this;\n        setTimeout(function () { return _this.isDoubleTapped = false; }, 250);\n        e.preventDefault();\n        if (this.isDoubleTapped) {\n            this.eventDoubleClick(e);\n        }\n        else if (!this.isDoubleTapped) {\n            this.isDoubleTapped = true;\n            this.eventClick(e);\n        }\n    };\n    EventBase.prototype.renderResizeHandler = function (element, spanEvent, isReadOnly) {\n        if (!this.parent.resizeModule || !this.parent.allowResizing || this.parent.activeViewOptions.readonly || isReadOnly) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(spanEvent); _i < _a.length; _i++) {\n            var resizeEdge = _a[_i];\n            var resizeHandler = createElement('div', { className: cls.EVENT_RESIZE_CLASS });\n            switch (resizeEdge) {\n                case 'isLeft':\n                    if (!spanEvent.isLeft) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-left-right-resize' }));\n                        addClass([resizeHandler], this.parent.enableRtl ? cls.RIGHT_RESIZE_HANDLER : cls.LEFT_RESIZE_HANDLER);\n                        prepend([resizeHandler], element);\n                    }\n                    break;\n                case 'isRight':\n                    if (!spanEvent.isRight) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-left-right-resize' }));\n                        addClass([resizeHandler], this.parent.enableRtl ? cls.LEFT_RESIZE_HANDLER : cls.RIGHT_RESIZE_HANDLER);\n                        append([resizeHandler], element);\n                    }\n                    break;\n                case 'isTop':\n                    if (!spanEvent.isTop) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-top-bottom-resize' }));\n                        addClass([resizeHandler], cls.TOP_RESIZE_HANDLER);\n                        prepend([resizeHandler], element);\n                    }\n                    break;\n                case 'isBottom':\n                    if (!spanEvent.isBottom) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-top-bottom-resize' }));\n                        addClass([resizeHandler], cls.BOTTOM_RESIZE_HANDLER);\n                        append([resizeHandler], element);\n                    }\n                    break;\n            }\n        }\n    };\n    EventBase.prototype.eventClick = function (eventData) {\n        var _this = this;\n        var target = eventData.target;\n        if (target.classList.contains(cls.DRAG_CLONE_CLASS) || target.classList.contains(cls.RESIZE_CLONE_CLASS)) {\n            return;\n        }\n        if (eventData.ctrlKey && eventData.which === 1 && this.parent.keyboardInteractionModule) {\n            this.parent.quickPopup.quickPopup.hide();\n            this.parent.selectedElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_BORDER));\n            var target_1 = closest(eventData.target, '.' + cls.APPOINTMENT_CLASS);\n            this.getSelectedEventElements(target_1);\n            this.activeEventData(eventData, false);\n            var selectArgs = {\n                data: this.parent.activeEventData.event,\n                element: this.parent.activeEventData.element,\n                event: eventData, requestType: 'eventSelect'\n            };\n            this.parent.trigger(event.select, selectArgs);\n            var args = extend(this.parent.activeEventData, { cancel: false, originalEvent: eventData });\n            this.parent.trigger(event.eventClick, args);\n        }\n        else {\n            this.removeSelectedAppointmentClass();\n            this.activeEventData(eventData, true);\n            var selectEventArgs = {\n                data: this.parent.activeEventData.event,\n                element: this.parent.activeEventData.element,\n                event: eventData, requestType: 'eventSelect'\n            };\n            this.parent.trigger(event.select, selectEventArgs);\n            var args = extend(this.parent.activeEventData, { cancel: false, originalEvent: eventData });\n            this.parent.trigger(event.eventClick, args, function (eventClickArgs) {\n                if (eventClickArgs.cancel) {\n                    _this.removeSelectedAppointmentClass();\n                    if (_this.parent.quickPopup) {\n                        _this.parent.quickPopup.quickPopupHide();\n                    }\n                }\n                else {\n                    if (_this.parent.currentView === 'Agenda' || _this.parent.currentView === 'MonthAgenda') {\n                        addClass([_this.parent.activeEventData.element], cls.AGENDA_SELECTED_CELL);\n                    }\n                    if (_this.parent.allowInline) {\n                        var inlineArgs = {\n                            data: eventClickArgs.event,\n                            element: eventClickArgs.element,\n                            type: 'Event'\n                        };\n                        _this.parent.notify(event.inlineClick, inlineArgs);\n                    }\n                    else {\n                        _this.parent.notify(event.eventClick, eventClickArgs);\n                    }\n                }\n            });\n        }\n    };\n    EventBase.prototype.eventDoubleClick = function (e) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide(true);\n        }\n        if (e.type === 'touchstart') {\n            this.activeEventData(e, true);\n        }\n        this.removeSelectedAppointmentClass();\n        if (this.parent.activeEventData.element.classList.contains(cls.INLINE_APPOINTMENT_CLASS) ||\n            this.parent.activeEventData.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS)) {\n            return;\n        }\n        if (!isNullOrUndefined(this.parent.activeEventData.event) &&\n            isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceID])) {\n            this.parent.eventWindow.openEditor(this.parent.activeEventData.event, 'Save');\n        }\n        else {\n            this.parent.currentAction = 'EditOccurrence';\n            this.parent.quickPopup.openRecurrenceAlert();\n        }\n    };\n    EventBase.prototype.getEventByGuid = function (guid) {\n        return this.parent.eventsProcessed.filter(function (data) { return data.Guid === guid; })[0];\n    };\n    EventBase.prototype.getEventById = function (id) {\n        var _this = this;\n        return this.parent.eventsData.filter(function (data) {\n            return data[_this.parent.eventFields.id] === id;\n        })[0];\n    };\n    EventBase.prototype.generateGuid = function () {\n        return 'xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx'.replace(/[xy]/g, function (c) {\n            var r = Math.random() * 16 | 0;\n            var v = (c === 'x') ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    };\n    EventBase.prototype.getEventIDType = function () {\n        if (this.parent.eventsData.length !== 0) {\n            return typeof (this.parent.eventsData[0][this.parent.eventFields.id]);\n        }\n        if (this.parent.blockData.length !== 0) {\n            return typeof (this.parent.blockData[0][this.parent.eventFields.id]);\n        }\n        return 'string';\n    };\n    EventBase.prototype.getEventMaxID = function (resourceId) {\n        var _this = this;\n        if (this.parent.eventsData.length < 1 && this.parent.blockData.length < 1) {\n            return 1;\n        }\n        var eventId;\n        var idType = this.getEventIDType();\n        if (idType === 'string') {\n            eventId = this.generateGuid();\n        }\n        if (idType === 'number') {\n            var datas = this.parent.eventsData.concat(this.parent.blockData);\n            var maxId = Math.max.apply(Math, datas.map(function (event) { return event[_this.parent.eventFields.id]; }));\n            maxId = isNullOrUndefined(resourceId) ? maxId : maxId + resourceId;\n            eventId = maxId + 1;\n        }\n        return eventId;\n    };\n    EventBase.prototype.activeEventData = function (eventData, isMultiple) {\n        var _this = this;\n        var target = closest(eventData.target, '.' + cls.APPOINTMENT_CLASS);\n        var guid = target.getAttribute('data-guid');\n        if (isMultiple) {\n            this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]')));\n            target.focus();\n        }\n        var eventObject = this.getEventByGuid(guid);\n        if (eventObject && eventObject.isSpanned) {\n            eventObject = this.parent.eventsData.filter(function (obj) {\n                return obj[_this.parent.eventFields.id] === eventObject[_this.parent.eventFields.id];\n            })[0];\n        }\n        this.parent.activeEventData = { event: eventObject, element: target };\n    };\n    EventBase.prototype.generateOccurrence = function (event, viewDate, oldTimezone, isMaxCount) {\n        var startDate = event[this.parent.eventFields.startTime];\n        var endDate = event[this.parent.eventFields.endTime];\n        var eventRule = event[this.parent.eventFields.recurrenceRule];\n        var duration = endDate.getTime() - startDate.getTime();\n        viewDate = new Date((viewDate || this.parent.activeView.startDate()).getTime() - duration);\n        var exception = event[this.parent.eventFields.recurrenceException];\n        var maxCount;\n        if (this.parent.currentView !== 'Agenda' && isMaxCount) {\n            maxCount = util.getDateCount(this.parent.activeView.startDate(), this.parent.activeView.endDate()) + 1;\n        }\n        var newTimezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        var firstDay = this.parent.activeViewOptions.firstDayOfWeek;\n        var calendarMode = this.parent.calendarMode;\n        var dates = generate(startDate, eventRule, exception, firstDay, maxCount, viewDate, calendarMode, oldTimezone, newTimezone);\n        if (this.parent.currentView === 'Agenda' && eventRule.indexOf('COUNT') === -1 && eventRule.indexOf('UNTIL') === -1) {\n            if (isNullOrUndefined(event.generatedDates)) {\n                event.generatedDates = { start: new Date(dates[0]), end: new Date(dates[dates.length - 1]) };\n            }\n            else {\n                if (dates[0] < event.generatedDates.start.getTime()) {\n                    event.generatedDates.start = new Date(dates[0]);\n                }\n                if (dates[dates.length - 1] > event.generatedDates.end.getTime()) {\n                    event.generatedDates.end = new Date(dates[dates.length - 1]);\n                }\n            }\n        }\n        var occurrenceCollection = [];\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var date = dates_1[_i];\n            var clonedObject = extend({}, event, null, true);\n            clonedObject[this.parent.eventFields.startTime] = new Date(date);\n            clonedObject[this.parent.eventFields.endTime] = new Date(new Date(date).setMilliseconds(duration));\n            clonedObject[this.parent.eventFields.recurrenceID] = clonedObject[this.parent.eventFields.id];\n            delete clonedObject[this.parent.eventFields.recurrenceException];\n            delete clonedObject[this.parent.eventFields.followingID];\n            clonedObject.Guid = this.generateGuid();\n            occurrenceCollection.push(clonedObject);\n        }\n        return occurrenceCollection;\n    };\n    EventBase.prototype.getParentEvent = function (eventObj, isParent) {\n        if (isParent === void 0) { isParent = false; }\n        var parentEvent;\n        do {\n            eventObj = this.getFollowingEvent(eventObj);\n            if (eventObj) {\n                parentEvent = extend({}, eventObj, null, true);\n            }\n        } while (eventObj && isParent);\n        if (isParent && parentEvent) {\n            var collection = this.getEventCollections(parentEvent);\n            var followObj = collection.follow.slice(-1)[0];\n            if (collection.occurrence.length > 0 && !parentEvent[this.parent.eventFields.recurrenceException]) {\n                followObj = collection.occurrence.slice(-1)[0];\n            }\n            if (followObj) {\n                parentEvent[this.parent.eventFields.recurrenceRule] = followObj[this.parent.eventFields.recurrenceRule];\n            }\n        }\n        return parentEvent;\n    };\n    EventBase.prototype.getEventCollections = function (parentObj, childObj) {\n        var followingCollection = [];\n        var occurrenceCollection = [];\n        var followingEvent = parentObj;\n        do {\n            followingEvent = this.getFollowingEvent(followingEvent, true);\n            if (followingEvent) {\n                followingCollection.push(followingEvent);\n            }\n            occurrenceCollection = occurrenceCollection.concat(this.getOccurrenceEvent(followingEvent || parentObj));\n        } while (followingEvent);\n        var collections = {};\n        if (childObj) {\n            var fields_1 = this.parent.eventFields;\n            collections = {\n                follow: followingCollection.filter(function (eventData) {\n                    return eventData[fields_1.startTime] >= childObj[fields_1.startTime];\n                }),\n                occurrence: occurrenceCollection.filter(function (eventData) {\n                    return eventData[fields_1.startTime] >= childObj[fields_1.startTime];\n                })\n            };\n        }\n        else {\n            collections = { follow: followingCollection, occurrence: occurrenceCollection };\n        }\n        return collections;\n    };\n    EventBase.prototype.getFollowingEvent = function (parentObj, isReverse) {\n        var fields = this.parent.eventFields;\n        var fieldValue;\n        if (isReverse) {\n            fieldValue = parentObj[fields.id];\n        }\n        else {\n            fieldValue = (parentObj[fields.recurrenceID] || parentObj[fields.followingID]);\n        }\n        var parentApp = this.parent.eventsData.filter(function (data) {\n            return data[isReverse ? fields.followingID : fields.id] === fieldValue;\n        });\n        return parentApp.shift();\n    };\n    EventBase.prototype.isFollowingEvent = function (parentObj, childObj) {\n        var parentStart = parentObj[this.parent.eventFields.startTime];\n        var childStart = childObj[this.parent.eventFields.startTime];\n        return parentStart.getHours() === childStart.getHours() && parentStart.getMinutes() === childStart.getMinutes() &&\n            parentStart.getSeconds() === childStart.getSeconds();\n    };\n    EventBase.prototype.getOccurrenceEvent = function (eventObj, isGuid, isFollowing) {\n        if (isGuid === void 0) { isGuid = false; }\n        if (isFollowing === void 0) { isFollowing = false; }\n        var idField = isGuid ? 'Guid' : (isFollowing) ? this.parent.eventFields.followingID : this.parent.eventFields.recurrenceID;\n        var fieldKey = isGuid ? 'Guid' : this.parent.eventFields.id;\n        var dataSource = isGuid ? this.parent.eventsProcessed : this.parent.eventsData;\n        return dataSource.filter(function (data) { return data[idField] === eventObj[fieldKey]; });\n    };\n    EventBase.prototype.getOccurrencesByID = function (id) {\n        var fields = this.parent.eventFields;\n        var occurrenceCollection = [];\n        var parentObject = this.parent.eventsData.filter(function (obj) { return obj[fields.id] === id; });\n        for (var _i = 0, parentObject_1 = parentObject; _i < parentObject_1.length; _i++) {\n            var event_3 = parentObject_1[_i];\n            if (!isNullOrUndefined(event_3[fields.recurrenceRule])) {\n                occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event_3));\n            }\n        }\n        return occurrenceCollection;\n    };\n    EventBase.prototype.getOccurrencesByRange = function (startTime, endTime) {\n        var fields = this.parent.eventFields;\n        var occurrenceCollection = [];\n        for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n            var event_4 = _a[_i];\n            if (!isNullOrUndefined(event_4[fields.recurrenceRule])) {\n                occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event_4));\n            }\n        }\n        var filter = occurrenceCollection.filter(function (obj) {\n            return obj[fields.startTime] >= startTime && obj[fields.endTime] <= endTime && !isNullOrUndefined(obj[fields.recurrenceID]);\n        });\n        return filter;\n    };\n    EventBase.prototype.getDeletedOccurrences = function (recurrenceData) {\n        var fields = this.parent.eventFields;\n        var parentObject;\n        var deletedOccurrences = [];\n        if (typeof recurrenceData === 'string' || typeof recurrenceData === 'number') {\n            parentObject = this.parent.eventsData.filter(function (obj) {\n                return obj[fields.id] === recurrenceData;\n            })[0];\n        }\n        else {\n            parentObject = extend({}, recurrenceData, null, true);\n        }\n        if (parentObject[fields.recurrenceException]) {\n            var exDateString_1 = parentObject[fields.recurrenceException].split(',');\n            var _loop_3 = function (i, len) {\n                var edited = this_2.parent.eventsData.filter(function (eventObj) {\n                    return eventObj[fields.recurrenceID] === parentObject[fields.id] && eventObj[fields.recurrenceException] === exDateString_1[i];\n                });\n                if (edited.length === 0) {\n                    var exDate = getDateFromRecurrenceDateString(exDateString_1[i]);\n                    var childObject = extend({}, recurrenceData, null, true);\n                    childObject[fields.recurrenceID] = parentObject[fields.id];\n                    delete childObject[fields.followingID];\n                    childObject[fields.recurrenceException] = exDateString_1[i];\n                    var startDate = new Date(exDate.getTime());\n                    var time = parentObject[fields.endTime].getTime() - parentObject[fields.startTime].getTime();\n                    var endDate = new Date(startDate.getTime());\n                    endDate.setMilliseconds(time);\n                    childObject[fields.startTime] = new Date(startDate.getTime());\n                    childObject[fields.endTime] = new Date(endDate.getTime());\n                    deletedOccurrences.push(childObject);\n                }\n            };\n            var this_2 = this;\n            for (var i = 0, len = exDateString_1.length; i < len; i++) {\n                _loop_3(i, len);\n            }\n        }\n        return deletedOccurrences;\n    };\n    EventBase.prototype.applyResourceColor = function (element, data, type, index, alpha) {\n        if (!this.parent.resourceBase) {\n            return;\n        }\n        var alphaColor = function (color, alpha) {\n            color = color.replace('#', '');\n            var r = parseInt(color.substring(0, color.length / 3), 16);\n            var g = parseInt(color.substring(color.length / 3, 2 * color.length / 3), 16);\n            var b = parseInt(color.substring(2 * color.length / 3, 3 * color.length / 3), 16);\n            return \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + alpha + \")\";\n        };\n        // index refers groupOrder\n        var color = this.parent.resourceBase.getResourceColor(data, index);\n        if (color) {\n            element.style[type] = !isNullOrUndefined(alpha) ? alphaColor(color, alpha) : color;\n        }\n    };\n    EventBase.prototype.createBlockAppointmentElement = function (record, resIndex) {\n        var eventSubject = (record[this.parent.eventFields.subject] || this.parent.eventSettings.fields.subject.default);\n        var appointmentWrapper = createElement('div', {\n            className: cls.BLOCK_APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.parent.eventFields.id],\n                'aria-readonly': 'true', 'aria-selected': 'false'\n            }\n        });\n        var templateElement;\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = scheduleId + viewName + 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(record, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            var appointmentSubject = createElement('div', {\n                className: cls.SUBJECT_CLASS, innerHTML: eventSubject\n            });\n            templateElement = [appointmentSubject];\n        }\n        append(templateElement, appointmentWrapper);\n        this.setWrapperAttributes(appointmentWrapper, resIndex);\n        return appointmentWrapper;\n    };\n    EventBase.prototype.setWrapperAttributes = function (appointmentWrapper, resIndex) {\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n    };\n    EventBase.prototype.getReadonlyAttribute = function (event) {\n        return (event[this.parent.eventFields.isReadonly] || this.parent.readonly).toString();\n    };\n    EventBase.prototype.isBlockRange = function (eventData) {\n        var eventCollection = (eventData instanceof Array) ? eventData : [eventData];\n        var isBlockAlert = false;\n        var fields = this.parent.eventFields;\n        for (var _i = 0, _a = eventCollection; _i < _a.length; _i++) {\n            var event_5 = _a[_i];\n            var dataCol = [];\n            if (!isNullOrUndefined(event_5[fields.recurrenceRule]) &&\n                (isNullOrUndefined(event_5[fields.recurrenceID]) || event_5[fields.id] === event_5[fields.recurrenceID])) {\n                dataCol = this.generateOccurrence(event_5);\n            }\n            else {\n                dataCol.push(event_5);\n            }\n            for (var _b = 0, dataCol_1 = dataCol; _b < dataCol_1.length; _b++) {\n                var data = dataCol_1[_b];\n                var filterBlockEvents = this.filterBlockEvents(data);\n                if (filterBlockEvents.length > 0) {\n                    isBlockAlert = true;\n                    break;\n                }\n            }\n        }\n        this.parent.uiStateValues.isBlock = isBlockAlert;\n        return isBlockAlert;\n    };\n    EventBase.prototype.getFilterEventsList = function (dataSource, query) {\n        return new DataManager(dataSource).executeLocal(new Query().where(query));\n    };\n    EventBase.prototype.getSeriesEvents = function (parentEvent, startTime) {\n        var fields = this.parent.eventFields;\n        startTime = isNullOrUndefined(startTime) ? parentEvent[fields.startTime] : startTime;\n        var deleteFutureEditEvents;\n        var futureEvents;\n        var deleteFutureEditEventList = [];\n        var delId = parentEvent[fields.id];\n        var followingId = parentEvent[fields.followingID];\n        var deleteFutureEvent;\n        var startTimeQuery = this.parent.currentAction === 'EditSeries' ? 'greaterthan' : 'greaterthanorequal';\n        do {\n            deleteFutureEvent = ((new Predicate(fields.followingID, 'equal', delId))).\n                and(new Predicate(fields.startTime, startTimeQuery, startTime));\n            futureEvents = this.getFilterEventsList(this.parent.eventsData, deleteFutureEvent);\n            deleteFutureEditEvents = futureEvents.slice(-1)[0];\n            if (!isNullOrUndefined(deleteFutureEditEvents) && deleteFutureEditEvents[fields.id] !== followingId) {\n                deleteFutureEditEventList.push(deleteFutureEditEvents);\n                delId = deleteFutureEditEvents[fields.id];\n                followingId = deleteFutureEditEvents[fields.followingID];\n            }\n            else {\n                followingId = null;\n            }\n        } while (futureEvents.length === 1 && !isNullOrUndefined(deleteFutureEditEvents[fields.followingID]));\n        return deleteFutureEditEventList;\n    };\n    EventBase.prototype.getEditedOccurrences = function (deleteFutureEditEventList, startTime) {\n        var fields = this.parent.eventFields;\n        var deleteRecurrenceEventList = [];\n        var delEditedEvents;\n        for (var _i = 0, deleteFutureEditEventList_1 = deleteFutureEditEventList; _i < deleteFutureEditEventList_1.length; _i++) {\n            var event_6 = deleteFutureEditEventList_1[_i];\n            var delEventQuery = new Predicate(fields.recurrenceID, 'equal', event_6[fields.id]).\n                or(new Predicate(fields.recurrenceID, 'equal', event_6[fields.followingID]).\n                and(new Predicate(fields.recurrenceID, 'notequal', undefined)).\n                and(new Predicate(fields.recurrenceID, 'notequal', null)));\n            if (this.parent.currentAction === 'EditFollowingEvents' || this.parent.currentAction === 'DeleteFollowingEvents') {\n                delEventQuery = delEventQuery.and(new Predicate(fields.startTime, 'greaterthanorequal', startTime));\n            }\n            delEditedEvents = this.getFilterEventsList(this.parent.eventsData, delEventQuery);\n            deleteRecurrenceEventList = deleteRecurrenceEventList.concat(delEditedEvents);\n        }\n        return deleteRecurrenceEventList;\n    };\n    EventBase.prototype.getRenderedDates = function (dateRender) {\n        var firstDate = 0;\n        var lastDate = dateRender.length;\n        var filteredDates;\n        if (dateRender[0] < this.parent.minDate && dateRender[dateRender.length - 1] > this.parent.maxDate) {\n            for (var i = 0; i < dateRender.length; i++) {\n                if (util.resetTime(dateRender[i]).getTime() === util.resetTime(new Date(this.parent.minDate)).getTime()) {\n                    firstDate = i;\n                }\n                if (util.resetTime(dateRender[i]).getTime() === util.resetTime(new Date(this.parent.maxDate)).getTime()) {\n                    lastDate = i;\n                }\n            }\n            filteredDates = dateRender.filter(function (date) { return date >= dateRender[firstDate] && date <= dateRender[lastDate]; });\n        }\n        return filteredDates;\n    };\n    EventBase.prototype.isValidEvent = function (eventObj, start, end, schedule) {\n        var isHourRange = end.getTime() > schedule.startHour.getTime() && start.getTime() < schedule.endHour.getTime();\n        var isSameRange = schedule.startHour.getTime() <= start.getTime() &&\n            eventObj[this.parent.eventFields.startTime].getTime() >= schedule.startHour.getTime() &&\n            eventObj[this.parent.eventFields.endTime].getTime() < schedule.endHour.getTime() && start.getTime() === end.getTime();\n        return isHourRange || isSameRange;\n    };\n    return EventBase;\n}());\nexport { EventBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, extend, EventHandler, prepend, Animation, formatUnit } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { EventBase } from './event-base';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Vertical view appointment rendering\n */\nvar VerticalEvent = /** @class */ (function (_super) {\n    __extends(VerticalEvent, _super);\n    function VerticalEvent(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dateRender = [];\n        _this.renderedEvents = [];\n        _this.renderedAllDayEvents = [];\n        _this.overlapEvents = [];\n        _this.moreEvents = [];\n        _this.overlapList = [];\n        _this.allDayEvents = [];\n        _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n        _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n        _this.allDayLevel = 0;\n        _this.startHour = _this.parent.activeView.getStartHour();\n        _this.endHour = _this.parent.activeView.getEndHour();\n        _this.element = _this.parent.activeView.getPanel();\n        _this.fields = _this.parent.eventFields;\n        _this.animation = new Animation({ progress: _this.animationUiUpdate.bind(_this) });\n        _this.addEventListener();\n        return _this;\n    }\n    VerticalEvent.prototype.renderAppointments = function () {\n        var wrapperElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS +\n            ',.' + cls.APPOINTMENT_CLASS + ',.' + cls.ROW_COUNT_WRAPPER_CLASS));\n        var isDragging = (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) ? true : false;\n        for (var _i = 0, wrapperElements_1 = wrapperElements; _i < wrapperElements_1.length; _i++) {\n            var wrapper = wrapperElements_1[_i];\n            if (isDragging && !(wrapper.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) ||\n                wrapper.classList.contains(cls.ROW_COUNT_WRAPPER_CLASS))) {\n                var groupIndex = parseInt(wrapper.getAttribute('data-group-index'), 10);\n                for (var j = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; j < len; j++) {\n                    if (groupIndex === this.parent.crudModule.crudObj.sourceEvent[j].groupIndex ||\n                        groupIndex === this.parent.crudModule.crudObj.targetEvent[j].groupIndex) {\n                        remove(wrapper);\n                    }\n                }\n            }\n            else {\n                remove(wrapper);\n            }\n        }\n        if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n            return;\n        }\n        this.allDayElement = [].slice.call(this.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS));\n        this.setAllDayRowHeight(0);\n        if (this.parent.eventsProcessed.length === 0 && this.parent.blockProcessed.length === 0) {\n            return;\n        }\n        var expandCollapse = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        EventHandler.remove(expandCollapse, 'click', this.rowExpandCollapse);\n        EventHandler.add(expandCollapse, 'click', this.rowExpandCollapse, this);\n        this.renderedEvents = [];\n        this.renderedAllDayEvents = [];\n        this.initializeValues();\n        this.processBlockEvents();\n        this.renderEvents('normalEvents');\n        if (this.allDayEvents.length > 0) {\n            this.allDayEvents = this.allDayEvents.filter(function (item, index, arr) {\n                return index === arr.map(function (item) { return item.Guid; }).indexOf(item.Guid);\n            });\n            removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n            this.slots.push(this.parent.activeView.renderDates.map(function (date) { return +date; }));\n            this.renderEvents('allDayEvents');\n        }\n        this.parent.notify(events.contentReady, {});\n        addClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n        if (isDragging) {\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        this.parent.renderTemplates();\n    };\n    VerticalEvent.prototype.initializeValues = function () {\n        this.resources = (this.parent.activeViewOptions.group.resources.length > 0) ? this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.lastResourceLevel : [];\n        this.cellHeight =\n            parseFloat(this.parent.element.querySelector('.e-content-wrap tbody tr').getBoundingClientRect().height.toFixed(2));\n        this.dateRender[0] = this.parent.activeView.renderDates;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            for (var i = 0, len = this.resources.length; i < len; i++) {\n                this.dateRender[i] = this.resources[i].renderDates;\n            }\n        }\n    };\n    VerticalEvent.prototype.getHeight = function (start, end) {\n        var appHeight = (end.getTime() - start.getTime()) / (60 * 1000) * (this.cellHeight * this.slotCount) / this.interval;\n        appHeight = (appHeight <= 0) ? this.cellHeight : appHeight;\n        return appHeight;\n    };\n    VerticalEvent.prototype.appendEvent = function (eventObj, appointmentElement, index, appLeft) {\n        var appointmentWrap = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n        if (this.parent.enableRtl) {\n            setStyleAttribute(appointmentElement, { 'right': appLeft });\n        }\n        else {\n            setStyleAttribute(appointmentElement, { 'left': appLeft });\n        }\n        var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        var args = {\n            data: extend({}, eventObj, null, true),\n            element: appointmentElement, cancel: false, type: eventType\n        };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                appointmentWrap[index].appendChild(appointmentElement);\n            }\n        });\n    };\n    VerticalEvent.prototype.processBlockEvents = function () {\n        var resources = this.getResourceList();\n        var dateCount = 0;\n        for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n            var resource = resources_1[_i];\n            var renderDates = this.dateRender[resource];\n            for (var day = 0, length_1 = renderDates.length; day < length_1; day++) {\n                var startDate = new Date(renderDates[day].getTime());\n                var endDate = util.addDays(renderDates[day], 1);\n                var filterEvents = this.filterEvents(startDate, endDate, this.parent.blockProcessed, this.resources[resource]);\n                for (var _a = 0, filterEvents_1 = filterEvents; _a < filterEvents_1.length; _a++) {\n                    var event_1 = filterEvents_1[_a];\n                    if (this.parent.resourceBase) {\n                        this.setValues(event_1, resource);\n                    }\n                    this.renderBlockEvents(event_1, day, resource, dateCount);\n                    this.cssClass = null;\n                    this.groupOrder = null;\n                }\n                dateCount += 1;\n            }\n        }\n    };\n    VerticalEvent.prototype.renderBlockEvents = function (eventObj, dayIndex, resource, dayCount) {\n        var spannedData = this.isSpannedEvent(eventObj, dayIndex, resource);\n        var eStart = spannedData[this.fields.startTime];\n        var eEnd = spannedData[this.fields.endTime];\n        var currentDate = util.resetTime(new Date(this.dateRender[resource][dayIndex].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        if (eStart <= eEnd && this.isValidEvent(eventObj, eStart, eEnd, schedule)) {\n            var blockTop = void 0;\n            var blockHeight = void 0;\n            if (spannedData[this.fields.isAllDay]) {\n                var contentWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n                blockHeight = formatUnit(contentWrap.offsetHeight);\n                blockTop = formatUnit(0);\n            }\n            else {\n                blockHeight = formatUnit(this.getHeight(eStart, eEnd));\n                blockTop = formatUnit(this.getTopValue(eStart, dayIndex, resource));\n            }\n            var appointmentElement = this.createBlockAppointmentElement(eventObj, resource);\n            setStyleAttribute(appointmentElement, { 'width': '100%', 'height': blockHeight, 'top': blockTop });\n            var index = this.parent.activeViewOptions.group.byDate ? (this.resources.length * dayIndex) + resource : dayCount;\n            this.appendEvent(eventObj, appointmentElement, index, '0px');\n        }\n    };\n    VerticalEvent.prototype.renderEvents = function (eventType) {\n        removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n        var eventCollection = (eventType === 'allDayEvents') ? this.sortByDateTime(this.allDayEvents) : undefined;\n        var resources = this.getResourceList();\n        var dateCount = 0;\n        var isRender;\n        var _loop_1 = function (resource) {\n            isRender = true;\n            if (this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction && eventType !== 'allDayEvents') {\n                if (this_1.parent.crudModule.crudObj.sourceEvent.filter(function (data) { return data.groupIndex === resource; }).length === 0 &&\n                    this_1.parent.crudModule.crudObj.targetEvent.filter(function (data) { return data.groupIndex === resource; }).length === 0) {\n                    isRender = false;\n                }\n            }\n            this_1.slots = [];\n            var renderDates = this_1.dateRender[resource];\n            var renderedDate = this_1.getRenderedDates(renderDates) || renderDates;\n            this_1.slots.push(renderDates.map(function (date) { return +date; }));\n            for (var day = 0, length_2 = renderDates.length; day < length_2 &&\n                renderDates[day] <= renderedDate[renderedDate.length - 1]; day++) {\n                this_1.renderedEvents = [];\n                var startDate = new Date(renderDates[day].getTime());\n                var endDate = util.addDays(renderDates[day], 1);\n                var filterEvents = this_1.filterEvents(startDate, endDate, eventCollection, this_1.resources[resource]);\n                if (isRender) {\n                    for (var _i = 0, filterEvents_2 = filterEvents; _i < filterEvents_2.length; _i++) {\n                        var event_2 = filterEvents_2[_i];\n                        if (this_1.parent.resourceBase) {\n                            this_1.setValues(event_2, resource);\n                        }\n                        if (eventType === 'allDayEvents') {\n                            this_1.renderAllDayEvents(event_2, day, resource, dateCount);\n                        }\n                        else {\n                            if (this_1.isAllDayAppointment(event_2)) {\n                                this_1.allDayEvents.push(extend({}, event_2, null, true));\n                            }\n                            else {\n                                if (this_1.parent.eventSettings.enableMaxHeight) {\n                                    if (this_1.getOverlapIndex(event_2, day, false, resource) > 0) {\n                                        continue;\n                                    }\n                                }\n                                this_1.renderNormalEvents(event_2, day, resource, dateCount);\n                            }\n                        }\n                        this_1.cssClass = null;\n                        this_1.groupOrder = null;\n                    }\n                }\n                else {\n                    for (var _a = 0, filterEvents_3 = filterEvents; _a < filterEvents_3.length; _a++) {\n                        var event_3 = filterEvents_3[_a];\n                        if (this_1.isAllDayAppointment(event_3)) {\n                            this_1.allDayEvents.push(extend({}, event_3, null, true));\n                        }\n                    }\n                }\n                dateCount += 1;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, resources_2 = resources; _i < resources_2.length; _i++) {\n            var resource = resources_2[_i];\n            _loop_1(resource);\n        }\n    };\n    VerticalEvent.prototype.setValues = function (event, resourceIndex) {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.cssClass = this.resources[resourceIndex].cssClass;\n            this.groupOrder = this.resources[resourceIndex].groupOrder;\n        }\n        else {\n            this.cssClass = this.parent.resourceBase.getCssClass(event);\n        }\n    };\n    VerticalEvent.prototype.getResourceList = function () {\n        // eslint-disable-next-line prefer-spread\n        var resources = Array.apply(null, {\n            length: (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) ?\n                this.resources.length : 1\n        }).map(function (value, index) { return index; });\n        return resources;\n    };\n    // eslint-disable-next-line max-len\n    VerticalEvent.prototype.createAppointmentElement = function (record, isAllDay, data, resource) {\n        var fieldMapping = this.parent.eventFields;\n        var recordSubject = (record[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        var appointmentWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[fieldMapping.id],\n                'data-guid': record.Guid,\n                'role': 'button',\n                'tabindex': '0',\n                'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record),\n                'aria-selected': 'false',\n                'aria-grabbed': 'true',\n                'aria-label': this.parent.getAnnocementString(record)\n            }\n        });\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resourceIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n            appointmentWrapper.setAttribute('data-group-index', resourceIndex.toString());\n        }\n        var templateElement;\n        var eventData = data;\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var elementId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = elementId + viewName + 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(record, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            var appointmentSubject = createElement('div', { className: cls.SUBJECT_CLASS, innerHTML: recordSubject });\n            if (isAllDay) {\n                if (record[fieldMapping.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    var appointmentStartTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.startTime])\n                    });\n                    var appointmentEndTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.endTime])\n                    });\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                var timeStr = this.parent.getTimeString(record[fieldMapping.startTime]) + ' - ' +\n                    this.parent.getTimeString(record[fieldMapping.endTime]);\n                var appointmentTime = createElement('div', {\n                    className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                    innerHTML: timeStr\n                });\n                var appointmentLocation = createElement('div', {\n                    className: cls.LOCATION_CLASS,\n                    innerHTML: (record[fieldMapping.location] || this.parent.eventSettings.fields.location.default || '')\n                });\n                templateElement = [appointmentSubject, appointmentTime, appointmentLocation];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        if (!this.parent.isAdaptive &&\n            (!isNullOrUndefined(record[fieldMapping.recurrenceRule]) || !isNullOrUndefined(record[fieldMapping.recurrenceID]))) {\n            var iconClass = (record[fieldMapping.id] === record[fieldMapping.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            var recurrenceIcon = createElement('div', { className: cls.ICON + ' ' + iconClass });\n            if (isAllDay) {\n                appointmentDetails.appendChild(recurrenceIcon);\n            }\n            else {\n                appointmentWrapper.appendChild(recurrenceIcon);\n            }\n        }\n        this.renderSpannedIcon(isAllDay ? appointmentDetails : appointmentWrapper, eventData);\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        this.applyResourceColor(appointmentWrapper, record, 'backgroundColor', this.groupOrder);\n        this.renderResizeHandler(appointmentWrapper, eventData, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    };\n    VerticalEvent.prototype.createMoreIndicator = function (allDayRow, count, currentDay) {\n        var index = currentDay + count;\n        var countWrapper = allDayRow[index];\n        if (countWrapper.childElementCount <= 0) {\n            var innerCountWrap = createElement('div', {\n                className: cls.ROW_COUNT_WRAPPER_CLASS,\n                id: cls.ROW_COUNT_WRAPPER_CLASS + '-' + index.toString()\n            });\n            var moreIndicatorElement = createElement('div', {\n                className: cls.MORE_INDICATOR_CLASS,\n                attrs: { 'tabindex': '0', 'role': 'list', 'data-index': index.toString(), 'data-count': '1' },\n                innerHTML: '+1&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'))\n            });\n            innerCountWrap.appendChild(moreIndicatorElement);\n            countWrapper.appendChild(innerCountWrap);\n            EventHandler.add(moreIndicatorElement, 'click', this.rowExpandCollapse, this);\n        }\n        else {\n            var countCell = countWrapper.querySelector('.' + cls.MORE_INDICATOR_CLASS);\n            var moreCount = parseInt(countCell.getAttribute('data-count'), 10) + 1;\n            countCell.setAttribute('data-count', moreCount.toString());\n            countCell.innerHTML = '+' + moreCount + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n        }\n    };\n    VerticalEvent.prototype.renderSpannedIcon = function (element, spanEvent) {\n        var iconElement = createElement('div', { className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON });\n        if (spanEvent.isLeft) {\n            var iconLeft = iconElement.cloneNode();\n            addClass([iconLeft], cls.EVENT_ICON_LEFT_CLASS);\n            prepend([iconLeft], element);\n        }\n        if (spanEvent.isRight) {\n            var iconRight = iconElement.cloneNode();\n            addClass([iconRight], cls.EVENT_ICON_RIGHT_CLASS);\n            append([iconRight], element);\n        }\n        if (spanEvent.isTop) {\n            var iconTop = iconElement.cloneNode();\n            addClass([iconTop], cls.EVENT_ICON_UP_CLASS);\n            prepend([iconTop], element);\n        }\n        if (spanEvent.isBottom) {\n            var iconBottom = iconElement.cloneNode();\n            addClass([iconBottom], cls.EVENT_ICON_DOWN_CLASS);\n            append([iconBottom], element);\n        }\n    };\n    VerticalEvent.prototype.isSpannedEvent = function (record, day, resource) {\n        var currentDate = util.resetTime(this.dateRender[resource][day]);\n        var renderedDate = this.getRenderedDates(this.dateRender[resource]) || [currentDate];\n        var currentDay = renderedDate.filter(function (date) { return date.getDay() === day; });\n        if (currentDay.length === 0) {\n            currentDate = util.resetTime(renderedDate[0]);\n        }\n        var fieldMapping = this.parent.eventFields;\n        var startEndHours = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var event = extend({}, record, null, true);\n        event.isSpanned = { isBottom: false, isTop: false };\n        if (record[fieldMapping.startTime].getTime() < startEndHours.startHour.getTime()) {\n            event[fieldMapping.startTime] = startEndHours.startHour;\n            event.isSpanned.isTop = true;\n        }\n        if (record[fieldMapping.endTime].getTime() > startEndHours.endHour.getTime()) {\n            event[fieldMapping.endTime] = startEndHours.endHour;\n            event.isSpanned.isBottom = true;\n        }\n        return event;\n    };\n    VerticalEvent.prototype.renderAllDayEvents = function (eventObj, dayIndex, resource, dayCount, inline) {\n        var _this = this;\n        var currentDates = this.getRenderedDates(this.dateRender[resource]) || this.dateRender[resource];\n        if (this.parent.activeViewOptions.group.byDate) {\n            this.slots[0] = [this.dateRender[resource][dayIndex].getTime()];\n            currentDates = [this.dateRender[resource][dayIndex]];\n        }\n        var record = this.splitEvent(eventObj, currentDates)[0];\n        var allDayRowCell = this.element.querySelector('.' + cls.ALLDAY_CELLS_CLASS + ':first-child');\n        var cellTop = allDayRowCell.offsetTop;\n        var eStart = new Date(record[this.parent.eventFields.startTime].getTime());\n        var eEnd = new Date(record[this.parent.eventFields.endTime].getTime());\n        var appWidth = 0;\n        var topValue = 1;\n        var isDateRange = currentDates[0].getTime() <= eStart.getTime() &&\n            util.addDays(currentDates.slice(-1)[0], 1).getTime() >= eStart.getTime();\n        if (eStart <= eEnd && isDateRange) {\n            var isAlreadyRendered = [];\n            if (this.renderedAllDayEvents[resource]) {\n                isAlreadyRendered = this.renderedAllDayEvents[resource].filter(function (event) {\n                    return event.Guid === eventObj.Guid;\n                });\n                if (this.parent.activeViewOptions.group.byDate) {\n                    isAlreadyRendered = isAlreadyRendered.filter(function (event) {\n                        return event[_this.parent.eventFields.startTime] >= currentDates[dayIndex] &&\n                            event[_this.parent.eventFields.endTime] <= util.addDays(new Date(+currentDates[dayIndex]), 1);\n                    });\n                }\n            }\n            if (isAlreadyRendered.length === 0) {\n                var allDayDifference_1 = record.data.count;\n                var allDayIndex_1 = this.getOverlapIndex(record, dayIndex, true, resource);\n                record.Index = allDayIndex_1;\n                this.allDayLevel = (this.allDayLevel < allDayIndex_1) ? allDayIndex_1 : this.allDayLevel;\n                var widthAdjustment = record.data.isRight ? 0 :\n                    this.parent.currentView === 'Day' ? 4 : 7;\n                if (allDayDifference_1 >= 0) {\n                    appWidth = (allDayDifference_1 * 100) - widthAdjustment;\n                }\n                if (isNullOrUndefined(this.renderedAllDayEvents[resource])) {\n                    this.renderedAllDayEvents[resource] = [];\n                }\n                this.renderedAllDayEvents[resource].push(extend({}, record, null, true));\n                var allDayRow_1 = [].slice.call(this.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).children);\n                var wIndex_1 = this.parent.activeViewOptions.group.byDate ?\n                    (this.resources.length * dayIndex) + resource : dayCount;\n                var eventWrapper_1 = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS +\n                    ':nth-child(' + (wIndex_1 + 1) + ')');\n                var appointmentElement_1;\n                if (inline) {\n                    appointmentElement_1 = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n                }\n                else {\n                    appointmentElement_1 = this.createAppointmentElement(eventObj, true, record.data, resource);\n                }\n                addClass([appointmentElement_1], cls.ALLDAY_APPOINTMENT_CLASS);\n                var args = { data: eventObj, element: appointmentElement_1, cancel: false };\n                this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        eventWrapper_1.appendChild(appointmentElement_1);\n                        var appHeight = appointmentElement_1.offsetHeight;\n                        topValue += (allDayIndex_1 === 0 ? cellTop : (cellTop + (allDayIndex_1 * appHeight))) + 1;\n                        setStyleAttribute(appointmentElement_1, { 'width': appWidth + '%', 'top': formatUnit(topValue) });\n                        if (allDayIndex_1 > 1) {\n                            _this.moreEvents.push(appointmentElement_1);\n                            for (var count = 0, length_3 = allDayDifference_1; count < length_3; count++) {\n                                _this.createMoreIndicator(allDayRow_1, count, wIndex_1);\n                            }\n                        }\n                        allDayRowCell.setAttribute('data-count', _this.allDayLevel.toString());\n                        var allDayRowHeight = ((!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) ?\n                            (3 * appHeight) : ((_this.allDayLevel + 1) * appHeight)) + 4;\n                        _this.setAllDayRowHeight(allDayRowHeight);\n                        _this.addOrRemoveClass();\n                        _this.wireAppointmentEvents(appointmentElement_1, eventObj);\n                    }\n                });\n            }\n        }\n    };\n    VerticalEvent.prototype.renderNormalEvents = function (eventObj, dayIndex, resource, dayCount, inline) {\n        var record = this.isSpannedEvent(eventObj, dayIndex, resource);\n        var eStart = record[this.fields.startTime];\n        var eEnd = record[this.fields.endTime];\n        var appWidth = '0%';\n        var appLeft = '0%';\n        var topValue = 0;\n        var currentDate = util.resetTime(new Date(this.dateRender[resource][dayIndex].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var isValidEvent = this.isValidEvent(eventObj, eStart, eEnd, schedule);\n        if (eStart <= eEnd && isValidEvent) {\n            var appHeight = this.getHeight(eStart, eEnd);\n            if (eStart.getTime() > schedule.startHour.getTime()) {\n                topValue = this.getTopValue(eStart, dayIndex, resource);\n            }\n            var appIndex = this.getOverlapIndex(record, dayIndex, false, resource);\n            record.Index = appIndex;\n            this.overlapList.push(record);\n            if (this.overlapList.length > 1) {\n                if (isNullOrUndefined(this.overlapEvents[appIndex])) {\n                    this.overlapEvents[appIndex] = [];\n                }\n                this.overlapEvents[appIndex].push(record);\n            }\n            else {\n                this.overlapEvents = [];\n                this.overlapEvents.push([record]);\n            }\n            appWidth = this.getEventWidth();\n            var argsData = {\n                index: appIndex, left: appLeft, width: appWidth,\n                day: dayIndex, dayIndex: dayCount, record: record, resource: resource\n            };\n            var tempData = this.adjustOverlapElements(argsData);\n            appWidth = (tempData.appWidth);\n            if (isNullOrUndefined(this.renderedEvents[resource])) {\n                this.renderedEvents[resource] = [];\n            }\n            this.renderedEvents[resource].push(extend({}, record, null, true));\n            var appointmentElement_2;\n            if (inline) {\n                appointmentElement_2 = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n            }\n            else {\n                appointmentElement_2 = this.createAppointmentElement(eventObj, false, record.isSpanned, resource);\n            }\n            setStyleAttribute(appointmentElement_2, {\n                'width': (this.parent.eventSettings.enableMaxHeight ? '100%' : tempData.appWidth),\n                'height': appHeight + 'px', 'top': topValue + 'px'\n            });\n            var iconHeight = appointmentElement_2.querySelectorAll('.' + cls.EVENT_INDICATOR_CLASS).length * 15;\n            var maxHeight = appHeight - 40 - iconHeight;\n            var subjectElement = appointmentElement_2.querySelector('.' + cls.SUBJECT_CLASS);\n            if (!this.parent.isAdaptive && subjectElement) {\n                subjectElement.style.maxHeight = formatUnit(maxHeight);\n            }\n            var index = this.parent.activeViewOptions.group.byDate ? (this.resources.length * dayIndex) + resource : dayCount;\n            this.appendEvent(eventObj, appointmentElement_2, index, tempData.appLeft);\n            this.wireAppointmentEvents(appointmentElement_2, eventObj);\n            if (appointmentElement_2.offsetHeight < this.cellHeight) {\n                var resizeHandlers = [].slice.call(appointmentElement_2.querySelectorAll('.' + cls.EVENT_RESIZE_CLASS));\n                resizeHandlers.forEach(function (resizeHandler) {\n                    resizeHandler.style.height = Math.ceil(appointmentElement_2.offsetHeight / resizeHandler.offsetHeight) + 'px';\n                });\n            }\n        }\n    };\n    VerticalEvent.prototype.getEventWidth = function () {\n        var width = this.parent.currentView === 'Day' ? 97 : 94;\n        var tempWidth = ((width - this.overlapEvents.length) / this.overlapEvents.length);\n        return (tempWidth < 0 ? 0 : tempWidth) + '%';\n    };\n    VerticalEvent.prototype.getEventLeft = function (appWidth, index) {\n        var tempLeft = (parseFloat(appWidth) + 1) * index;\n        return (tempLeft > 99 ? 99 : tempLeft) + '%';\n    };\n    VerticalEvent.prototype.getTopValue = function (date, day, resource) {\n        var startEndHours = util.getStartEndHours(util.resetTime(this.dateRender[resource][day]), this.startHour, this.endHour);\n        var startHour = startEndHours.startHour;\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (this.parent.activeViewOptions.timeScale.enable) ? ((diffInMinutes * this.cellHeight * this.slotCount) / this.interval) : 0;\n    };\n    VerticalEvent.prototype.getOverlapIndex = function (record, day, isAllDay, resource) {\n        var _this = this;\n        var fieldMapping = this.parent.eventFields;\n        var eventsList = [];\n        var appIndex = -1;\n        this.overlapEvents = [];\n        if (isAllDay) {\n            if (!isNullOrUndefined(this.renderedAllDayEvents[resource])) {\n                var date_1 = util.resetTime(new Date(this.dateRender[resource][day].getTime()));\n                eventsList = this.renderedAllDayEvents[resource].filter(function (app) {\n                    return util.resetTime(app[fieldMapping.startTime]).getTime() <= date_1.getTime() &&\n                        util.resetTime(app[fieldMapping.endTime]).getTime() >= date_1.getTime();\n                });\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    eventsList = this.filterEventsByResource(this.resources[resource], eventsList);\n                }\n            }\n        }\n        else {\n            var appointmentList_1 = !isNullOrUndefined(this.renderedEvents[resource]) ?\n                this.renderedEvents[resource] : [];\n            var appointment_1 = [];\n            var recordStart_1 = record[fieldMapping.startTime];\n            var recordEnd_1 = record[fieldMapping.endTime];\n            this.overlapList = appointmentList_1.filter(function (data) {\n                return (data[fieldMapping.endTime] > recordStart_1 && data[fieldMapping.startTime] <= recordEnd_1) ||\n                    (data[fieldMapping.startTime] >= recordEnd_1 && data[fieldMapping.endTime] <= recordStart_1);\n            });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                this.overlapList = this.filterEventsByResource(this.resources[resource], this.overlapList);\n            }\n            this.overlapList.forEach(function (obj) {\n                var filterList = appointmentList_1.filter(function (data) {\n                    return data[fieldMapping.endTime] > obj[fieldMapping.startTime] && data[fieldMapping.startTime] <= obj[fieldMapping.endTime];\n                });\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    filterList = _this.filterEventsByResource(_this.resources[resource], filterList);\n                }\n                var collection = filterList.filter(function (val) {\n                    return _this.overlapList.indexOf(val) === -1;\n                });\n                if (collection.length > 0) {\n                    appointment_1 = appointment_1.concat(collection);\n                }\n            });\n            for (var i = 0; i < appointment_1.length - 1; i++) {\n                for (var j = i + 1; j < appointment_1.length; j++) {\n                    if (appointment_1[i].Id === appointment_1[j].Id) {\n                        appointment_1.splice(j, 1);\n                        j--;\n                    }\n                }\n            }\n            this.overlapList = this.overlapList.concat(appointment_1);\n            eventsList = this.overlapList;\n            for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n                var event_4 = eventsList_1[_i];\n                var record_1 = event_4;\n                var index = record_1.Index;\n                if (isNullOrUndefined(this.overlapEvents[index])) {\n                    this.overlapEvents[index] = [event_4];\n                }\n                else {\n                    this.overlapEvents[index].push(event_4);\n                }\n            }\n        }\n        if (!isAllDay) {\n            eventsList = eventsList.filter(function (obj) {\n                return obj[fieldMapping.startTime] === record[fieldMapping.startTime] && obj[fieldMapping.endTime] > record[fieldMapping.endTime] ||\n                    obj[fieldMapping.endTime] > record[fieldMapping.startTime] && obj[fieldMapping.startTime] < record[fieldMapping.endTime] ||\n                    obj[fieldMapping.endTime] === record[fieldMapping.startTime] && obj[fieldMapping.startTime] === record[fieldMapping.endTime];\n            });\n        }\n        if (eventsList.length > 0) {\n            var appLevel = eventsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    VerticalEvent.prototype.adjustOverlapElements = function (args) {\n        var data = { appWidth: args.width, appLeft: args.left };\n        for (var i = 0, length1 = this.overlapEvents.length; i < length1; i++) {\n            if (!isNullOrUndefined(this.overlapEvents[i])) {\n                for (var j = 0, length2 = this.overlapEvents[i].length; j < length2; j++) {\n                    var dayCount = this.parent.activeViewOptions.group.byDate ?\n                        (this.resources.length * args.day) + args.resource : args.dayIndex;\n                    var element = this.element.querySelector('#e-appointment-wrapper-' + dayCount);\n                    if (element.childElementCount > 0) {\n                        var eleGuid = this.overlapEvents[i][j].Guid;\n                        if (element.querySelectorAll('div[data-guid=\"' + eleGuid + '\"]').length > 0 && eleGuid !== args.record.Guid) {\n                            var apps = element.querySelector('div[data-guid=\"' + eleGuid + '\"]');\n                            if (parseFloat(args.width) <= parseFloat(apps.style.width)) {\n                                if (this.parent.enableRtl) {\n                                    apps.style.right = this.getEventLeft(args.width, i);\n                                }\n                                else {\n                                    apps.style.left = this.getEventLeft(args.width, i);\n                                }\n                                apps.style.width = ((parseFloat(args.width))) + '%';\n                                data.appWidth = apps.style.width;\n                            }\n                            else {\n                                data.appWidth = apps.style.width;\n                            }\n                        }\n                        else {\n                            var appWidth = args.width;\n                            if (isNullOrUndefined(this.overlapEvents[i - 1])) {\n                                appWidth = this.getEventWidth();\n                            }\n                            data.appWidth = appWidth;\n                            data.appLeft = this.getEventLeft(appWidth, args.index);\n                        }\n                    }\n                }\n            }\n        }\n        return data;\n    };\n    VerticalEvent.prototype.setAllDayRowHeight = function (height) {\n        for (var _i = 0, _a = this.allDayElement; _i < _a.length; _i++) {\n            var element = _a[_i];\n            element.style.height = (height / 12) + 'em';\n        }\n        this.animation.animate(this.allDayElement[0]);\n    };\n    VerticalEvent.prototype.addOrRemoveClass = function () {\n        var _this = this;\n        this.moreEvents.filter(function (element) {\n            if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n                addClass([element], cls.EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '-1');\n            }\n            else {\n                removeClass([element], cls.EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '0');\n            }\n        });\n        var moreEventCount = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        if (this.parent.uiStateValues.expand) {\n            removeClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n            addClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n        }\n        else {\n            removeClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n            addClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n        }\n        if (this.allDayLevel > 2) {\n            removeClass([moreEventCount], cls.DISABLE_CLASS);\n        }\n        else {\n            addClass([moreEventCount], cls.DISABLE_CLASS);\n        }\n        var countCell = [].slice.call(this.element.querySelectorAll('.' + cls.ROW_COUNT_WRAPPER_CLASS));\n        countCell.forEach(function (element) {\n            if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n                removeClass([element], cls.DISABLE_CLASS);\n            }\n            else {\n                addClass([element], cls.DISABLE_CLASS);\n            }\n        });\n    };\n    VerticalEvent.prototype.getEventHeight = function () {\n        var eventElement = createElement('div', { className: cls.APPOINTMENT_CLASS, styles: 'visibility:hidden' });\n        var eventWrapper = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':first-child');\n        eventWrapper.appendChild(eventElement);\n        var height = eventElement.offsetHeight;\n        remove(eventElement);\n        return height;\n    };\n    VerticalEvent.prototype.rowExpandCollapse = function () {\n        var target = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        this.parent.uiStateValues.expand = target.classList.contains(cls.APPOINTMENT_ROW_EXPAND_CLASS);\n        var rowHeight;\n        if (this.parent.uiStateValues.expand) {\n            target.setAttribute('title', this.parent.localeObj.getConstant('collapseAllDaySection'));\n            target.setAttribute('aria-label', 'Collapse section');\n            rowHeight = ((this.allDayLevel + 1) * this.getEventHeight()) + 4;\n        }\n        else {\n            target.setAttribute('title', this.parent.localeObj.getConstant('expandAllDaySection'));\n            target.setAttribute('aria-label', 'Expand section');\n            rowHeight = (3 * this.getEventHeight()) + 4;\n        }\n        this.setAllDayRowHeight(rowHeight);\n        this.addOrRemoveClass();\n        this.animation.animate(target);\n    };\n    VerticalEvent.prototype.animationUiUpdate = function () {\n        this.parent.notify(events.contentReady, {});\n    };\n    return VerticalEvent;\n}(EventBase));\nexport { VerticalEvent };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, prepend, createElement, extend, EventHandler, closest, addClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove } from '@syncfusion/ej2-base';\nimport { EventBase } from './event-base';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_GAP = 0;\n/**\n * Month view events render\n */\nvar MonthEvent = /** @class */ (function (_super) {\n    __extends(MonthEvent, _super);\n    function MonthEvent(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.renderedEvents = [];\n        _this.monthHeaderHeight = 0;\n        _this.moreIndicatorHeight = 19;\n        _this.renderType = 'day';\n        _this.element = _this.parent.activeView.getPanel();\n        _this.fields = _this.parent.eventFields;\n        _this.maxHeight = _this.parent.eventSettings.enableMaxHeight && !_this.parent.eventSettings.enableIndicator\n            && !_this.parent.rowAutoHeight;\n        _this.withIndicator = _this.parent.eventSettings.enableMaxHeight && _this.parent.eventSettings.enableIndicator\n            && !_this.parent.rowAutoHeight;\n        _this.maxOrIndicator = (_this.maxHeight || _this.withIndicator);\n        _this.moreIndicatorHeight =\n            (_this.parent.rowAutoHeight && _this.parent.eventSettings.ignoreWhitespace) ? 0 : _this.moreIndicatorHeight;\n        _this.addEventListener();\n        return _this;\n    }\n    MonthEvent.prototype.removeEventWarapper = function (appElement) {\n        if (appElement.length > 0) {\n            appElement = (this.parent.currentView === 'Month') ? appElement : [appElement[0]];\n            for (var _i = 0, appElement_1 = appElement; _i < appElement_1.length; _i++) {\n                var wrap = appElement_1[_i];\n                if (!wrap.classList.contains('e-more-indicator') && wrap.parentElement && wrap.parentElement.parentNode) {\n                    remove(wrap.parentElement);\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.renderAppointments = function () {\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.parent.rowAutoHeight) {\n            this.parent.uiStateValues.top = conWrap.scrollTop;\n            this.parent.uiStateValues.left = conWrap.scrollLeft;\n        }\n        var appointmentWrapper = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var appElement = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' +\n                    this.parent.crudModule.crudObj.sourceEvent[i].groupIndex + '\"]'));\n                this.removeEventWarapper(appElement);\n                if (this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n                    var ele = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' +\n                        this.parent.crudModule.crudObj.targetEvent[i].groupIndex + '\"]'));\n                    this.removeEventWarapper(ele);\n                }\n            }\n        }\n        else {\n            for (var _i = 0, appointmentWrapper_1 = appointmentWrapper; _i < appointmentWrapper_1.length; _i++) {\n                var wrap = appointmentWrapper_1[_i];\n                remove(wrap);\n            }\n        }\n        this.removeHeightProperty(cls.CONTENT_TABLE_CLASS);\n        if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n            return;\n        }\n        this.eventHeight = util.getElementHeightFromClass(this.element, cls.APPOINTMENT_CLASS);\n        var scrollTop = conWrap.scrollTop;\n        if (this.parent.rowAutoHeight && this.parent.virtualScrollModule && !isNullOrUndefined(this.parent.currentAction)) {\n            conWrap.scrollTop = conWrap.scrollTop - 1;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.renderResourceEvents();\n        }\n        else {\n            this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays);\n        }\n        if (this.parent.rowAutoHeight) {\n            this.updateBlockElements();\n            var data = {\n                cssProperties: this.parent.getCssProperties(),\n                module: this.parent.getModuleName(),\n                isPreventScrollUpdate: true,\n                scrollPosition: { left: this.parent.uiStateValues.left, top: this.parent.uiStateValues.top }\n            };\n            if (this.parent.virtualScrollModule) {\n                if (this.parent.currentAction) {\n                    conWrap.scrollTop = scrollTop;\n                    this.parent.currentAction = null;\n                }\n                else {\n                    this.parent.virtualScrollModule.updateVirtualScrollHeight();\n                }\n            }\n            this.parent.notify(events.scrollUiUpdate, data);\n            if (!this.parent.enablePersistence) {\n                this.parent.notify(events.contentReady, {});\n            }\n        }\n        this.parent.renderTemplates();\n    };\n    MonthEvent.prototype.renderEventsHandler = function (dateRender, workDays, resData) {\n        this.renderedEvents = [];\n        var eventsList;\n        var blockList;\n        var resIndex = 0;\n        if (resData) {\n            resIndex = resData.groupIndex;\n            this.cssClass = resData.cssClass;\n            this.groupOrder = resData.groupOrder;\n            eventsList = this.parent.eventBase.filterEventsByResource(resData, this.parent.eventsProcessed);\n            blockList = this.parent.eventBase.filterEventsByResource(resData, this.parent.blockProcessed);\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS + '[data-group-index=\"' + resIndex + '\"]'));\n        }\n        else {\n            eventsList = this.parent.eventsProcessed;\n            blockList = this.parent.blockProcessed;\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        }\n        this.sortByDateTime(eventsList);\n        this.sortByDateTime(blockList);\n        if (this.parent.currentView === 'Month' && this.parent.rowAutoHeight && this.parent.activeViewOptions.group.resources.length === 0) {\n            var totalCells = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n            var height_1 = this.parent.element.querySelector('.e-schedule-table').clientHeight / totalCells.length;\n            totalCells.forEach(function (cell) {\n                setStyleAttribute(cell, { 'height': height_1 + 'px' });\n            });\n        }\n        var cellDetail = this.workCells.slice(-1)[0].getBoundingClientRect();\n        this.cellWidth = cellDetail.width;\n        this.cellHeight = cellDetail.height;\n        this.dateRender = dateRender;\n        var filteredDates = this.getRenderedDates(dateRender);\n        this.getSlotDates(workDays);\n        this.processBlockEvents(blockList, resIndex, resData);\n        for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n            var event_1 = eventsList_1[_i];\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event_1);\n            }\n            var splittedEvents = this.splitEvent(event_1, filteredDates || this.dateRender);\n            for (var _a = 0, splittedEvents_1 = splittedEvents; _a < splittedEvents_1.length; _a++) {\n                var event_2 = splittedEvents_1[_a];\n                if (this.maxHeight) {\n                    var sDate = this.parent.currentView === 'Month' ? event_2[this.fields.startTime] :\n                        this.getStartTime(event_2, event_2.data);\n                    if (this.getIndex(sDate) > 0) {\n                        continue;\n                    }\n                }\n                this.updateIndicatorIcon(event_2);\n                this.renderEvents(event_2, resIndex, eventsList);\n            }\n        }\n        this.cssClass = null;\n        this.groupOrder = null;\n    };\n    MonthEvent.prototype.processBlockEvents = function (blockEvents, resIndex, resData) {\n        for (var _i = 0, blockEvents_1 = blockEvents; _i < blockEvents_1.length; _i++) {\n            var event_3 = blockEvents_1[_i];\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event_3);\n            }\n            var blockSpannedList = [];\n            if (this.renderType === 'day' && !event_3[this.fields.isAllDay]) {\n                var temp = extend({}, event_3, null, true);\n                var isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                temp.isBlockIcon = isSameDate;\n                if (!isSameDate && util.getDateInMs(temp[this.fields.startTime]) > 0) {\n                    var e = extend({}, event_3, null, true);\n                    e[this.fields.endTime] = util.addDays(util.resetTime(new Date(event_3[this.fields.startTime] + '')), 1);\n                    e.isBlockIcon = true;\n                    temp[this.fields.startTime] = e[this.fields.endTime];\n                    blockSpannedList.push(e);\n                }\n                isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                if (!isSameDate && util.getDateInMs(temp[this.fields.endTime]) > 0) {\n                    var e = extend({}, event_3, null, true);\n                    e[this.fields.startTime] = util.resetTime(new Date(event_3[this.fields.endTime] + ''));\n                    e.isBlockIcon = true;\n                    blockSpannedList.push(e);\n                    temp[this.fields.endTime] = e[this.fields.startTime];\n                }\n                blockSpannedList.push(temp);\n            }\n            else {\n                blockSpannedList.push(event_3);\n            }\n            for (var _a = 0, blockSpannedList_1 = blockSpannedList; _a < blockSpannedList_1.length; _a++) {\n                var blockEvent = blockSpannedList_1[_a];\n                var splittedEvents = this.splitEvent(blockEvent, this.dateRender);\n                for (var _b = 0, splittedEvents_2 = splittedEvents; _b < splittedEvents_2.length; _b++) {\n                    var event_4 = splittedEvents_2[_b];\n                    this.renderBlockEvents(event_4, resIndex, !!blockEvent.isBlockIcon);\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.isSameDate = function (start, end) {\n        return new Date(+start).setHours(0, 0, 0, 0) === new Date(+end).setHours(0, 0, 0, 0);\n    };\n    MonthEvent.prototype.renderBlockEvents = function (event, resIndex, isIcon) {\n        var eventData = event.data;\n        var startTime = this.getStartTime(event, eventData);\n        var endTime = this.getEndTime(event, eventData);\n        var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        if (day < 0 || startTime > endTime) {\n            return;\n        }\n        var cellTd = this.getCellTd(day);\n        var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], day);\n        if (!isIcon) {\n            var diffInDays = eventData.count;\n            var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n            appWidth = (appWidth <= 0) ? this.cellWidth : appWidth;\n            var appLeft = (this.parent.enableRtl) ? 0 : position;\n            var appRight = (this.parent.enableRtl) ? position : 0;\n            this.renderWrapperElement(cellTd);\n            var appHeight = this.cellHeight - this.monthHeaderHeight;\n            var appTop = this.getRowTop(resIndex);\n            var blockElement = this.createBlockAppointmentElement(event, resIndex);\n            setStyleAttribute(blockElement, {\n                'width': appWidth + 'px', 'height': appHeight + 'px', 'left': appLeft + 'px',\n                'right': appRight + 'px', 'top': appTop + 'px'\n            });\n            this.renderEventElement(event, blockElement, cellTd);\n        }\n        else {\n            this.renderBlockIndicator(cellTd, position, resIndex);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n        var blockIndicator = createElement('div', { className: 'e-icons ' + cls.BLOCK_INDICATOR_CLASS });\n        if (isNullOrUndefined(cellTd.querySelector('.' + cls.BLOCK_INDICATOR_CLASS))) {\n            cellTd.appendChild(blockIndicator);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getStartTime = function (event, eventData) {\n        return event[this.fields.startTime];\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getEndTime = function (event, eventData) {\n        return event[this.fields.endTime];\n    };\n    MonthEvent.prototype.getCellTd = function (day) {\n        return this.workCells[day];\n    };\n    MonthEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n        return count * this.cellWidth - 1;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n        return 0;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getRowTop = function (resIndex) {\n        return 0;\n    };\n    MonthEvent.prototype.updateIndicatorIcon = function (event) {\n        if (this.parent.currentView.indexOf('Timeline') === -1 || this.parent.currentView === 'TimelineMonth'\n            || event[this.fields.isAllDay]) {\n            return;\n        }\n        var cloneData = event.data;\n        var start = this.parent.activeView.getStartHour();\n        var end = this.parent.activeView.getEndHour();\n        var startHour = util.getStartEndHours(event[this.fields.startTime], start, end);\n        var endHour = util.getStartEndHours(event[this.fields.endTime], start, end);\n        cloneData.isLeft = cloneData.isLeft || cloneData[this.fields.startTime].getTime() < startHour.startHour.getTime();\n        cloneData.isRight = cloneData.isRight || cloneData[this.fields.endTime].getTime() > endHour.endHour.getTime();\n    };\n    MonthEvent.prototype.renderResourceEvents = function () {\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.lastResourceLevel;\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var sourceRes = this.parent.crudModule.crudObj.sourceEvent[i];\n                this.renderEventsHandler(sourceRes.renderDates, sourceRes.workDays, sourceRes);\n                if (this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n                    var target = this.parent.crudModule.crudObj.targetEvent[i];\n                    this.renderEventsHandler(target.renderDates, target.workDays, target);\n                }\n            }\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        else {\n            for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n                var slotData = resources_1[_i];\n                this.renderEventsHandler(slotData.renderDates, slotData.workDays, slotData);\n            }\n        }\n    };\n    MonthEvent.prototype.getSlotDates = function (workDays) {\n        this.slots = [];\n        var dates = this.dateRender.map(function (date) { return +date; });\n        var noOfDays = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : workDays.length;\n        while (dates.length > 0) {\n            this.slots.push(dates.splice(0, noOfDays));\n        }\n    };\n    MonthEvent.prototype.createAppointmentElement = function (record, resIndex, isCloneElement) {\n        if (isCloneElement === void 0) { isCloneElement = false; }\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default ||\n            this.parent.localeObj.getConstant('addTitle'));\n        var newRecord = extend({}, record, record.data, true);\n        var appointmentWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.fields.id],\n                'role': 'button', 'tabindex': '0',\n                'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record), 'aria-selected': 'false', 'aria-grabbed': 'true',\n                'aria-label': this.parent.getAnnocementString(newRecord, eventSubject)\n            }\n        });\n        if (!isCloneElement) {\n            appointmentWrapper.setAttribute('data-guid', record.Guid);\n        }\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        var templateElement;\n        var eventData = record.data;\n        var eventObj = this.getEventData(record);\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = scheduleId + viewName + 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            var eventLocation = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var appointmentSubject = createElement('div', {\n                className: cls.SUBJECT_CLASS,\n                innerHTML: (eventSubject + (eventLocation ? ';&nbsp' + eventLocation : ''))\n            });\n            var appointmentStartTime = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.startTime])\n            });\n            var appointmentEndTime = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.endTime])\n            });\n            if (this.parent.currentView === 'Month') {\n                if (record[this.fields.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                    addClass([appointmentSubject], 'e-text-center');\n                }\n                else if (eventData.count <= 1 && !eventData.isLeft && !eventData.isRight) {\n                    templateElement = [appointmentStartTime, appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                var innerElement = void 0;\n                if (record[this.fields.isAllDay]) {\n                    var allDayString = createElement('div', {\n                        className: cls.APPOINTMENT_TIME, innerHTML: this.parent.localeObj.getConstant('allDay')\n                    });\n                    innerElement = [appointmentSubject, allDayString];\n                }\n                else {\n                    var timeString = this.parent.getTimeString(eventData[this.fields.startTime])\n                        + ' - ' + this.parent.getTimeString(eventData[this.fields.endTime]);\n                    var appTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''), innerHTML: timeString\n                    });\n                    var appLocation = createElement('div', { className: cls.LOCATION_CLASS, innerHTML: eventLocation });\n                    innerElement = [appointmentSubject, appTime, appLocation];\n                }\n                var wrap = createElement('div', { className: 'e-inner-wrap' });\n                append(innerElement, wrap);\n                templateElement = [wrap];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        this.appendEventIcons(record, appointmentDetails);\n        this.renderResizeHandler(appointmentWrapper, record.data, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    };\n    MonthEvent.prototype.appendEventIcons = function (record, appointmentDetails) {\n        var eventData = record.data;\n        if (!isNullOrUndefined(record[this.fields.recurrenceRule]) || !isNullOrUndefined(record[this.fields.recurrenceID])) {\n            var iconClass = (record[this.fields.id] === record[this.fields.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appointmentDetails.appendChild(createElement('div', {\n                className: cls.ICON + ' ' + iconClass + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : '')\n            }));\n        }\n        if (eventData.isLeft) {\n            var iconLeft = createElement('div', {\n                className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_LEFT_CLASS\n            });\n            prepend([iconLeft], appointmentDetails);\n        }\n        if (eventData.isRight) {\n            var iconRight = createElement('div', {\n                className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_RIGHT_CLASS\n            });\n            append([iconRight], appointmentDetails);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.renderEvents = function (event, resIndex, eventsList) {\n        var startTime = event[this.fields.startTime];\n        var endTime = event[this.fields.endTime];\n        var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(startTime));\n        if (day < 0) {\n            return;\n        }\n        if ((startTime.getTime() < this.parent.minDate.getTime()) || (endTime.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        var overlapCount = this.getIndex(startTime);\n        event.Index = overlapCount;\n        var appHeight = this.eventHeight;\n        this.renderedEvents.push(extend({}, event, null, true));\n        var diffInDays = event.data.count;\n        if (startTime.getTime() <= endTime.getTime()) {\n            var appWidth = (diffInDays * this.cellWidth) - 5;\n            var cellTd = this.workCells[day];\n            var appTop = (overlapCount * (appHeight + EVENT_GAP));\n            this.renderWrapperElement(cellTd);\n            var height = this.monthHeaderHeight + ((overlapCount + 1) * (appHeight + EVENT_GAP)) + this.moreIndicatorHeight;\n            var enableAppRender = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n            if (this.parent.rowAutoHeight || enableAppRender) {\n                var appointmentElement = void 0;\n                if (this.inlineValue) {\n                    appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n                }\n                else {\n                    appointmentElement = this.createAppointmentElement(event, resIndex);\n                }\n                this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n                this.wireAppointmentEvents(appointmentElement, event);\n                setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'top': appTop + 'px' });\n                this.renderEventElement(event, appointmentElement, cellTd);\n                if (this.parent.rowAutoHeight) {\n                    var firstChild = cellTd.parentElement.firstElementChild;\n                    this.updateCellHeight(firstChild, height);\n                }\n            }\n            else {\n                for (var i = 0; i < diffInDays; i++) {\n                    var cellTd_1 = this.workCells[day + i];\n                    if (cellTd_1 && isNullOrUndefined(cellTd_1.querySelector('.' + cls.MORE_INDICATOR_CLASS))) {\n                        var startDate = new Date(this.dateRender[day + i].getTime());\n                        var endDate = util.addDays(this.dateRender[day + i], 1);\n                        var groupIndex = cellTd_1.getAttribute('data-group-index');\n                        var filterEvents = this.getFilteredEvents(startDate, endDate, groupIndex);\n                        var appArea = this.cellHeight - this.monthHeaderHeight - this.moreIndicatorHeight;\n                        appHeight = this.withIndicator ? appArea : appHeight;\n                        var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP));\n                        var count = (filterEvents.length - renderedAppCount) <= 0 ? 1 : (filterEvents.length - renderedAppCount);\n                        var moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n                        if (!isNullOrUndefined(groupIndex)) {\n                            moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n                        }\n                        moreIndicatorElement.style.top = appArea + 'px';\n                        moreIndicatorElement.style.width = cellTd_1.offsetWidth - 2 + 'px';\n                        this.renderElement(cellTd_1, moreIndicatorElement);\n                        EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n                    }\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.updateCellHeight = function (cell, height) {\n        if ((height > cell.offsetHeight)) {\n            setStyleAttribute(cell, { 'height': height + 'px' });\n        }\n    };\n    MonthEvent.prototype.updateBlockElements = function () {\n        var blockElement = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS));\n        for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n            var element = blockElement_1[_i];\n            var target = closest(element, 'tr');\n            this.monthHeaderHeight = element.offsetParent.offsetTop - target.offsetTop;\n            element.style.height = ((target.offsetHeight - 1) - this.monthHeaderHeight) + 'px';\n            var firstChild = target.firstElementChild;\n            var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n            element.style.width = (firstChild.offsetWidth * width) + 'px';\n        }\n    };\n    // eslint-disable-next-line max-len\n    MonthEvent.prototype.getFilteredEvents = function (startDate, endDate, groupIndex, eventsList) {\n        var filteredEvents;\n        if (isNullOrUndefined(groupIndex)) {\n            filteredEvents = this.filterEvents(startDate, endDate);\n        }\n        else {\n            var data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            filteredEvents = this.filterEvents(startDate, endDate, isNullOrUndefined(eventsList) ? undefined : eventsList, data);\n        }\n        return filteredEvents;\n    };\n    MonthEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n            var app = appointments_1[_i];\n            if ((util.resetTime(app[this.fields.startTime]).getTime() <= util.resetTime(date).getTime()) &&\n                (util.resetTime(app[this.fields.endTime]).getTime() >= util.resetTime(date).getTime())) {\n                appointmentsList.push(app);\n            }\n        }\n        return appointmentsList;\n    };\n    MonthEvent.prototype.getIndex = function (date) {\n        var appIndex = -1;\n        var appointments = this.renderedEvents;\n        if (appointments.length > 0) {\n            var appointmentsList = this.getOverlapEvents(date, appointments);\n            var appLevel = appointmentsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    MonthEvent.prototype.moreIndicatorClick = function (event) {\n        var _this = this;\n        var target = closest(event.target, '.' + cls.MORE_INDICATOR_CLASS);\n        var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n        var endDate = new Date(parseInt(target.getAttribute('data-end-date'), 10));\n        var groupIndex = target.getAttribute('data-group-index');\n        var moreArgs = {\n            cancel: false, event: event, element: target, isPopupOpen: true,\n            startTime: startDate, endTime: endDate, viewName: this.parent.getNavigateView()\n        };\n        if (groupIndex) {\n            moreArgs.groupIndex = parseInt(groupIndex, 10);\n        }\n        this.parent.trigger(events.moreEventsClick, moreArgs, function (clickArgs) {\n            if (!clickArgs.cancel) {\n                if (clickArgs.isPopupOpen) {\n                    var filteredEvents = _this.getFilteredEvents(startDate, endDate, groupIndex);\n                    var moreArgs_1 = { date: startDate, event: filteredEvents, element: event.target };\n                    _this.parent.quickPopup.moreEventClick(moreArgs_1, endDate, groupIndex);\n                }\n                else {\n                    _this.parent.setScheduleProperties({ selectedDate: startDate });\n                    _this.parent.changeView(clickArgs.viewName, event);\n                }\n            }\n        });\n    };\n    MonthEvent.prototype.renderEventElement = function (event, appointmentElement, cellTd) {\n        var _this = this;\n        var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        var isAppointment = appointmentElement.classList.contains(cls.APPOINTMENT_CLASS);\n        var eventObj = this.getEventData(event);\n        var args = { data: eventObj, element: appointmentElement, cancel: false, type: eventType };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (eventArgs.cancel) {\n                _this.renderedEvents.pop();\n            }\n            else {\n                _this.renderElement(cellTd, appointmentElement, isAppointment);\n            }\n        });\n    };\n    MonthEvent.prototype.getEventData = function (event) {\n        var eventObj = extend({}, event, null, true);\n        eventObj[this.fields.startTime] = event.data[this.fields.startTime];\n        eventObj[this.fields.endTime] = event.data[this.fields.endTime];\n        return eventObj;\n    };\n    MonthEvent.prototype.renderElement = function (cellTd, element, isAppointment) {\n        if (isAppointment === void 0) { isAppointment = false; }\n        if (this.maxOrIndicator && isAppointment) {\n            this.setMaxEventHeight(element, cellTd);\n        }\n        if (cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS)) {\n            cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    };\n    MonthEvent.prototype.renderWrapperElement = function (cellTd) {\n        var element = cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (!isNullOrUndefined(element)) {\n            this.monthHeaderHeight = element.offsetTop - cellTd.offsetTop;\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            cellTd.appendChild(wrapper);\n            this.monthHeaderHeight = wrapper.offsetTop - cellTd.offsetTop;\n        }\n    };\n    MonthEvent.prototype.getMoreIndicatorElement = function (count, startDate, endDate) {\n        var moreIndicatorElement = createElement('div', {\n            className: cls.MORE_INDICATOR_CLASS,\n            innerHTML: '+' + count + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more')),\n            attrs: {\n                'tabindex': '0',\n                'data-start-date': startDate.getTime().toString(),\n                'data-end-date': endDate.getTime().toString(),\n                'role': 'list'\n            }\n        });\n        return moreIndicatorElement;\n    };\n    MonthEvent.prototype.removeHeightProperty = function (selector) {\n        var rows = [].slice.call(this.element.querySelectorAll('.' + selector + ' tbody tr'));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstElementChild.style.height = '';\n        }\n    };\n    MonthEvent.prototype.setMaxEventHeight = function (event, cell) {\n        var headerHeight = util.getOuterHeight(cell.querySelector('.' + cls.DATE_HEADER_CLASS));\n        var height = (cell.offsetHeight - headerHeight) - (this.maxHeight ? 0 : this.moreIndicatorHeight);\n        setStyleAttribute(event, { 'height': height + 'px', 'align-items': 'center' });\n    };\n    return MonthEvent;\n}(EventBase));\nexport { MonthEvent };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, setStyleAttribute, extend, EventHandler, createElement } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nimport { MonthEvent } from './month';\nvar EVENT_GAP = 2;\nvar BLOCK_INDICATOR_WIDTH = 22;\nvar BLOCK_INDICATOR_HEIGHT = 18;\n/**\n * Timeline view events render\n */\nvar TimelineEvent = /** @class */ (function (_super) {\n    __extends(TimelineEvent, _super);\n    function TimelineEvent(parent, type) {\n        var _this = _super.call(this, parent) || this;\n        _this.startHour = _this.parent.activeView.getStartHour();\n        _this.endHour = _this.parent.activeView.getEndHour();\n        _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n        _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n        _this.day = 0;\n        _this.rowIndex = 0;\n        _this.renderType = type;\n        _this.eventContainers = [].slice.call(_this.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var tr = [].slice.call(_this.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr'));\n        _this.dayLength = tr.length === 0 ? 0 : tr[0].children.length;\n        _this.content = _this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n        return _this;\n    }\n    TimelineEvent.prototype.getSlotDates = function () {\n        this.slots = [];\n        this.slots.push(this.parent.activeView.renderDates.map(function (date) { return +date; }));\n        if (this.parent.headerRows.length > 0 &&\n            this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Hour') {\n            this.renderType = 'day';\n            this.cellWidth = this.content.offsetWidth / this.dateRender.length;\n            this.slotsPerDay = 1;\n        }\n        else {\n            this.slotsPerDay = (this.dayLength / this.dateRender.length);\n        }\n    };\n    TimelineEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        if (this.renderType === 'day') {\n            for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n                var app = appointments_1[_i];\n                if ((util.resetTime(app[this.fields.startTime]).getTime() <= util.resetTime(new Date(date.getTime())).getTime()) &&\n                    (util.resetTime(app[this.fields.endTime]).getTime() >= util.resetTime(new Date(date.getTime())).getTime())) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        else {\n            for (var _a = 0, appointments_2 = appointments; _a < appointments_2.length; _a++) {\n                var app = appointments_2[_a];\n                var eventData = app.data;\n                if (eventData.trimStartTime.getTime() <= date.getTime() &&\n                    eventData.trimEndTime.getTime() > date.getTime()) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        return appointmentsList;\n    };\n    TimelineEvent.prototype.renderResourceEvents = function () {\n        this.removeHeightProperty(cls.RESOURCE_COLUMN_TABLE_CLASS);\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.renderedResources;\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var source = this.parent.crudModule.crudObj.sourceEvent[i];\n                this.rowIndex = source.groupIndex;\n                this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, source);\n                if (this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n                    var target = this.parent.crudModule.crudObj.targetEvent[i];\n                    this.rowIndex = target.groupIndex;\n                    this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, target);\n                }\n            }\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        else {\n            for (var i = 0; i < resources.length; i++) {\n                this.rowIndex = i;\n                this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, resources[i]);\n            }\n        }\n    };\n    TimelineEvent.prototype.renderEvents = function (event, resIndex, appointmentsList) {\n        var startTime = event[this.fields.startTime];\n        var endTime = event[this.fields.endTime];\n        if ((startTime.getTime() < this.parent.minDate.getTime()) || (endTime.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        var eventData = event.data;\n        startTime = this.getStartTime(event, eventData);\n        endTime = this.getEndTime(event, eventData);\n        this.day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        if (this.day < 0) {\n            return;\n        }\n        var cellTd = this.getCellTd();\n        var overlapCount = this.getIndex(startTime);\n        event.Index = overlapCount;\n        var elem = this.element.querySelector('.' + cls.APPOINTMENT_CLASS);\n        var eleHeight = (elem) ? elem.getBoundingClientRect().height : 0;\n        var appHeight = (elem && eleHeight > 0) ? eleHeight : this.eventHeight;\n        var diffInDays = eventData.count;\n        var eventObj = extend({}, event, null, true);\n        eventObj[this.fields.startTime] = eventData[this.fields.startTime];\n        eventObj[this.fields.endTime] = eventData[this.fields.endTime];\n        var currentDate = util.resetTime(new Date(this.dateRender[this.day].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var isValidEvent = this.isValidEvent(eventObj, startTime, endTime, schedule);\n        if (startTime <= endTime && isValidEvent) {\n            var appWidth_1 = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n            appWidth_1 = this.renderType === 'day' ? appWidth_1 - 2 : appWidth_1;\n            var appLeft = 0;\n            var appRight = 0;\n            var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], this.day);\n            appWidth_1 = (appWidth_1 <= 0) ? this.cellWidth : appWidth_1; // appWidth 0 when start and end time as same\n            this.renderedEvents.push(extend({}, event, null, true));\n            var top_1 = this.getRowTop(resIndex);\n            var appTop = (top_1 + (this.maxHeight ? 0 : EVENT_GAP)) + (overlapCount * (appHeight + EVENT_GAP));\n            appLeft = (this.parent.enableRtl) ? 0 : position;\n            appRight = (this.parent.enableRtl) ? position : 0;\n            var height = ((overlapCount + 1) * (appHeight + EVENT_GAP)) + this.moreIndicatorHeight;\n            var renderApp = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n            if (this.parent.rowAutoHeight || renderApp) {\n                var appointmentElement = void 0;\n                if (isNullOrUndefined(this.inlineValue)) {\n                    appointmentElement = this.createAppointmentElement(event, resIndex);\n                }\n                else {\n                    appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n                }\n                this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n                setStyleAttribute(appointmentElement, {\n                    'width': appWidth_1 + 'px', 'left': appLeft + 'px', 'right': appRight + 'px', 'top': appTop + 'px'\n                });\n                this.wireAppointmentEvents(appointmentElement, event);\n                this.renderEventElement(event, appointmentElement, cellTd);\n                if (this.parent.rowAutoHeight) {\n                    var firstChild = this.getFirstChild(resIndex);\n                    this.updateCellHeight(firstChild, height);\n                }\n                if (this.parent.activeViewOptions.option !== 'TimelineMonth' && this.parent.activeViewOptions.timeScale.enable\n                    && appWidth_1 < this.cellWidth) {\n                    var resizeHandlers = [].slice.call(appointmentElement.querySelectorAll('.' + cls.EVENT_RESIZE_CLASS));\n                    resizeHandlers.forEach(function (resizeHandler) {\n                        resizeHandler.style.width = Math.ceil(appWidth_1 / resizeHandler.getBoundingClientRect().width) + 'px';\n                    });\n                }\n            }\n            else {\n                for (var i = 0; i < diffInDays; i++) {\n                    var moreIndicator = cellTd.querySelector('.' + cls.MORE_INDICATOR_CLASS);\n                    var appPos = (this.parent.enableRtl) ? appRight : appLeft;\n                    appPos = (Math.floor(appPos / this.cellWidth) * this.cellWidth);\n                    if ((cellTd && isNullOrUndefined(moreIndicator)) ||\n                        (!this.isAlreadyAvail(appPos, cellTd))) {\n                        var interval = this.interval / this.slotCount;\n                        var startDate = new Date(this.dateRender[this.day + i].getTime());\n                        var endDate = util.addDays(this.dateRender[this.day + i], 1);\n                        var startDateTime = new Date(+startTime);\n                        var slotStartTime = (new Date(startDateTime.setMinutes(Math.floor(startDateTime.getMinutes() / interval) * interval)));\n                        var slotEndTime = new Date(slotStartTime.getTime() + (60000 * interval));\n                        var groupIndex = void 0;\n                        if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(resIndex)) {\n                            groupIndex = resIndex.toString();\n                        }\n                        var filterEvents = this.getFilterEvents(startDate, endDate, slotStartTime, slotEndTime, groupIndex, appointmentsList);\n                        var appArea = this.cellHeight - this.moreIndicatorHeight;\n                        appHeight = this.withIndicator ? appArea - EVENT_GAP : appHeight;\n                        var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP));\n                        var count = (filterEvents.length - renderedAppCount) <= 0 ? 1 : (filterEvents.length - renderedAppCount);\n                        var moreIndicatorElement = void 0;\n                        if (this.renderType === 'day') {\n                            moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n                        }\n                        else {\n                            moreIndicatorElement = this.getMoreIndicatorElement(count, slotStartTime, slotEndTime);\n                        }\n                        if (!isNullOrUndefined(groupIndex)) {\n                            moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n                        }\n                        moreIndicatorElement.style.top = top_1 + appArea + 'px';\n                        moreIndicatorElement.style.width = this.cellWidth + 'px';\n                        moreIndicatorElement.style.left = (Math.floor(appLeft / this.cellWidth) * this.cellWidth) + 'px';\n                        moreIndicatorElement.style.right = (Math.floor(appRight / this.cellWidth) * this.cellWidth) + 'px';\n                        this.renderElement(cellTd, moreIndicatorElement);\n                        EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n                    }\n                }\n            }\n        }\n        this.parent.renderTemplates();\n    };\n    TimelineEvent.prototype.updateCellHeight = function (cell, height) {\n        if ((height > cell.getBoundingClientRect().height)) {\n            setStyleAttribute(cell, { 'height': height + 'px' });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                var resourceCell = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_TABLE_CLASS + ' ' + 'tbody td[data-group-index=\"' +\n                    cell.getAttribute('data-group-index') + '\"]');\n                if (resourceCell) {\n                    setStyleAttribute(resourceCell, { 'height': height + 'px' });\n                }\n            }\n            var monthHeader = this.parent.element.querySelector('.e-month-header-wrapper table tr:nth-child(' +\n                (cell.parentElement.rowIndex + 1) + ') td');\n            if (monthHeader) {\n                setStyleAttribute(monthHeader, { 'height': height + 'px' });\n            }\n        }\n    };\n    TimelineEvent.prototype.getFirstChild = function (index) {\n        var query = '.' + cls.CONTENT_TABLE_CLASS + ' tbody td';\n        var groupIndex = '';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            groupIndex = '[data-group-index=\"' + index.toString() + '\"]';\n        }\n        var td = this.parent.element.querySelector(query + groupIndex);\n        return td;\n    };\n    TimelineEvent.prototype.updateBlockElements = function () {\n        var blockElement = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS));\n        for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n            var element = blockElement_1[_i];\n            var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n            var firstChild = this.getFirstChild(resIndex);\n            element.style.height = firstChild.offsetHeight + 'px';\n            var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n            element.style.width = (firstChild.offsetWidth * width) + 'px';\n        }\n        var blockIndicator = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_INDICATOR_CLASS));\n        for (var _a = 0, blockIndicator_1 = blockIndicator; _a < blockIndicator_1.length; _a++) {\n            var element = blockIndicator_1[_a];\n            var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n            element.style.top = this.getRowTop(resIndex) +\n                this.getFirstChild(resIndex).offsetHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n        }\n    };\n    TimelineEvent.prototype.getStartTime = function (event, eventData) {\n        var startTime = event[this.fields.startTime];\n        var schedule = util.getStartEndHours(startTime, this.startHour, this.endHour);\n        if (schedule.startHour.getTime() >= eventData[this.fields.startTime]) {\n            startTime = schedule.startHour;\n        }\n        else if (schedule.endHour.getTime() <= eventData[this.fields.startTime]) {\n            startTime = this.getNextDay(schedule.startHour, eventData);\n        }\n        else {\n            startTime = eventData[this.fields.startTime];\n        }\n        // To overcome the overflow\n        eventData.trimStartTime = (event[this.fields.isAllDay]) ? schedule.startHour : eventData[this.fields.startTime];\n        return startTime;\n    };\n    TimelineEvent.prototype.getNextDay = function (startTime, eventData) {\n        var startDate;\n        for (var i = 1; i <= this.dateRender.length; i++) {\n            startDate = util.addDays(startTime, i);\n            if (this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime()))) !== -1) {\n                eventData.count = eventData.count - 1;\n                return startDate;\n            }\n        }\n        return startDate;\n    };\n    TimelineEvent.prototype.getEndTime = function (event, eventData) {\n        var endTime = event[this.fields.endTime];\n        var schedule = util.getStartEndHours(endTime, this.startHour, this.endHour);\n        if (schedule.endHour.getTime() <= eventData[this.fields.endTime]) {\n            endTime = schedule.endHour;\n        }\n        else {\n            endTime = eventData[this.fields.endTime];\n        }\n        // To overcome the overflow\n        eventData.trimEndTime = (event[this.fields.isAllDay]) ? schedule.endHour : eventData[this.fields.endTime];\n        return endTime;\n    };\n    TimelineEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n        if (this.renderType === 'day' || isAllDay) {\n            return (count * this.slotsPerDay) * this.cellWidth;\n        }\n        if (this.isSameDay(startDate, endDate)) {\n            return this.getSameDayEventsWidth(startDate, endDate);\n        }\n        else {\n            return this.getSpannedEventsWidth(startDate, endDate, count);\n        }\n    };\n    TimelineEvent.prototype.getSameDayEventsWidth = function (startDate, endDate) {\n        return (((endDate.getTime() - startDate.getTime())) / (60 * 1000) * (this.cellWidth * this.slotCount) / this.interval);\n    };\n    TimelineEvent.prototype.getSpannedEventsWidth = function (startDate, endDate, diffInDays) {\n        var width = (diffInDays * this.slotsPerDay) * this.cellWidth;\n        var endWidth;\n        var start = util.getStartEndHours(util.resetTime(new Date(startDate.getTime())), this.startHour, this.endHour);\n        var startWidth = this.getSameDayEventsWidth(start.startHour, startDate);\n        if (this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(endDate.getTime()))) === -1) {\n            endWidth = 0;\n        }\n        else {\n            var end = util.getStartEndHours(util.resetTime(new Date(endDate.getTime())), this.startHour, this.endHour);\n            endWidth = this.getSameDayEventsWidth(endDate, end.endHour);\n            endWidth = ((this.slotsPerDay * this.cellWidth) === endWidth) ? 0 : endWidth;\n        }\n        var spannedWidth = startWidth + endWidth;\n        return (width > spannedWidth) ? width - spannedWidth : endWidth - startWidth;\n    };\n    TimelineEvent.prototype.isSameDay = function (startTime, endTime) {\n        var startDay = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        var endDay = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(endTime.getTime())));\n        return (startDay === endDay);\n    };\n    TimelineEvent.prototype.getAppointmentLeft = function (schedule, startTime, day) {\n        var slotTd = (this.isSameDay(startTime, schedule.startHour)) ?\n            ((startTime.getTime() - schedule.startHour.getTime()) / ((60 * 1000) * this.interval)) * this.slotCount : 0;\n        if (day === 0) {\n            return slotTd;\n        }\n        else {\n            var daySlot = Math.round((((schedule.endHour.getTime() - schedule.startHour.getTime()) / (60 * 1000)) / this.interval) * this.slotCount);\n            return (daySlot * day) + slotTd;\n        }\n    };\n    TimelineEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n        if (this.renderType === 'day' || isAllDay) {\n            return (day * this.slotsPerDay) * this.cellWidth;\n        }\n        var currentDate = util.resetTime(new Date(this.dateRender[day].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var cellIndex;\n        if (schedule.endHour.getTime() <= endTime.getTime() && schedule.startHour.getTime() >= startTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n        }\n        else if (schedule.endHour.getTime() <= endTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n        }\n        else if (schedule.startHour.getTime() >= startTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n        }\n        else {\n            cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n        }\n        return cellIndex * this.cellWidth;\n    };\n    // eslint-disable-next-line max-len\n    TimelineEvent.prototype.getFilterEvents = function (startDate, endDate, startTime, endTime, gIndex, eventsList) {\n        if (this.renderType === 'day') {\n            return this.getFilteredEvents(startDate, endDate, gIndex, eventsList);\n        }\n        else {\n            return this.getFilteredEvents(startTime, endTime, gIndex, eventsList);\n        }\n    };\n    TimelineEvent.prototype.isAlreadyAvail = function (appPos, cellTd) {\n        var moreIndicator = [].slice.call(cellTd.querySelectorAll('.' + cls.MORE_INDICATOR_CLASS));\n        for (var i = 0; i < moreIndicator.length; i++) {\n            var indicatorPos = void 0;\n            if (moreIndicator) {\n                indicatorPos = (this.parent.enableRtl) ? moreIndicator[i].style.right : moreIndicator[i].style.left;\n            }\n            if (parseInt(indicatorPos, 10) === Math.floor(appPos)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    TimelineEvent.prototype.getCellHeight = function (resIndex) {\n        var heightValue = 0;\n        for (var i = 0; i < resIndex; i++) {\n            heightValue += this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS +\n                '[data-group-index=\"' + i.toString() + '\"]').offsetHeight;\n        }\n        return heightValue;\n    };\n    TimelineEvent.prototype.getRowTop = function (resIndex) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return ((this.parent.activeViewOptions.group.resources.length > 1 || this.parent.virtualScrollModule ||\n                this.parent.rowAutoHeight) ? this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                ' ' + 'tbody td[data-group-index=\"' + resIndex.toString() + '\"]').offsetTop : this.getCellHeight(resIndex));\n        }\n        return 0;\n    };\n    TimelineEvent.prototype.getCellTd = function () {\n        var wrapIndex = this.parent.uiStateValues.isGroupAdaptive ? 0 : this.rowIndex;\n        return this.eventContainers[wrapIndex];\n    };\n    TimelineEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n        // No need to render block icon for Year, Month and Week header rows\n        if (this.parent.headerRows.length > 0 &&\n            (this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Hour' ||\n                this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Date')) {\n            return;\n        }\n        position = (Math.floor(position / this.cellWidth) * this.cellWidth) + this.cellWidth - BLOCK_INDICATOR_WIDTH;\n        if (!this.isAlreadyAvail(position, cellTd)) {\n            var blockIndicator = createElement('div', { className: 'e-icons ' + cls.BLOCK_INDICATOR_CLASS });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                blockIndicator.setAttribute('data-group-index', resIndex.toString());\n            }\n            if (this.parent.enableRtl) {\n                blockIndicator.style.right = position + 'px';\n            }\n            else {\n                blockIndicator.style.left = position + 'px';\n            }\n            blockIndicator.style.top = this.getRowTop(resIndex) + this.cellHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n            this.renderElement(cellTd, blockIndicator);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    TimelineEvent.prototype.setMaxEventHeight = function (event, cell) {\n        setStyleAttribute(event, {\n            'height': (this.cellHeight - (this.maxHeight ? 0 : EVENT_GAP) -\n                (this.maxHeight ? 0 : this.moreIndicatorHeight)) + 'px'\n        });\n    };\n    return TimelineEvent;\n}(MonthEvent));\nexport { TimelineEvent };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, createElement, closest, remove, removeClass } from '@syncfusion/ej2-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\n/**\n * Inline Edit interactions\n */\nvar InlineEdit = /** @class */ (function () {\n    function InlineEdit(parent) {\n        this.parent = parent;\n        this.parent.on(events.inlineClick, this.inlineEdit, this);\n    }\n    InlineEdit.prototype.inlineEdit = function (args) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        var moreWrapper = this.parent.element.querySelector('.e-more-popup-wrapper ');\n        if (moreWrapper && moreWrapper.classList.contains(cls.POPUP_OPEN)) {\n            this.parent.quickPopup.morePopup.hide();\n        }\n        if (args.type === 'Cell') {\n            this.removeInlineAppointmentElement();\n            this.cellEdit(args);\n        }\n        else {\n            if (this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS) !==\n                args.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS)) {\n                this.removeInlineAppointmentElement();\n            }\n            this.eventEdit(args);\n        }\n    };\n    InlineEdit.prototype.cellEdit = function (args) {\n        var saveObj = this.generateEventData();\n        var cellIndex = args.element.cellIndex;\n        var count = this.getEventDaysCount(saveObj);\n        if (count > 1) {\n            count = Math.round(count);\n            count--;\n            cellIndex = cellIndex - count;\n        }\n        var start = util.resetTime(new Date('' + saveObj[this.parent.eventFields.startTime])).getTime();\n        var end = util.resetTime(new Date('' + saveObj[this.parent.eventFields.endTime])).getTime();\n        var resIndex = args.groupIndex || 0;\n        if (this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n            var dayIndex = saveObj[this.parent.eventFields.startTime].getDay();\n            this.createVerticalViewInline(saveObj, dayIndex, resIndex, cellIndex);\n        }\n        else if (this.parent.currentView === 'Month') {\n            this.createMonthViewInline(saveObj, resIndex, start, end);\n        }\n        else {\n            this.createTimelineViewInline(saveObj, start, end, resIndex);\n        }\n        var inlineSubject = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        if (inlineSubject) {\n            inlineSubject.focus();\n        }\n    };\n    InlineEdit.prototype.eventEdit = function (args) {\n        var inlineSubject = args.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        var subject;\n        if (inlineSubject) {\n            subject = inlineSubject.value;\n        }\n        else {\n            var subEle = args.element.querySelector('.' + cls.SUBJECT_CLASS);\n            var timeEle = args.element.querySelector('.' + cls.APPOINTMENT_TIME);\n            subject = subEle.innerText;\n            inlineSubject = createElement('input', { className: cls.INLINE_SUBJECT_CLASS, attrs: { value: subject } });\n            addClass([subEle], cls.DISABLE_CLASS);\n            if (closest(args.element, '.' + cls.MORE_POPUP_WRAPPER_CLASS)) {\n                args.element.insertBefore(inlineSubject, subEle);\n            }\n            else if (['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n                var subjectWrap = args.element.querySelector('.' + cls.SUBJECT_WRAP);\n                subjectWrap.insertBefore(inlineSubject, subjectWrap.firstChild);\n            }\n            else {\n                var elementSelector = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek', 'TimelineMonth'].indexOf(this.parent.currentView) > -1 ?\n                    '.e-inner-wrap' : '.e-appointment-details';\n                args.element.querySelector(elementSelector).insertBefore(inlineSubject, timeEle);\n            }\n        }\n        inlineSubject.focus();\n        inlineSubject.setSelectionRange(subject.length, subject.length);\n    };\n    InlineEdit.prototype.createVerticalViewInline = function (saveObj, dayIndex, resIndex, daysCount) {\n        var _a;\n        var count = this.getEventDaysCount(saveObj);\n        var verticalEvent = new VerticalEvent(this.parent);\n        verticalEvent.initializeValues();\n        var index = verticalEvent.dateRender[resIndex].map(function (date) { return date.getDay(); }).indexOf(dayIndex);\n        if (count >= 1) {\n            verticalEvent.allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS));\n            (_a = verticalEvent.slots).push.apply(_a, this.parent.activeView.renderDates.map(function (date) { return +date; }));\n            var allDayElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_APPOINTMENT_CLASS));\n            var allDayLevel = 0;\n            if (allDayElements.length > 0) {\n                allDayLevel = Math.floor(this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).getBoundingClientRect().height /\n                    allDayElements[0].offsetHeight) - 1;\n            }\n            verticalEvent.allDayLevel = allDayLevel;\n            verticalEvent.renderAllDayEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline);\n        }\n        else {\n            verticalEvent.renderNormalEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline);\n        }\n    };\n    InlineEdit.prototype.createMonthViewInline = function (saveObj, index, start, end) {\n        var count = this.getEventDaysCount(saveObj);\n        var saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);\n        var monthEvent = new MonthEvent(this.parent);\n        monthEvent.dateRender = this.parent.activeView.renderDates;\n        monthEvent.inlineValue = this.parent.allowInline;\n        var renderDates = this.parent.activeView.renderDates;\n        var workDays = this.parent.activeViewOptions.workDays;\n        var monthCellSelector = '.' + cls.WORK_CELLS_CLASS;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            monthCellSelector += '[data-group-index=\"' + index + '\"]';\n            var resourceData = this.parent.resourceBase.lastResourceLevel[index];\n            renderDates = resourceData.renderDates;\n            workDays = resourceData.workDays;\n        }\n        monthEvent.workCells = [].slice.call(this.parent.element.querySelectorAll(monthCellSelector));\n        monthEvent.cellWidth = monthEvent.workCells[0].offsetWidth;\n        monthEvent.cellHeight = monthEvent.workCells[0].offsetHeight;\n        monthEvent.eventHeight = util.getElementHeightFromClass(this.parent.monthModule.element, cls.APPOINTMENT_CLASS);\n        monthEvent.getSlotDates(workDays);\n        var filteredDates = monthEvent.getRenderedDates(renderDates);\n        var splittedEvents = monthEvent.splitEvent(saveObject, filteredDates || renderDates);\n        for (var _i = 0, splittedEvents_1 = splittedEvents; _i < splittedEvents_1.length; _i++) {\n            var eventData = splittedEvents_1[_i];\n            monthEvent.renderEvents(eventData, index);\n        }\n        var inlineSubject = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        inlineSubject.focus();\n    };\n    InlineEdit.prototype.createTimelineViewInline = function (saveObj, start, end, resIndex) {\n        var count = this.getEventDaysCount(saveObj);\n        var saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);\n        var timelineView = new TimelineEvent(this.parent, this.parent.activeViewOptions.timeScale.enable ? 'hour' : 'day');\n        timelineView.dateRender = this.parent.activeView.renderDates;\n        timelineView.eventContainers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        timelineView.inlineValue = this.parent.allowInline;\n        timelineView.cellWidth = workCell.offsetWidth;\n        timelineView.cellHeight = workCell.offsetHeight;\n        var dayLength = this.parent.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr').length === 0 ?\n            0 : this.parent.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr')[0].children.length;\n        timelineView.slotsPerDay = dayLength / timelineView.dateRender.length;\n        timelineView.eventHeight = util.getElementHeightFromClass(timelineView.element, cls.APPOINTMENT_CLASS);\n        timelineView.renderEvents(saveObject, resIndex);\n    };\n    InlineEdit.prototype.getEventDaysCount = function (saveObj) {\n        var startDate = saveObj[this.parent.eventFields.startTime];\n        var endDate = saveObj[this.parent.eventFields.endTime];\n        var daysCount = Math.abs(endDate.getTime() - startDate.getTime()) / util.MS_PER_DAY;\n        return daysCount;\n    };\n    InlineEdit.prototype.generateEventData = function (target) {\n        var inlineElement = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        var subject = inlineElement ? inlineElement.value : target ? target.innerHTML : '';\n        var saveObj = {};\n        saveObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n        saveObj[this.parent.eventFields.subject] = subject;\n        saveObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        saveObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        saveObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        this.parent.eventWindow.setDefaultValueToObject(saveObj);\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.setResourceValues(saveObj, this.parent.activeCellsData.groupIndex);\n        }\n        return saveObj;\n    };\n    InlineEdit.prototype.documentClick = function () {\n        var target = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        if (target && target.value !== '') {\n            this.inlineCrudActions(target);\n        }\n    };\n    InlineEdit.prototype.inlineCrudActions = function (target) {\n        if (closest(target, '.' + cls.INLINE_APPOINTMENT_CLASS)) {\n            var saveObj = this.generateEventData(target);\n            this.parent.addEvent(saveObj);\n        }\n        else {\n            var eventTarget = closest(target, '.' + cls.APPOINTMENT_CLASS);\n            var eventDetails = this.parent.getEventDetails(eventTarget);\n            eventDetails[this.parent.eventFields.subject] = target.value;\n            var currentAction = void 0;\n            if (eventDetails[this.parent.eventFields.id] === eventDetails[this.parent.eventFields.recurrenceID]) {\n                currentAction = 'EditOccurrence';\n                eventDetails[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n            }\n            this.parent.saveEvent(eventDetails, currentAction);\n        }\n        this.removeInlineAppointmentElement();\n    };\n    InlineEdit.prototype.createInlineAppointmentElement = function (inlineData) {\n        var inlineAppointmentElement = createElement('div', {\n            className: cls.APPOINTMENT_CLASS + ' ' + cls.INLINE_APPOINTMENT_CLASS\n        });\n        var inlineDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        inlineAppointmentElement.appendChild(inlineDetails);\n        var inline = createElement('input', { className: cls.INLINE_SUBJECT_CLASS });\n        inlineDetails.appendChild(inline);\n        if (inlineData) {\n            this.parent.eventBase.applyResourceColor(inlineAppointmentElement, inlineData, 'backgroundColor');\n        }\n        return inlineAppointmentElement;\n    };\n    InlineEdit.prototype.removeInlineAppointmentElement = function () {\n        var inlineAppointment = [].slice.call(this.parent.element.querySelectorAll('.' + cls.INLINE_APPOINTMENT_CLASS));\n        if (inlineAppointment.length > 0) {\n            inlineAppointment.forEach(function (node) { return remove(node); });\n        }\n        var inlineSubject = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        if (inlineSubject) {\n            var appointmentSubject = closest(inlineSubject, '.' + cls.APPOINTMENT_CLASS);\n            removeClass([appointmentSubject.querySelector('.' + cls.SUBJECT_CLASS)], cls.DISABLE_CLASS);\n            remove(inlineSubject);\n        }\n    };\n    InlineEdit.prototype.destroy = function () {\n        this.parent.off(events.inlineClick, this.inlineEdit);\n    };\n    return InlineEdit;\n}());\nexport { InlineEdit };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, remove } from '@syncfusion/ej2-base';\nimport { FormValidator } from '@syncfusion/ej2-inputs';\nimport * as cls from '../base/css-constant';\n/**\n * Appointment window field validation\n */\nvar FieldValidator = /** @class */ (function () {\n    function FieldValidator() {\n    }\n    FieldValidator.prototype.renderFormValidator = function (form, rules, element) {\n        var _this = this;\n        this.element = element;\n        this.formObj = new FormValidator(form, {\n            customPlacement: function (inputElement, error) {\n                _this.errorPlacement(inputElement, error);\n            },\n            rules: rules,\n            validationComplete: function (args) {\n                _this.validationComplete(args);\n            },\n            focusout: function (args) {\n                _this.focusOut(args);\n            }\n        });\n    };\n    FieldValidator.prototype.focusOut = function (args) {\n        var target = args.relatedTarget;\n        if (target && (target.classList.contains('e-dlg-closeicon-btn') || target.classList.contains('e-close')\n            || target.classList.contains(cls.ALLDAY_CELLS_CLASS) || target.classList.contains(cls.HEADER_CELLS_CLASS)\n            || target.classList.contains(cls.QUICK_POPUP_EVENT_DETAILS_CLASS) || target.classList.contains(cls.WORK_CELLS_CLASS)\n            || target.classList.contains(cls.EVENT_WINDOW_CANCEL_BUTTON_CLASS))) {\n            this.ignoreError = true;\n        }\n        else {\n            this.ignoreError = false;\n        }\n    };\n    FieldValidator.prototype.validationComplete = function (args) {\n        var elem = this.element.querySelector('#' + args.inputName + '_Error');\n        if (elem) {\n            elem.style.display = (args.status === 'failure') ? '' : 'none';\n        }\n    };\n    FieldValidator.prototype.errorPlacement = function (inputElement, error) {\n        var id = error.getAttribute('for');\n        var elem = this.element.querySelector('#' + id + '_Error');\n        if (!elem && !this.ignoreError) {\n            this.createTooltip(inputElement, error, id, '');\n        }\n    };\n    FieldValidator.prototype.createTooltip = function (element, error, name, display) {\n        var dlgContent;\n        var client;\n        var inputClient = element.getBoundingClientRect();\n        if (this.element.classList.contains(cls.POPUP_WRAPPER_CLASS)) {\n            dlgContent = this.element;\n            client = this.element.getBoundingClientRect();\n        }\n        else {\n            dlgContent = this.element.querySelector('.e-schedule-dialog .e-dlg-content');\n            client = dlgContent.getBoundingClientRect();\n        }\n        var div = createElement('div', {\n            className: 'e-tooltip-wrap e-popup ' + cls.ERROR_VALIDATION_CLASS,\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                (inputClient.bottom - client.top + dlgContent.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - client.left + dlgContent.scrollLeft + inputClient.width / 2) + 'px;'\n        });\n        var content = createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow = createElement('div', { className: 'e-arrow-tip e-tip-top' });\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        div.appendChild(content);\n        div.appendChild(arrow);\n        dlgContent.appendChild(div);\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n    };\n    FieldValidator.prototype.destroyToolTip = function () {\n        if (this.element) {\n            var elements = [].slice.call(this.element.querySelectorAll('.' + cls.ERROR_VALIDATION_CLASS));\n            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                var elem = elements_1[_i];\n                remove(elem);\n            }\n        }\n        if (this.formObj && this.formObj.element) {\n            this.formObj.reset();\n        }\n    };\n    FieldValidator.prototype.destroy = function () {\n        if (this.formObj && this.formObj.element && !this.formObj.isDestroyed) {\n            this.formObj.destroy();\n        }\n    };\n    return FieldValidator;\n}());\nexport { FieldValidator };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { closest, EventHandler, isNullOrUndefined, formatUnit, append } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, createElement, remove, extend } from '@syncfusion/ej2-base';\nimport { Dialog, Popup, isCollide } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { FieldValidator } from './form-validator';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\n/**\n * Quick Popups interactions\n */\nvar QuickPopups = /** @class */ (function () {\n    function QuickPopups(parent) {\n        this.isMultipleEventSelect = false;\n        this.isCrudAction = false;\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.fieldValidator = new FieldValidator();\n        this.render();\n        this.addEventListener();\n    }\n    QuickPopups.prototype.render = function () {\n        this.renderQuickPopup();\n        this.renderMorePopup();\n        this.renderQuickDialog();\n    };\n    QuickPopups.prototype.renderQuickPopup = function () {\n        var quickPopupWrapper = createElement('div', { className: cls.POPUP_WRAPPER_CLASS + ' e-popup-close' });\n        if (this.parent.isAdaptive) {\n            document.body.appendChild(quickPopupWrapper);\n            addClass([quickPopupWrapper], cls.DEVICE_CLASS);\n        }\n        else {\n            this.parent.element.appendChild(quickPopupWrapper);\n        }\n        this.quickPopup = new Popup(quickPopupWrapper, {\n            targetType: (this.parent.isAdaptive ? 'container' : 'relative'),\n            enableRtl: this.parent.enableRtl,\n            open: this.quickPopupOpen.bind(this),\n            close: this.quickPopupClose.bind(this),\n            hideAnimation: (this.parent.isAdaptive ? { name: 'ZoomOut' } : { name: 'FadeOut', duration: 150 }),\n            showAnimation: (this.parent.isAdaptive ? { name: 'ZoomIn' } : { name: 'FadeIn', duration: 150 }),\n            collision: (this.parent.isAdaptive ? { X: 'fit', Y: 'fit' } :\n                (this.parent.enableRtl ? { X: 'flip', Y: 'fit' } : { X: 'none', Y: 'fit' })),\n            position: (this.parent.isAdaptive || this.parent.enableRtl ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }),\n            viewPortElement: (this.parent.isAdaptive ? document.body : this.parent.element),\n            zIndex: (this.parent.isAdaptive ? 1004 : 3)\n        });\n    };\n    QuickPopups.prototype.renderMorePopup = function () {\n        var moreEventPopup = \"<div class=\\\"\" + cls.MORE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_CLASS + \"\\\">\" +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\" tabindex=\\\"0\\\"></div>\") +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_DATE_HEADER_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_DAY_CLASS + \"\\\"></div>\") +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_HEADER_DATE_CLASS + \" \" + cls.NAVIGATE_CLASS + \"\\\" tabindex=\\\"0\\\"></div></div></div></div>\");\n        var moreEventWrapper = createElement('div', {\n            className: cls.MORE_POPUP_WRAPPER_CLASS + ' e-popup-close',\n            innerHTML: moreEventPopup\n        });\n        if (this.parent.isAdaptive) {\n            document.body.appendChild(moreEventWrapper);\n            addClass([moreEventWrapper], cls.DEVICE_CLASS);\n        }\n        else {\n            this.parent.element.appendChild(moreEventWrapper);\n        }\n        this.morePopup = new Popup(moreEventWrapper, {\n            targetType: (this.parent.isAdaptive ? 'container' : 'relative'),\n            enableRtl: this.parent.enableRtl,\n            hideAnimation: { name: 'ZoomOut', duration: 300 },\n            showAnimation: { name: 'ZoomIn', duration: 300 },\n            open: this.morePopupOpen.bind(this),\n            close: this.morePopupClose.bind(this),\n            collision: (this.parent.isAdaptive ? { X: 'fit', Y: 'fit' } :\n                (this.parent.enableRtl ? { X: 'flip', Y: 'fit' } : { X: 'flip', Y: 'flip' })),\n            viewPortElement: (this.parent.isAdaptive ? document.body : this.parent.element),\n            zIndex: (this.parent.isAdaptive ? 1002 : 2)\n        });\n        var closeButton = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CLOSE_CLASS);\n        this.renderButton('e-round', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeButton, this.closeClick);\n        EventHandler.add(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS), 'click', this.navigationClick, this);\n    };\n    QuickPopups.prototype.renderQuickDialog = function () {\n        var buttonModel = [\n            { buttonModel: { cssClass: 'e-quick-alertok e-flat', isPrimary: true }, click: this.dialogButtonClick.bind(this) },\n            { buttonModel: { cssClass: 'e-quick-alertcancel e-flat', isPrimary: false }, click: this.dialogButtonClick.bind(this) },\n            {\n                buttonModel: { cssClass: 'e-quick-dialog-cancel e-disable e-flat', isPrimary: false },\n                click: this.dialogButtonClick.bind(this)\n            }\n        ];\n        if (this.parent.eventSettings.editFollowingEvents) {\n            var followingSeriesButton = {\n                buttonModel: { cssClass: 'e-quick-alertfollowing e-flat', isPrimary: false }, click: this.dialogButtonClick.bind(this)\n            };\n            buttonModel.splice(1, 0, followingSeriesButton);\n        }\n        this.quickDialog = new Dialog({\n            animationSettings: { effect: 'Zoom' },\n            buttons: buttonModel,\n            cssClass: cls.QUICK_DIALOG_CLASS,\n            closeOnEscape: true,\n            enableRtl: this.parent.enableRtl,\n            beforeClose: this.beforeQuickDialogClose.bind(this),\n            isModal: true,\n            position: { X: 'center', Y: 'center' },\n            showCloseIcon: true,\n            target: document.body,\n            visible: false,\n            width: 'auto'\n        });\n        var dialogElement = createElement('div', { id: this.parent.element.id + 'QuickDialog' });\n        this.parent.element.appendChild(dialogElement);\n        this.quickDialog.appendTo(dialogElement);\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.setAttribute('aria-label', this.l10n.getConstant('occurrence'));\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.setAttribute('aria-label', this.l10n.getConstant('series'));\n            cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        if (this.quickDialog.element.querySelector('.e-dlg-closeicon-btn')) {\n            this.quickDialog.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n        }\n    };\n    // eslint-disable-next-line max-len\n    QuickPopups.prototype.renderButton = function (className, iconName, isDisabled, element, clickEvent) {\n        var buttonObj = new Button({\n            cssClass: className,\n            disabled: isDisabled,\n            enableRtl: this.parent.enableRtl,\n            iconCss: iconName\n        });\n        buttonObj.appendTo(element);\n        EventHandler.add(element, 'click', clickEvent, this);\n    };\n    QuickPopups.prototype.quickDialogClass = function (action) {\n        var classList = [\n            cls.QUICK_DIALOG_OCCURRENCE_CLASS, cls.QUICK_DIALOG_SERIES_CLASS, cls.QUICK_DIALOG_DELETE_CLASS,\n            cls.QUICK_DIALOG_CANCEL_CLASS, cls.QUICK_DIALOG_ALERT_BTN_CLASS, cls.DISABLE_CLASS\n        ];\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        var followingEventButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n        removeClass([okButton, cancelButton], classList);\n        addClass([this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS)], cls.DISABLE_CLASS);\n        if (this.parent.eventSettings.editFollowingEvents) {\n            addClass([followingEventButton], cls.DISABLE_CLASS);\n            removeClass([this.quickDialog.element], cls.FOLLOWING_EVENTS_DIALOG);\n        }\n        switch (action) {\n            case 'Recurrence':\n                addClass([okButton], cls.QUICK_DIALOG_OCCURRENCE_CLASS);\n                addClass([cancelButton], cls.QUICK_DIALOG_SERIES_CLASS);\n                if (this.parent.eventSettings.editFollowingEvents) {\n                    removeClass([followingEventButton], cls.DISABLE_CLASS);\n                    addClass([this.quickDialog.element], cls.FOLLOWING_EVENTS_DIALOG);\n                    addClass([followingEventButton], cls.QUICK_DIALOG_FOLLOWING_EVENTS_CLASS);\n                }\n                break;\n            case 'Delete':\n                addClass([okButton], cls.QUICK_DIALOG_DELETE_CLASS);\n                addClass([cancelButton], cls.QUICK_DIALOG_CANCEL_CLASS);\n                break;\n            case 'Alert':\n                addClass([okButton], [cls.QUICK_DIALOG_ALERT_OK, cls.QUICK_DIALOG_ALERT_BTN_CLASS]);\n                addClass([cancelButton], [cls.QUICK_DIALOG_ALERT_CANCEL, cls.DISABLE_CLASS]);\n                break;\n        }\n    };\n    QuickPopups.prototype.applyFormValidation = function () {\n        var form = this.quickPopup.element.querySelector('.' + cls.FORM_CLASS);\n        var rules = {};\n        rules[this.parent.eventSettings.fields.subject.name] = this.parent.eventSettings.fields.subject.validation;\n        this.fieldValidator.renderFormValidator(form, rules, this.quickPopup.element);\n    };\n    QuickPopups.prototype.openRecurrenceAlert = function () {\n        var editDeleteOnly = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (editDeleteOnly) {\n            editDeleteOnly.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteEvent' : 'editEvent');\n            editDeleteOnly.setAttribute('aria-label', editDeleteOnly.innerHTML);\n        }\n        var editFollowingEventsOnly = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n        if (editFollowingEventsOnly) {\n            editFollowingEventsOnly.innerHTML = this.l10n.getConstant('editFollowingEvent');\n            editFollowingEventsOnly.setAttribute('aria-label', editFollowingEventsOnly.innerHTML);\n        }\n        var editDeleteSeries = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (editDeleteSeries) {\n            editDeleteSeries.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteSeries' : 'editSeries');\n            editDeleteSeries.setAttribute('aria-label', editDeleteSeries.innerHTML);\n        }\n        this.quickDialog.content = this.l10n.getConstant('editContent');\n        this.quickDialog.header = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteTitle' : 'editTitle');\n        this.quickDialogClass('Recurrence');\n        var activeEvent = this.parent.activeEventData.event;\n        if (this.parent.eventSettings.editFollowingEvents && this.parent.currentAction === 'EditOccurrence'\n            && !isNullOrUndefined(activeEvent[this.parent.eventFields.recurrenceID]) && activeEvent[this.parent.eventFields.recurrenceID]\n            !== activeEvent[this.parent.eventFields.id]) {\n            var followingEventButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n            addClass([followingEventButton], cls.DISABLE_CLASS);\n        }\n        this.showQuickDialog('RecurrenceAlert');\n    };\n    QuickPopups.prototype.openRecurrenceValidationAlert = function (type) {\n        this.quickDialogClass('Alert');\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        okButton.innerHTML = this.l10n.getConstant('ok');\n        okButton.setAttribute('aria-label', okButton.innerHTML);\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        cancelButton.innerHTML = this.l10n.getConstant('cancel');\n        cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        var dialogCancel;\n        switch (type) {\n            case 'wrongPattern':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('wrongPattern');\n                break;\n            case 'createError':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('createError');\n                break;\n            case 'sameDayAlert':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('sameDayAlert');\n                break;\n            case 'seriesChangeAlert':\n                dialogCancel = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS);\n                removeClass([cancelButton, dialogCancel], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('seriesChangeAlert');\n                okButton.innerHTML = this.l10n.getConstant('yes');\n                cancelButton.innerHTML = this.l10n.getConstant('no');\n                dialogCancel.innerHTML = this.l10n.getConstant('cancel');\n                break;\n        }\n        if ((!this.parent.enableRecurrenceValidation && type === 'wrongPattern') || this.parent.enableRecurrenceValidation) {\n            this.showQuickDialog('RecurrenceValidationAlert');\n        }\n    };\n    QuickPopups.prototype.openDeleteAlert = function () {\n        if (this.parent.activeViewOptions.readonly) {\n            return;\n        }\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('delete');\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n            cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        this.quickDialog.content = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleContent') : this.l10n.getConstant('deleteContent');\n        this.quickDialog.header = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleEvent') : this.l10n.getConstant('deleteEvent');\n        this.quickDialogClass('Delete');\n        this.showQuickDialog('DeleteAlert');\n    };\n    QuickPopups.prototype.openValidationError = function (type, eventData) {\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        this.quickDialog.content = this.l10n.getConstant(type);\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('ok');\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n            okButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        this.quickDialogClass('Alert');\n        this.showQuickDialog('ValidationAlert', eventData);\n    };\n    QuickPopups.prototype.showQuickDialog = function (popupType, eventData) {\n        var _this = this;\n        this.quickDialog.dataBind();\n        var eventProp = {\n            type: popupType, cancel: false, element: this.quickDialog.element,\n            data: extend({}, (eventData || this.parent.activeEventData.event), null, true)\n        };\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            if (!popupArgs.cancel) {\n                _this.quickDialog.show();\n            }\n        });\n    };\n    QuickPopups.prototype.createMoreEventList = function (eventCollection, groupOrder, groupIndex) {\n        var _this = this;\n        var fields = this.parent.eventFields;\n        var moreEventContentEle = createElement('div', { className: cls.MORE_EVENT_CONTENT_CLASS });\n        var moreEventWrapperEle = createElement('div', { className: cls.MORE_EVENT_WRAPPER_CLASS });\n        if (eventCollection.length === 0) {\n            moreEventWrapperEle = createElement('div', {\n                className: cls.MORE_EVENT_CONTENT_CLASS,\n                innerHTML: this.l10n.getConstant('emptyContainer')\n            });\n        }\n        else {\n            var _loop_1 = function (eventData) {\n                var eventText = (eventData[fields.subject] || this_1.parent.eventSettings.fields.subject.default);\n                var appointmentElement = createElement('div', {\n                    className: cls.APPOINTMENT_CLASS,\n                    attrs: {\n                        'data-id': '' + eventData[fields.id],\n                        'data-guid': eventData.Guid, 'role': 'button', 'tabindex': '0',\n                        'aria-readonly': this_1.parent.eventBase.getReadonlyAttribute(eventData),\n                        'aria-selected': 'false', 'aria-grabbed': 'true', 'aria-label': this_1.parent.getAnnocementString(eventData)\n                    }\n                });\n                var templateElement = void 0;\n                if (!isNullOrUndefined(this_1.parent.activeViewOptions.eventTemplate)) {\n                    var tempId = this_1.parent.element.id + '_' + this_1.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n                    templateElement = this_1.parent.getAppointmentTemplate()(eventData, this_1.parent, 'eventTemplate', tempId, false);\n                    append(templateElement, appointmentElement);\n                }\n                else {\n                    appointmentElement.appendChild(createElement('div', { className: cls.SUBJECT_CLASS, innerHTML: eventText }));\n                }\n                if (!isNullOrUndefined(groupIndex)) {\n                    appointmentElement.setAttribute('data-group-index', groupIndex);\n                }\n                if (!isNullOrUndefined(eventData[fields.recurrenceRule])) {\n                    var iconClass = (eventData[fields.id] === eventData[fields.recurrenceID]) ?\n                        cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n                    appointmentElement.appendChild(createElement('div', { className: cls.ICON + ' ' + iconClass }));\n                }\n                var args = {\n                    data: extend({}, eventData, null, true),\n                    element: appointmentElement, cancel: false\n                };\n                this_1.parent.trigger(event.eventRendered, args, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        moreEventWrapperEle.appendChild(appointmentElement);\n                        var isPreventCrud = _this.parent.isAdaptive || _this.parent.currentView === 'Year';\n                        _this.parent.eventBase.wireAppointmentEvents(appointmentElement, eventData, isPreventCrud);\n                        _this.parent.eventBase.applyResourceColor(appointmentElement, eventData, 'backgroundColor', groupOrder);\n                    }\n                });\n            };\n            var this_1 = this;\n            for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n                var eventData = eventCollection_1[_i];\n                _loop_1(eventData);\n            }\n        }\n        moreEventContentEle.appendChild(moreEventWrapperEle);\n        return moreEventContentEle;\n    };\n    QuickPopups.prototype.tapHoldEventPopup = function (e) {\n        var target = closest(e.target, '.' + cls.APPOINTMENT_CLASS);\n        this.isMultipleEventSelect = false;\n        this.parent.selectedElements = [];\n        this.isMultipleEventSelect = true;\n        this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        var guid = target.getAttribute('data-guid');\n        var eventObj = this.parent.eventBase.getEventByGuid(guid);\n        if (isNullOrUndefined(eventObj)) {\n            return;\n        }\n        var eventTitle = (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle'));\n        var eventTemplate = \"<div class=\\\"\" + cls.MULTIPLE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.POPUP_HEADER_CLASS + \"\\\">\" +\n            (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button>\") +\n            (\"<div class=\\\"\" + cls.SUBJECT_CLASS + \"\\\">\" + eventTitle + \"</div>\") +\n            (\"<button class=\\\"\" + cls.EDIT_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") +\n            (\"<button class=\\\"\" + cls.DELETE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button></div></div>\");\n        this.quickPopup.element.innerHTML = eventTemplate;\n        var closeIcon = this.quickPopup.element.querySelector('.' + cls.CLOSE_CLASS);\n        this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.closeClick);\n        var readonly = this.parent.activeViewOptions.readonly || eventObj[this.parent.eventFields.isReadonly];\n        var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n        this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.EDIT_ICON_CLASS, readonly, editIcon, this.editClick);\n        var deleteIcon = this.quickPopup.element.querySelector('.' + cls.DELETE_CLASS);\n        this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.DELETE_ICON_CLASS, readonly, deleteIcon, this.deleteClick);\n        this.beforeQuickPopupOpen(target);\n    };\n    QuickPopups.prototype.isCellBlocked = function (args) {\n        var tempObj = {};\n        tempObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        tempObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        tempObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var targetCell = args.element instanceof Array ? args.element[0] : args.element;\n            var groupIndex = parseInt(targetCell.getAttribute('data-group-index'), 10);\n            this.parent.resourceBase.setResourceValues(tempObj, isNaN(groupIndex) ? null : groupIndex);\n        }\n        return this.parent.eventBase.isBlockRange(tempObj);\n    };\n    QuickPopups.prototype.cellClick = function (args) {\n        var date = new Date(args.startTime.getTime());\n        if (!this.parent.showQuickInfo || !this.parent.eventSettings.allowAdding ||\n            this.parent.currentView === 'MonthAgenda' || this.isCellBlocked(args) ||\n            !this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n            this.quickPopupHide();\n            return;\n        }\n        var targetEle = args.event.target;\n        if (this.parent.isAdaptive) {\n            this.quickPopupHide();\n            var newEventClone = this.parent.element.querySelector('.' + cls.NEW_EVENT_CLASS);\n            if (isNullOrUndefined(newEventClone)) {\n                newEventClone = createElement('div', {\n                    className: cls.NEW_EVENT_CLASS,\n                    innerHTML: \"<div class=\\\"e-title\\\">+ \" + this.l10n.getConstant('newEvent') + \"</div>\"\n                });\n            }\n            var targetCell = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS);\n            if (targetCell) {\n                targetCell.appendChild(newEventClone);\n            }\n            return;\n        }\n        var target = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' +\n            cls.HEADER_CELLS_CLASS);\n        if (isNullOrUndefined(target) || targetEle.classList.contains(cls.MORE_INDICATOR_CLASS)) {\n            return;\n        }\n        var isSameTarget = this.quickPopup.relateTo === target;\n        if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            var subjectElement_1 = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (subjectElement_1) {\n                subjectElement_1.focus();\n            }\n            return;\n        }\n        var temp = {};\n        temp[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        temp[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        temp[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        var quickCellPopup = createElement('div', { className: cls.CELL_POPUP_CLASS });\n        quickCellPopup.appendChild(this.getPopupHeader('Cell', temp));\n        quickCellPopup.appendChild(this.getPopupContent('Cell', args, temp));\n        quickCellPopup.appendChild(this.getPopupFooter('Cell', temp));\n        var subjectElement = quickCellPopup.querySelector('.' + cls.SUBJECT_CLASS);\n        if (subjectElement) {\n            Input.createInput({ element: subjectElement, properties: { placeholder: this.l10n.getConstant('addTitle') } });\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n            subjectElement.value = this.parent.eventSettings.fields.subject.default;\n        }\n        var closeIcon = quickCellPopup.querySelector('.' + cls.CLOSE_CLASS);\n        if (closeIcon) {\n            this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n        }\n        var moreButton = quickCellPopup.querySelector('.' + cls.QUICK_POPUP_EVENT_DETAILS_CLASS);\n        if (moreButton) {\n            this.renderButton('e-flat', '', false, moreButton, this.detailsClick);\n        }\n        var saveButton = quickCellPopup.querySelector('.' + cls.EVENT_CREATE_CLASS);\n        if (saveButton) {\n            this.renderButton('e-flat e-primary', '', this.parent.activeViewOptions.readonly, saveButton, this.saveClick);\n        }\n        this.quickPopup.content = quickCellPopup;\n        this.quickPopup.dataBind();\n        this.applyFormValidation();\n        if (this.morePopup) {\n            this.morePopup.hide();\n        }\n        this.quickPopup.relateTo = target;\n        this.beforeQuickPopupOpen(target);\n    };\n    QuickPopups.prototype.isSameEventClick = function (events) {\n        var isSameTarget = this.quickPopup.relateTo === closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n        if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n            if (!this.parent.isAdaptive) {\n                var editButton = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n                if (editButton) {\n                    editButton.focus();\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n    QuickPopups.prototype.isQuickTemplate = function (type) {\n        return this.parent.quickInfoTemplates.templateType === 'Both' || this.parent.quickInfoTemplates.templateType === type;\n    };\n    QuickPopups.prototype.eventClick = function (events) {\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.close();\n        }\n        if (!this.parent.showQuickInfo) {\n            return;\n        }\n        if (this.parent.isAdaptive && this.isMultipleEventSelect) {\n            this.updateTapHoldEventPopup(closest(events.element, '.' + cls.APPOINTMENT_CLASS));\n        }\n        else {\n            var isSameTarget = this.isSameEventClick(events);\n            if (isSameTarget) {\n                return;\n            }\n            var eventData = events.event;\n            var quickEventPopup = createElement('div', { className: cls.EVENT_POPUP_CLASS });\n            quickEventPopup.appendChild(this.getPopupHeader('Event', eventData));\n            quickEventPopup.appendChild(this.getPopupContent('Event', events, eventData));\n            quickEventPopup.appendChild(this.getPopupFooter('Event', eventData));\n            var readonly = this.parent.activeViewOptions.readonly || eventData[this.parent.eventFields.isReadonly];\n            var editAction = !this.parent.eventSettings.allowEditing || readonly;\n            var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n            var editIcon = quickEventPopup.querySelector('.' + cls.EDIT_CLASS);\n            var buttonClass = 'e-flat e-round e-small';\n            if (editIcon) {\n                this.renderButton(buttonClass, cls.ICON + ' ' + cls.EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n            }\n            var deleteIcon = quickEventPopup.querySelector('.' + cls.DELETE_CLASS);\n            if (deleteIcon) {\n                this.renderButton(buttonClass, cls.ICON + ' ' + cls.DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n            }\n            var closeIcon = quickEventPopup.querySelector('.' + cls.CLOSE_CLASS);\n            if (closeIcon) {\n                this.renderButton(buttonClass, cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n            }\n            var editButton = quickEventPopup.querySelector('.' + cls.EDIT_EVENT_CLASS);\n            if (editButton) {\n                this.renderButton('e-flat e-primary', '', editAction, editButton, this.editClick);\n            }\n            var deleteButton = quickEventPopup.querySelector('.' + cls.DELETE_EVENT_CLASS);\n            if (deleteButton) {\n                this.renderButton('e-flat', '', deleteAction, deleteButton, this.deleteClick);\n            }\n            this.quickPopup.content = quickEventPopup;\n            this.quickPopup.dataBind();\n            if (this.morePopup && !closest(events.element, '.' + cls.MORE_EVENT_WRAPPER_CLASS)) {\n                this.morePopup.hide();\n            }\n            this.quickPopup.relateTo = this.parent.isAdaptive ? document.body :\n                closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n            this.beforeQuickPopupOpen(events.element);\n        }\n    };\n    QuickPopups.prototype.getPopupHeader = function (headerType, headerData) {\n        var headerTemplate = createElement('div', { className: cls.POPUP_HEADER_CLASS });\n        if (this.isQuickTemplate(headerType) && this.parent.quickInfoTemplates.header) {\n            var headerArgs = extend({}, headerData, { elementType: headerType.toLowerCase() }, true);\n            var templateId = this.parent.element.id;\n            var headerTemp = [].slice.call(this.parent.getQuickInfoTemplatesHeader()(headerArgs, this.parent, 'header', templateId + '_headerTemplate', false));\n            append([].slice.call(headerTemp), headerTemplate);\n        }\n        else {\n            var header = void 0;\n            var args = void 0;\n            switch (headerType) {\n                case 'Cell':\n                    header = \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\"><button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\" +\n                        (\"\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\");\n                    break;\n                case 'Event':\n                    args = this.getFormattedString(headerData);\n                    header = \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\">\" +\n                        (\"<button class=\\\"\" + (cls.EDIT_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") +\n                        (\"<button class=\\\"\" + (cls.DELETE_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button>\") +\n                        (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\") +\n                        (\"<div class=\\\"\" + cls.SUBJECT_WRAP + \"\\\"><div class=\\\"\" + cls.SUBJECT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" \") +\n                        (\"title=\\\"\" + args.eventSubject + \"\\\">\" + args.eventSubject + \"</div></div >\");\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: header });\n            append([].slice.call(templateWrapper.childNodes), headerTemplate);\n        }\n        return headerTemplate;\n    };\n    QuickPopups.prototype.getPopupContent = function (type, args, data) {\n        var contentTemplate = createElement('div', { className: cls.POPUP_CONTENT_CLASS });\n        if (this.isQuickTemplate(type) && this.parent.quickInfoTemplates.content) {\n            var contentArgs = extend({}, data, { elementType: type.toLowerCase() }, true);\n            var templateId = this.parent.element.id;\n            var contentTemp = [].slice.call(this.parent.getQuickInfoTemplatesContent()(contentArgs, this.parent, 'content', templateId + '_contentTemplate', false));\n            append([].slice.call(contentTemp), contentTemplate);\n        }\n        else {\n            var content = void 0;\n            var cellDetails = void 0;\n            var argsData = void 0;\n            var resourceText = this.getResourceText(args, type.toLowerCase());\n            switch (type) {\n                case 'Cell':\n                    cellDetails = this.getFormattedString(data);\n                    content = \"<table class=\\\"\" + cls.POPUP_TABLE_CLASS + \"\\\"><tbody><tr><td><form class=\\\"\" + cls.FORM_CLASS + \"\\\" onsubmit=\" +\n                        (\"\\\"return false;\\\"><input class=\\\"\" + cls.SUBJECT_CLASS + \" \" + EVENT_FIELD + \"\\\" type=\\\"text\\\" name=\") +\n                        (\"\\\"\" + this.parent.eventFields.subject + \"\\\" /></form></td></tr><tr><td><div class=\\\"\" + cls.DATE_TIME_CLASS + \"\\\">\") +\n                        (\"<div class=\\\"\" + cls.DATE_TIME_ICON_CLASS + \" \" + cls.ICON + \"\\\"></div><div class=\\\"\" + cls.DATE_TIME_DETAILS_CLASS + \" \") +\n                        (cls.TEXT_ELLIPSIS + \"\\\">\" + cellDetails.details + \"</div></div>\") +\n                        ((this.parent.activeViewOptions.group.resources.length > 0 ? \"<div class=\\\"\" + cls.RESOURCE_CLASS + \"\\\">\" +\n                            (\"<div class=\\\"\" + cls.RESOURCE_ICON_CLASS + \" \" + cls.ICON + \" \\\"></div><div class=\\\"\" + cls.RESOURCE_DETAILS_CLASS + \" \") +\n                            (cls.TEXT_ELLIPSIS + \"\\\">\" + resourceText + \"</div></div>\") : '') + \"</td></tr></tbody></table>\");\n                    break;\n                case 'Event':\n                    argsData = this.getFormattedString(data);\n                    content = '<div class=\"' + cls.DATE_TIME_CLASS + '\"><div class=\"' + cls.DATE_TIME_ICON_CLASS + ' ' + cls.ICON +\n                        '\"></div><div class=\"' + cls.DATE_TIME_WRAPPER_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"><div class=\"' +\n                        cls.DATE_TIME_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' + argsData.details + '</div>';\n                    if (data[this.parent.eventFields.recurrenceRule]) {\n                        content += '<div class=\"' + cls.RECURRENCE_SUMMARY_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            this.getRecurrenceSummary(data) + '</div>';\n                    }\n                    content += '</div></div>';\n                    if (data[this.parent.eventFields.location]) {\n                        content += '<div class=\"' + cls.LOCATION_CLASS + '\"><div class=\"' + cls.LOCATION_ICON_CLASS + ' ' +\n                            cls.ICON + '\"></div><div class=\"' + cls.LOCATION_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            data[this.parent.eventFields.location] + '</div></div>';\n                    }\n                    if (data[this.parent.eventFields.startTimezone] || data[this.parent.eventFields.endTimezone]) {\n                        content += '<div class=\"' + cls.TIME_ZONE_CLASS + '\"><div class=\"' + cls.TIME_ZONE_ICON_CLASS + ' ' + cls.ICON +\n                            '\"></div><div class=\"' + cls.TIME_ZONE_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            this.getTimezone(data) + '</div></div>';\n                    }\n                    if (data[this.parent.eventFields.description]) {\n                        content += '<div class=\"' + cls.DESCRIPTION_CLASS + '\"><div class=\"' + cls.DESCRIPTION_ICON_CLASS + ' ' + cls.ICON +\n                            '\"></div><div class=\"' + cls.DESCRIPTION_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            data[this.parent.eventFields.description] + '</div></div>';\n                    }\n                    if (this.parent.resourceCollection.length > 0) {\n                        content += '<div class=\"' + cls.RESOURCE_CLASS + '\"><div class=\"' + cls.RESOURCE_ICON_CLASS + ' ' + cls.ICON +\n                            '\"></div><div class=\"' + cls.RESOURCE_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            resourceText + '</div></div>';\n                    }\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: content });\n            append([].slice.call(templateWrapper.childNodes), contentTemplate);\n        }\n        return contentTemplate;\n    };\n    QuickPopups.prototype.getPopupFooter = function (footerType, footerData) {\n        var footerTemplate = createElement('div', { className: cls.POPUP_FOOTER_CLASS });\n        if (this.isQuickTemplate(footerType) && this.parent.quickInfoTemplates.footer) {\n            var footerArgs = extend({}, footerData, { elementType: footerType.toLowerCase() }, true);\n            var templateId = this.parent.element.id;\n            var footerTemp = [].slice.call(this.parent.getQuickInfoTemplatesFooter()(footerArgs, this.parent, 'footer', templateId + '_footerTemplate', false));\n            append([].slice.call(footerTemp), footerTemplate);\n        }\n        else {\n            var footer = void 0;\n            switch (footerType) {\n                case 'Cell':\n                    footer = \"<button class=\\\"\" + (cls.QUICK_POPUP_EVENT_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS) + \"\\\" title=\" +\n                        (\"\\\"\" + this.l10n.getConstant('moreDetails') + \"\\\">\" + this.l10n.getConstant('moreDetails') + \"</button>\") +\n                        (\"<button class=\\\"\" + cls.EVENT_CREATE_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('save') + \"\\\">\") +\n                        (this.l10n.getConstant('save') + \"</button>\");\n                    break;\n                case 'Event':\n                    footer = \"\" + (this.parent.isAdaptive ? '' : \"<button class=\\\"\" + cls.EDIT_EVENT_CLASS + \" \" +\n                        (cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\">\" + this.l10n.getConstant('edit') + \"</button>\") +\n                        (\"<button class=\\\"\" + cls.DELETE_EVENT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\">\") +\n                        (this.l10n.getConstant('delete') + \"</button>\"));\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: footer });\n            append([].slice.call(templateWrapper.childNodes), footerTemplate);\n        }\n        return footerTemplate;\n    };\n    QuickPopups.prototype.getResourceText = function (args, type) {\n        if (this.parent.resourceCollection.length === 0) {\n            return null;\n        }\n        var resourceValue = '';\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            var resourceCollection_1 = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n            var resourceData = resourceCollection_1.dataSource;\n            if (type === 'event') {\n                var eventData = args.event;\n                var _loop_2 = function (data) {\n                    var resourceId = eventData[resourceCollection_1.field];\n                    if (resourceId instanceof Array) {\n                        if (resourceId.indexOf(data[resourceCollection_1.idField]) > -1) {\n                            var id_1 = resourceId[resourceId.indexOf(data[resourceCollection_1.idField])];\n                            var resource = resourceData.filter(function (e) {\n                                return e[resourceCollection_1.idField] === id_1;\n                            })[0];\n                            resourceValue += (resourceValue === '') ? resource[resourceCollection_1.textField] :\n                                ', ' + resource[resourceCollection_1.textField];\n                        }\n                    }\n                    else if (data[resourceCollection_1.idField] === resourceId) {\n                        resourceValue = data[resourceCollection_1.textField].toString();\n                    }\n                };\n                for (var _i = 0, resourceData_1 = resourceData; _i < resourceData_1.length; _i++) {\n                    var data = resourceData_1[_i];\n                    _loop_2(data);\n                }\n            }\n            else {\n                resourceValue = resourceData[0][resourceCollection_1.textField].toString();\n            }\n        }\n        else {\n            if (type === 'event') {\n                var eventData = args.event;\n                var resourceData = void 0;\n                var lastResource_1;\n                for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n                    resourceData = eventData[this.parent.resourceBase.resourceCollection[i].field];\n                    if (!isNullOrUndefined(resourceData)) {\n                        lastResource_1 = this.parent.resourceBase.resourceCollection[i];\n                        break;\n                    }\n                }\n                if (!Array.isArray(resourceData)) {\n                    resourceData = [resourceData];\n                }\n                var resNames_1 = [];\n                var lastResourceData_1 = lastResource_1.dataSource;\n                resourceData.forEach(function (value) {\n                    var text;\n                    var i = util.findIndexInData(lastResourceData_1, lastResource_1.idField, value);\n                    if (i > -1) {\n                        text = lastResourceData_1[i][lastResource_1.textField];\n                    }\n                    if (text) {\n                        resNames_1.push(text);\n                    }\n                });\n                resourceValue = resNames_1.join(', ');\n            }\n            else {\n                var argsData = args;\n                var groupIndex = !isNullOrUndefined(argsData.groupIndex) ? argsData.groupIndex : 0;\n                var resourceDetails = this.parent.resourceBase.lastResourceLevel[groupIndex];\n                resourceValue = resourceDetails.resourceData[resourceDetails.resource.textField];\n            }\n        }\n        return resourceValue;\n    };\n    QuickPopups.prototype.getFormattedString = function (eventData) {\n        var fields = this.parent.eventFields;\n        var eventSubject = (eventData[fields.subject] || this.l10n.getConstant('noTitle'));\n        var startDate = eventData[fields.startTime];\n        var endDate = eventData[fields.endTime];\n        var startDateDetails = this.getDateFormat(startDate, 'long');\n        var endDateDetails = (eventData[fields.isAllDay] && endDate.getHours() === 0 && endDate.getMinutes() === 0) ?\n            this.getDateFormat(util.addDays(new Date(endDate.getTime()), -1), 'long') :\n            this.getDateFormat(endDate, 'long');\n        var startTimeDetail = this.parent.getTimeString(startDate);\n        var endTimeDetail = this.parent.getTimeString(endDate);\n        var details = '';\n        var spanLength = endDate.getDate() !== startDate.getDate() &&\n            (endDate.getTime() - startDate.getTime()) / (60 * 60 * 1000) < 24 ? 1 : 0;\n        if (eventData[fields.isAllDay]) {\n            details = startDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            if (((endDate.getTime() - startDate.getTime()) / util.MS_PER_DAY) > 1) {\n                details += '&nbsp;-&nbsp;' + endDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            }\n        }\n        else if ((((endDate.getTime() - startDate.getTime()) / util.MS_PER_DAY) >= 1) || spanLength > 0) {\n            details = startDateDetails + ' (' + startTimeDetail + ')' + '&nbsp;-&nbsp;' + endDateDetails + ' (' + endTimeDetail + ')';\n        }\n        else {\n            details = startDateDetails + ' (' + (startTimeDetail + '&nbsp;-&nbsp;' + endTimeDetail) + ')';\n        }\n        return { eventSubject: eventSubject, details: details };\n    };\n    QuickPopups.prototype.moreEventClick = function (data, endDate, groupIndex) {\n        var _this = this;\n        this.quickPopupHide(true);\n        var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        var selectedDate = ((data.date).getTime()).toString();\n        var target = closest(data.element, '.' + cls.MORE_INDICATOR_CLASS + ',.' + cls.WORK_CELLS_CLASS);\n        var day = this.parent.globalize.formatDate(data.date, { format: 'E', calendar: this.parent.getCalendarMode() });\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DAY_CLASS).innerHTML = util.capitalizeFirstWord(day, 'single');\n        var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n        dateElement.innerHTML = this.getDateFormat(data.date, 'd');\n        dateElement.setAttribute('data-date', selectedDate);\n        dateElement.setAttribute('data-end-date', endDate.getTime().toString());\n        var groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            dateElement.setAttribute('data-group-index', groupIndex);\n            groupOrder = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)].groupOrder;\n        }\n        var moreEventElements = this.createMoreEventList(data.event, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreEventElements);\n        removeClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n        if (util.resetTime(data.date).getTime() === util.resetTime(this.parent.getCurrentTime()).getTime()) {\n            addClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n        }\n        if (!this.parent.isAdaptive) {\n            if (this.parent.currentView.indexOf('Timeline') !== -1) {\n                var gIndex = target.getAttribute('data-group-index');\n                var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n                startDate.setHours(startDate.getHours(), startDate.getMinutes(), 0);\n                var tdDate = startDate.getTime().toString();\n                if (isNullOrUndefined(gIndex)) {\n                    this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                        ' tbody tr td[data-date=\"' + tdDate + '\"]');\n                }\n                else {\n                    this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                        ' tbody tr td[data-group-index=\"' + gIndex + '\"][data-date=\"' + tdDate + '\"]');\n                    if (isNullOrUndefined(this.morePopup.relateTo)) {\n                        var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS +\n                            ' tbody tr td[data-group-index=\"' + gIndex + '\"]'));\n                        for (var i = 0; i < workCells.length; i++) {\n                            var date = workCells[i].getAttribute('data-date');\n                            if (date < tdDate) {\n                                this.morePopup.relateTo = workCells[i];\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                this.morePopup.relateTo = closest(target, '.' + cls.WORK_CELLS_CLASS);\n            }\n        }\n        this.parent.renderTemplates();\n        var eventProp = {\n            type: 'EventContainer', cancel: false,\n            element: this.morePopup.element, data: data\n        };\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            if (!popupArgs.cancel) {\n                _this.morePopup.show();\n            }\n        });\n    };\n    QuickPopups.prototype.saveClick = function () {\n        this.isCrudAction = true;\n        this.quickPopupHide();\n    };\n    QuickPopups.prototype.detailsClick = function () {\n        var subjectEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n        if (subjectEle && subjectEle.value !== '') {\n            extend(this.parent.activeCellsData, { subject: subjectEle.value });\n        }\n        this.isCrudAction = false;\n        this.fieldValidator.destroyToolTip();\n        this.quickPopupHide();\n        this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n    };\n    QuickPopups.prototype.editClick = function () {\n        this.quickPopupHide(true);\n        var data = this.parent.activeEventData.event;\n        this.parent.currentAction = 'EditSeries';\n        if (!isNullOrUndefined(data[this.parent.eventFields.recurrenceRule])) {\n            this.parent.currentAction = 'EditOccurrence';\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.parent.eventWindow.openEditor(data, this.parent.currentAction);\n        }\n    };\n    QuickPopups.prototype.deleteClick = function () {\n        this.quickPopupHide(true);\n        this.parent.currentAction = 'Delete';\n        if (this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) {\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.openDeleteAlert();\n        }\n    };\n    QuickPopups.prototype.updateMoreEventContent = function () {\n        if (this.morePopup.element.classList.contains('e-popup-close')) {\n            return;\n        }\n        var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n        var startDate = new Date(parseInt(dateElement.getAttribute('data-date'), 10));\n        var endDate = new Date(parseInt(dateElement.getAttribute('data-end-date'), 10));\n        var groupIndex = dateElement.getAttribute('data-group-index');\n        var data;\n        var groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            groupOrder = data.groupOrder;\n        }\n        var events = this.parent.eventBase.filterEvents(startDate, endDate, this.parent.eventsProcessed, data);\n        var moreElement = this.createMoreEventList(events, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreElement);\n    };\n    QuickPopups.prototype.closeClick = function () {\n        this.quickPopupHide();\n        this.morePopup.hide();\n    };\n    QuickPopups.prototype.dialogButtonClick = function (event) {\n        this.quickDialog.hide();\n        var target = event.target;\n        var cancelBtn = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        var eventData = this.parent.activeEventData.event;\n        if (target.classList.contains(cls.QUICK_DIALOG_OCCURRENCE_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteOccurrence' : 'EditOccurrence';\n            switch (this.parent.currentAction) {\n                case 'EditOccurrence':\n                    this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n                    break;\n                case 'DeleteOccurrence':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_FOLLOWING_EVENTS_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteFollowingEvents' : 'EditFollowingEvents';\n            switch (this.parent.currentAction) {\n                case 'EditFollowingEvents':\n                    this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n                    break;\n                case 'DeleteFollowingEvents':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_SERIES_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteSeries' : 'EditSeries';\n            switch (this.parent.currentAction) {\n                case 'EditSeries':\n                    this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(eventData, true), this.parent.currentAction);\n                    break;\n                case 'DeleteSeries':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_DELETE_CLASS)) {\n            this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n        }\n        else if (!cancelBtn.classList.contains(cls.DISABLE_CLASS) && (target.classList.contains(cls.QUICK_DIALOG_ALERT_OK) ||\n            (target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL) && !cancelBtn.classList.contains(cls.QUICK_DIALOG_CANCEL_CLASS)))) {\n            this.parent.uiStateValues.isIgnoreOccurrence = target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL);\n            this.parent.eventWindow.eventSave(this.l10n.getConstant('ok'));\n        }\n    };\n    QuickPopups.prototype.updateTapHoldEventPopup = function (target) {\n        var selectedElements = this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        if (selectedElements.length > 0) {\n            var eventObj = this.parent.eventBase.getEventByGuid(selectedElements[0].getAttribute('data-guid'));\n            var titleContent = (selectedElements.length === 1) ?\n                (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle')) :\n                '(' + selectedElements.length + ')' + '&nbsp;' + this.l10n.getConstant('selectedItems');\n            this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS).innerHTML = titleContent;\n            if (selectedElements.length > 1) {\n                addClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n            }\n            else {\n                removeClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n            }\n        }\n        else {\n            this.parent.selectedElements = [];\n            this.quickPopupHide();\n        }\n    };\n    QuickPopups.prototype.getTimezone = function (event) {\n        var zoneDetails = '';\n        zoneDetails += event[this.parent.eventFields.startTimezone] || '';\n        zoneDetails += zoneDetails === '' ? '' : ' - ';\n        zoneDetails += event[this.parent.eventFields.endTimezone] || '';\n        return zoneDetails;\n    };\n    QuickPopups.prototype.getRecurrenceSummary = function (event) {\n        var recurrenceEditor = this.parent.eventWindow.getRecurrenceEditorInstance();\n        if (recurrenceEditor) {\n            var ruleSummary = recurrenceEditor.getRuleSummary(event[this.parent.eventFields.recurrenceRule]);\n            return ruleSummary.charAt(0).toUpperCase() + ruleSummary.slice(1);\n        }\n        return '';\n    };\n    QuickPopups.prototype.getDateFormat = function (date, skeletonString) {\n        return util.capitalizeFirstWord(this.parent.globalize.formatDate(date, { skeleton: skeletonString, calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    QuickPopups.prototype.getDataFromTarget = function (target) {\n        if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            return this.parent.activeEventData.event;\n        }\n        // Depricated cells data in quick popups\n        var eventObj = {\n            startTime: this.parent.activeCellsData.startTime,\n            endTime: this.parent.activeCellsData.endTime,\n            isAllDay: this.parent.activeCellsData.isAllDay,\n            groupIndex: this.parent.activeCellsData.groupIndex\n        };\n        var cellsData = this.parent.activeCellsData;\n        this.parent.eventWindow.convertToEventData(cellsData, eventObj);\n        return eventObj;\n    };\n    QuickPopups.prototype.beforeQuickDialogClose = function () {\n        var _this = this;\n        var args = {\n            type: (isNullOrUndefined(this.parent.activeEventData.event)) ? 'ValidationAlert' :\n                !isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])\n                    ? 'RecurrenceAlert' : 'DeleteAlert', cancel: false, data: this.parent.activeEventData.event,\n            element: this.quickDialog.element\n        };\n        this.parent.trigger(event.popupClose, args, function (popupCloseArgs) {\n            if (!popupCloseArgs.cancel) {\n                _this.parent.eventBase.focusElement();\n            }\n        });\n    };\n    QuickPopups.prototype.beforeQuickPopupOpen = function (target) {\n        var _this = this;\n        this.parent.renderTemplates();\n        var isEventPopup = this.quickPopup.element.querySelector('.' + cls.EVENT_POPUP_CLASS);\n        var popupType = this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo';\n        var eventProp = {\n            type: popupType, cancel: false, data: extend({}, this.getDataFromTarget(target), null, true),\n            target: target, element: this.quickPopup.element\n        };\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            if (popupArgs.cancel) {\n                _this.quickPopupHide();\n                _this.destroyButtons();\n                if (popupArgs.element.classList.contains(cls.POPUP_OPEN)) {\n                    _this.quickPopupClose();\n                }\n                util.removeChildren(_this.quickPopup.element);\n                _this.isMultipleEventSelect = false;\n            }\n            else {\n                var display = _this.quickPopup.element.style.display;\n                _this.quickPopup.element.style.display = 'block';\n                if (_this.parent.isAdaptive) {\n                    _this.quickPopup.element.removeAttribute('style');\n                    _this.quickPopup.element.style.display = 'block';\n                    _this.quickPopup.element.style.height = formatUnit((popupType === 'EditEventInfo') ? 65 : window.innerHeight);\n                }\n                else {\n                    _this.quickPopup.offsetX = 10;\n                    _this.quickPopup.collision = { X: _this.parent.enableRtl ? 'flip' : 'none', Y: 'fit' };\n                    _this.quickPopup.position = { X: _this.parent.enableRtl ? 'left' : 'right', Y: 'top' };\n                    _this.quickPopup.dataBind();\n                    _this.quickPopup.refreshPosition(null, true);\n                    var collide = isCollide(_this.quickPopup.element, _this.parent.element);\n                    if (collide.indexOf(_this.parent.enableRtl ? 'left' : 'right') > -1) {\n                        _this.quickPopup.offsetX = -target.offsetWidth - 10 - _this.quickPopup.element.offsetWidth;\n                        _this.quickPopup.dataBind();\n                        var leftCollide = isCollide(_this.quickPopup.element, _this.parent.element);\n                        if (leftCollide.indexOf('left') > -1) {\n                            _this.quickPopup.position = { X: 'center', Y: 'center' };\n                            _this.quickPopup.collision = { X: 'fit', Y: 'fit' };\n                            _this.quickPopup.offsetX = -(_this.quickPopup.element.offsetWidth / 2);\n                            _this.quickPopup.dataBind();\n                        }\n                    }\n                    if (_this.parent.virtualScrollModule && (collide.indexOf('top') > -1 || collide.indexOf('bottom') > -1)) {\n                        var element = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n                        var translateY = util.getTranslateY(element);\n                        _this.quickPopup.offsetY = translateY;\n                        _this.quickPopup.dataBind();\n                    }\n                }\n                if (isEventPopup) {\n                    _this.applyEventColor();\n                }\n                _this.quickPopup.element.style.display = display;\n                _this.quickPopup.dataBind();\n                _this.quickPopup.show();\n            }\n        });\n    };\n    QuickPopups.prototype.applyEventColor = function () {\n        var colorField = '';\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            colorField = this.parent.enableRtl ? 'border-right-color' : 'border-left-color';\n        }\n        else {\n            colorField = 'background-color';\n        }\n        var color = this.parent.activeEventData.element.style[colorField];\n        if (color === '') {\n            return;\n        }\n        var colorEle = this.quickPopup.element.querySelector('.' + cls.POPUP_HEADER_CLASS);\n        var footerEle = this.quickPopup.element.querySelector('.' + cls.POPUP_FOOTER_CLASS);\n        if (footerEle && footerEle.offsetParent) {\n            colorEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (colorEle) {\n                colorEle.style.borderLeftColor = color;\n                color = \"rgba(\" + color.match(/\\d+/g).join() + \",0.3)\";\n            }\n        }\n        if (colorEle) {\n            colorEle.style.backgroundColor = color;\n        }\n    };\n    QuickPopups.prototype.quickPopupOpen = function () {\n        if (this.parent.isAdaptive) {\n            this.quickPopup.element.style.top = '0px';\n            return;\n        }\n        if (this.quickPopup.element.querySelector('.' + cls.CELL_POPUP_CLASS)) {\n            var subjectElement = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (subjectElement) {\n                subjectElement.focus();\n            }\n        }\n        else {\n            var editElement = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n            if (editElement) {\n                editElement.focus();\n            }\n            var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n        }\n    };\n    QuickPopups.prototype.quickPopupClose = function () {\n        this.parent.eventBase.focusElement();\n        this.quickPopup.relateTo = cls.WORK_CELLS_CLASS;\n        this.fieldValidator.destroyToolTip();\n        if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n            this.fieldValidator.destroy();\n        }\n        this.destroyButtons();\n        util.removeChildren(this.quickPopup.element);\n    };\n    QuickPopups.prototype.morePopupOpen = function () {\n        if (this.parent.isAdaptive) {\n            this.morePopup.element.style.top = '0px';\n            this.morePopup.element.style.left = '0px';\n            this.morePopup.element.style.height = formatUnit(window.innerHeight);\n            return;\n        }\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS).focus();\n        this.morePopup.refreshPosition();\n    };\n    QuickPopups.prototype.morePopupClose = function () {\n        var moreWrapper = this.parent.element.querySelector('.' + cls.MORE_EVENT_WRAPPER_CLASS);\n        if (moreWrapper) {\n            remove(moreWrapper);\n        }\n    };\n    QuickPopups.prototype.popupClose = function () {\n        this.isCrudAction = false;\n        this.quickPopupHide(true);\n    };\n    QuickPopups.prototype.quickPopupHide = function (hideAnimation) {\n        var _this = this;\n        if (!this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            return;\n        }\n        var isCellPopup = this.quickPopup.element.querySelector('.' + cls.CELL_POPUP_CLASS);\n        var popupData;\n        if (isCellPopup) {\n            var formvalidator = this.quickPopup.element.querySelector('.e-formvalidator');\n            if (this.isCrudAction && formvalidator &&\n                !formvalidator.ej2_instances[0].validate()) {\n                return;\n            }\n            var fields = this.parent.eventFields;\n            var saveObj = this.parent.eventWindow.getObjectFromFormData(cls.POPUP_WRAPPER_CLASS);\n            this.parent.eventWindow.setDefaultValueToObject(saveObj);\n            saveObj[fields.id] = this.parent.eventBase.getEventMaxID();\n            saveObj[fields.startTime] = this.parent.activeCellsData.startTime;\n            saveObj[fields.endTime] = this.parent.activeCellsData.endTime;\n            saveObj[fields.isAllDay] = this.parent.activeCellsData.isAllDay;\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.setResourceValues(saveObj);\n            }\n            popupData = saveObj;\n        }\n        else {\n            popupData = this.parent.activeEventData.event;\n        }\n        var isEventPopup = this.quickPopup.element.querySelector('.' + cls.EVENT_POPUP_CLASS);\n        var args = {\n            type: this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo',\n            cancel: false, data: popupData, element: this.quickPopup.element,\n            target: (isCellPopup ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        this.parent.trigger(event.popupClose, args, function (popupCloseArgs) {\n            if (!popupCloseArgs.cancel) {\n                if (_this.quickPopup.element.classList.contains('e-popup-open')) {\n                    if (isCellPopup && _this.isCrudAction) {\n                        _this.parent.currentAction = 'Add';\n                        _this.parent.crudModule.addEvent(popupCloseArgs.data);\n                    }\n                    if (hideAnimation) {\n                        var animation = _this.quickPopup.hideAnimation;\n                        _this.quickPopup.hideAnimation = null;\n                        _this.quickPopup.hide();\n                        _this.quickPopup.hideAnimation = animation;\n                    }\n                    else {\n                        _this.quickPopup.hide();\n                    }\n                    _this.isMultipleEventSelect = false;\n                    _this.isCrudAction = false;\n                }\n            }\n        });\n    };\n    QuickPopups.prototype.navigationClick = function (e) {\n        var navigateEle = closest(e.target, '.' + cls.NAVIGATE_CLASS);\n        if (!isNullOrUndefined(navigateEle)) {\n            var date = this.parent.getDateFromElement(e.currentTarget);\n            if (!isNullOrUndefined(date)) {\n                this.closeClick();\n                this.parent.setScheduleProperties({ selectedDate: date });\n                this.parent.changeView(this.parent.getNavigateView(), e);\n            }\n        }\n    };\n    QuickPopups.prototype.documentClick = function (e) {\n        var target = e.event.target;\n        var classNames = '.' + cls.POPUP_WRAPPER_CLASS + ',.' + cls.HEADER_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS +\n            ',.' + cls.WORK_CELLS_CLASS + ',.' + cls.APPOINTMENT_CLASS + ',.e-popup';\n        var popupWrap = this.parent.element.querySelector('.' + cls.POPUP_WRAPPER_CLASS);\n        if (popupWrap && popupWrap.childElementCount > 0 && !closest(target, classNames)) {\n            this.quickPopupHide();\n        }\n        var tar = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        if (tar && tar !== target && this.parent.allowInline) {\n            this.parent.inlineModule.documentClick();\n        }\n        if (closest(target, '.' + cls.APPOINTMENT_CLASS + ',.' + cls.HEADER_CELLS_CLASS)) {\n            this.parent.removeNewEventElement();\n        }\n        if (!closest(target, classNames)) {\n            this.quickPopupHide();\n            this.parent.removeNewEventElement();\n        }\n        if (!closest(target, '.' + cls.MORE_POPUP_WRAPPER_CLASS) && (target.classList &&\n            !target.classList.contains(cls.MORE_INDICATOR_CLASS))\n            && (!closest(target, '.' + cls.POPUP_OPEN)) && !closest(target, '.' + cls.WORK_CELLS_CLASS)) {\n            this.morePopup.hide();\n        }\n    };\n    QuickPopups.prototype.onClosePopup = function () {\n        this.quickPopupHide();\n        this.parent.eventBase.focusElement();\n    };\n    QuickPopups.prototype.addEventListener = function () {\n        this.parent.on(event.cellClick, this.cellClick, this);\n        this.parent.on(event.eventClick, this.eventClick, this);\n        this.parent.on(event.documentClick, this.documentClick, this);\n        this.parent.on(event.dataReady, this.updateMoreEventContent, this);\n    };\n    QuickPopups.prototype.removeEventListner = function () {\n        this.parent.off(event.cellClick, this.cellClick);\n        this.parent.off(event.eventClick, this.eventClick);\n        this.parent.off(event.documentClick, this.documentClick);\n        this.parent.off(event.dataReady, this.updateMoreEventContent);\n    };\n    QuickPopups.prototype.destroyButtons = function () {\n        var buttonCollections = [].slice.call(this.quickPopup.element.querySelectorAll('.e-control.e-btn'));\n        for (var _i = 0, buttonCollections_1 = buttonCollections; _i < buttonCollections_1.length; _i++) {\n            var button = buttonCollections_1[_i];\n            var instance = button.ej2_instances[0];\n            if (instance) {\n                instance.destroy();\n            }\n        }\n    };\n    QuickPopups.prototype.refreshQuickDialog = function () {\n        if (this.quickDialog.element) {\n            this.quickDialog.destroy();\n            remove(this.quickDialog.element);\n            this.quickDialog.element = null;\n        }\n        this.renderQuickDialog();\n    };\n    QuickPopups.prototype.refreshQuickPopup = function () {\n        if (this.quickPopup.element) {\n            this.quickPopup.destroy();\n            remove(this.quickPopup.element);\n            this.quickPopup.element = null;\n        }\n        this.renderQuickPopup();\n    };\n    QuickPopups.prototype.refreshMorePopup = function () {\n        if (this.morePopup.element) {\n            this.morePopup.destroy();\n            remove(this.morePopup.element);\n            this.morePopup.element = null;\n        }\n        this.renderMorePopup();\n    };\n    QuickPopups.prototype.destroy = function () {\n        if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n            this.fieldValidator.destroy();\n        }\n        this.removeEventListner();\n        this.destroyButtons();\n        this.quickPopup.destroy();\n        remove(this.quickPopup.element);\n        this.morePopup.destroy();\n        remove(this.morePopup.element);\n        if (this.quickDialog.element) {\n            this.quickDialog.destroy();\n            remove(this.quickDialog.element);\n            this.quickDialog.element = null;\n        }\n    };\n    return QuickPopups;\n}());\nexport { QuickPopups };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, append, createElement, addClass } from '@syncfusion/ej2-base';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Tooltip for Schedule\n */\nvar EventTooltip = /** @class */ (function () {\n    function EventTooltip(parent) {\n        this.parent = parent;\n        this.tooltipObj = new Tooltip({\n            animation: { close: { effect: 'FadeOut' } },\n            content: 'No title',\n            position: 'BottomRight',\n            offsetY: 10,\n            mouseTrail: this.parent.isAdaptive ? false : true,\n            showTipPointer: false,\n            cssClass: this.parent.cssClass + ' ' + cls.EVENT_TOOLTIP_ROOT_CLASS,\n            target: this.getTargets(),\n            beforeRender: this.onBeforeRender.bind(this),\n            beforeClose: this.onBeforeClose.bind(this),\n            enableRtl: this.parent.enableRtl\n        });\n        this.tooltipObj.appendTo(this.parent.element);\n    }\n    EventTooltip.prototype.getTargets = function () {\n        var targets = [];\n        if (this.parent.activeViewOptions.group.headerTooltipTemplate) {\n            targets.push('.' + cls.RESOURCE_CELLS_CLASS);\n        }\n        if (this.parent.eventSettings.enableTooltip) {\n            targets.push('.' + cls.APPOINTMENT_CLASS);\n        }\n        return targets.join(',');\n    };\n    EventTooltip.prototype.onBeforeRender = function (args) {\n        if (!isNullOrUndefined(args.target.getAttribute('data-tooltip-id'))) {\n            return;\n        }\n        if (args.target.classList.contains(cls.RESOURCE_CELLS_CLASS) && this.parent.activeViewOptions.group.resources.length > 0) {\n            var resCollection = void 0;\n            if (this.parent.activeView.isTimelineView()) {\n                var index = parseInt(args.target.getAttribute('data-group-index'), 10);\n                resCollection = this.parent.resourceBase.lastResourceLevel[index];\n            }\n            else {\n                var rowIndex = args.target.parentNode.sectionRowIndex;\n                var cellIndex = args.target.cellIndex;\n                resCollection = this.parent.activeView.getColumnLevels()[rowIndex][cellIndex];\n            }\n            var data = {\n                resource: resCollection.resource,\n                resourceData: resCollection.resourceData\n            };\n            var contentContainer = createElement('div');\n            var templateId = this.parent.element.id + '_headerTooltipTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getHeaderTooltipTemplate()(data, this.parent, 'headerTooltipTemplate', templateId, false));\n            append(tooltipTemplate, contentContainer);\n            this.setContent(contentContainer);\n            this.parent.renderTemplates();\n            return;\n        }\n        var record = this.parent.eventBase.getEventByGuid(args.target.getAttribute('data-guid'));\n        if (!isNullOrUndefined(this.parent.eventSettings.tooltipTemplate)) {\n            var contentContainer = createElement('div');\n            var templateId = this.parent.element.id + '_tooltipTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getEventTooltipTemplate()(record, this.parent, 'tooltipTemplate', templateId, false));\n            append(tooltipTemplate, contentContainer);\n            this.setContent(contentContainer);\n        }\n        else {\n            var globalize = this.parent.globalize;\n            var fields = this.parent.eventFields;\n            var eventStart = new Date('' + record[fields.startTime]);\n            var eventEnd = new Date('' + record[fields.endTime]);\n            eventEnd = (eventEnd.getHours() === 0 && eventEnd.getMinutes() === 0) ? new Date(eventEnd.setMilliseconds(-1000)) : eventEnd;\n            var startDate = util.resetTime(new Date('' + eventStart));\n            var endDate = util.resetTime(new Date('' + eventEnd));\n            var tooltipSubject = (record[fields.subject] || this.parent.eventSettings.fields.subject.default);\n            var tooltipLocation = !isNullOrUndefined(record[fields.location]) ? record[fields.location] : '';\n            var startMonthDate = '';\n            var startMonthYearDate = '';\n            var endMonthYearDate = '';\n            startMonthDate = globalize.formatDate(eventStart, {\n                type: 'date', skeleton: 'MMMd', calendar: this.parent.getCalendarMode()\n            });\n            startMonthYearDate = globalize.formatDate(eventStart, {\n                type: 'date', skeleton: 'medium', calendar: this.parent.getCalendarMode()\n            });\n            endMonthYearDate = globalize.formatDate(eventEnd, {\n                type: 'date', skeleton: 'medium', calendar: this.parent.getCalendarMode()\n            });\n            startMonthDate = util.capitalizeFirstWord(startMonthDate, 'single');\n            startMonthYearDate = util.capitalizeFirstWord(startMonthYearDate, 'single');\n            endMonthYearDate = util.capitalizeFirstWord(endMonthYearDate, 'single');\n            var skeleton = 'short';\n            var startTime = globalize.formatDate(eventStart, {\n                type: 'time', skeleton: skeleton, calendar: this.parent.getCalendarMode()\n            });\n            var endTime = globalize.formatDate(eventEnd, {\n                type: 'time', skeleton: skeleton, calendar: this.parent.getCalendarMode()\n            });\n            var tooltipDetails = void 0;\n            if (startDate.getTime() === endDate.getTime()) {\n                tooltipDetails =\n                    globalize.formatDate(eventStart, {\n                        type: 'date', skeleton: 'long', calendar: this.parent.getCalendarMode()\n                    });\n                tooltipDetails = util.capitalizeFirstWord(tooltipDetails, 'single');\n            }\n            else {\n                tooltipDetails = (startDate.getFullYear() === endDate.getFullYear()) ? (startMonthDate + ' - ' + endMonthYearDate) :\n                    (startMonthYearDate + ' - ' + endMonthYearDate);\n            }\n            var tooltipTime = (record[fields.isAllDay]) ? this.parent.localeObj.getConstant('allDay') :\n                (startTime + ' - ' + endTime);\n            var content = '<div><div class=\"e-subject\">' + tooltipSubject + '</div>' +\n                '<div class=\"e-location\">' + tooltipLocation + '</div>' +\n                '<div class=\"e-details\">' + tooltipDetails + '</div>' +\n                '<div class=\"e-all-day\">' + tooltipTime + '</div></div>';\n            this.setContent(content);\n        }\n        this.parent.renderTemplates();\n    };\n    EventTooltip.prototype.onBeforeClose = function () {\n        this.parent.resetTemplates(['tooltipTemplate', 'headerTooltipTemplate']);\n    };\n    EventTooltip.prototype.setContent = function (content) {\n        this.tooltipObj.setProperties({ content: content }, true);\n    };\n    EventTooltip.prototype.close = function () {\n        this.tooltipObj.close();\n    };\n    EventTooltip.prototype.destroy = function () {\n        this.tooltipObj.destroy();\n        addClass([this.parent.element], 'e-control');\n        this.tooltipObj = null;\n    };\n    return EventTooltip;\n}());\nexport { EventTooltip };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Property, NotifyPropertyChanges, Event, Browser } from '@syncfusion/ej2-base';\nimport { getDefaultDateObject, getValue, cldrData, L10n, isNullOrUndefined, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { DatePicker } from '@syncfusion/ej2-calendars';\nimport { Button, RadioButton } from '@syncfusion/ej2-buttons';\nimport { EventHandler, classList } from '@syncfusion/ej2-base';\nimport { extractObjectFromRule, generate, generateSummary, getRecurrenceStringFromDate, getCalendarUtil } from './date-generator';\nimport { capitalizeFirstWord } from '../schedule/base/util';\nvar HEADER = 'e-editor';\nvar INPUTWARAPPER = 'e-input-wrapper';\nvar INPUTWARAPPERSIDE = 'e-input-wrapper-side';\nvar REPEATELEMENT = 'e-repeat-element';\nvar REPEATINTERVAL = 'e-repeat-interval';\nvar INTERVALCLASS = 'e-interval';\nvar DAYWRAPPER = 'e-days';\nvar WEEKWRAPPER = 'e-non-week';\nvar WEEKPOSITION = 'e-week-position';\nvar YEAREXPANDERWRAPPER = 'e-year-expander';\nvar YEAREXPANDERELEMENT = 'e-year-expander-element';\nvar MONETHEXPANDERWRAPPER = 'e-month-expander';\nvar MONETHEXPANDWRAPPER = 'e-month-expand-wrapper';\nvar MONTHEXPANDERELEMENT = 'e-month-expander-element';\nvar MONTHEXPANDERCHECKBOXWRAPPER = 'e-month-expander-checkbox-wrapper';\nvar FORMLEFT = 'e-form-left';\nvar FORMRIGHT = 'e-form-right';\nvar MONTHDAYWRAPPER = 'e-month-day';\nvar MONTHEXPANNDERELEM = 'e-month-expander-wrapper';\nvar MONTHPOS = 'e-month-pos';\nvar MONTHWEEK = 'e-month-week';\nvar ENDON = 'e-end-on';\nvar MONTHEXPANDERLABEL = 'e-month-expander-label';\nvar WEEKEXPANDERLABEL = 'e-week-expander-label';\nvar ENDONLABEL = 'e-end-on-label';\nvar ENDONLEFT = 'e-end-on-left';\nvar MONTHDAYELEMENT = 'e-monthday-element';\nvar ENDONELEMENT = 'e-end-on-element';\nvar ENDONDATE = 'e-end-on-date';\nvar UNTILDATE = 'e-until-date';\nvar ENDONCOUNTWRAPPER = 'e-end-on-count';\nvar ENDONCOUNT = 'e-recurrence-count';\nvar HIDEWRAPPER = 'e-hide-recurrence-element';\nvar RTLCLASS = 'e-rtl';\nvar PRIMARY = 'e-primary';\nvar ACTIVE = 'e-active';\nvar RECURRENCETABLE = 'e-recurrence-table';\nvar REPEATCONTENT = 'e-repeat-content';\nvar REPEATCONTENTWRAPPER = 'e-repeat-content-wrapper';\nvar NONE = 'none';\nvar DAILY = 'daily';\nvar WEEKLY = 'weekly';\nvar MONTHLY = 'monthly';\nvar YEARLY = 'yearly';\nvar NEVER = 'never';\nvar UNTIL = 'until';\nvar COUNT = 'count';\nvar TEXTFIELD = 'text';\nvar VALUEFIELD = 'value';\nvar LAST = 'last';\nvar REPEAT = 'repeat';\nvar REPEATEVERY = 'repeatEvery';\nvar ON = 'on';\nvar END = 'end';\nvar RADIOLABEL = 'onDay';\nvar RULEUNTIL = 'UNTIL';\nvar RULEBYDAY = 'BYDAY';\nvar RULEBYMONTHDAY = 'BYMONTHDAY';\nvar RULEBYMONTH = 'BYMONTH';\nvar RULEINTERVAL = 'INTERVAL';\nvar RULECOUNT = 'COUNT';\nvar RULESETPOS = 'BYSETPOS';\nvar RULEFREQ = 'FREQ';\nvar RULEDAILY = 'DAILY';\nvar RULEWEEKLY = 'WEEKLY';\nvar RULEMONTHLY = 'MONTHLY';\nvar RULEYEARLY = 'YEARLY';\nvar RULESUNDAY = 'SU';\nvar RULEMONDAY = 'MO';\nvar RULETUESDAY = 'TU';\nvar RULEWEDNESDAY = 'WE';\nvar RULETHURSDAY = 'TH';\nvar RULEFRIDAY = 'FR';\nvar RULESATURDAY = 'SA';\nvar KEYSUNDAY = 'sun';\nvar KEYMONDAY = 'mon';\nvar KEYTUESDAY = 'tue';\nvar KEYWEDNESDAY = 'wed';\nvar KEYTHURSDAY = 'thu';\nvar KEYFRIDAY = 'fri';\nvar KEYSATURDAY = 'sat';\nvar EQUAL = '=';\nvar SEMICOLON = ';';\nvar COMMA = ',';\nvar FIRST = 'first';\nvar SECOND = 'second';\nvar THIRD = 'third';\nvar FOURTH = 'fourth';\nvar contentType = {\n    none: '',\n    daily: 'days',\n    weekly: 'weeks',\n    monthly: 'months',\n    yearly: 'years'\n};\nvar valueData = {\n    'sun': RULESUNDAY,\n    'mon': RULEMONDAY,\n    'tue': RULETUESDAY,\n    'wed': RULEWEDNESDAY,\n    'thu': RULETHURSDAY,\n    'fri': RULEFRIDAY,\n    'sat': RULESATURDAY\n};\nvar neverClassList = [DAYWRAPPER, WEEKWRAPPER, ENDON, INTERVALCLASS, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar weekClassList = [WEEKWRAPPER];\nvar monthClassList = [DAYWRAPPER, YEAREXPANDERWRAPPER];\nvar yearClassList = [DAYWRAPPER];\nvar dailyClassList = [DAYWRAPPER, WEEKWRAPPER, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar noEndClassList = [ENDONDATE, ENDONCOUNTWRAPPER];\nvar endOnCountClassList = [ENDONDATE];\nvar endOnDateClassList = [ENDONCOUNTWRAPPER];\n/**\n * Represents the RecurrenceEditor component.\n * ```html\n * <div id=\"recurrence\"></div>\n * ```\n * ```typescript\n * <script>\n *   var recObj = new RecurrenceEditor();\n *   recObj.appendTo(\"#recurrence\");\n * </script>\n * ```\n */\nvar RecurrenceEditor = /** @class */ (function (_super) {\n    __extends(RecurrenceEditor, _super);\n    /**\n     * Constructor for creating the widget\n     *\n     * @param {RecurrenceEditorModel} options Accepts the recurrence editor model properties to initiate the rendering\n     * @param {string | HTMLElement} element Accepts the DOM element reference\n     */\n    function RecurrenceEditor(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        _this.defaultLocale = {\n            none: 'None',\n            daily: 'Daily',\n            weekly: 'Weekly',\n            monthly: 'Monthly',\n            month: 'Month',\n            yearly: 'Yearly',\n            never: 'Never',\n            until: 'Until',\n            count: 'Count',\n            first: 'First',\n            second: 'Second',\n            third: 'Third',\n            fourth: 'Fourth',\n            last: 'Last',\n            repeat: 'Repeat',\n            repeatEvery: 'Repeat every',\n            on: 'Repeat On',\n            end: 'End',\n            onDay: 'Day',\n            days: 'Day(s)',\n            weeks: 'Week(s)',\n            months: 'Month(s)',\n            years: 'Year(s)',\n            every: 'every',\n            summaryTimes: 'time(s)',\n            summaryOn: 'on',\n            summaryUntil: 'until',\n            summaryRepeat: 'Repeats',\n            summaryDay: 'day(s)',\n            summaryWeek: 'week(s)',\n            summaryMonth: 'month(s)',\n            summaryYear: 'year(s)',\n            monthWeek: 'Month Week',\n            monthPosition: 'Month Position',\n            monthExpander: 'Month Expander',\n            yearExpander: 'Year Expander',\n            repeatInterval: 'Repeat Interval'\n        };\n        _this.renderStatus = false;\n        _this.dayButtons = [];\n        _this.monthButtons = [];\n        return _this;\n    }\n    RecurrenceEditor.prototype.startState = function (freq, endOn, startDate) {\n        this.showFormElement();\n        this.updateForm(freq);\n        this.freshOnEndForm();\n        this.updateEndOnForm(endOn);\n        this.selectMonthDay(startDate);\n        this.updateUntilDate(startDate);\n        this.onMonthDay.setProperties({ checked: true });\n    };\n    RecurrenceEditor.prototype.preRender = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        this.calendarUtil = getCalendarUtil(this.calendarMode);\n    };\n    RecurrenceEditor.prototype.applyCustomClass = function (cssClass) {\n        if (cssClass) {\n            addClass([this.element], cssClass.split(' '));\n        }\n    };\n    RecurrenceEditor.prototype.initialize = function () {\n        addClass([this.element], 'e-' + this.getModuleName());\n        this.renderComponent();\n        if (!isNullOrUndefined(this.value) && this.value !== '') {\n            this.setRecurrenceRule(this.value);\n        }\n        else {\n            if (!isNullOrUndefined(this.repeatType.value)) {\n                this.startState(this.repeatType.value.toString().toUpperCase(), NEVER, this.startDate);\n                this.updateForm(this.repeatType.value.toString());\n            }\n            if (this.selectedType > 0) {\n                this.setProperties({ value: this.getRecurrenceRule() }, false);\n            }\n        }\n        this.applyCustomClass(this.cssClass);\n    };\n    RecurrenceEditor.prototype.triggerChangeEvent = function () {\n        var _this = this;\n        if (this.renderStatus) {\n            var value = this.getRecurrenceRule();\n            this.trigger('change', { value: value }, function (args) { return _this.setProperties({ value: args.value }, false); });\n        }\n    };\n    RecurrenceEditor.prototype.resetDayButton = function () {\n        var elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n        elements.forEach(function (element) { return removeClass([element], [ACTIVE, PRIMARY]); });\n    };\n    RecurrenceEditor.prototype.daySelection = function (dayIndex) {\n        this.resetDayButton();\n        var days = [0, 1, 2, 3, 4, 5, 6];\n        this.rotateArray(days, this.firstDayOfWeek);\n        var element = this.element.querySelector('.' + DAYWRAPPER + ' button[data-index=\"' + days.indexOf(dayIndex) + '\"]');\n        if (element) {\n            addClass([element], [ACTIVE, PRIMARY]);\n        }\n    };\n    RecurrenceEditor.prototype.rtlClass = function (status) {\n        if (status) {\n            addClass([this.element], RTLCLASS);\n        }\n        else {\n            removeClass([this.element], RTLCLASS);\n        }\n    };\n    RecurrenceEditor.prototype.updateUntilDate = function (date) {\n        var tempDate = new Date(date.getTime());\n        tempDate.setDate(tempDate.getDate() + 60);\n        this.untilDateObj.setProperties({ value: tempDate });\n    };\n    RecurrenceEditor.prototype.selectMonthDay = function (date) {\n        var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n        this.monthDate.setProperties({ value: this.calendarUtil.getDate(date) });\n        this.monthWeekDays.setProperties({ value: valueData[weekday[date.getDay()]] });\n        this.monthValue.setProperties({ value: '' + this.calendarUtil.getMonth(date) });\n        this.monthWeekPos.setProperties({ value: this.getDayPosition(date) });\n        this.daySelection(date.getDay());\n    };\n    RecurrenceEditor.prototype.updateForm = function (state) {\n        var _this = this;\n        this.repeatType.setProperties({ value: state });\n        var end = this.element.querySelector('.' + ENDON);\n        if (state === DAILY) {\n            classList(end, [FORMLEFT], [FORMRIGHT]);\n        }\n        else {\n            classList(end, [FORMRIGHT], [FORMLEFT]);\n        }\n        switch (state) {\n            case NONE:\n                neverClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case WEEKLY:\n                weekClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case MONTHLY:\n                monthClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case YEARLY:\n                yearClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case DAILY:\n                dailyClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n        }\n    };\n    RecurrenceEditor.prototype.updateEndOnForm = function (state) {\n        var _this = this;\n        this.endType.setProperties({ value: state });\n        switch (state) {\n            case NEVER:\n                noEndClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case UNTIL:\n                endOnDateClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case COUNT:\n                endOnCountClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n        }\n    };\n    RecurrenceEditor.prototype.freshOnEndForm = function () {\n        var _this = this;\n        noEndClassList.forEach(function (className) {\n            var element = _this.element.querySelector('.' + className);\n            if (element) {\n                removeClass([element], HIDEWRAPPER);\n            }\n        });\n    };\n    RecurrenceEditor.prototype.showFormElement = function () {\n        var _this = this;\n        neverClassList.forEach(function (className) {\n            var hideElement = _this.element.querySelector('.' + className);\n            if (hideElement) {\n                removeClass([hideElement], HIDEWRAPPER);\n            }\n        });\n    };\n    RecurrenceEditor.prototype.renderDropdowns = function () {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        this.repeatType = new DropDownList({\n            //set the data to dataSource property\n            dataSource: this.getRepeatData(),\n            floatLabelType: 'Always',\n            enableRtl: this.enableRtl,\n            index: this.selectedType,\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            placeholder: this.localeObj.getConstant(REPEAT),\n            htmlAttributes: { 'title': this.localeObj.getConstant(REPEAT) },\n            change: function (args) {\n                self.setProperties({ selectedType: _this.frequencies.indexOf(args.value) }, false);\n                self.element.querySelector('.' + REPEATCONTENT).innerHTML =\n                    self.localeObj.getConstant(contentType[args.value]);\n                self.showFormElement();\n                self.updateForm(args.value);\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        // set placeholder to DropDownList input element\n        this.repeatType.appendTo(this.element.querySelector('.' + REPEATELEMENT));\n        this.endType = new DropDownList({\n            dataSource: this.getEndData(),\n            popupWidth: this.getPopupWidth(),\n            enableRtl: this.enableRtl,\n            index: 1,\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            change: function (args) {\n                self.freshOnEndForm();\n                self.updateEndOnForm(args.value);\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.endType.appendTo(this.element.querySelector('.' + ENDONELEMENT));\n        // eslint-disable-next-line @typescript-eslint/ban-types\n        var renderDropDownList = function (dropDownData) {\n            return new DropDownList({\n                dataSource: dropDownData,\n                popupWidth: _this.getPopupWidth(),\n                enableRtl: _this.enableRtl,\n                fields: {\n                    text: TEXTFIELD,\n                    value: VALUEFIELD\n                },\n                index: 1,\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                change: function (args) {\n                    self.onWeekDay.setProperties({ checked: true });\n                    self.resetFormValues();\n                    self.triggerChangeEvent();\n                }\n            });\n        };\n        this.monthWeekPos = renderDropDownList(this.getMonthPosData());\n        this.monthWeekPos.appendTo(this.element.querySelector('.' + MONTHPOS));\n        this.monthWeekDays = renderDropDownList(this.getDayData('wide'));\n        this.monthWeekDays.appendTo(this.element.querySelector('.' + MONTHWEEK));\n        this.monthValue = new DropDownList({\n            dataSource: this.getMonthData(),\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            floatLabelType: 'Always',\n            enableRtl: this.enableRtl,\n            index: 7,\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            change: function (args) {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.monthValue.appendTo(this.element.querySelector('.' + YEAREXPANDERELEMENT));\n    };\n    RecurrenceEditor.prototype.setDefaultValue = function () {\n        var formelement = [].slice.call(this.element.querySelectorAll('.e-control .e-numerictextbox'));\n        for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n            var element = formelement_1[_i];\n            var instance = element.ej2_instances[0];\n            if (instance.element.classList.contains(REPEATINTERVAL)) {\n                instance.value = 1;\n                instance.dataBind();\n            }\n            else if (instance.element.classList.contains(ENDONCOUNT)) {\n                instance.value = 10;\n                instance.dataBind();\n            }\n        }\n    };\n    RecurrenceEditor.prototype.resetFormValues = function () {\n        var recurreneElement = [].slice.call(this.element.querySelectorAll('.e-control [type=\"text\"]'));\n        for (var _i = 0, recurreneElement_1 = recurreneElement; _i < recurreneElement_1.length; _i++) {\n            var element = recurreneElement_1[_i];\n            var instance = void 0;\n            if (element.classList.contains('e-datepicker')) {\n                instance = element.ej2_instances[0];\n                if (instance.value) {\n                    // eslint-disable-next-line no-self-assign\n                    instance.value = instance.value;\n                    instance.dataBind();\n                }\n                else {\n                    this.updateUntilDate(this.startDate);\n                }\n            }\n            else if (element.classList.contains('e-dropdownlist')) {\n                instance = element.ej2_instances[0];\n                instance.index = instance.index || 0;\n                instance.dataBind();\n            }\n            else if (element.classList.contains('e-numerictextbox')) {\n                instance = element.ej2_instances[0];\n                var value = void 0;\n                if (instance.element.classList.contains(REPEATINTERVAL)) {\n                    value = 1;\n                }\n                else if (instance.element.classList.contains(ENDONCOUNT)) {\n                    value = 10;\n                }\n                else {\n                    value = this.startDate.getDate();\n                }\n                instance.value = instance.value || value;\n                instance.dataBind();\n            }\n        }\n    };\n    RecurrenceEditor.prototype.getPopupWidth = function () {\n        return Browser.isDevice ? '100%' : 'auto';\n    };\n    RecurrenceEditor.prototype.renderDatePickers = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        this.untilDateObj = new DatePicker({\n            firstDayOfWeek: this.firstDayOfWeek,\n            enableRtl: this.enableRtl,\n            locale: this.locale,\n            min: this.minDate,\n            max: this.maxDate,\n            format: (isNullOrUndefined(this.dateFormat) ? this.getFormat('dateFormats') : this.dateFormat),\n            change: function (args) {\n                if (args.value) {\n                    self.triggerChangeEvent();\n                }\n            }\n        });\n        this.untilDateObj.appendTo(this.element.querySelector('.' + UNTILDATE));\n    };\n    RecurrenceEditor.prototype.getFormat = function (formatType) {\n        var format;\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            format = getValue(formatType + '.short', getDefaultDateObject(this.getCalendarMode()));\n        }\n        else {\n            format = getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.' + formatType + '.short', cldrData);\n        }\n        return format;\n    };\n    RecurrenceEditor.prototype.dayButtonRender = function () {\n        var _this = this;\n        var btns = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        for (var _i = 0, btns_1 = btns; _i < btns_1.length; _i++) {\n            var btn = btns_1[_i];\n            var button = new Button({ isToggle: true, enableRtl: this.enableRtl }, btn);\n            this.dayButtons.push(button);\n            EventHandler.add(btn, 'click', function (args) {\n                var btns = [].slice.call(_this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n                var element = args.target;\n                if (!element.classList.contains(PRIMARY)) {\n                    addClass([element], PRIMARY);\n                    self.triggerChangeEvent();\n                }\n                else if (btns.length > 1) {\n                    removeClass([element], PRIMARY);\n                    self.triggerChangeEvent();\n                }\n            });\n        }\n    };\n    RecurrenceEditor.prototype.radioButtonRender = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        this.onMonthDay = new RadioButton({\n            label: this.localeObj.getConstant(RADIOLABEL),\n            enableRtl: this.enableRtl,\n            name: 'monthType',\n            value: 'day',\n            change: function () {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.onMonthDay.appendTo(this.element.querySelector('.' + MONTHEXPANDERELEMENT));\n        this.monthButtons.push(this.onMonthDay);\n        this.onWeekDay = new RadioButton({\n            label: '',\n            name: 'monthType',\n            enableRtl: this.enableRtl,\n            value: 'daypos',\n            change: function () {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.onWeekDay.appendTo(this.element.querySelector('.' + MONTHEXPANNDERELEM));\n        this.monthButtons.push(this.onWeekDay);\n    };\n    RecurrenceEditor.prototype.numericTextboxRender = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        this.recurrenceCount = new NumericTextBox({\n            value: 10,\n            format: '#',\n            enableRtl: this.enableRtl,\n            floatLabelType: 'Always',\n            min: 1,\n            max: 999,\n            change: function () {\n                self.triggerChangeEvent();\n            }\n        });\n        this.recurrenceCount.appendTo(this.element.querySelector('.' + ENDONCOUNT));\n        this.monthDate = new NumericTextBox({\n            value: 1,\n            format: '#',\n            enableRtl: this.enableRtl,\n            min: 1,\n            max: 31,\n            change: function () {\n                self.onMonthDay.setProperties({ checked: true });\n                self.triggerChangeEvent();\n            }\n        });\n        this.monthDate.appendTo(this.element.querySelector('.' + MONTHDAYWRAPPER));\n        this.repeatInterval = new NumericTextBox({\n            value: 1,\n            format: '#',\n            min: 1,\n            max: 999,\n            enableRtl: this.enableRtl,\n            floatLabelType: 'Always',\n            placeholder: this.localeObj.getConstant(REPEATEVERY),\n            change: function () {\n                self.triggerChangeEvent();\n            }\n        });\n        this.repeatInterval.appendTo(this.element.querySelector('.' + REPEATINTERVAL));\n    };\n    RecurrenceEditor.prototype.renderComponent = function () {\n        this.setTemplate();\n        this.renderDropdowns();\n        this.renderDatePickers();\n        this.dayButtonRender();\n        this.radioButtonRender();\n        this.numericTextboxRender();\n    };\n    RecurrenceEditor.prototype.rotateArray = function (data, count) {\n        var temp;\n        for (var index = 0; index < count; index++) {\n            temp = data.shift();\n            data.push(temp);\n        }\n    };\n    RecurrenceEditor.prototype.getEndData = function () {\n        var endData = [NEVER, UNTIL, COUNT];\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        var dataSource = [];\n        endData.forEach(function (data) {\n            dataSource.push({ text: self.localeObj.getConstant(data), value: data });\n        });\n        return dataSource;\n    };\n    RecurrenceEditor.prototype.getDayPosition = function (date) {\n        var temp = new Date(date.getTime());\n        var endDate = new Date(date.getTime());\n        var day = date.getDay();\n        var positionCollection = [];\n        temp = this.calendarUtil.getMonthStartDate(temp);\n        endDate = this.calendarUtil.getMonthEndDate(endDate);\n        while (temp < endDate) {\n            if (temp.getDay() === day) {\n                positionCollection.push(temp.getTime());\n            }\n            temp.setDate(temp.getDate() + 1);\n        }\n        if (positionCollection.indexOf(date.getTime()) === positionCollection.length - 1) {\n            return -1;\n        }\n        return (positionCollection.indexOf(date.getTime()) + 1);\n    };\n    RecurrenceEditor.prototype.getRepeatData = function () {\n        var data = [];\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        this.frequencies.forEach(function (element) {\n            var textValue = (element === NONE) ? NEVER : element;\n            data.push({ text: self.localeObj.getConstant(textValue), value: element });\n        });\n        return data;\n    };\n    RecurrenceEditor.prototype.getMonthPosData = function () {\n        var monthpos = [FIRST, SECOND, THIRD, FOURTH, LAST];\n        var monthposValue = {\n            first: 1,\n            second: 2,\n            third: 3,\n            fourth: 4,\n            last: -1\n        };\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        var dataSource = [];\n        monthpos.forEach(function (data) {\n            dataSource.push({ text: self.localeObj.getConstant(data), value: monthposValue[data] });\n        });\n        return dataSource;\n    };\n    RecurrenceEditor.prototype.getDayData = function (format) {\n        var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n        var dayData = [];\n        var cldrObj;\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            var nameSpaceString = 'days.stand-alone.';\n            cldrObj = (getValue(nameSpaceString + format, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            var nameSpaceString = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.stand-alone.' + format;\n            cldrObj = (getValue(nameSpaceString, cldrData));\n        }\n        for (var _i = 0, weekday_1 = weekday; _i < weekday_1.length; _i++) {\n            var obj = weekday_1[_i];\n            var day = getValue(obj, cldrObj);\n            dayData.push({ text: format === 'narrow' ? day : capitalizeFirstWord(day, 'single'), value: valueData[obj] });\n        }\n        return dayData;\n    };\n    RecurrenceEditor.prototype.getMonthData = function () {\n        var monthData = [];\n        var cldrObj;\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            var nameSpaceString = 'months.stand-alone.wide';\n            cldrObj = (getValue(nameSpaceString, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            var nameSpaceString = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.months.stand-alone.wide';\n            cldrObj = (getValue(nameSpaceString, cldrData));\n        }\n        for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n            var obj = _a[_i];\n            monthData.push({\n                text: capitalizeFirstWord(getValue(obj, cldrObj), 'single'),\n                value: obj\n            });\n        }\n        return monthData;\n    };\n    RecurrenceEditor.prototype.setTemplate = function () {\n        var dayData = this.getDayData('narrow');\n        var fullDay = this.getDayData('wide');\n        this.element.innerHTML = '<div class=\"' + HEADER + '\">' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + FORMLEFT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + REPEATELEMENT +\n            '\"label=\"' + REPEATELEMENT.substr(2) + '\" />' +\n            '</div><div class=\"' + INPUTWARAPPER + ' ' +\n            INTERVALCLASS + ' ' + FORMRIGHT + '\"><table  class=\"' + RECURRENCETABLE + ' ' + REPEATCONTENTWRAPPER + '\"><tr>' +\n            '<td><input type=\"text\" tabindex=\"0\" class=\"' + REPEATINTERVAL +\n            '\"title=\"' + this.localeObj.getConstant('repeatEvery') + '\" /></td>' +\n            '<td><span class=\"' + REPEATCONTENT + '\"></span></td>' +\n            '</tr></table></div><div class=\"' + INPUTWARAPPERSIDE + ' ' + DAYWRAPPER + ' ' + FORMLEFT + '\">' +\n            '<div class=' + WEEKEXPANDERLABEL + '>' + this.localeObj.getConstant(ON) + '</div>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"0\" title=\"' + fullDay[0].text + '\">' + dayData[0].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"1\" title=\"' + fullDay[1].text + '\">' + dayData[1].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"2\" title=\"' + fullDay[2].text + '\">' + dayData[2].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"3\" title=\"' + fullDay[3].text + '\">' + dayData[3].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"4\" title=\"' + fullDay[4].text + '\">' + dayData[4].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"5\" title=\"' + fullDay[5].text + '\">' + dayData[5].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"6\" title=\"' + fullDay[6].text + '\">' + dayData[6].text + '</button></div>' +\n            '<div class=\"' + INPUTWARAPPERSIDE + ' ' + WEEKWRAPPER + ' ' + FORMLEFT + '\">' +\n            '<div class=' + MONTHEXPANDERLABEL + '>' + this.localeObj.getConstant(ON) + '</div>' +\n            '<div class=\"' + YEAREXPANDERWRAPPER + '\">' +\n            '<input class=\"' + YEAREXPANDERELEMENT + '\" type=\"text\" tabindex=\"0\" title=\"' +\n            this.localeObj.getConstant('yearExpander') + '\"/>' +\n            '</div>' +\n            '<div class=\"' + MONETHEXPANDERWRAPPER + '\">' +\n            '<table class=\"' + RECURRENCETABLE + ' ' + MONETHEXPANDWRAPPER + '\"><tr><td>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\">' +\n            '<input class=\"' + MONTHEXPANDERELEMENT + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' +\n            '</div></td>' +\n            '<td colspan=\"2\"><div class=\"' + INPUTWARAPPER + ' ' + MONTHDAYELEMENT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHDAYWRAPPER + '\"title=\"' +\n            this.localeObj.getConstant('on') + '\" />' +\n            '</div></td></tr>' +\n            '<tr><td>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\" style=\"min-width: 30px;margin-bottom:18px;\">' +\n            '<input class=\"' + MONTHEXPANNDERELEM + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' +\n            '</div></td>' +\n            '<td><div class=\"' + INPUTWARAPPER + ' ' + WEEKPOSITION + '\" >' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHPOS + '\"title=\"' + this.localeObj.getConstant('monthPosition') + '\" />' +\n            '</div></td>' +\n            '<td><div class=\"' + INPUTWARAPPER + '\" style=\"min-width: 120px;\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHWEEK + '\"title=\"' + this.localeObj.getConstant('monthWeek') + '\" />' +\n            '</div></td></tr></table>' +\n            '</div></div>' +\n            '<div class=\"' + INPUTWARAPPERSIDE + ' ' + ENDON + ' ' + FORMRIGHT + '\">' +\n            '<div class=' + ENDONLABEL + '>' + this.localeObj.getConstant(END) + '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONLEFT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + ENDONELEMENT + '\"title=\"' + this.localeObj.getConstant(END) + '\" />' +\n            '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONDATE + '\" >' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + UNTILDATE + '\"title=\"' + this.localeObj.getConstant(UNTIL) + '\" />' +\n            '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONCOUNTWRAPPER + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + ENDONCOUNT + '\"title=\"' + this.localeObj.getConstant(COUNT) + '\" />' +\n            '</div></div>' +\n            '</div></div>';\n    };\n    RecurrenceEditor.prototype.getSelectedDaysData = function () {\n        var ruleData = RULEBYDAY + EQUAL;\n        var elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n        var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        for (var index = 0; index < elements.length; index++) {\n            ruleData += weekday[parseInt(elements[index].getAttribute('data-index'), 10)] + (index === (elements.length - 1) ? '' : COMMA);\n        }\n        return ruleData + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.getSelectedMonthData = function () {\n        var ruleData;\n        if (this.onWeekDay.checked) {\n            ruleData = RULEBYDAY + EQUAL + this.monthWeekDays.value + SEMICOLON\n                + RULESETPOS + EQUAL + this.monthWeekPos.value + SEMICOLON;\n        }\n        else {\n            ruleData = RULEBYMONTHDAY + EQUAL + this.monthDate.value + SEMICOLON;\n        }\n        return ruleData;\n    };\n    RecurrenceEditor.prototype.getIntervalData = function () {\n        return RULEINTERVAL + EQUAL + this.repeatInterval.value + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.getEndOnCount = function () {\n        return RULECOUNT + EQUAL + this.recurrenceCount.value + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.getYearMonthRuleData = function () {\n        return RULEBYMONTH + EQUAL + this.monthValue.value + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.updateWeekButton = function (keys) {\n        var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        for (var _i = 0, _a = this.dayButtons; _i < _a.length; _i++) {\n            var obj = _a[_i];\n            var index = parseInt(obj.element.getAttribute('data-index'), 10);\n            if (keys.indexOf(weekday[index]) !== -1) {\n                obj.setProperties({ isPrimary: true });\n            }\n            else {\n                obj.setProperties({ isPrimary: false });\n            }\n        }\n    };\n    RecurrenceEditor.prototype.updateMonthUI = function () {\n        if (this.ruleObject.monthDay.length) {\n            this.monthDate.setProperties({ value: this.ruleObject.monthDay[0] });\n            this.onMonthDay.setProperties({ checked: true });\n        }\n        else {\n            this.onWeekDay.setProperties({ checked: true });\n            this.monthWeekPos.setProperties({ value: this.ruleObject.setPosition });\n            for (var _i = 0, _a = Object.keys(valueData); _i < _a.length; _i++) {\n                var key = _a[_i];\n                if (valueData[key] === this.ruleObject.day[0]) {\n                    this.monthWeekDays.setProperties({ value: this.ruleObject.day[0] });\n                    break;\n                }\n            }\n        }\n    };\n    RecurrenceEditor.prototype.updateUI = function (repeat, state) {\n        this.repeatInterval.setProperties({ value: this.ruleObject.interval });\n        switch (state) {\n            case UNTIL:\n                this.untilDateObj.setProperties({ value: this.ruleObject.until });\n                break;\n            case COUNT:\n                this.recurrenceCount.setProperties({ value: this.ruleObject.count });\n                break;\n        }\n        switch (repeat) {\n            case WEEKLY:\n                this.updateWeekButton(this.ruleObject.day);\n                break;\n            case YEARLY:\n                this.monthValue.setProperties({ index: (this.ruleObject.month[0] - 1) });\n                this.updateMonthUI();\n                break;\n            case MONTHLY:\n                this.updateMonthUI();\n                break;\n        }\n    };\n    RecurrenceEditor.prototype.getUntilData = function () {\n        if (!this.untilDateObj.value) {\n            return '';\n        }\n        var tempStr = getRecurrenceStringFromDate(this.untilDateObj.value);\n        return RULEUNTIL + EQUAL + tempStr + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.destroyComponents = function () {\n        if (!this.recurrenceCount.isDestroyed) {\n            this.recurrenceCount.destroy();\n        }\n        if (!this.monthDate.isDestroyed) {\n            this.monthDate.destroy();\n        }\n        if (!this.repeatInterval.isDestroyed) {\n            this.repeatInterval.destroy();\n        }\n        if (!this.untilDateObj.isDestroyed) {\n            this.untilDateObj.destroy();\n        }\n        if (!this.repeatType.isDestroyed) {\n            this.repeatType.destroy();\n        }\n        if (!this.endType.isDestroyed) {\n            this.endType.destroy();\n        }\n        if (!this.monthWeekPos.isDestroyed) {\n            this.monthWeekPos.destroy();\n        }\n        if (!this.monthWeekDays.isDestroyed) {\n            this.monthWeekDays.destroy();\n        }\n        if (!this.monthValue.isDestroyed) {\n            this.monthValue.destroy();\n        }\n        this.dayButtons.forEach(function (element) {\n            if (!element.isDestroyed) {\n                element.destroy();\n            }\n        });\n        this.dayButtons = [];\n        this.monthButtons.forEach(function (element) {\n            if (!element.isDestroyed) {\n                element.destroy();\n            }\n        });\n        this.monthButtons = [];\n    };\n    RecurrenceEditor.prototype.resetFields = function () {\n        this.startState(NONE, NEVER, this.startDate);\n        this.setDefaultValue();\n    };\n    RecurrenceEditor.prototype.updateRuleUntilDate = function (startDate) {\n        if (this.untilDateObj.value && startDate) {\n            var untilDate = this.untilDateObj.value;\n            var newUntilDate = new Date(untilDate.getFullYear(), untilDate.getMonth(), untilDate.getDate(), startDate.getHours(), startDate.getMinutes(), startDate.getMilliseconds());\n            this.untilDateObj.setProperties({ value: newUntilDate });\n        }\n    };\n    RecurrenceEditor.prototype.getCalendarMode = function () {\n        return this.calendarMode.toLowerCase();\n    };\n    RecurrenceEditor.prototype.getRuleSummary = function (rule) {\n        if (rule === void 0) { rule = this.getRecurrenceRule(); }\n        return generateSummary(rule, this.localeObj, this.locale, this.calendarMode);\n    };\n    RecurrenceEditor.prototype.getRecurrenceDates = function (startDate, rule, excludeDate, maximumCount, viewDate) {\n        viewDate = isNullOrUndefined(viewDate) ? this.startDate : viewDate;\n        return generate(startDate, rule, excludeDate, this.firstDayOfWeek, maximumCount, viewDate, this.calendarMode);\n    };\n    RecurrenceEditor.prototype.getRecurrenceRule = function () {\n        var ruleData = RULEFREQ + EQUAL;\n        switch (this.repeatType.value) {\n            case DAILY:\n                ruleData += RULEDAILY + SEMICOLON;\n                break;\n            case WEEKLY:\n                ruleData += RULEWEEKLY + SEMICOLON + this.getSelectedDaysData();\n                break;\n            case MONTHLY:\n                ruleData += RULEMONTHLY + SEMICOLON + this.getSelectedMonthData();\n                break;\n            case YEARLY:\n                ruleData += RULEYEARLY + SEMICOLON + this.getSelectedMonthData() + this.getYearMonthRuleData();\n                break;\n            case NONE:\n                return '';\n        }\n        ruleData += this.getIntervalData();\n        switch (this.endType.value) {\n            case UNTIL:\n                ruleData += this.getUntilData();\n                break;\n            case COUNT:\n                ruleData += this.getEndOnCount();\n                break;\n        }\n        return ruleData;\n    };\n    RecurrenceEditor.prototype.setRecurrenceRule = function (rule, startDate) {\n        if (startDate === void 0) { startDate = this.startDate; }\n        if (!rule) {\n            this.repeatType.setProperties({ value: NONE });\n            return;\n        }\n        this.renderStatus = false;\n        this.ruleObject = extractObjectFromRule(rule);\n        var endon = this.ruleObject.count ? COUNT : (this.ruleObject.until ? UNTIL : NEVER);\n        switch (this.ruleObject.freq) {\n            case RULEDAILY:\n                this.startState(DAILY, endon, startDate);\n                this.updateUI(DAILY, endon);\n                break;\n            case RULEWEEKLY:\n                this.startState(WEEKLY, endon, startDate);\n                this.updateUI(WEEKLY, endon);\n                break;\n            case RULEMONTHLY:\n                this.startState(MONTHLY, endon, startDate);\n                this.updateUI(MONTHLY, endon);\n                break;\n            case RULEYEARLY:\n                this.startState(YEARLY, endon, startDate);\n                this.updateUI(YEARLY, endon);\n                break;\n        }\n        this.renderStatus = true;\n        this.triggerChangeEvent();\n    };\n    /**\n     * Destroys the widget.\n     *\n     * @returns {void}\n     */\n    RecurrenceEditor.prototype.destroy = function () {\n        this.destroyComponents();\n        _super.prototype.destroy.call(this);\n        var removeClasses = ['e-' + this.getModuleName()];\n        if (this.cssClass) {\n            removeClasses = removeClasses.concat(this.cssClass.split(' '));\n        }\n        removeClass([this.element], removeClasses);\n        while (this.element.firstElementChild) {\n            this.element.removeChild(this.element.firstElementChild);\n        }\n    };\n    /**\n     * Get component name.\n     *\n     * @returns {string} Returns the module name\n     * @private\n     */\n    RecurrenceEditor.prototype.getModuleName = function () {\n        return 'recurrenceeditor';\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted state\n     */\n    RecurrenceEditor.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * Initialize the control rendering\n     *\n     * @returns {void}\n     * @private\n     */\n    RecurrenceEditor.prototype.render = function () {\n        this.initialize();\n        this.rtlClass(this.enableRtl);\n        this.renderStatus = true;\n        this.renderComplete();\n    };\n    /**\n     * Called internally, if any of the property value changed.\n     *\n     * @param {RecurrenceEditorModel} newProp Accepts the changed properties new values\n     * @param {RecurrenceEditorModel} oldProp Accepts the changed properties old values\n     * @returns {void}\n     * @private\n     */\n    RecurrenceEditor.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'startDate':\n                    this.selectMonthDay(newProp.startDate);\n                    this.updateUntilDate(newProp.startDate);\n                    this.endType.setProperties({ index: 0 });\n                    break;\n                case 'enableRtl':\n                    this.rtlClass(newProp.enableRtl);\n                    break;\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([this.element], oldProp.cssClass.split(' '));\n                    }\n                    if (newProp.cssClass) {\n                        addClass([this.element], newProp.cssClass.split(' '));\n                    }\n                    break;\n                case 'selectedType':\n                    this.repeatType.setProperties({ index: this.selectedType });\n                    break;\n                case 'minDate':\n                    this.untilDateObj.setProperties({ minDate: this.minDate });\n                    break;\n                case 'maxDate':\n                    this.untilDateObj.setProperties({ maxDate: this.maxDate });\n                    break;\n                case 'value':\n                    if (this.getRecurrenceRule() !== this.value) {\n                        this.setRecurrenceRule(this.value);\n                    }\n                    break;\n                case 'calendarMode':\n                    this.calendarMode = newProp.calendarMode;\n                    this.calendarUtil = getCalendarUtil(newProp.calendarMode);\n                    break;\n                case 'locale':\n                case 'frequencies':\n                case 'firstDayOfWeek':\n                    this.refresh();\n                    break;\n                case 'dateFormat':\n                    this.untilDateObj.setProperties({ format: newProp.dateFormat });\n                    break;\n            }\n        }\n    };\n    __decorate([\n        Property(['none', 'daily', 'weekly', 'monthly', 'yearly'])\n    ], RecurrenceEditor.prototype, \"frequencies\", void 0);\n    __decorate([\n        Property(0)\n    ], RecurrenceEditor.prototype, \"firstDayOfWeek\", void 0);\n    __decorate([\n        Property(new Date())\n    ], RecurrenceEditor.prototype, \"startDate\", void 0);\n    __decorate([\n        Property()\n    ], RecurrenceEditor.prototype, \"dateFormat\", void 0);\n    __decorate([\n        Property('Gregorian')\n    ], RecurrenceEditor.prototype, \"calendarMode\", void 0);\n    __decorate([\n        Property()\n    ], RecurrenceEditor.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property()\n    ], RecurrenceEditor.prototype, \"value\", void 0);\n    __decorate([\n        Property(new Date(1900, 0, 1))\n    ], RecurrenceEditor.prototype, \"minDate\", void 0);\n    __decorate([\n        Property(new Date(2099, 11, 31))\n    ], RecurrenceEditor.prototype, \"maxDate\", void 0);\n    __decorate([\n        Property(0)\n    ], RecurrenceEditor.prototype, \"selectedType\", void 0);\n    __decorate([\n        Event()\n    ], RecurrenceEditor.prototype, \"change\", void 0);\n    RecurrenceEditor = __decorate([\n        NotifyPropertyChanges\n    ], RecurrenceEditor);\n    return RecurrenceEditor;\n}(Component));\nexport { RecurrenceEditor };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, isNullOrUndefined, addClass, remove, EventHandler, extend, append } from '@syncfusion/ej2-base';\nimport { cldrData, removeClass, getValue, getDefaultDateObject, closest, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { Query, Deferred } from '@syncfusion/ej2-data';\nimport { CheckBox, Button } from '@syncfusion/ej2-buttons';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { FieldValidator } from './form-validator';\nimport { RecurrenceEditor } from '../../recurrence-editor/recurrence-editor';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\nvar REPEAT_CONTAINER_CLASS = 'e-recurrence-container';\nvar REPEAT_BUTTON_ICON_CLASS = 'e-recurrence-edit';\nvar REPEAT_BUTTON_CLASS = 'e-recurrence-edit-button';\nvar REPEAT_DIALOG_CLASS = 'e-recurrence-dialog';\nvar HIDE_STYLE_CLASS = 'e-hide';\n/**\n * Event editor window\n */\nvar EventWindow = /** @class */ (function () {\n    function EventWindow(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.fields = this.parent.eventFields;\n        this.timezoneData = this.parent.tzModule.timezoneData;\n        this.eventWindowTime = { startTime: new Date(), endTime: new Date() };\n        this.fieldValidator = new FieldValidator();\n        this.renderEventWindow();\n    }\n    EventWindow.prototype.renderEventWindow = function () {\n        this.element = createElement('div', { id: this.parent.element.id + '_dialog_wrapper' });\n        this.parent.element.appendChild(this.element);\n        var dialogModel = {\n            animationSettings: { effect: 'Zoom' },\n            content: this.getEventWindowContent(),\n            cssClass: cls.EVENT_WINDOW_DIALOG_CLASS,\n            enableRtl: this.parent.enableRtl,\n            height: this.parent.isAdaptive ? '100%' : 'auto',\n            minHeight: '300px',\n            isModal: true,\n            showCloseIcon: this.parent.isAdaptive ? false : true,\n            target: document.body,\n            visible: false,\n            width: '500px',\n            beforeOpen: this.onBeforeOpen.bind(this),\n            beforeClose: this.onBeforeClose.bind(this)\n        };\n        if (this.parent.isAdaptive) {\n            dialogModel.cssClass = cls.EVENT_WINDOW_DIALOG_CLASS + ' ' + cls.DEVICE_CLASS;\n            dialogModel.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' +\n                this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\n        }\n        else {\n            dialogModel.buttons = [{\n                    buttonModel: {\n                        content: this.l10n.getConstant('deleteButton'), cssClass: cls.DELETE_EVENT_CLASS,\n                        disabled: !this.parent.eventSettings.allowDeleting || this.parent.readonly\n                    },\n                    click: this.eventDelete.bind(this)\n                }, {\n                    buttonModel: {\n                        content: this.l10n.getConstant('saveButton'), cssClass: 'e-primary ' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS,\n                        isPrimary: true, disabled: !this.parent.eventSettings.allowAdding || this.parent.readonly\n                    },\n                    click: this.eventSave.bind(this)\n                }, {\n                    buttonModel: { cssClass: cls.EVENT_WINDOW_CANCEL_BUTTON_CLASS, content: this.l10n.getConstant('cancelButton') },\n                    click: this.dialogClose.bind(this)\n                }];\n            dialogModel.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\n        }\n        this.dialogObject = new Dialog(dialogModel, this.element);\n        if (this.dialogObject.element.querySelector('.e-dlg-closeicon-btn')) {\n            this.dialogObject.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n        }\n        addClass([this.element.parentElement], cls.EVENT_WINDOW_DIALOG_CLASS + '-container');\n        if (this.parent.isAdaptive) {\n            EventHandler.add(this.element.querySelector('.' + cls.EVENT_WINDOW_BACK_ICON_CLASS), 'click', this.dialogClose, this);\n            EventHandler.add(this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS), 'click', this.eventSave, this);\n        }\n        this.applyFormValidation();\n    };\n    EventWindow.prototype.refresh = function () {\n        this.destroy();\n        this.renderEventWindow();\n    };\n    EventWindow.prototype.refreshRecurrenceEditor = function () {\n        if (this.recurrenceEditor) {\n            var recurrenceEditor = this.recurrenceEditor.element;\n            this.recurrenceEditor.destroy();\n            this.createRecurrenceEditor(recurrenceEditor);\n        }\n    };\n    EventWindow.prototype.setRecurrenceEditor = function (recurrenceEditor) {\n        if (this.parent.editorTemplate) {\n            this.recurrenceEditor = recurrenceEditor;\n        }\n    };\n    EventWindow.prototype.openEditor = function (data, type, isEventData, repeatType) {\n        this.parent.currentAction = type;\n        this.parent.removeNewEventElement();\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide(true);\n        }\n        this.parent.inlineModule.removeInlineAppointmentElement();\n        if (type === 'Add') {\n            var eventObj = {};\n            this.cellClickAction = !isEventData;\n            this.parent.activeCellsData = data;\n            var event_1 = data;\n            if (this.cellClickAction) {\n                this.convertToEventData(event_1, eventObj);\n            }\n            else {\n                this.parent.activeCellsData = {\n                    startTime: (event_1.startTime || event_1[this.fields.startTime]),\n                    endTime: (event_1.endTime || event_1[this.fields.endTime]),\n                    isAllDay: (event_1.isAllDay || event_1[this.fields.isAllDay]),\n                    element: event_1.element,\n                    groupIndex: event_1.groupIndex\n                };\n                eventObj = event_1;\n            }\n            data = eventObj;\n        }\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\n            this.renderFormElements(this.element.querySelector('.e-schedule-form'), data);\n        }\n        if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            removeClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n        }\n        switch (type) {\n            case 'Add':\n                this.onCellDetailsUpdate(data, repeatType);\n                break;\n            case 'Save':\n            case 'EditOccurrence':\n            case 'EditSeries':\n            case 'EditFollowingEvents':\n                if (type === 'EditOccurrence' && !this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n                    addClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n                }\n                this.cellClickAction = false;\n                this.onEventDetailsUpdate(data);\n                break;\n        }\n    };\n    EventWindow.prototype.setDialogContent = function () {\n        this.dialogObject.content = this.getEventWindowContent();\n        this.dialogObject.dataBind();\n    };\n    EventWindow.prototype.onBeforeOpen = function (args) {\n        var _this = this;\n        var eventProp = {\n            type: 'Editor',\n            data: this.eventData,\n            cancel: false,\n            element: this.element,\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        if (this.cellClickAction) {\n            eventProp.duration = this.getSlotDuration();\n        }\n        var saveObj = this.getInstance(cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n        if (saveObj) {\n            saveObj.disabled = !(this.cellClickAction ? this.parent.eventSettings.allowAdding : this.parent.eventSettings.allowEditing);\n            saveObj.dataBind();\n        }\n        var deleteObj = this.getInstance(cls.DELETE_EVENT_CLASS);\n        if (deleteObj) {\n            deleteObj.disabled = !this.parent.eventSettings.allowDeleting;\n            deleteObj.dataBind();\n        }\n        var callBackPromise = new Deferred();\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            args.cancel = popupArgs.cancel;\n            _this.duration = _this.cellClickAction ? popupArgs.duration : null;\n            _this.refreshDateTimePicker(_this.duration);\n            if (_this.cellClickAction && popupArgs.duration !== _this.getSlotDuration() && isNullOrUndefined(_this.parent.editorTemplate)) {\n                var startObj = _this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n                var endObj = _this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n                endObj.value = new Date(startObj.value.getTime() + (util.MS_PER_MINUTE * popupArgs.duration));\n                endObj.dataBind();\n            }\n            if (_this.parent.editorTemplate && _this.element.querySelector('.e-recurrenceeditor') && !_this.recurrenceEditor) {\n                _this.recurrenceEditor = _this.getInstance('e-recurrenceeditor');\n            }\n            callBackPromise.resolve(args);\n        });\n        return callBackPromise;\n    };\n    EventWindow.prototype.onBeforeClose = function (args) {\n        var _this = this;\n        if (args.isInteracted) {\n            this.isCrudAction = false;\n        }\n        var eventProp = {\n            type: 'Editor',\n            data: this.eventCrudData,\n            cancel: false,\n            element: this.element,\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        var callBackPromise = new Deferred();\n        this.parent.trigger(event.popupClose, eventProp, function (popupArgs) {\n            args.cancel = popupArgs.cancel;\n            if (!popupArgs.cancel) {\n                if (_this.isCrudAction) {\n                    args.cancel = _this.processCrudActions(popupArgs.data);\n                    _this.isCrudAction = args.cancel;\n                }\n                if (!_this.isCrudAction) {\n                    _this.resetForm();\n                    _this.parent.eventBase.focusElement();\n                    _this.eventCrudData = null;\n                }\n            }\n            callBackPromise.resolve(args);\n        });\n        return callBackPromise;\n    };\n    EventWindow.prototype.getEventWindowContent = function () {\n        var container = createElement('div', { className: cls.FORM_CONTAINER_CLASS });\n        var form = createElement('form', {\n            id: this.parent.element.id + 'EditForm',\n            className: cls.FORM_CLASS,\n            attrs: { onsubmit: 'return false;' }\n        });\n        this.renderFormElements(form);\n        container.appendChild(form);\n        return container;\n    };\n    EventWindow.prototype.renderFormElements = function (form, args) {\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\n            if (args) {\n                if (!this.parent.isReact) {\n                    if (this.recurrenceEditor) {\n                        this.recurrenceEditor.destroy();\n                        this.recurrenceEditor = null;\n                    }\n                    this.destroyComponents();\n                }\n                var formElements = [].slice.call(form.children);\n                for (var _i = 0, formElements_1 = formElements; _i < formElements_1.length; _i++) {\n                    var element = formElements_1[_i];\n                    remove(element);\n                }\n            }\n            var templateId = this.parent.element.id + '_editorTemplate';\n            var tempEle = [].slice.call(this.parent.getEditorTemplate()(args || {}, this.parent, 'editorTemplate', templateId, false));\n            append(tempEle, form);\n            this.parent.renderTemplates();\n        }\n        else {\n            form.appendChild(this.getDefaultEventWindowContent());\n        }\n    };\n    EventWindow.prototype.getDefaultEventWindowContent = function () {\n        var parentDiv = this.createDivElement(cls.EVENT_WINDOW_DIALOG_PARENT_CLASS);\n        var titleLocationDiv = this.createDivElement(cls.EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS);\n        parentDiv.appendChild(titleLocationDiv);\n        titleLocationDiv.appendChild(this.renderTextBox(cls.SUBJECT_CLASS));\n        titleLocationDiv.querySelector('.' + cls.SUBJECT_CLASS).setAttribute('title', this.parent.editorTitles.subject);\n        titleLocationDiv.appendChild(this.renderTextBox(cls.LOCATION_CLASS));\n        titleLocationDiv.querySelector('.' + cls.LOCATION_CLASS).setAttribute('title', this.parent.editorTitles.location);\n        var startEndDateTimeDiv = this.createDivElement(cls.EVENT_WINDOW_START_END_DIV_CLASS);\n        parentDiv.appendChild(startEndDateTimeDiv);\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_START_CLASS, this.onTimeChange.bind(this)));\n        startEndDateTimeDiv.querySelector('.' + cls.EVENT_WINDOW_START_CLASS).setAttribute('title', this.parent.editorTitles.startTime);\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_END_CLASS));\n        startEndDateTimeDiv.querySelector('.' + cls.EVENT_WINDOW_END_CLASS).setAttribute('title', this.parent.editorTitles.endTime);\n        var allDayTimezoneDiv = this.createDivElement(cls.EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS);\n        parentDiv.appendChild(allDayTimezoneDiv);\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.EVENT_WINDOW_ALL_DAY_CLASS));\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.TIME_ZONE_CLASS));\n        var timezoneParentDiv = this.createDivElement(cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        parentDiv.appendChild(timezoneParentDiv);\n        timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_START_TZ_CLASS));\n        timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_END_TZ_CLASS));\n        var repeatParentDiv = this.createDivElement(cls.EVENT_WINDOW_REPEAT_DIV_CLASS);\n        parentDiv.appendChild(repeatParentDiv);\n        var repeatDiv = this.renderCheckBox(cls.EVENT_WINDOW_REPEAT_CLASS);\n        var repeatEditConainer = createElement('span', { className: REPEAT_CONTAINER_CLASS });\n        var button = createElement('button', {\n            className: REPEAT_BUTTON_CLASS,\n            attrs: { type: 'button', 'title': this.l10n.getConstant('editRecurrence') }\n        });\n        this.buttonObj = new Button({ iconCss: REPEAT_BUTTON_ICON_CLASS + ' e-icons', cssClass: 'e-medium ' + this.parent.cssClass });\n        repeatEditConainer.appendChild(button);\n        this.buttonObj.appendTo(button);\n        repeatDiv.appendChild(repeatEditConainer);\n        repeatParentDiv.appendChild(repeatDiv);\n        if (this.parent.isAdaptive) {\n            EventHandler.add(button, 'click', this.loadRecurrenceEditor, this);\n        }\n        else {\n            this.createRecurrenceEditor(parentDiv);\n        }\n        if (this.parent.resourceCollection.length > 0) {\n            var resourceParentDiv = this.createDivElement(cls.EVENT_WINDOW_RESOURCES_DIV_CLASS);\n            for (var _i = 0, _a = this.parent.resourceBase.resourceCollection; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                resourceParentDiv.appendChild(this.renderResourceDetails(resource));\n            }\n            parentDiv.appendChild(resourceParentDiv);\n        }\n        var description = this.createDivElement(cls.DESCRIPTION_CLASS + '-row');\n        description.appendChild(this.renderTextBox(cls.DESCRIPTION_CLASS));\n        description.querySelector('.' + cls.DESCRIPTION_CLASS).setAttribute('title', this.parent.editorTitles.description);\n        parentDiv.appendChild(description);\n        var submit = createElement('button', { attrs: { type: 'hidden', title: 'submit', style: 'display:none' } });\n        parentDiv.appendChild(submit);\n        return parentDiv;\n    };\n    EventWindow.prototype.createRecurrenceEditor = function (parentDiv) {\n        var recurrenceEditor = this.createDivElement();\n        parentDiv.appendChild(recurrenceEditor);\n        this.recurrenceEditor = this.renderRecurrenceEditor();\n        this.recurrenceEditor.appendTo(recurrenceEditor);\n        this.updateMinMaxDateToEditor();\n    };\n    EventWindow.prototype.createDivElement = function (className) {\n        return createElement('div', { className: className });\n    };\n    EventWindow.prototype.createInputElement = function (className, fieldName, type) {\n        return createElement(type || 'input', {\n            className: className, attrs: {\n                type: 'text', name: fieldName, value: '', id: fieldName,\n                title: ((this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))) === '') ?\n                    fieldName : this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))\n            }\n        });\n    };\n    EventWindow.prototype.getSlotDuration = function () {\n        return this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n    };\n    EventWindow.prototype.renderDateTimePicker = function (value, changeEvent) {\n        var dateTimeDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var dateTimeInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        dateTimeDiv.appendChild(dateTimeInput);\n        var dateTimePicker = new DateTimePicker({\n            change: changeEvent,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            calendarMode: this.parent.calendarMode,\n            min: this.parent.minDate,\n            max: new Date(new Date(+this.parent.maxDate).setHours(23, 59, 59)),\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            floatLabelType: 'Always',\n            timeFormat: this.parent.activeViewOptions.timeFormat,\n            format: (isNullOrUndefined(this.parent.dateFormat) ?\n                this.getFormat('dateFormats') : this.parent.dateFormat) + ' ' + this.parent.activeViewOptions.timeFormat,\n            placeholder: this.getFieldLabel(value),\n            step: this.getSlotDuration(),\n            width: '100%'\n        });\n        dateTimePicker.appendTo(dateTimeInput);\n        return dateTimeDiv;\n    };\n    EventWindow.prototype.refreshDateTimePicker = function (duration) {\n        var elementSelector = '.' + cls.EVENT_WINDOW_START_CLASS + ',.' + cls.EVENT_WINDOW_END_CLASS;\n        var startEndElement = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (var _i = 0, startEndElement_1 = startEndElement; _i < startEndElement_1.length; _i++) {\n            var element = startEndElement_1[_i];\n            var instance = element.ej2_instances[0];\n            instance.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n            instance.timeFormat = this.parent.activeViewOptions.timeFormat;\n            instance.step = duration || this.getSlotDuration();\n            instance.dataBind();\n        }\n    };\n    EventWindow.prototype.onTimeChange = function () {\n        var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n        if (startObj.element.parentElement.classList.contains('e-input-focus')) {\n            var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n            var duration = 0;\n            if (this.cellClickAction) {\n                duration = util.MS_PER_MINUTE * this.duration;\n                this.eventWindowTime.startTime = startObj.value;\n            }\n            else {\n                duration = this.eventData[this.fields.endTime].getTime() - this.eventData[this.fields.startTime].getTime();\n            }\n            var endDate = (isNullOrUndefined(startObj.value)) ? null : new Date(startObj.value.getTime() + duration);\n            if (this.cellClickAction) {\n                this.eventWindowTime.endTime = endDate;\n            }\n            endObj.value = endDate;\n            endObj.dataBind();\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime);\n        }\n    };\n    EventWindow.prototype.renderResourceDetails = function (resourceData) {\n        var fieldName = resourceData.field;\n        var value = 'e-' + fieldName;\n        var labelValue = resourceData.title;\n        var resourceDiv = this.createDivElement(value + '-container' + ' ' + 'e-resources');\n        var resourceInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        resourceDiv.appendChild(resourceInput);\n        var resourceTemplate = '<div class=\"e-resource-template\"><div class=\"e-resource-color\" style=\"background-color:${' +\n            resourceData.colorField + '}\"></div><div class=\"e-resource-text\">${' + resourceData.textField + '}</div></div>';\n        if (resourceData.allowMultiple) {\n            var listObj = new MultiSelect({\n                cssClass: this.parent.cssClass || '',\n                dataSource: resourceData.dataSource,\n                change: this.onMultiselectResourceChange.bind(this),\n                itemTemplate: resourceTemplate,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'title': labelValue, 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                mode: 'Box'\n            });\n            listObj.appendTo(resourceInput);\n        }\n        else {\n            var drowDownList = new DropDownList({\n                cssClass: this.parent.cssClass || '',\n                change: this.onDropdownResourceChange.bind(this),\n                dataSource: resourceData.dataSource,\n                enableRtl: this.parent.enableRtl,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'title': labelValue, 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                itemTemplate: resourceTemplate\n            });\n            drowDownList.appendTo(resourceInput);\n        }\n        return resourceDiv;\n    };\n    EventWindow.prototype.renderDropDown = function (value) {\n        var _this = this;\n        var fieldName = this.getFieldName(value);\n        var timezoneDiv = this.createDivElement(value + '-container');\n        var timezoneInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        timezoneDiv.appendChild(timezoneInput);\n        var drowDownList = new DropDownList({\n            allowFiltering: true,\n            change: this.onTimezoneChange.bind(this),\n            cssClass: this.parent.cssClass || '',\n            dataSource: this.timezoneData,\n            enableRtl: this.parent.enableRtl,\n            fields: { text: 'Text', value: 'Value' },\n            filterBarPlaceholder: 'Search Timezone',\n            filtering: function (e) {\n                var query = new Query();\n                query = (e.text !== '') ? query.where('Text', 'contains', e.text, true) : query;\n                e.updateData(_this.timezoneData, query);\n            },\n            htmlAttributes: { 'title': this.getFieldLabel(value), 'name': fieldName },\n            floatLabelType: 'Always',\n            placeholder: this.getFieldLabel(value),\n            popupHeight: '230px'\n        });\n        drowDownList.appendTo(timezoneInput);\n        return timezoneDiv;\n    };\n    EventWindow.prototype.onMultiselectResourceChange = function (args) {\n        if (!args.value || !this.parent.activeViewOptions.group.byGroupID || this.parent.resourceCollection.length <= 1) {\n            return;\n        }\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        for (var i = 0; i < resourceCollection.length; i++) {\n            if (resourceCollection[i].field === fieldName && i < resourceCollection.length - 1) {\n                var resObject = this.createInstance(i);\n                var datasource = [];\n                var _loop_1 = function (j) {\n                    var resourceModel = resourceCollection[i + 1];\n                    // eslint-disable-next-line max-len\n                    var filter = resourceModel.dataSource.filter(function (data) {\n                        return data[resourceModel.groupIDField] === args.value[j];\n                    })[0];\n                    var groupId = filter[resourceCollection[i + 1].groupIDField];\n                    var filterRes = this_1.filterDatasource(i, groupId);\n                    datasource = datasource.concat(filterRes);\n                };\n                var this_1 = this;\n                for (var j = 0; j < args.value.length; j++) {\n                    _loop_1(j);\n                }\n                resObject.dataSource = datasource;\n                resObject.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.createInstance = function (index) {\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        var resObject = this.element.querySelector('.e-' + resourceData.field).\n            ej2_instances[0];\n        return resObject;\n    };\n    EventWindow.prototype.onDropdownResourceChange = function (args) {\n        if (!args.value || this.parent.resourceCollection.length <= 1 || !this.parent.activeViewOptions.group.byGroupID) {\n            return;\n        }\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        for (var i = 0; i < resourceCollection.length; i++) {\n            if ((i < resourceCollection.length - 1) && resourceCollection[i].field === fieldName) {\n                var resObj = this.createInstance(i);\n                var groupId = args.itemData[resourceCollection[i].idField];\n                resObj.dataSource = this.filterDatasource(i, groupId);\n                resObj.dataBind();\n                var resValue = resObj.dataSource[0][resourceCollection[i + 1].idField];\n                resObj.value = (resourceCollection[i + 1].allowMultiple) ? [resValue] : resValue;\n                resObj.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.filterDatasource = function (index, groupId) {\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        return resourceData.dataSource.filter(function (data) {\n            return data[resourceData.groupIDField] === groupId;\n        });\n    };\n    EventWindow.prototype.onTimezoneChange = function (args) {\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        if (fieldName === this.parent.eventFields.startTimezone) {\n            var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n            var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n            endTimezoneObj.value = startTimezoneObj.value;\n            endTimezoneObj.dataBind();\n        }\n    };\n    EventWindow.prototype.renderCheckBox = function (value) {\n        var checkBoxDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var checkBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        checkBoxDiv.appendChild(checkBoxInput);\n        var checkBox = new CheckBox({\n            change: this.onChange.bind(this),\n            cssClass: value + ' ' + this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            label: this.getFieldLabel(value)\n        });\n        checkBox.appendTo(checkBoxInput);\n        checkBoxInput.setAttribute('name', fieldName);\n        if (fieldName === 'Repeat') {\n            this.repeatStatus = checkBox;\n        }\n        return checkBoxDiv;\n    };\n    EventWindow.prototype.renderTextBox = function (value) {\n        var textBoxDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var elementType = (value === cls.DESCRIPTION_CLASS) ? 'textarea' : 'input';\n        var textBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName, elementType);\n        textBoxDiv.appendChild(textBoxInput);\n        Input.createInput({\n            element: textBoxInput,\n            floatLabelType: 'Always',\n            properties: {\n                enableRtl: this.parent.enableRtl,\n                placeholder: this.getFieldLabel(value)\n            }\n        });\n        return textBoxDiv;\n    };\n    EventWindow.prototype.getFieldName = function (name) {\n        var fieldName = '';\n        switch (name) {\n            case cls.SUBJECT_CLASS:\n                fieldName = this.fields.subject;\n                break;\n            case cls.LOCATION_CLASS:\n                fieldName = this.fields.location;\n                break;\n            case cls.EVENT_WINDOW_START_CLASS:\n                fieldName = this.fields.startTime;\n                break;\n            case cls.EVENT_WINDOW_END_CLASS:\n                fieldName = this.fields.endTime;\n                break;\n            case cls.DESCRIPTION_CLASS:\n                fieldName = this.fields.description;\n                break;\n            case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n                fieldName = this.fields.isAllDay;\n                break;\n            case cls.EVENT_WINDOW_START_TZ_CLASS:\n                fieldName = this.fields.startTimezone;\n                break;\n            case cls.EVENT_WINDOW_END_TZ_CLASS:\n                fieldName = this.fields.endTimezone;\n                break;\n            case cls.TIME_ZONE_CLASS:\n                fieldName = 'Timezone';\n                break;\n            case cls.EVENT_WINDOW_REPEAT_CLASS:\n                fieldName = 'Repeat';\n                break;\n        }\n        return fieldName;\n    };\n    EventWindow.prototype.getFieldLabel = function (fieldName) {\n        var labelText = '';\n        switch (fieldName) {\n            case cls.SUBJECT_CLASS:\n                labelText = this.parent.editorTitles.subject;\n                break;\n            case cls.LOCATION_CLASS:\n                labelText = this.parent.editorTitles.location;\n                break;\n            case cls.DESCRIPTION_CLASS:\n                labelText = this.parent.editorTitles.description;\n                break;\n            case cls.EVENT_WINDOW_START_CLASS:\n                labelText = this.parent.editorTitles.startTime;\n                break;\n            case cls.EVENT_WINDOW_END_CLASS:\n                labelText = this.parent.editorTitles.endTime;\n                break;\n            case cls.EVENT_WINDOW_START_TZ_CLASS:\n                labelText = this.parent.editorTitles.startTimezone;\n                break;\n            case cls.EVENT_WINDOW_END_TZ_CLASS:\n                labelText = this.parent.editorTitles.endTimezone;\n                break;\n            case cls.EVENT_WINDOW_REPEAT_CLASS:\n                labelText = this.parent.editorTitles.recurrenceRule;\n                break;\n            case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n                labelText = this.parent.editorTitles.isAllDay;\n                break;\n            case cls.TIME_ZONE_CLASS:\n                labelText = this.l10n.getConstant('timezone');\n                break;\n        }\n        return labelText;\n    };\n    EventWindow.prototype.onChange = function (args) {\n        var target = (args.event.target);\n        if (target.classList.contains(cls.EVENT_WINDOW_ALL_DAY_CLASS)) {\n            this.onAllDayChange(args.checked);\n        }\n        else if (target.classList.contains(cls.TIME_ZONE_CLASS)) {\n            this.timezoneChangeStyle(args.checked);\n        }\n        else if (target.classList.contains(cls.EVENT_WINDOW_REPEAT_CLASS)) {\n            this.onRepeatChange(args.checked);\n        }\n    };\n    EventWindow.prototype.renderRepeatDialog = function () {\n        var element = createElement('div');\n        this.repeatDialogObject = new Dialog({\n            header: this.l10n.getConstant('recurrence'),\n            visible: false,\n            content: '<div class=\"e-rec-editor\"></div>',\n            closeOnEscape: true,\n            width: '90%',\n            buttons: [{\n                    click: this.repeatSaveDialog.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('save'), cssClass: 'e-save', isPrimary: true }\n                },\n                { click: this.repeatCancelDialog.bind(this), buttonModel: { cssClass: 'e-cancel', content: this.l10n.getConstant('cancel') } }],\n            target: this.element,\n            animationSettings: { effect: 'Zoom' },\n            enableRtl: this.parent.enableRtl,\n            isModal: true,\n            cssClass: REPEAT_DIALOG_CLASS,\n            open: this.repeatOpenDialog.bind(this)\n        });\n        this.element.appendChild(element);\n        this.repeatDialogObject.appendTo(element);\n        this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector('.e-rec-editor'));\n    };\n    EventWindow.prototype.loadRecurrenceEditor = function () {\n        this.repeatDialogObject.show();\n        if (this.recurrenceEditor && this.repeatRule) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n        }\n    };\n    EventWindow.prototype.onRepeatChange = function (state) {\n        if (state) {\n            if (!this.repeatDialogObject) {\n                this.renderRepeatDialog();\n            }\n            this.recurrenceEditor.setProperties({ startDate: this.repeatStartDate, selectedType: 0 });\n            this.loadRecurrenceEditor();\n        }\n        else {\n            if (this.repeatDialogObject) {\n                this.repeatDialogObject.hide();\n            }\n            this.repeatRule = '';\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n                this.updateRepeatLabel(this.repeatRule);\n            }\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            addClass([element], HIDE_STYLE_CLASS);\n        }\n    };\n    EventWindow.prototype.repeatSaveDialog = function () {\n        this.repeatRule = this.recurrenceEditor.getRecurrenceRule();\n        var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n        if (this.recurrenceEditor.getRecurrenceRule()) {\n            removeClass([element], HIDE_STYLE_CLASS);\n        }\n        else {\n            addClass([element], HIDE_STYLE_CLASS);\n            this.repeatStatus.setProperties({ checked: false });\n        }\n        this.updateRepeatLabel(this.repeatRule);\n        this.closeRepeatDialog();\n    };\n    EventWindow.prototype.closeRepeatDialog = function () {\n        this.repeatDialogObject.hide();\n    };\n    EventWindow.prototype.repeatCancelDialog = function () {\n        this.closeRepeatDialog();\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule);\n        }\n        if (!this.repeatTempRule) {\n            this.repeatStatus.setProperties({ checked: false });\n        }\n    };\n    EventWindow.prototype.repeatOpenDialog = function () {\n        this.repeatTempRule = this.recurrenceEditor.getRecurrenceRule();\n    };\n    EventWindow.prototype.onCellDetailsUpdate = function (eventObj, repeatType) {\n        if (!this.parent.eventSettings.allowAdding) {\n            return;\n        }\n        this.element.querySelector('.' + cls.FORM_CLASS).removeAttribute('data-id');\n        this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('newEvent');\n        eventObj.Timezone = false;\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n            eventObj[this.fields.subject] = this.parent.eventSettings.fields.subject.default;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.location.default)) {\n            eventObj[this.fields.location] = this.parent.eventSettings.fields.location.default;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.description.default)) {\n            eventObj[this.fields.description] = this.parent.eventSettings.fields.description.default;\n        }\n        this.showDetails(eventObj);\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\n        }\n        var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n        if (deleteButton) {\n            addClass([deleteButton], cls.DISABLE_CLASS);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setProperties({\n                startDate: eventObj[this.fields.startTime],\n                selectedType: !isNullOrUndefined(repeatType) ? repeatType : !isNullOrUndefined(eventObj[this.fields.recurrenceRule]) ?\n                    this.recurrenceEditor.selectedType : 0\n            });\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            addClass([element], HIDE_STYLE_CLASS);\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        else {\n            var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            this.disableButton(saveButton, false);\n        }\n        this.dialogObject.show();\n    };\n    EventWindow.prototype.convertToEventData = function (cellsData, eventObj) {\n        if (cellsData.subject) {\n            eventObj[this.fields.subject] = cellsData.subject;\n        }\n        eventObj[this.fields.startTime] = cellsData.startTime;\n        eventObj[this.fields.endTime] = cellsData.endTime;\n        eventObj[this.fields.isAllDay] = cellsData.isAllDay;\n        if (cellsData.RecurrenceRule) {\n            eventObj[this.fields.recurrenceRule] = cellsData.RecurrenceRule;\n        }\n        if (this.parent.resourceCollection.length > 0 || this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.setResourceValues(eventObj);\n        }\n    };\n    EventWindow.prototype.applyFormValidation = function () {\n        var getValidationRule = function (rules) {\n            return (rules && Object.keys(rules).length > 0) ? rules : undefined;\n        };\n        var form = this.element.querySelector('.' + cls.FORM_CLASS);\n        var rules = {};\n        rules[this.parent.eventSettings.fields.subject.name] = getValidationRule(this.parent.eventSettings.fields.subject.validation);\n        rules[this.parent.eventSettings.fields.location.name] = getValidationRule(this.parent.eventSettings.fields.location.validation);\n        rules[this.parent.eventSettings.fields.startTime.name] = getValidationRule(this.parent.eventSettings.fields.startTime.validation);\n        rules[this.parent.eventSettings.fields.endTime.name] = getValidationRule(this.parent.eventSettings.fields.endTime.validation);\n        rules[this.parent.eventSettings.fields.description.name] =\n            getValidationRule(this.parent.eventSettings.fields.description.validation);\n        this.fieldValidator.renderFormValidator(form, rules, this.element);\n    };\n    EventWindow.prototype.showDetails = function (eventData) {\n        var eventObj = extend({}, eventData, null, true);\n        if (eventObj[this.fields.endTime].getHours() === 0 && eventObj[this.fields.endTime].getMinutes() === 0) {\n            this.trimAllDay(eventObj);\n        }\n        this.eventData = eventObj;\n        var formelement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        var keyNames = Object.keys(eventObj);\n        for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n            var curElement = formelement_1[_i];\n            var columnName = curElement.name || this.getColumnName(curElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                if (keyNames.indexOf(columnName) !== -1) {\n                    this.setValueToElement(curElement, eventObj[columnName]);\n                }\n                else {\n                    this.setDefaultValueToElement(curElement);\n                }\n            }\n        }\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            this.onAllDayChange(eventObj[this.fields.isAllDay]);\n            var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n            if (!(isNullOrUndefined(eventObj[this.fields.startTimezone]) && isNullOrUndefined(eventObj[this.fields.endTimezone]))) {\n                timezoneObj.checked = true;\n                timezoneObj.dataBind();\n            }\n            this.timezoneChangeStyle(timezoneObj.checked);\n            delete eventObj.Timezone;\n        }\n    };\n    EventWindow.prototype.getColumnName = function (element) {\n        var attrName = element.getAttribute('data-name') || '';\n        if (attrName === '') {\n            var isDropDowns = false;\n            var fieldSelector = '';\n            if (element.classList.contains('e-dropdownlist')) {\n                fieldSelector = 'e-ddl';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                fieldSelector = 'e-multiselect';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-datetimepicker')) {\n                fieldSelector = 'e-datetimepicker';\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                fieldSelector = 'e-datepicker';\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                fieldSelector = 'e-checkbox';\n            }\n            var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n            var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n            if (control) {\n                var attrEle = control.querySelector('[name]');\n                if (attrEle) {\n                    attrName = attrEle.name;\n                }\n            }\n        }\n        return attrName;\n    };\n    EventWindow.prototype.onAllDayChange = function (allDayStatus) {\n        var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n        var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n        var timezoneDiv = this.element.querySelector('.e-time-zone-container');\n        var format;\n        if (allDayStatus) {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') : this.parent.dateFormat;\n            addClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n            addClass([timezoneDiv], cls.DISABLE_CLASS);\n            if (this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)) {\n                removeClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        else {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') + ' ' +\n                this.parent.activeViewOptions.timeFormat : this.parent.dateFormat + ' ' + this.parent.activeViewOptions.timeFormat;\n            removeClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n            removeClass([timezoneDiv], cls.DISABLE_CLASS);\n            if (this.element.querySelector('.e-checkbox-wrapper .e-time-zone').checked) {\n                addClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        if (this.cellClickAction) {\n            this.updateDateTime(allDayStatus, startObj, endObj);\n        }\n        startObj.dataBind();\n        endObj.dataBind();\n        if (!isNullOrUndefined(this.recurrenceEditor)) {\n            this.recurrenceEditor.updateRuleUntilDate(startObj.value);\n        }\n    };\n    EventWindow.prototype.updateDateTime = function (allDayStatus, startObj, endObj) {\n        var startDate;\n        var endDate;\n        if (allDayStatus) {\n            startDate = util.resetTime(new Date(this.eventWindowTime.startTime.getTime()));\n            if (this.parent.activeCellsData.isAllDay) {\n                var temp = util.addDays(new Date(this.eventWindowTime.endTime.getTime()), -1).getTime();\n                endDate = (+this.eventWindowTime.startTime > temp) ? this.eventWindowTime.endTime : new Date(temp);\n            }\n            else {\n                endDate = util.resetTime(new Date(this.eventWindowTime.endTime.getTime()));\n            }\n        }\n        else {\n            var start = this.parent.activeCellsData.startTime;\n            startDate = new Date(this.eventWindowTime.startTime.getTime());\n            startDate.setHours(start.getHours(), start.getMinutes(), start.getSeconds());\n            if (this.parent.activeCellsData.isAllDay) {\n                var startHour = this.parent.getStartEndTime(this.parent.workHours.start);\n                startDate.setHours(startHour.getHours(), startHour.getMinutes(), startHour.getSeconds());\n                endDate = new Date(startDate.getTime());\n                endDate.setMilliseconds(util.MS_PER_MINUTE * this.getSlotDuration());\n            }\n            else {\n                endDate = new Date(startDate.getTime());\n                endDate.setMilliseconds(this.parent.activeCellsData.endTime.getTime() - this.parent.activeCellsData.startTime.getTime());\n            }\n        }\n        this.eventWindowTime = { startTime: new Date(startDate.getTime()), endTime: new Date(endDate.getTime()) };\n        startObj.value = startDate;\n        endObj.value = endDate;\n        startObj.dataBind();\n        endObj.dataBind();\n    };\n    EventWindow.prototype.getFormat = function (formatType) {\n        var format;\n        if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n            format = getValue(formatType + '.short', getDefaultDateObject(this.parent.getCalendarMode()));\n        }\n        else {\n            format = getValue(\"main.\" + this.parent.locale + \".dates.calendars.\" + this.parent.getCalendarMode() + \".\" + formatType + \".short\", cldrData);\n        }\n        return format;\n    };\n    EventWindow.prototype.onEventDetailsUpdate = function (eventObj) {\n        if (!this.parent.eventSettings.allowEditing) {\n            return;\n        }\n        if (!this.parent.isAdaptive) {\n            removeClass([this.element.querySelector('.' + cls.DELETE_EVENT_CLASS)], cls.DISABLE_CLASS);\n        }\n        this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('editEvent');\n        this.element.querySelector('.' + cls.FORM_CLASS).setAttribute('data-id', eventObj[this.fields.id].toString());\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            eventObj = extend({}, eventObj, null, true);\n            var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n            var timezoneValue = void 0;\n            if (eventObj[this.fields.startTimezone] || eventObj[this.fields.endTimezone]) {\n                timezoneValue = true;\n                this.parent.eventBase.timezoneConvert(eventObj);\n            }\n            else {\n                timezoneValue = false;\n            }\n            eventObj.Timezone = timezoneValue;\n            timezoneObj.checked = timezoneValue;\n            timezoneObj.dataBind();\n        }\n        this.showDetails(eventObj);\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n        }\n        else if (!this.parent.isAdaptive && this.recurrenceEditor) {\n            this.recurrenceEditor.setProperties({ startDate: eventObj[this.fields.startTime] });\n            this.recurrenceEditor.setRecurrenceRule('');\n        }\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        if (eventObj[this.fields.recurrenceRule]) {\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n            }\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            if (eventObj[this.fields.recurrenceRule]) {\n                removeClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: true });\n            }\n            else {\n                addClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: false });\n            }\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        var isDisable = (this.parent.readonly || eventObj[this.fields.isReadonly]);\n        if (!this.parent.isAdaptive) {\n            var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n            this.disableButton(saveButton, isDisable);\n            this.disableButton(deleteButton, isDisable);\n        }\n        else {\n            var saveIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS);\n            if (saveIcon) {\n                if (isDisable) {\n                    addClass([saveIcon], cls.ICON_DISABLE_CLASS);\n                }\n                else {\n                    removeClass([saveIcon], cls.ICON_DISABLE_CLASS);\n                }\n            }\n        }\n        this.dialogObject.show();\n    };\n    EventWindow.prototype.disableButton = function (element, value) {\n        if (element) {\n            element.ej2_instances[0].disabled = value;\n        }\n    };\n    EventWindow.prototype.renderRecurrenceEditor = function () {\n        return new RecurrenceEditor({\n            calendarMode: this.parent.calendarMode,\n            cssClass: this.parent.cssClass,\n            dateFormat: this.parent.dateFormat,\n            enableRtl: this.parent.enableRtl,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            locale: this.parent.locale\n        });\n    };\n    EventWindow.prototype.updateMinMaxDateToEditor = function () {\n        var startDate = this.element.querySelector('.e-start');\n        var endDate = this.element.querySelector('.e-end');\n        if (startDate && endDate) {\n            var startObj = startDate.ej2_instances[0];\n            var endObj = endDate.ej2_instances[0];\n            startObj.min = this.parent.minDate;\n            startObj.max = this.parent.maxDate;\n            endObj.min = this.parent.minDate;\n            endObj.max = this.parent.maxDate;\n            startObj.dataBind();\n            endObj.dataBind();\n        }\n        if (this.recurrenceEditor) {\n            var untilDate = this.recurrenceEditor.element.querySelector('.e-until-date');\n            if (untilDate) {\n                var untilObj = untilDate.ej2_instances[0];\n                untilObj.min = this.parent.minDate;\n                untilObj.max = this.parent.maxDate;\n                untilObj.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.updateRepeatLabel = function (repeatRule) {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        var data = repeatRule ?\n            (this.l10n.getConstant('repeats') + ' ' + this.recurrenceEditor.getRuleSummary(repeatRule)) : this.l10n.getConstant('repeat');\n        this.repeatStatus.setProperties({ label: data });\n    };\n    EventWindow.prototype.dialogClose = function () {\n        this.isCrudAction = false;\n        this.parent.activeEventData = { event: undefined, element: undefined };\n        this.parent.currentAction = null;\n        this.dialogObject.hide();\n    };\n    EventWindow.prototype.resetForm = function () {\n        this.fieldValidator.destroyToolTip();\n        this.resetFormFields();\n        if (!this.parent.isAdaptive && this.recurrenceEditor && !this.recurrenceEditor.isDestroyed) {\n            this.recurrenceEditor.resetFields();\n        }\n    };\n    EventWindow.prototype.timezoneChangeStyle = function (value) {\n        var timezoneDiv = this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        var localTimezoneName = this.parent.tzModule.getLocalTimezoneName();\n        if (value) {\n            addClass([timezoneDiv], cls.ENABLE_CLASS);\n            var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n            var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n            var timezone = startTimezoneObj.dataSource;\n            if (!startTimezoneObj.value || !this.parent.timezone) {\n                var found = timezone.some(function (tz) { return tz.Value === localTimezoneName; });\n                if (!found) {\n                    timezone.push({ Value: localTimezoneName, Text: localTimezoneName });\n                    startTimezoneObj.dataSource = timezone;\n                    endTimezoneObj.dataSource = timezone;\n                    startTimezoneObj.dataBind();\n                    endTimezoneObj.dataBind();\n                }\n            }\n            startTimezoneObj.value = startTimezoneObj.value || this.parent.timezone || localTimezoneName;\n            endTimezoneObj.value = endTimezoneObj.value || this.parent.timezone || localTimezoneName;\n            startTimezoneObj.dataBind();\n            endTimezoneObj.dataBind();\n        }\n        else {\n            removeClass([timezoneDiv], cls.ENABLE_CLASS);\n        }\n    };\n    EventWindow.prototype.resetFormFields = function () {\n        var formElement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formElement_1 = formElement; _i < formElement_1.length; _i++) {\n            var currentElement = formElement_1[_i];\n            var columnName = currentElement.name || this.getColumnName(currentElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                this.setDefaultValueToElement(currentElement);\n            }\n        }\n    };\n    EventWindow.prototype.eventSave = function (alert) {\n        var formElement = this.element.querySelector('.' + cls.FORM_CLASS);\n        if (formElement && formElement.classList.contains('e-formvalidator') &&\n            !formElement.ej2_instances[0].validate()) {\n            return;\n        }\n        var dataCollection = this.getEventDataFromEditor();\n        if (this.processEventValidation(dataCollection.tempData, alert)) {\n            return;\n        }\n        this.eventCrudData = dataCollection.eventData;\n        this.isCrudAction = true;\n        this.dialogObject.hide();\n    };\n    EventWindow.prototype.getEventDataFromEditor = function () {\n        var eventObj = extend({}, this.getObjectFromFormData(cls.EVENT_WINDOW_DIALOG_CLASS));\n        if (!eventObj.Timezone) {\n            eventObj[this.fields.startTimezone] = null;\n            eventObj[this.fields.endTimezone] = null;\n        }\n        delete eventObj.Timezone;\n        delete eventObj.Repeat;\n        this.setDefaultValueToObject(eventObj);\n        eventObj[this.fields.recurrenceRule] = this.recurrenceEditor ? this.recurrenceEditor.getRecurrenceRule() || null : undefined;\n        var tempObj = extend({}, eventObj, null, true);\n        if (eventObj[this.fields.isAllDay]) {\n            eventObj[this.fields.startTime] = (isNullOrUndefined(eventObj[this.fields.startTime])) ? null\n                : util.resetTime(new Date(eventObj[this.fields.startTime].getTime()));\n            eventObj[this.fields.endTime] = (isNullOrUndefined(eventObj[this.fields.endTime])) ? null\n                : util.addDays(util.resetTime(new Date(eventObj[this.fields.endTime].getTime())), 1);\n        }\n        return { eventData: eventObj, tempData: tempObj };\n    };\n    EventWindow.prototype.processEventValidation = function (eventObj, alert) {\n        var alertType;\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            if (!eventObj[this.fields.startTime] || !eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('invalidDateError');\n                return true;\n            }\n            if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('startEndError');\n                return true;\n            }\n        }\n        if (this.recurrenceEditor && this.recurrenceEditor.value && this.recurrenceEditor.value !== '') {\n            alertType = this.recurrenceValidation(eventObj[this.fields.startTime], eventObj[this.fields.endTime], alert);\n            var isShowAlert = true;\n            if (alertType === 'seriesChangeAlert' && this.parent.uiStateValues.isIgnoreOccurrence) {\n                isShowAlert = false;\n            }\n            if (!isNullOrUndefined(alertType) && isShowAlert\n                && ((!this.parent.enableRecurrenceValidation && alertType === 'wrongPattern') || this.parent.enableRecurrenceValidation)) {\n                this.parent.quickPopup.openRecurrenceValidationAlert(alertType);\n                return true;\n            }\n        }\n        return false;\n    };\n    EventWindow.prototype.processCrudActions = function (eventObj) {\n        var _this = this;\n        this.parent.uiStateValues.isBlock = false;\n        var resourceData = this.getResourceData(eventObj);\n        var isResourceEventExpand = (this.parent.activeViewOptions.group.resources.length > 0 ||\n            this.parent.resourceCollection.length > 0) && !this.parent.activeViewOptions.group.allowGroupEdit\n            && !isNullOrUndefined(resourceData);\n        var eventId = this.getEventIdFromForm();\n        if (!isNullOrUndefined(eventId)) {\n            var eveId_1 = this.parent.eventBase.getEventIDType() === 'string' ? eventId : parseInt(eventId, 10);\n            var editedData = this.parent.eventsData.filter(function (data) {\n                return data[_this.fields.id] === eveId_1;\n            })[0];\n            if (isNullOrUndefined(editedData)) {\n                editedData = this.parent.blockData.filter(function (data) {\n                    return data[_this.fields.id] === eveId_1;\n                })[0];\n            }\n            eventObj = extend({}, editedData, eventObj);\n            if (eventObj[this.fields.isReadonly]) {\n                return false;\n            }\n            var currentAction = void 0;\n            if (!isNullOrUndefined(editedData[this.fields.recurrenceRule])) {\n                currentAction = this.parent.currentAction;\n                eventObj.Guid = this.parent.activeEventData.event.Guid;\n                if (this.parent.currentAction === 'EditOccurrence') {\n                    if (!eventObj[this.fields.recurrenceID]) {\n                        eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                        eventObj.Guid = this.parent.activeEventData.event.Guid;\n                    }\n                    else {\n                        eveId_1 = eventObj[this.fields.recurrenceID];\n                        currentAction = null;\n                    }\n                    if (this.parent.enableRecurrenceValidation && this.editOccurrenceValidation(eveId_1, eventObj)) {\n                        this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                        return true;\n                    }\n                }\n                if (this.parent.currentAction === 'EditSeries' || eventObj[this.fields.id] !== editedData[this.fields.id]) {\n                    eventObj[this.fields.recurrenceID] = editedData[this.fields.id];\n                }\n                else if (this.parent.currentAction === 'EditFollowingEvents') {\n                    eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                    eventObj[this.fields.followingID] = editedData[this.fields.id];\n                }\n            }\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, 'Save', currentAction);\n            }\n            else {\n                this.parent.saveEvent(eventObj, currentAction);\n            }\n        }\n        else {\n            this.parent.currentAction = 'Add';\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, this.parent.currentAction);\n            }\n            else {\n                eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                this.parent.addEvent(eventObj);\n            }\n        }\n        return this.parent.uiStateValues.isBlock;\n    };\n    EventWindow.prototype.getResourceData = function (eventObj) {\n        var resourceData = null;\n        if (!isNullOrUndefined(this.parent.resourceBase) && !isNullOrUndefined(this.parent.resourceBase.resourceCollection)\n            && this.parent.resourceBase.resourceCollection.length > 0) {\n            var lastResouceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n            resourceData = eventObj[lastResouceData.field];\n        }\n        return resourceData;\n    };\n    EventWindow.prototype.getObjectFromFormData = function (className) {\n        var formElement = this.getFormElements(className);\n        var eventObj = {};\n        for (var _i = 0, formElement_2 = formElement; _i < formElement_2.length; _i++) {\n            var currentElement = formElement_2[_i];\n            var columnName = currentElement.name || this.getColumnName(currentElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                eventObj[columnName] = this.getValueFromElement(currentElement);\n            }\n        }\n        return eventObj;\n    };\n    EventWindow.prototype.setDefaultValueToObject = function (eventObj) {\n        if (!isNullOrUndefined(eventObj[this.fields.subject])) {\n            eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.parent.eventSettings.fields.subject.default\n                || this.l10n.getConstant('addTitle');\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.location])) {\n            eventObj[this.fields.location] = eventObj[this.fields.location] || this.parent.eventSettings.fields.location.default;\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.description])) {\n            eventObj[this.fields.description] = eventObj[this.fields.description] || this.parent.eventSettings.fields.description.default;\n        }\n    };\n    EventWindow.prototype.recurrenceValidation = function (startDate, endDate, alert) {\n        var alertMessage;\n        var recEditor = this.recurrenceEditor;\n        var interval = this.getInstance('e-repeat-interval.e-numerictextbox').value;\n        if (alert !== this.l10n.getConstant('ok')) {\n            var activeEvent = this.parent.activeEventData.event;\n            var excludedEvents = [];\n            if ((this.parent.currentAction === 'EditSeries' || this.parent.currentAction === 'EditFollowingEvents')\n                && !isNullOrUndefined(activeEvent)) {\n                var eventStartTime = activeEvent[this.parent.eventFields.startTime];\n                var seriesEvents = this.parent.eventBase.getSeriesEvents(this.eventData, eventStartTime);\n                if (seriesEvents.length > 0) {\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences(seriesEvents, eventStartTime);\n                }\n                else {\n                    var event_2 = this.parent.eventBase.getEventById(activeEvent[this.parent.eventFields.id]);\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences([event_2], eventStartTime);\n                }\n                if (this.parent.currentAction === 'EditSeries'\n                    && !isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])) {\n                    excludedEvents.push(this.eventData);\n                }\n            }\n            if (excludedEvents.length > 0) {\n                alertMessage = 'seriesChangeAlert';\n            }\n            if (this.getInstance('e-end-on-left .e-ddl .e-dropdownlist').value === 'until' &&\n                this.getInstance('e-end-on-date .e-datepicker').value < startDate) {\n                alertMessage = 'wrongPattern';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                var types = recEditor.value.split(';')[1].split('=')[1].split(',');\n                var obj = { 'SU': 0, 'MO': 1, 'TU': 2, 'WE': 3, 'TH': 4, 'FR': 5, 'SA': 6 };\n                var temp = [];\n                var tempDiff = [];\n                var tempvalue = void 0;\n                switch (recEditor.value.split(';')[0].split('=')[1]) {\n                    case 'DAILY':\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) > (interval * 24))) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'WEEKLY':\n                        types = recEditor.value.split(';')[1].split('=')[1].split(',');\n                        for (var index = 0; index < types.length * (interval + 1); index++) {\n                            temp[index] = (types.length > index) ? obj[types[index]] : temp[index - types.length] + (7 * interval);\n                        }\n                        tempvalue = temp.sort(function (a, b) { return a - b; });\n                        for (var index = 1; index < tempvalue.length; index++) {\n                            tempDiff.push(tempvalue[index] - tempvalue[index - 1]);\n                        }\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) >= Math.min.apply(Math, tempDiff) * 24)\n                            || isNullOrUndefined(interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'MONTHLY':\n                        if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'YEARLY':\n                        if (endDate.getTime() >= new Date(+startDate).setFullYear(startDate.getFullYear() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                }\n            }\n        }\n        else {\n            if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                alertMessage = 'createError';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                this.parent.quickPopup.quickDialog.hide();\n            }\n        }\n        return alertMessage;\n    };\n    EventWindow.prototype.getRecurrenceIndex = function (recColl, event) {\n        var recIndex;\n        for (var index = 0; index < recColl.length; index++) {\n            if (event[this.fields.startTime].valueOf() === recColl[index][this.fields.startTime].valueOf()) {\n                recIndex = index;\n                break;\n            }\n        }\n        return recIndex;\n    };\n    EventWindow.prototype.trimAllDay = function (data) {\n        if (data[this.fields.isAllDay]) {\n            var temp = util.addDays(new Date(+data[this.fields.endTime]), -1).getTime();\n            data[this.fields.endTime] = (+data[this.fields.startTime] > temp) ? data[this.fields.endTime] : new Date(temp);\n        }\n    };\n    EventWindow.prototype.editOccurrenceValidation = function (eventId, currentData, editData) {\n        var _this = this;\n        if (editData === void 0) {\n            editData = this.eventData;\n        }\n        var recurColl = this.parent.getOccurrencesByID(eventId);\n        var excludedDatas = this.parent.eventsData.filter(function (data) {\n            return data[_this.fields.recurrenceID] === eventId;\n        });\n        excludedDatas.map(function (data) { return recurColl.push(extend({}, data)); });\n        currentData = extend({}, currentData);\n        this.trimAllDay(currentData);\n        for (var _i = 0, recurColl_1 = recurColl; _i < recurColl_1.length; _i++) {\n            var data = recurColl_1[_i];\n            this.trimAllDay(data);\n        }\n        this.parent.eventBase.sortByTime(recurColl);\n        var index = this.getRecurrenceIndex(recurColl, editData);\n        if (isNullOrUndefined(index)) {\n            return false;\n        }\n        if (index === 0) {\n            if (!isNullOrUndefined(recurColl[index + 1])) {\n                return (!(new Date(+recurColl[index + 1][this.fields.startTime]).setHours(0, 0, 0, 0) >\n                    new Date(+currentData[this.fields.endTime]).setHours(0, 0, 0, 0)));\n            }\n            return false;\n        }\n        else {\n            if (index === recurColl.length - 1) {\n                if (!(new Date(+recurColl[index - 1][this.fields.endTime]).setHours(0, 0, 0, 0) <\n                    new Date(+currentData[this.fields.startTime]).setHours(0, 0, 0, 0))) {\n                    return true;\n                }\n            }\n            else if (!((new Date(+recurColl[index - 1][this.fields.endTime]).setHours(0, 0, 0, 0) <\n                new Date(+currentData[this.fields.startTime]).setHours(0, 0, 0, 0)) &&\n                (new Date(+recurColl[index + 1][this.fields.startTime]).setHours(0, 0, 0, 0) >\n                    new Date(+currentData[this.fields.endTime]).setHours(0, 0, 0, 0)))) {\n                return true;\n            }\n        }\n        return false;\n    };\n    EventWindow.prototype.resourceSaveEvent = function (eventObj, action, currentAction) {\n        var _this = this;\n        var lastResouceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n        var resourceData = eventObj[lastResouceData.field];\n        resourceData = (resourceData instanceof Array) ? resourceData : [resourceData];\n        var lastlevel = this.parent.resourceBase.lastResourceLevel;\n        var eventList = [];\n        var _loop_2 = function (i) {\n            var events = extend({}, eventObj, null, true);\n            events[this_2.fields.id] = this_2.parent.eventBase.getEventMaxID();\n            var temp = [];\n            var addValues = function () {\n                if (action === 'Save' && i === resourceData.length - 1) {\n                    if (temp.length > 0) {\n                        temp[0][_this.fields.id] = eventObj[_this.fields.id];\n                        for (var k = 1; k < temp.length; k++) {\n                            temp[k][_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n                            eventList.push(temp[k]);\n                            _this.parent.saveEvent(temp[0], currentAction);\n                        }\n                    }\n                    else {\n                        events[_this.fields.id] = eventObj[_this.fields.id];\n                        _this.parent.saveEvent(events, currentAction);\n                    }\n                }\n                else {\n                    if (temp.length > 0) {\n                        for (var j = 0; j < temp.length; j++) {\n                            temp[j][_this.fields.id] = _this.parent.eventBase.getEventMaxID(j);\n                            eventList.push(temp[j]);\n                        }\n                    }\n                    else {\n                        events[_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n                        eventList.push(events);\n                    }\n                }\n            };\n            if (this_2.parent.activeViewOptions.group.byGroupID && (!isNullOrUndefined(lastlevel))) {\n                var lastResource = lastResouceData.dataSource;\n                var resCol = this_2.parent.resourceCollection;\n                var index = void 0;\n                if (resCol.length > 1) {\n                    index = util.findIndexInData(lastResource, lastResouceData.idField, resourceData[i], events, resCol);\n                }\n                else {\n                    index = util.findIndexInData(lastResource, lastResouceData.idField, resourceData[i]);\n                }\n                if (index < 0) {\n                    return { value: void 0 };\n                }\n                var groupId_1 = lastResource[index][lastResouceData.groupIDField];\n                var filter = lastlevel.filter(function (obj) { return obj.resourceData[lastResouceData.idField] === resourceData[i]; }).\n                    filter(function (obj) { return obj.resourceData[lastResouceData.groupIDField] === groupId_1; })[0];\n                var groupOrder = filter.groupOrder;\n                for (var index_1 = 0; index_1 < this_2.parent.resourceBase.resourceCollection.length; index_1++) {\n                    var field = this_2.parent.resourceBase.resourceCollection[index_1].field;\n                    events[field] = (groupOrder[index_1] instanceof Array) ? groupOrder[index_1][0] : groupOrder[index_1];\n                }\n                addValues();\n            }\n            else {\n                for (var index = 0; index < this_2.parent.resourceBase.resourceCollection.length - 1; index++) {\n                    var field = this_2.parent.resourceBase.resourceCollection[index].field;\n                    if (events[field] instanceof Array && events[field].length > 1) {\n                        for (var k = 0; k < events[field].length; k++) {\n                            var event_3 = extend({}, events, null, true);\n                            event_3[field] = eventObj[field][k];\n                            event_3[lastResouceData.field] = resourceData[i];\n                            temp.push(event_3);\n                        }\n                    }\n                    else {\n                        if (temp.length === 0) {\n                            events[field] = (eventObj[field] instanceof Array) ?\n                                eventObj[field][0] : eventObj[field];\n                            events[lastResouceData.field] = resourceData[i];\n                        }\n                        else {\n                            for (var l = 0; l < temp.length; l++) {\n                                temp[l][field] = (eventObj[field] instanceof Array) ?\n                                    eventObj[field][0] : eventObj[field];\n                            }\n                        }\n                    }\n                }\n                events[lastResouceData.field] = resourceData[i];\n                addValues();\n            }\n        };\n        var this_2 = this;\n        for (var i = 0; i < resourceData.length; i++) {\n            var state_1 = _loop_2(i);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        if (eventList.length > 0) {\n            for (var _i = 0, eventList_1 = eventList; _i < eventList_1.length; _i++) {\n                var event_4 = eventList_1[_i];\n                event_4[this.fields.recurrenceException] = null;\n                event_4[this.fields.recurrenceID] = null;\n            }\n            this.parent.addEvent(eventList);\n        }\n    };\n    EventWindow.prototype.getEventIdFromForm = function () {\n        return this.element.querySelector('.' + cls.FORM_CLASS).getAttribute('data-id');\n    };\n    EventWindow.prototype.getFormElements = function (className) {\n        var elements = [];\n        if (className === cls.EVENT_WINDOW_DIALOG_CLASS) {\n            elements = [].slice.call(this.element.querySelectorAll('.' + EVENT_FIELD));\n        }\n        else {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + className + ' .' + EVENT_FIELD));\n        }\n        return elements;\n    };\n    EventWindow.prototype.getValueFromElement = function (element) {\n        var value;\n        if (element.classList.contains('e-datepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            value = element.ej2_instances[0].checked;\n        }\n        else {\n            if (element.type === 'checkbox') {\n                value = element.checked;\n            }\n            else {\n                value = SanitizeHtmlHelper.sanitize(element.value);\n            }\n        }\n        return value;\n    };\n    EventWindow.prototype.setValueToElement = function (element, value) {\n        if (element.classList.contains('e-datepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            var instance = element.ej2_instances[0];\n            if (instance.element.classList.contains(cls.EVENT_WINDOW_START_CLASS)) {\n                this.eventWindowTime.startTime = new Date('' + value);\n            }\n            else {\n                this.eventWindowTime.endTime = new Date('' + value);\n            }\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            var instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.value = ((value instanceof Array) ? value : [value]);\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            var instance = element.ej2_instances[0];\n            instance.checked = value;\n            instance.dataBind();\n        }\n        else {\n            if (element.type !== 'checkbox') {\n                element.value = value || '';\n            }\n            else {\n                element.checked = value;\n            }\n        }\n    };\n    EventWindow.prototype.setDefaultValueToElement = function (element) {\n        if (element.classList.contains('e-datepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = this.parent.getCurrentTime();\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            var instance = element.ej2_instances[0];\n            var dateValue = this.parent.getCurrentTime();\n            this.eventWindowTime = { startTime: dateValue, endTime: dateValue };\n            instance.value = dateValue;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            var instance = element.ej2_instances[0];\n            instance.value = null;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            var instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            var instance = element.ej2_instances[0];\n            instance.checked = false;\n            instance.dataBind();\n        }\n        else {\n            if (element.type === 'checkbox') {\n                element.checked = false;\n            }\n            else {\n                element.value = '';\n            }\n        }\n    };\n    EventWindow.prototype.getInstance = function (className) {\n        var element = this.element.querySelector('.' + className);\n        return element ? element.ej2_instances[0] : null;\n    };\n    EventWindow.prototype.eventDelete = function () {\n        switch (this.parent.currentAction) {\n            case 'EditOccurrence':\n                if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n                    this.parent.currentAction = 'DeleteOccurrence';\n                }\n                else {\n                    this.parent.currentAction = 'Delete';\n                }\n                break;\n            case 'EditSeries':\n                this.parent.currentAction = 'DeleteSeries';\n                break;\n            case 'Save':\n                this.parent.currentAction = 'Delete';\n                break;\n        }\n        this.isCrudAction = false;\n        this.dialogObject.hide();\n        this.parent.quickPopup.openDeleteAlert();\n    };\n    EventWindow.prototype.getRecurrenceEditorInstance = function () {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        return this.recurrenceEditor;\n    };\n    EventWindow.prototype.destroyComponents = function () {\n        var formelement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formelement_2 = formelement; _i < formelement_2.length; _i++) {\n            var element = formelement_2[_i];\n            var instance = void 0;\n            if (element.classList.contains('e-datetimepicker')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-dropdownlist')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                instance = element.ej2_instances;\n            }\n            if (instance && instance[0]) {\n                instance[0].destroy();\n            }\n        }\n        if (this.buttonObj) {\n            this.buttonObj.destroy();\n        }\n    };\n    EventWindow.prototype.destroy = function () {\n        if (!this.parent.isDestroyed) {\n            this.parent.resetTemplates(['editorTemplate']);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.destroy();\n        }\n        this.destroyComponents();\n        this.fieldValidator.destroy();\n        if (this.repeatDialogObject) {\n            this.repeatDialogObject.destroy();\n            remove(this.repeatDialogObject.element);\n        }\n        if (this.dialogObject) {\n            this.dialogObject.destroy();\n            this.dialogObject = null;\n        }\n        if (this.element) {\n            remove(this.element);\n            this.element = null;\n        }\n    };\n    return EventWindow;\n}());\nexport { EventWindow };\n","import { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent) {\n        this.translateY = 0;\n        this.itemSize = 60;\n        this.bufferCount = 3;\n        this.renderedLength = 0;\n        this.averageRowHeight = 0;\n        this.isScrollHeightNull = true;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.virtualScroll, this.virtualScrolling);\n    };\n    VirtualScroll.prototype.getRenderedCount = function () {\n        this.setItemSize();\n        return Math.ceil(this.parent.element.clientHeight / this.itemSize) + this.bufferCount;\n    };\n    VirtualScroll.prototype.setTranslateValue = function () {\n        var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        this.renderVirtualTrackHeight(conWrap, resWrap);\n        this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n    };\n    VirtualScroll.prototype.renderVirtualTrackHeight = function (contentWrap, resourceWrap) {\n        this.parent.resourceBase.setExpandedResources();\n        if (this.isScrollHeightNull) {\n            var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n            var resWrap = [].slice.call((resourceWrap).querySelectorAll('table td'));\n            var startIndex_1 = parseInt(resWrap[0].getAttribute('data-group-index'), 10);\n            var endIndex_1 = parseInt(resWrap[resWrap.length - 1].getAttribute('data-group-index'), 10);\n            this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources.filter(function (resource) {\n                return (resource.groupIndex >= startIndex_1 && resource.groupIndex <= endIndex_1);\n            });\n            this.setItemSize();\n            wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n            this.isScrollHeightNull = false;\n            var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n            if (!isNullOrUndefined(virtual)) {\n                remove(virtual);\n            }\n            contentWrap.appendChild(wrap);\n        }\n    };\n    VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n        var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n        wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n        contentWrap.appendChild(wrap);\n    };\n    VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n        var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        if (lastRenderIndex !== lastResourceIndex) {\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            this.renderedLength = conTable.querySelector('tbody').children.length;\n            virtual.style.height = (conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - (this.renderedLength)) *\n                conTable.offsetHeight / this.renderedLength) + 'px';\n        }\n        else {\n            virtual.style.height = '';\n        }\n        this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n    };\n    VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n        var resourceCount = this.parent.resourceBase.renderedResources.length;\n        if (resourceCount !== this.getRenderedCount()) {\n            wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            this.translateY = 0;\n            this.setTranslate(resWrap, conWrap, eventWrap);\n        }\n        else {\n            var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n            var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n            var renderedResConut = resourceCount + (lastCollIndex - lastRenderIndex);\n            renderedResConut = (renderedResConut > this.parent.resourceBase.expandedResources.length) ?\n                this.parent.resourceBase.expandedResources.length : renderedResConut;\n            wrap.style.height = (renderedResConut * this.itemSize) + 'px';\n        }\n    };\n    VirtualScroll.prototype.setItemSize = function () {\n        this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n    };\n    VirtualScroll.prototype.renderEvents = function () {\n        this.parent.notify(events.dataReady, {});\n        this.parent.notify(events.contentReady, {});\n        this.parent.hideSpinner();\n    };\n    VirtualScroll.prototype.virtualScrolling = function () {\n        var _this = this;\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n            this.parent.quickPopup.morePopup.hide();\n        }\n        var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n        this.renderedLength = resWrap.querySelector('tbody').children.length;\n        var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n        var scrollHeight = this.parent.rowAutoHeight ?\n            (conTable.offsetHeight - conWrap.offsetHeight) : this.bufferCount * this.itemSize;\n        addClass([conWrap], 'e-transition');\n        var resCollection = [];\n        if ((conWrap.scrollTop) - this.translateY < 0) {\n            resCollection = this.upScroll(conWrap, firstTDIndex);\n        }\n        else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n            resCollection = this.downScroll(conWrap, firstTDIndex);\n        }\n        if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n            this.parent.showSpinner();\n            this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n            this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n            if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                this.parent.dragAndDropModule.navigationWrapper();\n            }\n            window.clearTimeout(this.timeValue);\n            this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n        }\n    };\n    VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n        var index = 0;\n        index = (~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize)) - this.renderedLength;\n        if (this.parent.rowAutoHeight) {\n            index = (index > firstTDIndex) ? firstTDIndex - this.bufferCount : index;\n        }\n        index = (index > 0) ? index : 0;\n        var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n        this.parent.resourceBase.renderedResources = prevSetCollection;\n        if (firstTDIndex === 0) {\n            this.translateY = conWrap.scrollTop;\n        }\n        else {\n            var height = (this.parent.rowAutoHeight) ? this.averageRowHeight : this.itemSize;\n            this.translateY = (conWrap.scrollTop - (this.bufferCount * height) > 0) ?\n                conWrap.scrollTop - (this.bufferCount * height) : 0;\n        }\n        return prevSetCollection;\n    };\n    VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n        var lastResource = this.parent.resourceBase.\n            renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        if (lastResource === lastResourceIndex) {\n            return null;\n        }\n        var nextSetResIndex = 0;\n        nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n        if (this.parent.rowAutoHeight) {\n            nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n            nextSetResIndex = (nextSetResIndex > firstTDIndex + this.bufferCount) ? nextSetResIndex : firstTDIndex + this.bufferCount;\n        }\n        var lastIndex = nextSetResIndex + this.renderedLength;\n        lastIndex = (lastIndex > this.parent.resourceBase.expandedResources.length) ?\n            nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n        var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n        this.translateY = conWrap.scrollTop;\n        return nextSetCollection;\n    };\n    VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n        var renderedLenth = resWrap.querySelector('tbody').children.length;\n        for (var i = 0; i < renderedLenth; i++) {\n            remove(resWrap.querySelector('tbody tr'));\n            remove(conWrap.querySelector('tbody tr'));\n            remove(eventWrap.querySelector('div'));\n        }\n        this.parent.resourceBase.renderedResources = resCollection;\n        var resourceRows = this.parent.resourceBase.getContentRows(resCollection);\n        var contentRows = this.parent.activeView.getContentRows();\n        var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n        append(resourceRows, resWrap.querySelector('tbody'));\n        append(contentRows, conWrap.querySelector('tbody'));\n        append(eventRows, eventWrap);\n    };\n    VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n        return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n    };\n    VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n        setStyleAttribute(resWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(conWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(eventWrap, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        if (!isNullOrUndefined(timeIndicator)) {\n            setStyleAttribute(timeIndicator, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, extend, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { VirtualScroll } from '../actions/virtual-scroll';\nimport { EventTooltip } from '../popups/event-tooltip';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Schedule DOM rendering\n */\nvar Render = /** @class */ (function () {\n    function Render(parent) {\n        this.parent = parent;\n    }\n    Render.prototype.render = function (viewName, isDataRefresh) {\n        if (isDataRefresh === void 0) { isDataRefresh = true; }\n        this.initializeLayout(viewName);\n        if (this.parent.activeView && isDataRefresh) {\n            this.refreshDataManager();\n        }\n    };\n    Render.prototype.initializeLayout = function (viewName) {\n        if (this.parent.activeView) {\n            this.parent.resetTemplates();\n            this.parent.activeView.removeEventListener();\n            this.parent.activeView.destroy();\n        }\n        switch (viewName) {\n            case 'Day':\n                this.parent.activeView = this.parent.dayModule;\n                break;\n            case 'Week':\n                this.parent.activeView = this.parent.weekModule;\n                break;\n            case 'WorkWeek':\n                this.parent.activeView = this.parent.workWeekModule;\n                break;\n            case 'Month':\n                this.parent.activeView = this.parent.monthModule;\n                break;\n            case 'Year':\n                this.parent.activeView = this.parent.yearModule;\n                break;\n            case 'Agenda':\n                this.parent.activeView = this.parent.agendaModule;\n                break;\n            case 'MonthAgenda':\n                this.parent.activeView = this.parent.monthAgendaModule;\n                break;\n            case 'TimelineDay':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                this.parent.activeView.viewClass = 'e-timeline-day-view';\n                break;\n            case 'TimelineWorkWeek':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                this.parent.activeView.viewClass = 'e-timeline-work-week-view';\n                break;\n            case 'TimelineWeek':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                this.parent.activeView.viewClass = 'e-timeline-week-view';\n                break;\n            case 'TimelineMonth':\n                this.parent.activeView = this.parent.timelineMonthModule;\n                break;\n            case 'TimelineYear':\n                this.parent.activeView = this.parent.timelineYearModule;\n                break;\n        }\n        if (isNullOrUndefined(this.parent.activeView)) {\n            var firstView = this.parent.viewCollections[0].option;\n            if (firstView) {\n                this.parent.setScheduleProperties({ currentView: firstView });\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.updateActiveView();\n                    this.parent.headerModule.setCalendarView();\n                }\n                return this.initializeLayout(firstView);\n            }\n            throw Error('Inject required modules');\n        }\n        this.parent.activeView.viewIndex = this.parent.viewIndex;\n        this.updateLabelText(viewName);\n        this.parent.activeView.addEventListener();\n        this.parent.activeView.getRenderDates();\n        this.parent.uiStateValues.isGroupAdaptive = this.parent.isAdaptive && this.parent.activeViewOptions.group.resources.length > 0 &&\n            this.parent.activeViewOptions.group.enableCompactView;\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.destroy();\n            this.parent.virtualScrollModule = null;\n        }\n        if (this.parent.currentView.indexOf('Timeline') !== -1 && this.parent.currentView.indexOf('Year') === -1\n            && this.parent.activeViewOptions.allowVirtualScrolling\n            && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.virtualScrollModule = new VirtualScroll(this.parent);\n            this.parent.uiStateValues.top = 0;\n        }\n        this.updateHeader();\n        this.parent.activeView.renderLayout(cls.CURRENT_PANEL_CLASS);\n        this.parent.renderTemplates();\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.destroy();\n            this.parent.eventTooltip = null;\n        }\n        if (this.parent.eventSettings.enableTooltip || (this.parent.activeViewOptions.group.resources.length > 0\n            && this.parent.activeViewOptions.group.headerTooltipTemplate)) {\n            this.parent.eventTooltip = new EventTooltip(this.parent);\n        }\n    };\n    Render.prototype.updateHeader = function () {\n        if (this.parent.headerModule) {\n            this.parent.headerModule.setDayOfWeek(this.parent.activeViewOptions.firstDayOfWeek);\n            if (this.parent.activeViewOptions.readonly) {\n                addClass([this.parent.element], cls.READ_ONLY);\n            }\n            else if (this.parent.element.classList.contains(cls.READ_ONLY)) {\n                removeClass([this.parent.element], cls.READ_ONLY);\n            }\n            this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText());\n            this.parent.headerModule.updateHeaderItems('remove');\n        }\n    };\n    Render.prototype.updateLabelText = function (view) {\n        var content = this.parent.activeView.getLabelText(view);\n        this.parent.element.setAttribute('role', 'main');\n        this.parent.element.setAttribute('aria-label', content);\n    };\n    Render.prototype.refreshDataManager = function () {\n        var _this = this;\n        if (!this.parent.activeView) {\n            return;\n        }\n        var start = this.parent.activeView.startDate();\n        var end = this.parent.activeView.endDate();\n        var dataManager = this.parent.dataModule.getData(this.parent.dataModule.generateQuery(start, end));\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e); }).catch(function (e) { return _this.dataManagerFailure(e); });\n    };\n    Render.prototype.dataManagerSuccess = function (e) {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(events.dataBinding, e, function (args) {\n            var resultData = extend([], args.result, null, true);\n            _this.parent.eventsData = resultData.filter(function (data) { return !data[_this.parent.eventFields.isBlock]; });\n            _this.parent.blockData = resultData.filter(function (data) { return data[_this.parent.eventFields.isBlock]; });\n            var processed = _this.parent.eventBase.processData(resultData);\n            _this.parent.notify(events.dataReady, { processedData: processed });\n            if (_this.parent.dragAndDropModule && _this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                _this.parent.dragAndDropModule.navigationWrapper();\n            }\n            _this.parent.trigger(events.dataBound, null, function () { return _this.parent.hideSpinner(); });\n        });\n    };\n    Render.prototype.dataManagerFailure = function (e) {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(events.actionFailure, { error: e }, function () { return _this.parent.hideSpinner(); });\n    };\n    return Render;\n}());\nexport { Render };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the configuration of working hours related options of scheduler.\n */\nvar WorkHours = /** @class */ (function (_super) {\n    __extends(WorkHours, _super);\n    function WorkHours() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], WorkHours.prototype, \"highlight\", void 0);\n    __decorate([\n        Property('09:00')\n    ], WorkHours.prototype, \"start\", void 0);\n    __decorate([\n        Property('18:00')\n    ], WorkHours.prototype, \"end\", void 0);\n    return WorkHours;\n}(ChildProperty));\nexport { WorkHours };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the configuration of options related to timescale on scheduler.\n */\nvar TimeScale = /** @class */ (function (_super) {\n    __extends(TimeScale, _super);\n    function TimeScale() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], TimeScale.prototype, \"enable\", void 0);\n    __decorate([\n        Property(60)\n    ], TimeScale.prototype, \"interval\", void 0);\n    __decorate([\n        Property(2)\n    ], TimeScale.prototype, \"slotCount\", void 0);\n    __decorate([\n        Property()\n    ], TimeScale.prototype, \"minorSlotTemplate\", void 0);\n    __decorate([\n        Property()\n    ], TimeScale.prototype, \"majorSlotTemplate\", void 0);\n    return TimeScale;\n}(ChildProperty));\nexport { TimeScale };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that defines the template options available to customize the quick popup of scheduler.\n */\nvar QuickInfoTemplates = /** @class */ (function (_super) {\n    __extends(QuickInfoTemplates, _super);\n    function QuickInfoTemplates() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Both')\n    ], QuickInfoTemplates.prototype, \"templateType\", void 0);\n    __decorate([\n        Property()\n    ], QuickInfoTemplates.prototype, \"header\", void 0);\n    __decorate([\n        Property()\n    ], QuickInfoTemplates.prototype, \"content\", void 0);\n    __decorate([\n        Property()\n    ], QuickInfoTemplates.prototype, \"footer\", void 0);\n    return QuickInfoTemplates;\n}(ChildProperty));\nexport { QuickInfoTemplates };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the header rows related configurations on timeline views.\n */\nvar HeaderRows = /** @class */ (function (_super) {\n    __extends(HeaderRows, _super);\n    function HeaderRows() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], HeaderRows.prototype, \"option\", void 0);\n    __decorate([\n        Property()\n    ], HeaderRows.prototype, \"template\", void 0);\n    return HeaderRows;\n}(ChildProperty));\nexport { HeaderRows };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable max-len */\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getRecurrenceStringFromDate, generate } from '../../recurrence-editor/date-generator';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\n/**\n * Schedule CRUD operations\n */\nvar Crud = /** @class */ (function () {\n    function Crud(parent) {\n        this.parent = parent;\n        this.crudObj = { sourceEvent: null, targetEvent: null, isCrudAction: false };\n    }\n    Crud.prototype.getQuery = function () {\n        var start = this.parent.activeView.startDate();\n        var end = this.parent.activeView.endDate();\n        return this.parent.dataModule.generateQuery(start, end);\n    };\n    Crud.prototype.getTable = function () {\n        if (this.parent.eventSettings.query) {\n            var query = this.parent.eventSettings.query.clone();\n            return query.fromTable;\n        }\n        return null;\n    };\n    Crud.prototype.refreshData = function (args) {\n        var _this = this;\n        var actionArgs = {\n            requestType: args.requestType, cancel: false, data: args.data,\n            addedRecords: args.editParams.addedRecords, changedRecords: args.editParams.changedRecords,\n            deletedRecords: args.editParams.deletedRecords\n        };\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj && this.parent.dragAndDropModule.actionObj.element) {\n            this.parent.dragAndDropModule.actionObj.element.style.display = 'none';\n        }\n        if (this.parent.resizeModule && this.parent.resizeModule.actionObj && this.parent.resizeModule.actionObj.element) {\n            this.parent.resizeModule.actionObj.element.style.display = 'none';\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.activeViewOptions.group.allowGroupEdit\n            && !this.parent.rowAutoHeight && !this.parent.virtualScrollModule && this.parent.activeViewOptions.group.byGroupID) {\n            if (args.requestType === 'eventCreated' || args.requestType === 'eventRemoved') {\n                this.crudObj.isCrudAction = true;\n                this.crudObj.sourceEvent = [];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var crudData = args.data instanceof Array ? (args.data.length === 0 &&\n                    args.requestType === 'eventRemoved' ? args.promise.deletedRecords : args.data) :\n                    ((typeof args.data === 'string' || typeof args.data === 'number') && args.requestType === 'eventRemoved') ?\n                        args.editParams.deletedRecords : [args.data];\n                var _loop_1 = function (data) {\n                    this_1.crudObj.isCrudAction = !(args.requestType === 'eventRemoved' && !isNullOrUndefined(data.parent));\n                    var groupIndex = this_1.parent.eventBase.getGroupIndexFromEvent(data);\n                    if (this_1.parent.crudModule.crudObj.sourceEvent.filter(function (tdData) { return tdData.groupIndex === groupIndex; }).length === 0\n                        && this_1.crudObj.isCrudAction) {\n                        this_1.crudObj.sourceEvent.push(this_1.parent.resourceBase.lastResourceLevel[groupIndex]);\n                    }\n                };\n                var this_1 = this;\n                for (var _i = 0, crudData_1 = crudData; _i < crudData_1.length; _i++) {\n                    var data = crudData_1[_i];\n                    _loop_1(data);\n                }\n                this.crudObj.targetEvent = this.crudObj.sourceEvent;\n            }\n        }\n        if (this.parent.dataModule.dataManager.dataSource.offline) {\n            this.parent.trigger(events.actionComplete, actionArgs, function (offlineArgs) {\n                if (!offlineArgs.cancel) {\n                    _this.parent.renderModule.refreshDataManager();\n                }\n            });\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            args.promise.then(function (e) {\n                if (_this.parent.isDestroyed) {\n                    return;\n                }\n                _this.parent.trigger(events.actionComplete, actionArgs, function (onlineArgs) {\n                    if (!onlineArgs.cancel) {\n                        _this.parent.renderModule.refreshDataManager();\n                    }\n                });\n            }).catch(function (e) {\n                if (_this.parent.isDestroyed) {\n                    return;\n                }\n                _this.parent.trigger(events.actionFailure, { error: e });\n            });\n        }\n    };\n    Crud.prototype.addEvent = function (eventData) {\n        var _this = this;\n        if (this.parent.eventSettings.allowAdding) {\n            if (!this.isBlockEvent(eventData) && this.parent.eventBase.isBlockRange(eventData)) {\n                this.parent.quickPopup.openValidationError('blockAlert', eventData);\n                return;\n            }\n            var addEvents = (eventData instanceof Array) ? eventData : [eventData];\n            var args = {\n                requestType: 'eventCreate', cancel: false, data: addEvents,\n                addedRecords: addEvents, changedRecords: [], deletedRecords: []\n            };\n            this.parent.trigger(events.actionBegin, args, function (addArgs) {\n                if (!addArgs.cancel) {\n                    var fields = _this.parent.eventFields;\n                    var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                    var promise = void 0;\n                    if (addArgs.addedRecords instanceof Array) {\n                        for (var _i = 0, _a = addArgs.addedRecords; _i < _a.length; _i++) {\n                            var event_1 = _a[_i];\n                            editParams.addedRecords.push(_this.parent.eventBase.processTimezone(event_1, true));\n                        }\n                        promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n                    }\n                    else {\n                        var event_2 = _this.parent.eventBase.processTimezone(addArgs.addedRecords, true);\n                        editParams.addedRecords.push(event_2);\n                        promise = _this.parent.dataModule.dataManager.insert(event_2, _this.getTable(), _this.getQuery());\n                    }\n                    var crudArgs = {\n                        requestType: 'eventCreated', cancel: false, data: addArgs.addedRecords, promise: promise, editParams: editParams\n                    };\n                    _this.refreshData(crudArgs);\n                }\n            });\n        }\n    };\n    Crud.prototype.saveEvent = function (eventData, action) {\n        var _this = this;\n        if (this.parent.eventSettings.allowEditing) {\n            if (this.parent.currentAction !== 'EditFollowingEvents' && !this.isBlockEvent(eventData)\n                && this.parent.eventBase.isBlockRange(eventData)) {\n                this.parent.quickPopup.openValidationError('blockAlert', eventData);\n                return;\n            }\n            this.parent.currentAction = action;\n            if (action) {\n                switch (action) {\n                    case 'Save':\n                        this.processSave(eventData);\n                        break;\n                    case 'EditOccurrence':\n                        this.processOccurrences(eventData, action);\n                        break;\n                    case 'EditFollowingEvents':\n                        this.processFollowSeries(eventData, action);\n                        break;\n                    case 'EditSeries':\n                        this.processEntireSeries(eventData, action);\n                        break;\n                }\n            }\n            else {\n                var updateEvents = (eventData instanceof Array) ? eventData : [eventData];\n                var args = {\n                    requestType: 'eventChange', cancel: false, data: eventData,\n                    addedRecords: [], changedRecords: updateEvents, deletedRecords: []\n                };\n                this.parent.trigger(events.actionBegin, args, function (saveArgs) {\n                    if (!saveArgs.cancel) {\n                        var promise = void 0;\n                        var fields = _this.parent.eventFields;\n                        var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                        if (saveArgs.changedRecords instanceof Array) {\n                            for (var _i = 0, _a = saveArgs.changedRecords; _i < _a.length; _i++) {\n                                var event_3 = _a[_i];\n                                var eventData_1 = _this.parent.eventBase.processTimezone(event_3, true);\n                                editParams.changedRecords.push(eventData_1);\n                            }\n                            promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n                        }\n                        else {\n                            var event_4 = _this.parent.eventBase.processTimezone(saveArgs.changedRecords, true);\n                            editParams.changedRecords.push(event_4);\n                            promise = _this.parent.dataModule.dataManager.update(fields.id, event_4, _this.getTable(), _this.getQuery());\n                        }\n                        var crudArgs = {\n                            requestType: 'eventChanged', cancel: false,\n                            data: saveArgs.changedRecords, promise: promise, editParams: editParams\n                        };\n                        _this.refreshData(crudArgs);\n                    }\n                });\n            }\n        }\n    };\n    Crud.prototype.deleteEvent = function (eventData, action) {\n        var _this = this;\n        if (this.parent.eventSettings.allowDeleting) {\n            this.parent.currentAction = action;\n            var deleteEvents = [];\n            if (typeof eventData === 'string' || typeof eventData === 'number') {\n                deleteEvents = this.parent.eventsData.filter(function (eventObj) {\n                    return eventObj[_this.parent.eventFields.id] === eventData;\n                });\n            }\n            else {\n                deleteEvents = (eventData instanceof Array ? eventData : [eventData]);\n            }\n            if (action) {\n                switch (action) {\n                    case 'Delete':\n                        this.processDelete(deleteEvents);\n                        break;\n                    case 'DeleteOccurrence':\n                        this.processOccurrences(deleteEvents, action);\n                        break;\n                    case 'DeleteFollowingEvents':\n                        this.processFollowSeries(deleteEvents, action);\n                        break;\n                    case 'DeleteSeries':\n                        this.processEntireSeries(deleteEvents, action);\n                        break;\n                }\n            }\n            else {\n                var args = {\n                    requestType: 'eventRemove', cancel: false, data: eventData,\n                    addedRecords: [], changedRecords: [], deletedRecords: deleteEvents\n                };\n                this.parent.trigger(events.actionBegin, args, function (deleteArgs) {\n                    if (!deleteArgs.cancel) {\n                        var promise = void 0;\n                        var fields = _this.parent.eventFields;\n                        var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                        if (deleteArgs.deletedRecords.length > 1) {\n                            editParams.deletedRecords = editParams.deletedRecords.concat(deleteArgs.deletedRecords);\n                            promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n                        }\n                        else {\n                            editParams.deletedRecords.push(deleteArgs.deletedRecords[0]);\n                            promise = _this.parent.dataModule.dataManager.remove(fields.id, deleteArgs.deletedRecords[0], _this.getTable(), _this.getQuery());\n                        }\n                        _this.parent.eventBase.selectWorkCellByTime(deleteArgs.deletedRecords);\n                        var crudArgs = {\n                            requestType: 'eventRemoved', cancel: false,\n                            data: deleteArgs.deletedRecords, promise: promise, editParams: editParams\n                        };\n                        _this.refreshData(crudArgs);\n                    }\n                });\n            }\n        }\n    };\n    Crud.prototype.processOccurrences = function (eventData, action) {\n        var _this = this;\n        var occurrenceData = [];\n        var isDeletedRecords = false;\n        if (eventData instanceof Array) {\n            for (var _i = 0, eventData_2 = eventData; _i < eventData_2.length; _i++) {\n                var event_5 = eventData_2[_i];\n                occurrenceData.push({ occurrence: event_5, parent: this.getParentEvent(event_5) });\n            }\n        }\n        else {\n            occurrenceData = { occurrence: eventData, parent: this.getParentEvent(eventData) };\n        }\n        var updateEvents = (eventData instanceof Array) ? eventData : [eventData];\n        var args = {\n            requestType: action === 'EditOccurrence' ? 'eventChange' : 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: updateEvents, deletedRecords: []\n        };\n        args.data = occurrenceData;\n        this.parent.trigger(events.actionBegin, args, function (occurrenceArgs) {\n            if (!occurrenceArgs.cancel) {\n                var fields = _this.parent.eventFields;\n                var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var occurrenceEvents = (occurrenceData instanceof Array ? occurrenceData : [occurrenceData]);\n                var _loop_2 = function (a, count) {\n                    var childEvent = occurrenceArgs.changedRecords[a];\n                    var parentEvent = occurrenceEvents[a].parent;\n                    var parentException = parentEvent[fields.recurrenceException];\n                    var editedData = void 0;\n                    var exceptionDate = void 0;\n                    switch (action) {\n                        case 'EditOccurrence':\n                            editedData = _this.parent.eventsProcessed.filter(function (event) { return event.Guid === childEvent.Guid; })[0];\n                            exceptionDate = _this.excludeDateCheck(editedData[fields.startTime], parentException);\n                            if (exceptionDate !== parentEvent[fields.recurrenceException]) {\n                                parentEvent[fields.recurrenceException] = exceptionDate;\n                                childEvent[fields.recurrenceException] = getRecurrenceStringFromDate(editedData[fields.startTime]);\n                                childEvent[fields.recurrenceID] = parentEvent[fields.id];\n                                childEvent[fields.followingID] = null;\n                                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                                editParams.addedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            }\n                            else {\n                                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            }\n                            break;\n                        case 'DeleteOccurrence':\n                            if (!childEvent[fields.recurrenceException]) {\n                                parentEvent[fields.recurrenceException] =\n                                    _this.excludeDateCheck(childEvent[fields.startTime], parentException);\n                                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                            }\n                            if (childEvent[fields.id] !== parentEvent[fields.id]) {\n                                editParams.deletedRecords.push(childEvent);\n                                isDeletedRecords = true;\n                            }\n                            break;\n                    }\n                };\n                for (var a = 0, count = occurrenceArgs.changedRecords.length; a < count; a++) {\n                    _loop_2(a, count);\n                }\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n                _this.parent.eventBase.selectWorkCellByTime(occurrenceArgs.changedRecords);\n                var crudArgs = {\n                    requestType: action === 'EditOccurrence' ? 'eventChanged' : 'eventRemoved',\n                    cancel: false, data: isDeletedRecords ? occurrenceArgs.deletedRecords : occurrenceArgs.changedRecords,\n                    promise: promise, editParams: editParams\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.processFollowSeries = function (eventData, action) {\n        var _this = this;\n        var followData = [];\n        if (eventData instanceof Array) {\n            for (var _i = 0, eventData_3 = eventData; _i < eventData_3.length; _i++) {\n                var event_6 = eventData_3[_i];\n                followData.push({ occurrence: event_6, parent: this.getParentEvent(event_6) });\n            }\n        }\n        else {\n            followData = { occurrence: eventData, parent: this.getParentEvent(eventData) };\n        }\n        var updateFollowEvents = (eventData instanceof Array) ? eventData : [eventData];\n        var args = {\n            requestType: action === 'EditFollowingEvents' ? 'eventChange' : 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: updateFollowEvents, deletedRecords: []\n        };\n        args.data = followData;\n        this.parent.trigger(events.actionBegin, args, function (followArgs) {\n            if (!followArgs.cancel) {\n                var fields_1 = _this.parent.eventFields;\n                var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var followEvents = followData instanceof Array ? followData : [followData];\n                var _loop_3 = function (a, count) {\n                    var childEvent = followArgs.changedRecords[a];\n                    var parentEvent = followEvents[a].parent;\n                    var followData_1 = _this.parent.eventBase.getEventCollections(parentEvent, childEvent);\n                    var isSpanned = void 0;\n                    switch (action) {\n                        case 'EditFollowingEvents':\n                            _this.processRecurrenceRule(parentEvent, childEvent);\n                            isSpanned = !_this.parent.eventBase.isFollowingEvent(parentEvent, childEvent);\n                            childEvent[fields_1.followingID] = isSpanned ? null : parentEvent[fields_1.id];\n                            childEvent[fields_1.recurrenceID] = null;\n                            editParams.addedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                            if (!_this.parent.uiStateValues.isIgnoreOccurrence) {\n                                childEvent[fields_1.recurrenceException] = null;\n                                if (followData_1.occurrence.length > 0) {\n                                    var rule = followData_1.occurrence.slice(-1)[0][fields_1.recurrenceRule];\n                                    if (rule.indexOf('COUNT') === -1) {\n                                        childEvent[fields_1.recurrenceRule] = rule;\n                                    }\n                                }\n                                if (followData_1.follow.length > 0) {\n                                    childEvent[fields_1.recurrenceRule] = followData_1.follow.slice(-1)[0][fields_1.recurrenceRule];\n                                    editParams.deletedRecords = editParams.deletedRecords.concat(followData_1.follow);\n                                }\n                                if (isSpanned) {\n                                    followData_1.occurrence = followData_1.occurrence.filter(function (eventObj) {\n                                        return eventObj[fields_1.recurrenceID] === childEvent[fields_1.id];\n                                    });\n                                }\n                                editParams.deletedRecords = editParams.deletedRecords.concat(followData_1.occurrence);\n                            }\n                            break;\n                        case 'DeleteFollowingEvents':\n                            _this.processRecurrenceRule(parentEvent, childEvent[fields_1.startTime]);\n                            editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                            editParams.deletedRecords = editParams.deletedRecords.concat(followData_1.occurrence).concat(followData_1.follow);\n                            break;\n                    }\n                };\n                for (var a = 0, count = followArgs.changedRecords.length; a < count; a++) {\n                    _loop_3(a, count);\n                }\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields_1.id, _this.getTable(), _this.getQuery());\n                _this.parent.eventBase.selectWorkCellByTime(followArgs.changedRecords);\n                var crudArgs = {\n                    requestType: action === 'EditFollowingEvents' ? 'eventChanged' : 'eventRemoved',\n                    cancel: false, data: followArgs.changedRecords, promise: promise, editParams: editParams\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.processEntireSeries = function (eventData, action) {\n        var _this = this;\n        var seriesData = [];\n        var isDeletedRecords = false;\n        if (eventData instanceof Array) {\n            for (var _i = 0, eventData_4 = eventData; _i < eventData_4.length; _i++) {\n                var event_7 = eventData_4[_i];\n                seriesData.push(this.getParentEvent(event_7, true));\n            }\n        }\n        else {\n            seriesData = this.getParentEvent(eventData, true);\n        }\n        var updateSeriesEvents = (eventData instanceof Array) ? eventData : [eventData];\n        var args = {\n            requestType: action === 'EditSeries' ? 'eventChange' : 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: updateSeriesEvents, deletedRecords: []\n        };\n        args.data = seriesData;\n        this.parent.trigger(events.actionBegin, args, function (seriesArgs) {\n            if (!seriesArgs.cancel) {\n                var fields_2 = _this.parent.eventFields;\n                var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var seriesEvents = seriesData instanceof Array ? seriesData : [seriesData];\n                var _loop_4 = function (a, count) {\n                    var childEvent = seriesArgs.changedRecords[a];\n                    var parentEvent = seriesEvents[a];\n                    var eventCollections = _this.parent.eventBase.getEventCollections(parentEvent);\n                    var deletedEvents = eventCollections.follow.concat(eventCollections.occurrence);\n                    switch (action) {\n                        case 'EditSeries':\n                            if ((childEvent[fields_2.startTime] > parentEvent[fields_2.startTime]) && childEvent[fields_2.recurrenceRule]) {\n                                _this.processRecurrenceRule(parentEvent, childEvent);\n                            }\n                            childEvent[fields_2.id] = parentEvent[fields_2.id];\n                            childEvent[fields_2.recurrenceID] = null;\n                            childEvent[fields_2.followingID] = null;\n                            if (_this.parent.uiStateValues.isIgnoreOccurrence && childEvent[fields_2.recurrenceException]) {\n                                var originalParent = _this.parent.eventsData.filter(function (eventObj) {\n                                    return eventObj[fields_2.id] === childEvent[fields_2.id];\n                                });\n                                if (originalParent.length > 0) {\n                                    childEvent[fields_2.recurrenceRule] = originalParent[0][fields_2.recurrenceRule];\n                                }\n                            }\n                            else {\n                                childEvent[fields_2.recurrenceException] = null;\n                                editParams.deletedRecords = editParams.deletedRecords.concat(deletedEvents);\n                            }\n                            editParams.changedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            _this.parent.uiStateValues.isIgnoreOccurrence = false;\n                            break;\n                        case 'DeleteSeries':\n                            editParams.deletedRecords = editParams.deletedRecords.concat(deletedEvents.concat(parentEvent));\n                            isDeletedRecords = true;\n                            break;\n                    }\n                };\n                for (var a = 0, count = seriesArgs.changedRecords.length; a < count; a++) {\n                    _loop_4(a, count);\n                }\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields_2.id, _this.getTable(), _this.getQuery());\n                _this.parent.eventBase.selectWorkCellByTime(seriesArgs.changedRecords);\n                var crudArgs = {\n                    requestType: action === 'EditSeries' ? 'eventChanged' : 'eventRemoved',\n                    cancel: false, data: isDeletedRecords ? seriesArgs.deletedRecords : seriesArgs.changedRecords,\n                    promise: promise, editParams: editParams\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.processDelete = function (eventData) {\n        var _this = this;\n        var deleteData = [];\n        for (var _i = 0, eventData_5 = eventData; _i < eventData_5.length; _i++) {\n            var eventObj = eventData_5[_i];\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                deleteData.push({ occurrence: eventObj, parent: this.getParentEvent(eventObj) });\n            }\n            else {\n                deleteData.push(eventObj);\n            }\n        }\n        var args = {\n            requestType: 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: [], deletedRecords: eventData\n        };\n        args.data = deleteData;\n        this.parent.trigger(events.actionBegin, args, function (deleteArgs) {\n            if (!deleteArgs.cancel) {\n                var fields_3 = _this.parent.eventFields;\n                var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var _loop_5 = function (a, count) {\n                    var isDelete = isNullOrUndefined(deleteArgs.deletedRecords[a][_this.parent.eventFields.recurrenceRule]);\n                    if (!isDelete) {\n                        var parentEvent_1 = deleteData[a].parent;\n                        var isEdited = editParams.changedRecords.filter(function (obj) {\n                            return obj[fields_3.id] === parentEvent_1[fields_3.id];\n                        });\n                        var editedDate = deleteArgs.deletedRecords[a][fields_3.startTime];\n                        if (isEdited.length > 0) {\n                            var editedData = isEdited[0];\n                            editedData[fields_3.recurrenceException] =\n                                _this.excludeDateCheck(editedDate, editedData[fields_3.recurrenceException]);\n                        }\n                        else {\n                            parentEvent_1[fields_3.recurrenceException] =\n                                _this.excludeDateCheck(editedDate, parentEvent_1[fields_3.recurrenceException]);\n                        }\n                        if (isEdited.length === 0) {\n                            editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent_1, true));\n                        }\n                        isDelete = deleteArgs.deletedRecords[a][fields_3.id] !== parentEvent_1[fields_3.id];\n                    }\n                    if (isDelete) {\n                        editParams.deletedRecords.push(deleteArgs.deletedRecords[a]);\n                    }\n                };\n                for (var a = 0, count = deleteArgs.deletedRecords.length; a < count; a++) {\n                    _loop_5(a, count);\n                }\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields_3.id, _this.getTable(), _this.getQuery());\n                var crudArgs = {\n                    requestType: 'eventRemoved', cancel: false, data: deleteArgs.deletedRecords, promise: promise, editParams: editParams\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.processSave = function (data) {\n        var _this = this;\n        var eventData = (data instanceof Array) ? data : [data];\n        var editData = [];\n        for (var _i = 0, eventData_6 = eventData; _i < eventData_6.length; _i++) {\n            var eventObj = eventData_6[_i];\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                editData.push({ occurrence: eventObj, parent: this.getParentEvent(eventObj) });\n            }\n            else {\n                editData.push(eventObj);\n            }\n        }\n        var args = { requestType: 'eventChange', cancel: false, addedRecords: [], changedRecords: eventData, deletedRecords: [] };\n        args.data = editData;\n        this.parent.trigger(events.actionBegin, args, function (editArgs) {\n            if (!editArgs.cancel) {\n                var fields = _this.parent.eventFields;\n                var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                for (var _i = 0, _a = editArgs.changedRecords; _i < _a.length; _i++) {\n                    var record = _a[_i];\n                    if (!isNullOrUndefined(record[fields.recurrenceRule]) && isNullOrUndefined(record[fields.recurrenceException])) {\n                        var exceptionString = getRecurrenceStringFromDate(record[fields.startTime]);\n                        var parentEle = _this.getParentEvent(record);\n                        parentEle[fields.recurrenceException] = isNullOrUndefined(parentEle[fields.recurrenceException]) ?\n                            exceptionString : parentEle[fields.recurrenceException].concat(\",\" + exceptionString);\n                        record[fields.id] = _this.parent.getEventMaxID();\n                        record[fields.recurrenceException] = exceptionString;\n                        editParams.addedRecords.push(_this.parent.eventBase.processTimezone(record, true));\n                        editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEle, true));\n                    }\n                    else {\n                        editParams.changedRecords.push(_this.parent.eventBase.processTimezone(record, true));\n                    }\n                }\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n                var crudArgs = { requestType: 'eventChanged', cancel: false, data: editArgs.changedRecords, promise: promise, editParams: editParams };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.getParentEvent = function (event, isParent) {\n        if (isParent === void 0) { isParent = false; }\n        var parentEvent = this.parent.eventBase.getParentEvent(event, isParent) || event;\n        if (parentEvent[this.parent.eventFields.startTimezone] || parentEvent[this.parent.eventFields.endTimezone]) {\n            this.parent.eventBase.timezoneConvert(parentEvent);\n        }\n        return parentEvent;\n    };\n    Crud.prototype.excludeDateCheck = function (eventStartTime, exceptionDateList) {\n        var exDate = getRecurrenceStringFromDate(eventStartTime);\n        if (!isNullOrUndefined(exceptionDateList)) {\n            if (exceptionDateList.indexOf(exDate) === -1) {\n                exceptionDateList = !(isNullOrUndefined(exceptionDateList)) ? exceptionDateList + ',' + exDate : exDate;\n            }\n        }\n        else {\n            exceptionDateList = exDate;\n        }\n        return exceptionDateList;\n    };\n    Crud.prototype.processRecurrenceRule = function (parentEvent, followEvent) {\n        var fields = this.parent.eventFields;\n        var recurrenceRule = parentEvent[fields.recurrenceRule];\n        var endDate;\n        if (followEvent instanceof Date) {\n            endDate = new Date(+followEvent);\n        }\n        else {\n            endDate = new Date(+followEvent[fields.startTime]);\n            var newRecurrenceRule = followEvent[fields.recurrenceRule];\n            var startDate = parentEvent[fields.startTime];\n            var ruleException = (this.parent.currentAction === 'DeleteFollowingEvents') ? followEvent[fields.recurrenceException] : null;\n            var dateCollection = generate(startDate, newRecurrenceRule, ruleException, this.parent.activeViewOptions.firstDayOfWeek);\n            var untilDate = new Date(dateCollection.slice(-1)[0]);\n            untilDate.setHours(endDate.getHours(), endDate.getMinutes(), endDate.getSeconds());\n            endDate.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds());\n            followEvent[fields.recurrenceRule] = this.getUpdatedRecurrenceRule(newRecurrenceRule, new Date(+untilDate), false);\n        }\n        parentEvent[fields.recurrenceRule] = this.getUpdatedRecurrenceRule(recurrenceRule, util.addDays(new Date(endDate.getTime()), -1), true);\n    };\n    Crud.prototype.getUpdatedRecurrenceRule = function (recurrenceRule, untilDate, isParent) {\n        var splitRule = recurrenceRule.split(';');\n        var updatedRule = '';\n        for (var _i = 0, splitRule_1 = splitRule; _i < splitRule_1.length; _i++) {\n            var rule = splitRule_1[_i];\n            if (rule !== '') {\n                var ruleKey = rule.split('=')[0];\n                var ruleValue = rule.split('=')[1];\n                if (ruleKey === 'COUNT' || ruleKey === 'UNTIL') {\n                    ruleValue = getRecurrenceStringFromDate(untilDate);\n                    rule = rule.replace(rule, 'UNTIL=' + ruleValue);\n                }\n                updatedRule += rule + ';';\n            }\n        }\n        if (isParent && updatedRule.indexOf('UNTIL') === -1) {\n            updatedRule += 'UNTIL=' + getRecurrenceStringFromDate(untilDate);\n        }\n        return updatedRule;\n    };\n    Crud.prototype.isBlockEvent = function (eventData) {\n        var eventCollection = (eventData instanceof Array) ? eventData : [eventData];\n        var value = false;\n        for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n            var event_8 = eventCollection_1[_i];\n            value = event_8[this.parent.eventFields.isBlock] || false;\n        }\n        return value;\n    };\n    return Crud;\n}());\nexport { Crud };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { extend, closest, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Work cell interactions\n */\nvar WorkCellInteraction = /** @class */ (function () {\n    function WorkCellInteraction(parent) {\n        this.parent = parent;\n        EventHandler.add(this.parent.element, 'mouseover', this.onHover, this);\n    }\n    WorkCellInteraction.prototype.cellMouseDown = function (e) {\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        this.parent.notify(event.cellMouseDown, { event: e });\n    };\n    WorkCellInteraction.prototype.cellClick = function (e) {\n        var _this = this;\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        var queryStr = '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' + cls.HEADER_CELLS_CLASS;\n        var target = closest(e.target, queryStr);\n        if (isNullOrUndefined(target)) {\n            return;\n        }\n        if (!isNullOrUndefined(closest(e.target, '.' + cls.NEW_EVENT_CLASS))) {\n            this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n            return;\n        }\n        var navigateEle = closest(e.target, '.' + cls.NAVIGATE_CLASS);\n        var navigateView = this.parent.getNavigateView();\n        var sameView = this.parent.currentView === navigateView;\n        if (isNullOrUndefined(navigateEle) || sameView ||\n            isNullOrUndefined(this.parent.viewOptions[navigateView.charAt(0).toLowerCase() + navigateView.slice(1)])) {\n            if (this.parent.activeViewOptions.readonly && this.parent.currentView !== 'MonthAgenda') {\n                if (this.parent.quickPopup) {\n                    this.parent.quickPopup.quickPopupHide();\n                }\n                return;\n            }\n            if (this.parent.isAdaptive && (e.target.classList.contains(cls.MORE_INDICATOR_CLASS) ||\n                closest(e.target, '.' + cls.MORE_INDICATOR_CLASS))) {\n                return;\n            }\n            var isWorkCell_1 = target.classList.contains(cls.WORK_CELLS_CLASS) ||\n                target.classList.contains(cls.ALLDAY_CELLS_CLASS);\n            if (isWorkCell_1 && e.shiftKey && e.which === 1 && this.parent.keyboardInteractionModule) {\n                this.parent.keyboardInteractionModule.onMouseSelection(e);\n                return;\n            }\n            this.parent.activeCellsData = this.parent.getCellDetails(target);\n            var args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellClick' });\n            this.parent.trigger(event.cellClick, args, function (clickArgs) {\n                if (!clickArgs.cancel) {\n                    if (isWorkCell_1) {\n                        _this.parent.selectCell(target);\n                    }\n                    if (_this.parent.allowInline) {\n                        var inlineArgs = {\n                            element: clickArgs.element,\n                            groupIndex: clickArgs.groupIndex, type: 'Cell'\n                        };\n                        _this.parent.notify(event.inlineClick, inlineArgs);\n                    }\n                    else {\n                        _this.parent.notify(event.cellClick, clickArgs);\n                    }\n                }\n                else {\n                    if (_this.parent.quickPopup) {\n                        _this.parent.quickPopup.quickPopupHide();\n                    }\n                }\n            });\n        }\n        else {\n            var date = this.parent.getDateFromElement(target);\n            if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n                this.parent.setScheduleProperties({ selectedDate: date });\n                this.parent.changeView(this.parent.getNavigateView(), e);\n            }\n        }\n    };\n    WorkCellInteraction.prototype.cellDblClick = function (e) {\n        var _this = this;\n        var queryStr = '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' + cls.HEADER_CELLS_CLASS;\n        var target = closest(e.target, queryStr);\n        if (this.parent.activeViewOptions.readonly || this.isPreventAction(e) || isNullOrUndefined(target)) {\n            return;\n        }\n        var args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellDoubleClick' });\n        this.parent.trigger(event.cellDoubleClick, args, function (clickArgs) {\n            var date = new Date(clickArgs.startTime.getTime());\n            if (!_this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n                return;\n            }\n            if (!clickArgs.cancel) {\n                _this.parent.eventWindow.openEditor(_this.parent.activeCellsData, 'Add');\n            }\n        });\n    };\n    WorkCellInteraction.prototype.onHover = function (e) {\n        var targetSelector = '.' + cls.WORK_CELLS_CLASS + ',.' + cls.TIME_SLOT_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' +\n            cls.HEADER_CELLS_CLASS + ',.' + cls.RESOURCE_CELLS_CLASS + ',.' + cls.APPOINTMENT_CLASS + ',.' + cls.WEEK_NUMBER_CLASS +\n            ',.' + cls.MONTH_HEADER_CLASS;\n        var hoverTarget = closest(e.target, targetSelector);\n        if (hoverTarget) {\n            var hoverArgs = { element: hoverTarget, event: e };\n            this.parent.trigger(event.hover, hoverArgs);\n        }\n    };\n    WorkCellInteraction.prototype.isPreventAction = function (e) {\n        if (closest(e.target, '.' + cls.NAVIGATE_CLASS)) {\n            return false;\n        }\n        if (closest(e.target, '.' + cls.APPOINTMENT_WRAPPER_CLASS) &&\n            !closest(e.target, '.' + cls.MORE_INDICATOR_CLASS)) {\n            return true;\n        }\n        var target = closest(e.target, '.' + cls.APPOINTMENT_CLASS + ',.' + cls.RESOURCE_GROUP_CELLS_CLASS);\n        if (!isNullOrUndefined(target)) {\n            return true;\n        }\n        target = closest(e.target, '.' + cls.HEADER_CELLS_CLASS);\n        if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n            return true;\n        }\n        return false;\n    };\n    WorkCellInteraction.prototype.destroy = function () {\n        EventHandler.remove(this.parent.element, 'mouseover', this.onHover);\n    };\n    return WorkCellInteraction;\n}());\nexport { WorkCellInteraction };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configuration that applies on each appointment field options of scheduler.\n */\nvar FieldOptions = /** @class */ (function (_super) {\n    __extends(FieldOptions, _super);\n    function FieldOptions() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"name\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"default\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"title\", void 0);\n    __decorate([\n        Property({})\n    ], FieldOptions.prototype, \"validation\", void 0);\n    return FieldOptions;\n}(ChildProperty));\nexport { FieldOptions };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty, Complex } from '@syncfusion/ej2-base';\nimport { FieldOptions } from './field-options';\n/**\n * A Class that holds the collection of event fields that requires to be mapped with the dataSource\n * fields along with its available configuration settings. Each field in it accepts both string and Object\n *  data type. When each of the field is assigned with simple `string` value, it is assumed that the dataSource field\n *  name is mapped with it. If the `object` type is defined on each fields, then the validation related settings and mapping of\n *  those fields with dataSource can be given altogether within it.\n */\nvar Field = /** @class */ (function (_super) {\n    __extends(Field, _super);\n    function Field() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Id')\n    ], Field.prototype, \"id\", void 0);\n    __decorate([\n        Property('IsBlock')\n    ], Field.prototype, \"isBlock\", void 0);\n    __decorate([\n        Complex({ name: 'Subject' }, FieldOptions)\n    ], Field.prototype, \"subject\", void 0);\n    __decorate([\n        Complex({ name: 'StartTime' }, FieldOptions)\n    ], Field.prototype, \"startTime\", void 0);\n    __decorate([\n        Complex({ name: 'EndTime' }, FieldOptions)\n    ], Field.prototype, \"endTime\", void 0);\n    __decorate([\n        Complex({ name: 'StartTimezone' }, FieldOptions)\n    ], Field.prototype, \"startTimezone\", void 0);\n    __decorate([\n        Complex({ name: 'EndTimezone' }, FieldOptions)\n    ], Field.prototype, \"endTimezone\", void 0);\n    __decorate([\n        Complex({ name: 'Location' }, FieldOptions)\n    ], Field.prototype, \"location\", void 0);\n    __decorate([\n        Complex({ name: 'Description' }, FieldOptions)\n    ], Field.prototype, \"description\", void 0);\n    __decorate([\n        Complex({ name: 'IsAllDay' }, FieldOptions)\n    ], Field.prototype, \"isAllDay\", void 0);\n    __decorate([\n        Complex({ name: 'RecurrenceID' }, FieldOptions)\n    ], Field.prototype, \"recurrenceID\", void 0);\n    __decorate([\n        Complex({ name: 'RecurrenceRule' }, FieldOptions)\n    ], Field.prototype, \"recurrenceRule\", void 0);\n    __decorate([\n        Complex({ name: 'RecurrenceException' }, FieldOptions)\n    ], Field.prototype, \"recurrenceException\", void 0);\n    __decorate([\n        Property('IsReadonly')\n    ], Field.prototype, \"isReadonly\", void 0);\n    __decorate([\n        Property('FollowingID')\n    ], Field.prototype, \"followingID\", void 0);\n    return Field;\n}(ChildProperty));\nexport { Field };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Property, ChildProperty, Complex } from '@syncfusion/ej2-base';\nimport { Field } from './fields';\n/**\n * Holds the configuration of event related options and dataSource binding to Schedule.\n */\nvar EventSettings = /** @class */ (function (_super) {\n    __extends(EventSettings, _super);\n    function EventSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property([])\n    ], EventSettings.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"query\", void 0);\n    __decorate([\n        Complex({}, Field)\n    ], EventSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"enableTooltip\", void 0);\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"tooltipTemplate\", void 0);\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"resourceColorField\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"editFollowingEvents\", void 0);\n    __decorate([\n        Property(true)\n    ], EventSettings.prototype, \"allowAdding\", void 0);\n    __decorate([\n        Property(true)\n    ], EventSettings.prototype, \"allowEditing\", void 0);\n    __decorate([\n        Property(true)\n    ], EventSettings.prototype, \"allowDeleting\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"enableMaxHeight\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"enableIndicator\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"ignoreWhitespace\", void 0);\n    return EventSettings;\n}(ChildProperty));\nexport { EventSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that holds the resource grouping related configurations on Schedule.\n */\nvar Group = /** @class */ (function (_super) {\n    __extends(Group, _super);\n    function Group() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], Group.prototype, \"byDate\", void 0);\n    __decorate([\n        Property(true)\n    ], Group.prototype, \"byGroupID\", void 0);\n    __decorate([\n        Property(false)\n    ], Group.prototype, \"allowGroupEdit\", void 0);\n    __decorate([\n        Property([])\n    ], Group.prototype, \"resources\", void 0);\n    __decorate([\n        Property(true)\n    ], Group.prototype, \"enableCompactView\", void 0);\n    __decorate([\n        Property()\n    ], Group.prototype, \"headerTooltipTemplate\", void 0);\n    return Group;\n}(ChildProperty));\nexport { Group };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the resource related configurations and its data binding options.\n */\nvar Resources = /** @class */ (function (_super) {\n    __extends(Resources, _super);\n    function Resources() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Resources.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], Resources.prototype, \"title\", void 0);\n    __decorate([\n        Property()\n    ], Resources.prototype, \"name\", void 0);\n    __decorate([\n        Property(false)\n    ], Resources.prototype, \"allowMultiple\", void 0);\n    __decorate([\n        Property([])\n    ], Resources.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property()\n    ], Resources.prototype, \"query\", void 0);\n    __decorate([\n        Property('Id')\n    ], Resources.prototype, \"idField\", void 0);\n    __decorate([\n        Property('Text')\n    ], Resources.prototype, \"textField\", void 0);\n    __decorate([\n        Property('Expanded')\n    ], Resources.prototype, \"expandedField\", void 0);\n    __decorate([\n        Property('GroupID')\n    ], Resources.prototype, \"groupIDField\", void 0);\n    __decorate([\n        Property('Color')\n    ], Resources.prototype, \"colorField\", void 0);\n    __decorate([\n        Property('StartHour')\n    ], Resources.prototype, \"startHourField\", void 0);\n    __decorate([\n        Property('EndHour')\n    ], Resources.prototype, \"endHourField\", void 0);\n    __decorate([\n        Property('WorkDays')\n    ], Resources.prototype, \"workDaysField\", void 0);\n    __decorate([\n        Property('CssClass')\n    ], Resources.prototype, \"cssClassField\", void 0);\n    return Resources;\n}(ChildProperty));\nexport { Resources };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable max-len */\nimport { extend, isNullOrUndefined, createElement, EventHandler, addClass, append, removeClass, remove, closest, classList } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Data } from '../actions/data';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar ResourceBase = /** @class */ (function () {\n    function ResourceBase(parent) {\n        this.resourceCollection = [];\n        this.leftPixel = 25;\n        this.parent = parent;\n    }\n    ResourceBase.prototype.renderResourceHeaderIndent = function (tr) {\n        var resColTd = createElement('td', { className: cls.RESOURCE_LEFT_TD_CLASS });\n        var resColDiv = createElement('div', { className: cls.RESOURCE_TEXT_CLASS });\n        resColTd.appendChild(resColDiv);\n        var args = { elementType: 'emptyCells', element: resColTd };\n        this.parent.trigger(events.renderCell, args);\n        tr.appendChild(resColTd);\n    };\n    ResourceBase.prototype.hideResourceRows = function (tBody) {\n        if (this.resourceCollection.length <= 1 || this.parent.virtualScrollModule) {\n            return;\n        }\n        var trCount = this.lastResourceLevel.length;\n        for (var i = 0; i < trCount; i++) {\n            var resData = this.lastResourceLevel[i].resourceData;\n            var res = this.lastResourceLevel[i].resource;\n            if (resData.ClassName === cls.RESOURCE_PARENT_CLASS && !resData[res.expandedField] &&\n                !isNullOrUndefined(resData[res.expandedField])) {\n                var trCollection = [].slice.call(tBody.children);\n                var slicedCollection = trCollection.slice(i + 1, i + (parseInt(resData.Count, 10) + 1));\n                addClass(slicedCollection, cls.HIDDEN_CLASS);\n            }\n        }\n    };\n    ResourceBase.prototype.createResourceColumn = function () {\n        var resColl = this.resourceCollection;\n        var resDiv = createElement('div', { className: cls.RESOURCE_COLUMN_WRAP_CLASS });\n        var tbl = this.parent.activeView.createTableLayout(cls.RESOURCE_COLUMN_TABLE_CLASS);\n        if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            addClass([tbl], cls.AUTO_HEIGHT);\n        }\n        var tBody = tbl.querySelector('tbody');\n        var resData = this.generateTreeData(true);\n        this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n        this.renderedResources = this.lastResourceLevel;\n        if (this.parent.virtualScrollModule) {\n            var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n            this.setExpandedResources();\n            resData = this.expandedResources.slice(0, resourceCount);\n            this.renderedResources = resData;\n        }\n        append(this.getContentRows(resData), tBody);\n        this.hideResourceRows(tBody);\n        tbl.appendChild(tBody);\n        resDiv.appendChild(tbl);\n        return resDiv;\n    };\n    ResourceBase.prototype.setRenderedResources = function () {\n        var resColl = this.resourceCollection;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var temp = this.generateTreeData(true);\n        this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n        this.renderedResources = this.lastResourceLevel;\n    };\n    ResourceBase.prototype.setExpandedResources = function () {\n        var resources = [];\n        for (var i = 0; i < this.lastResourceLevel.length; i++) {\n            var resource = this.lastResourceLevel[i].resourceData;\n            var count = resource.Count;\n            resources.push(this.lastResourceLevel[i]);\n            var isExpanded = resource[this.lastResourceLevel[i].resource.expandedField];\n            if (!isNullOrUndefined(isExpanded) && !isExpanded && count > 0) {\n                i = i + count;\n            }\n        }\n        this.expandedResources = resources;\n    };\n    ResourceBase.prototype.getContentRows = function (resData) {\n        var resRows = [];\n        var left;\n        var rIndex;\n        var resColl = this.resourceCollection;\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { tabindex: '0' } });\n        for (var i = 0; i < resData.length; i++) {\n            var ntd = td.cloneNode();\n            rIndex = util.findIndexInData(resColl, 'name', resData[i].resource.name);\n            if (rIndex === resColl.length - 1) {\n                extend(resData[i].resourceData, { ClassName: cls.RESOURCE_CHILD_CLASS });\n                this.renderedResources[i].className = [cls.RESOURCE_CHILD_CLASS];\n            }\n            else {\n                extend(resData[i].resourceData, { ClassName: cls.RESOURCE_PARENT_CLASS });\n                this.renderedResources[i].className = [cls.RESOURCE_PARENT_CLASS];\n            }\n            left = (rIndex * this.leftPixel) + 'px';\n            if (resData[i].resourceData.ClassName === cls.RESOURCE_PARENT_CLASS\n                && !isNullOrUndefined(resData[i].resourceData.Count) && (resData[i].resourceData.Count > 0)) {\n                var iconClass = void 0;\n                if (resData[i].resourceData[resColl[rIndex].expandedField] ||\n                    isNullOrUndefined(resData[i].resourceData[resColl[rIndex].expandedField])) {\n                    iconClass = cls.RESOURCE_COLLAPSE_CLASS;\n                }\n                else {\n                    iconClass = cls.RESOURCE_EXPAND_CLASS;\n                }\n                var iconDiv = createElement('div');\n                addClass([iconDiv], [cls.RESOURCE_TREE_ICON_CLASS, iconClass]);\n                this.setMargin(iconDiv, left);\n                ntd.appendChild(iconDiv);\n                if (this.resourceCollection.length > 1) {\n                    EventHandler.add(iconDiv, 'click', this.onTreeIconClick, this);\n                }\n            }\n            this.parent.activeView.setResourceHeaderContent(ntd, resData[i], cls.RESOURCE_TEXT_CLASS);\n            ntd.setAttribute('data-group-index', resData[i].groupIndex.toString());\n            ntd.setAttribute('aria-label', resData[i].resourceData[resData[i].resource.textField] + ' resource');\n            if (!this.parent.activeViewOptions.resourceHeaderTemplate) {\n                this.setMargin(ntd.querySelector('.' + cls.RESOURCE_TEXT_CLASS), left);\n            }\n            var classCollection = [cls.RESOURCE_CELLS_CLASS, resData[i].resourceData.ClassName];\n            addClass([ntd], classCollection);\n            var args = { elementType: 'resourceHeader', element: ntd, groupIndex: resData[i].groupIndex };\n            this.parent.trigger(events.renderCell, args);\n            var ntr = tr.cloneNode();\n            ntr.appendChild(ntd);\n            resRows.push(ntr);\n        }\n        return resRows;\n    };\n    ResourceBase.prototype.setMargin = function (element, value) {\n        if (!this.parent.enableRtl) {\n            element.style.marginLeft = value;\n        }\n        else {\n            element.style.marginRight = value;\n        }\n    };\n    ResourceBase.prototype.countCalculation = function (parentCollection, wholeCollection) {\n        var collection;\n        for (var y = 0; y < parentCollection.length; y++) {\n            var data = parentCollection[parentCollection.length - (y + 1)].dataSource;\n            for (var x = 0; x < data.length; x++) {\n                var totalCount = 0;\n                if (this.parent.activeViewOptions.group.byGroupID) {\n                    var query = new Query().where(wholeCollection[wholeCollection.length - 1].groupIDField, 'equal', data[x][parentCollection[parentCollection.length - (y + 1)].idField]);\n                    collection = new DataManager(wholeCollection[wholeCollection.length - 1].dataSource).executeLocal(query);\n                }\n                else {\n                    collection = wholeCollection[wholeCollection.length - 1].dataSource;\n                }\n                for (var z = 0; z < collection.length; z++) {\n                    totalCount = totalCount + parseInt(collection[z].Count, 10);\n                }\n                totalCount = totalCount + parseInt(data[x].Count, 10);\n                extend(data[x], { Count: totalCount });\n            }\n            wholeCollection = wholeCollection.slice(0, -1);\n        }\n    };\n    ResourceBase.prototype.onTreeIconClick = function (e) {\n        var _this = this;\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.close();\n        }\n        var target = e.target;\n        var hide;\n        var trElement = closest(target, '.' + cls.RESOURCE_PARENT_CLASS)\n            .parentElement;\n        var index = parseInt(trElement.children[0].getAttribute('data-group-index'), 10);\n        var args = {\n            cancel: false, event: e, groupIndex: index,\n            requestType: !target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) ? 'resourceExpand' : 'resourceCollapse'\n        };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                if (target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS)) {\n                    classList(target, [cls.RESOURCE_EXPAND_CLASS], [cls.RESOURCE_COLLAPSE_CLASS]);\n                    hide = true;\n                }\n                else {\n                    classList(target, [cls.RESOURCE_COLLAPSE_CLASS], [cls.RESOURCE_EXPAND_CLASS]);\n                    hide = false;\n                }\n                var eventElements = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n                for (var _i = 0, eventElements_1 = eventElements; _i < eventElements_1.length; _i++) {\n                    var element = eventElements_1[_i];\n                    remove(element);\n                }\n                if (_this.parent.virtualScrollModule) {\n                    _this.updateVirtualContent(index, hide, e, target);\n                }\n                else {\n                    _this.updateContent(index, hide);\n                }\n                var data = { cssProperties: _this.parent.getCssProperties(), module: 'scroll' };\n                _this.parent.notify(events.scrollUiUpdate, data);\n                args = {\n                    cancel: false, event: e, groupIndex: index,\n                    requestType: target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) ? 'resourceExpanded' : 'resourceCollapsed'\n                };\n                _this.parent.notify(events.dataReady, {});\n                _this.parent.trigger(events.actionComplete, args);\n            }\n        });\n    };\n    ResourceBase.prototype.updateContent = function (index, hide) {\n        var rowCollection = [];\n        var workCellCollection = [];\n        var headerRowCollection = [];\n        var pNode;\n        var clickedRes = this.lastResourceLevel[index].resourceData;\n        var resRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'tr'));\n        var contentRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' ' + 'tbody tr'));\n        var eventRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' .' + cls.APPOINTMENT_CONTAINER_CLASS));\n        for (var j = 0; j < clickedRes.Count; j++) {\n            rowCollection.push(resRows[index + j + 1]);\n            workCellCollection.push(contentRows[index + j + 1]);\n            headerRowCollection.push(eventRows[index + j + 1]);\n        }\n        var clonedCollection = this.lastResourceLevel;\n        for (var i = 0; i < rowCollection.length; i++) {\n            var expanded = true;\n            pNode = rowCollection[i].children[0].classList.contains(cls.RESOURCE_PARENT_CLASS);\n            clonedCollection[index].resourceData[clonedCollection[index].resource.expandedField] = !hide;\n            if (hide) {\n                if (pNode) {\n                    var trElem = rowCollection[i].querySelector('.' + cls.RESOURCE_TREE_ICON_CLASS);\n                    if (trElem) {\n                        classList(trElem, [cls.RESOURCE_EXPAND_CLASS], [cls.RESOURCE_COLLAPSE_CLASS]);\n                    }\n                }\n                if (!rowCollection[i].classList.contains(cls.HIDDEN_CLASS)) {\n                    addClass([rowCollection[i], workCellCollection[i], headerRowCollection[i]], cls.HIDDEN_CLASS);\n                }\n            }\n            else {\n                if (pNode) {\n                    var rowIndex = rowCollection[i].rowIndex;\n                    if (!clonedCollection[rowIndex].resourceData[clonedCollection[rowIndex].resource.expandedField]\n                        && !isNullOrUndefined(clonedCollection[rowIndex].resourceData[clonedCollection[rowIndex].resource.expandedField])) {\n                        rowCollection.splice(i + 1, (parseInt(clonedCollection[rowIndex].resourceData.Count, 10)));\n                        workCellCollection.splice(i + 1, (parseInt(clonedCollection[rowIndex].resourceData.Count, 10)));\n                        headerRowCollection.splice(i + 1, (parseInt(clonedCollection[rowIndex].resourceData.Count, 10)));\n                        expanded = false;\n                    }\n                    if (expanded) {\n                        var trElem = rowCollection[i].querySelector('.' + cls.RESOURCE_TREE_ICON_CLASS);\n                        if (trElem) {\n                            classList(trElem, [cls.RESOURCE_COLLAPSE_CLASS], [cls.RESOURCE_EXPAND_CLASS]);\n                        }\n                    }\n                }\n                if (rowCollection[i].classList.contains(cls.HIDDEN_CLASS)) {\n                    removeClass([rowCollection[i], workCellCollection[i], headerRowCollection[i]], cls.HIDDEN_CLASS);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ResourceBase.prototype.updateVirtualContent = function (index, expand, e, target) {\n        this.lastResourceLevel[index].resourceData[this.lastResourceLevel[index].resource.expandedField] = !expand;\n        this.setExpandedResources();\n        var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n        var startIndex = this.expandedResources.indexOf(this.renderedResources[0]);\n        this.renderedResources = this.expandedResources.slice(startIndex, startIndex + resourceCount);\n        if (this.renderedResources.length < resourceCount) {\n            var sIndex = this.expandedResources.length - resourceCount;\n            sIndex = (sIndex > 0) ? sIndex : 0;\n            this.renderedResources = this.expandedResources.slice(sIndex, this.expandedResources.length);\n        }\n        var virtualTrack = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        this.parent.virtualScrollModule.updateVirtualTrackHeight(virtualTrack);\n        var resTable = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'table');\n        var contentTable = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' ' + 'table');\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.parent.virtualScrollModule.updateContent(resTable, contentTable, eventTable, this.renderedResources);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        if (!isNullOrUndefined(timeIndicator)) {\n            timeIndicator.style.height =\n                this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight + 'px';\n        }\n    };\n    ResourceBase.prototype.renderResourceHeader = function () {\n        var resourceWrapper = createElement('div', { className: cls.RESOURCE_TOOLBAR_CONTAINER });\n        resourceWrapper.innerHTML = '<div class=\"' + cls.RESOURCE_HEADER_TOOLBAR + '\"><div class=\"' + cls.RESOURCE_MENU + '\">' +\n            '<div class=\"e-icons ' + cls.RESOURCE_MENU_ICON + '\"></div></div><div class=\"' + cls.RESOURCE_LEVEL_TITLE + '\"></div></div>';\n        if (this.parent.currentView === 'MonthAgenda') {\n            var target = this.parent.activeView.getPanel().querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            target.insertBefore(resourceWrapper, target.querySelector('.' + cls.WRAPPER_CONTAINER_CLASS));\n        }\n        else {\n            this.parent.element.insertBefore(resourceWrapper, this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS));\n        }\n        this.renderResourceHeaderText();\n        EventHandler.add(resourceWrapper.querySelector('.' + cls.RESOURCE_MENU_ICON), 'click', this.menuClick, this);\n    };\n    ResourceBase.prototype.renderResourceTree = function () {\n        this.popupOverlay = createElement('div', { className: cls.RESOURCE_TREE_POPUP_OVERLAY });\n        var treeWrapper = createElement('div', { className: cls.RESOURCE_TREE_POPUP + ' e-popup-close' });\n        if (this.parent.currentView === 'MonthAgenda') {\n            var target = this.parent.activeView.getPanel().querySelector('.' + cls.WRAPPER_CONTAINER_CLASS);\n            target.insertBefore(treeWrapper, target.children[0]);\n            target.appendChild(this.popupOverlay);\n        }\n        else {\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(treeWrapper);\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.popupOverlay);\n        }\n        var resourceTree = createElement('div', { className: cls.RESOURCE_TREE });\n        treeWrapper.appendChild(resourceTree);\n        this.treeViewObj = new TreeView({\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            fields: {\n                dataSource: [].slice.call(this.generateTreeData()),\n                id: 'resourceId',\n                text: 'resourceName',\n                child: 'resourceChild'\n            },\n            nodeTemplate: this.parent.resourceHeaderTemplate,\n            nodeClicked: this.resourceClick.bind(this)\n        });\n        this.treeViewObj.appendTo(resourceTree);\n        this.treeViewObj.expandAll();\n        this.treePopup = new Popup(treeWrapper, {\n            targetType: 'relative',\n            actionOnScroll: 'none',\n            content: this.treeViewObj.element,\n            enableRtl: this.parent.enableRtl,\n            hideAnimation: { name: 'SlideLeftOut', duration: 500 },\n            showAnimation: { name: 'SlideLeftIn', duration: 500 },\n            viewPortElement: this.parent.element.querySelector('.' + (this.parent.currentView === 'MonthAgenda' ?\n                cls.WRAPPER_CONTAINER_CLASS : cls.TABLE_CONTAINER_CLASS))\n        });\n        this.parent.on(events.documentClick, this.documentClick, this);\n    };\n    ResourceBase.prototype.generateTreeData = function (isTimeLine) {\n        var _this = this;\n        var treeCollection = [];\n        var resTreeColl = [];\n        var groupIndex = 0;\n        var _loop_1 = function (i, len) {\n            var treeHandler = function (treeLevel, index, levelId) {\n                var resource = _this.resourceCollection[index];\n                var treeArgs;\n                var resObj;\n                if (!isTimeLine) {\n                    treeArgs = {\n                        resourceId: levelId,\n                        resourceName: treeLevel.resourceData[resource.textField],\n                        resource: treeLevel.resource,\n                        resourceData: treeLevel.resourceData\n                    };\n                }\n                else {\n                    resObj = {\n                        type: 'resourceHeader', resource: treeLevel.resource,\n                        resourceData: treeLevel.resourceData, groupIndex: groupIndex,\n                        groupOrder: treeLevel.groupOrder\n                    };\n                    resTreeColl.push(resObj);\n                    groupIndex++;\n                }\n                if (treeLevel.child.length > 0 && !isTimeLine) {\n                    treeArgs.resourceChild = [];\n                }\n                var count = 1;\n                for (var _i = 0, _a = treeLevel.child; _i < _a.length; _i++) {\n                    var tree = _a[_i];\n                    if (!isTimeLine) {\n                        treeArgs.resourceChild.push(treeHandler(tree, index + 1, levelId + '-' + count));\n                    }\n                    else {\n                        treeHandler(tree, index + 1, levelId + '-' + count);\n                    }\n                    count += 1;\n                }\n                if (isTimeLine) {\n                    extend(resObj.resourceData, { Count: count - 1 });\n                }\n                return treeArgs;\n            };\n            if (!isTimeLine) {\n                treeCollection.push(treeHandler(this_1.resourceTreeLevel[i], 0, (i + 1).toString()));\n            }\n            else {\n                treeHandler(this_1.resourceTreeLevel[i], 0, (i + 1).toString());\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, len = this.resourceTreeLevel.length; i < len; i++) {\n            _loop_1(i, len);\n        }\n        if (isTimeLine) {\n            this.lastResourceLevel = resTreeColl;\n            return resTreeColl;\n        }\n        else {\n            return treeCollection;\n        }\n    };\n    ResourceBase.prototype.renderResourceHeaderText = function () {\n        var resource = this.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        var headerCollection = [];\n        var _loop_2 = function (i, len) {\n            var resourceLevel = this_2.resourceCollection[i];\n            var resourceText = resourceLevel.dataSource.filter(function (resData) {\n                return resData[resourceLevel.idField] === resource.groupOrder[i];\n            });\n            var resourceName = createElement('div', {\n                className: cls.RESOURCE_NAME,\n                innerHTML: resourceText[0][resourceLevel.textField]\n            });\n            headerCollection.push(resourceName);\n            var levelIcon = createElement('div', { className: 'e-icons e-icon-next' });\n            headerCollection.push(levelIcon);\n        };\n        var this_2 = this;\n        for (var i = 0, len = resource.groupOrder.length; i < len; i++) {\n            _loop_2(i, len);\n        }\n        headerCollection.pop();\n        var target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        var headerWrapper = target.querySelector('.' + cls.RESOURCE_LEVEL_TITLE);\n        util.removeChildren(headerWrapper);\n        for (var _i = 0, headerCollection_1 = headerCollection; _i < headerCollection_1.length; _i++) {\n            var header = headerCollection_1[_i];\n            headerWrapper.appendChild(header);\n        }\n        if (this.lastResourceLevel.length === 1) {\n            addClass([this.parent.element.querySelector('.' + cls.RESOURCE_MENU)], cls.DISABLE_CLASS);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ResourceBase.prototype.menuClick = function (event) {\n        if (this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP).classList.contains(cls.POPUP_OPEN)) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], cls.ENABLE_CLASS);\n        }\n        else {\n            var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n            removeClass(treeNodes, 'e-active');\n            addClass([treeNodes[this.parent.uiStateValues.groupIndex]], 'e-active');\n            this.treePopup.show();\n            addClass([this.popupOverlay], cls.ENABLE_CLASS);\n        }\n    };\n    ResourceBase.prototype.resourceClick = function (event) {\n        var _this = this;\n        if (!event.node.classList.contains('e-has-child')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], cls.ENABLE_CLASS);\n            var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n            var groupIndex = treeNodes.indexOf(event.node);\n            var args_1 = { cancel: false, event: event.event, groupIndex: groupIndex, requestType: 'resourceChange' };\n            this.parent.trigger(events.actionBegin, args_1, function (actionArgs) {\n                if (!actionArgs.cancel) {\n                    _this.parent.uiStateValues.groupIndex = actionArgs.groupIndex;\n                    _this.parent.renderModule.render(_this.parent.currentView);\n                    args_1 = {\n                        cancel: false, event: event.event, groupIndex: _this.parent.uiStateValues.groupIndex, requestType: 'resourceChanged'\n                    };\n                    _this.parent.trigger(events.actionComplete, args_1);\n                }\n            });\n        }\n        event.event.preventDefault();\n    };\n    ResourceBase.prototype.documentClick = function (args) {\n        if (closest(args.event.target, '.' + cls.RESOURCE_TREE_POPUP)) {\n            return;\n        }\n        var treeWrapper = this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP);\n        if (treeWrapper && treeWrapper.classList.contains(cls.POPUP_OPEN)) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], cls.ENABLE_CLASS);\n        }\n    };\n    ResourceBase.prototype.bindResourcesData = function (isSetModel) {\n        var _this = this;\n        this.parent.showSpinner();\n        var promises = [];\n        for (var _i = 0, _a = this.parent.resources; _i < _a.length; _i++) {\n            var resource = _a[_i];\n            var dataModule = new Data(resource.dataSource, resource.query);\n            promises.push(dataModule.getData(dataModule.generateQuery()));\n        }\n        Promise.all(promises).then(function (e) { return _this.dataManagerSuccess(e, isSetModel); })\n            .catch(function (e) { return _this.parent.renderModule.dataManagerFailure(e); });\n    };\n    ResourceBase.prototype.dataManagerSuccess = function (e, isSetModel) {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.resourceCollection = [];\n        for (var i = 0, length_1 = e.length; i < length_1; i++) {\n            var resource = this.parent.resources[i];\n            var resourceObj = this.getResourceModel(resource, e[i].result);\n            this.parent.resourceCollection.push(resourceObj);\n        }\n        this.refreshLayout(isSetModel);\n    };\n    ResourceBase.prototype.getResourceModel = function (resource, resourceData) {\n        var resourceObj = {\n            field: resource.field,\n            title: resource.title,\n            name: resource.name,\n            allowMultiple: resource.allowMultiple,\n            dataSource: resourceData || resource.dataSource,\n            idField: resource.idField,\n            textField: resource.textField,\n            groupIDField: resource.groupIDField,\n            colorField: resource.colorField,\n            startHourField: resource.startHourField,\n            endHourField: resource.endHourField,\n            workDaysField: resource.workDaysField,\n            expandedField: resource.expandedField,\n            cssClassField: resource.cssClassField\n        };\n        return resourceObj;\n    };\n    ResourceBase.prototype.refreshLayout = function (isSetModel) {\n        if (isNullOrUndefined(this.parent.uiStateValues.groupIndex) || !(this.parent.enablePersistence)) {\n            this.parent.uiStateValues.groupIndex = 0;\n        }\n        this.parent.renderElements(isSetModel);\n    };\n    ResourceBase.prototype.setResourceCollection = function () {\n        var requiredResources = [];\n        this.resourceCollection = [];\n        this.colorIndex = null;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            for (var _i = 0, _a = this.parent.activeViewOptions.group.resources; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                var index_1 = util.findIndexInData(this.parent.resourceCollection, 'name', resource);\n                if (index_1 >= 0) {\n                    requiredResources.push(this.parent.resourceCollection[index_1]);\n                }\n            }\n        }\n        else if (this.parent.resourceCollection.length > 0) {\n            requiredResources = this.parent.resourceCollection;\n        }\n        var index = 0;\n        for (var _b = 0, requiredResources_1 = requiredResources; _b < requiredResources_1.length; _b++) {\n            var resource = requiredResources_1[_b];\n            var resources = this.getResourceModel(resource);\n            if (resource.name === this.parent.eventSettings.resourceColorField) {\n                this.colorIndex = index;\n            }\n            index++;\n            this.resourceCollection.push(resources);\n        }\n        if (isNullOrUndefined(this.colorIndex)) {\n            this.colorIndex = this.resourceCollection.length - 1;\n        }\n    };\n    ResourceBase.prototype.generateResourceLevels = function (innerDates, isTimeLine) {\n        var _this = this;\n        var resources = this.resourceCollection;\n        var resTreeGroup = [];\n        var lastColumnDates = [];\n        // eslint-disable-next-line\n        var group = function (resources, index, prevResource, prevResourceData, prevOrder) {\n            var resTree = [];\n            var resource = resources[0];\n            if (resource) {\n                var data = void 0;\n                if (prevResourceData && _this.parent.activeViewOptions.group.byGroupID) {\n                    var id_1 = prevResourceData[prevResource.idField];\n                    data = resource.dataSource.filter(function (e) {\n                        return e[resource.groupIDField] === id_1;\n                    });\n                }\n                else {\n                    data = resource.dataSource;\n                }\n                for (var i = 0; i < data.length; i++) {\n                    var groupOrder = [];\n                    if (prevOrder && prevOrder.length > 0) {\n                        groupOrder = groupOrder.concat(prevOrder);\n                    }\n                    groupOrder.push(data[i][resource.idField]);\n                    var items = group(resources.slice(1), index + 1, resource, data[i], groupOrder);\n                    // Here validate child item empty top level resource only\n                    if (index === 0 && items.length === 0 && _this.resourceCollection.length > 1) {\n                        continue;\n                    }\n                    var dateCol = [];\n                    var renderDates = _this.parent.activeView.renderDates;\n                    var resWorkDays = void 0;\n                    if (!_this.parent.activeViewOptions.group.byDate && index + 1 === _this.resourceCollection.length) {\n                        var workDays = data[i][resource.workDaysField];\n                        var resStartHour = data[i][resource.startHourField];\n                        var resEndHour = data[i][resource.endHourField];\n                        if (workDays && workDays.length > 0) {\n                            renderDates = _this.parent.activeView.getRenderDates(workDays);\n                            resWorkDays = workDays;\n                            dateCol = _this.parent.activeView.getDateSlots(renderDates, workDays);\n                        }\n                        else {\n                            resWorkDays = _this.parent.activeViewOptions.workDays;\n                            dateCol = innerDates;\n                        }\n                        var dateSlots = _this.generateCustomHours(dateCol, resStartHour, resEndHour, groupOrder);\n                        lastColumnDates = lastColumnDates.concat(dateSlots);\n                    }\n                    var resCssClass = data[i][resource.cssClassField];\n                    var slotData = {\n                        type: 'resourceHeader', className: ['e-resource-cells'],\n                        resourceLevelIndex: index, groupOrder: groupOrder,\n                        resource: resource, resourceData: data[i],\n                        colSpan: _this.parent.activeViewOptions.group.byDate ? 1 : dateCol.length,\n                        renderDates: renderDates, workDays: resWorkDays, cssClass: resCssClass,\n                        child: items\n                    };\n                    resTree.push(slotData);\n                }\n                if (!resTreeGroup[index]) {\n                    resTreeGroup[index] = [];\n                }\n                if (resTree.length > 0) {\n                    resTreeGroup[index].push(resTree);\n                }\n                return resTree;\n            }\n            return [];\n        };\n        this.resourceTreeLevel = group(resources, 0);\n        return (isTimeLine) ? [] : this.generateHeaderLevels(resTreeGroup, lastColumnDates, innerDates);\n    };\n    ResourceBase.prototype.generateCustomHours = function (renderDates, startHour, endHour, groupOrder) {\n        var dateSlots = extend([], renderDates, null, true);\n        for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {\n            var dateSlot = dateSlots_1[_i];\n            if (startHour) {\n                dateSlot.startHour = this.parent.getStartEndTime(startHour);\n            }\n            if (endHour) {\n                dateSlot.endHour = this.parent.getStartEndTime(endHour);\n            }\n            if (groupOrder) {\n                dateSlot.groupOrder = groupOrder;\n            }\n        }\n        return dateSlots;\n    };\n    ResourceBase.prototype.generateHeaderLevels = function (resTreeGroup, lastColumnDates, headerDates) {\n        var headerLevels = [];\n        for (var i = resTreeGroup.length - 1; i >= 0; i--) {\n            var temp = 0;\n            for (var _i = 0, _a = resTreeGroup[i]; _i < _a.length; _i++) {\n                var currentLevelChilds = _a[_i];\n                for (var _b = 0, currentLevelChilds_1 = currentLevelChilds; _b < currentLevelChilds_1.length; _b++) {\n                    var currentLevelChild = currentLevelChilds_1[_b];\n                    if (resTreeGroup[i + 1]) {\n                        var nextLevelChilds = resTreeGroup[i + 1][temp];\n                        var colSpan = 0;\n                        for (var _c = 0, nextLevelChilds_1 = nextLevelChilds; _c < nextLevelChilds_1.length; _c++) {\n                            var nextLevelChild = nextLevelChilds_1[_c];\n                            if (!this.parent.activeViewOptions.group.byGroupID || (this.parent.activeViewOptions.group.byGroupID &&\n                                nextLevelChild.resourceData[nextLevelChild.resource.groupIDField] ===\n                                    currentLevelChild.resourceData[currentLevelChild.resource.idField])) {\n                                colSpan += nextLevelChild.colSpan;\n                            }\n                        }\n                        currentLevelChild.colSpan = colSpan;\n                    }\n                    currentLevelChild.groupIndex = temp;\n                    temp++;\n                    headerLevels[currentLevelChild.resourceLevelIndex] = headerLevels[currentLevelChild.resourceLevelIndex] || [];\n                    headerLevels[currentLevelChild.resourceLevelIndex].push(currentLevelChild);\n                }\n            }\n        }\n        this.lastResourceLevel = headerLevels.slice(-1)[0] || [];\n        if (!this.parent.activeViewOptions.group.byDate) {\n            var index = 0;\n            for (var _d = 0, _e = this.lastResourceLevel; _d < _e.length; _d++) {\n                var lastLevelResource = _e[_d];\n                for (var i = 0; i < lastLevelResource.colSpan; i++) {\n                    lastColumnDates[index].groupIndex = lastLevelResource.groupIndex;\n                    index++;\n                }\n            }\n            headerLevels.push(lastColumnDates);\n            return headerLevels;\n        }\n        var dateHeaderLevels = [];\n        var levels = extend([], headerLevels, null, true);\n        var dateColSpan = 0;\n        for (var _f = 0, _g = levels[0]; _f < _g.length; _f++) {\n            var firstRowTd = _g[_f];\n            dateColSpan += firstRowTd.colSpan;\n        }\n        var datesColumn = [];\n        for (var _h = 0, headerDates_1 = headerDates; _h < headerDates_1.length; _h++) {\n            var headerDate = headerDates_1[_h];\n            headerDate.colSpan = dateColSpan;\n            datesColumn.push(headerDate);\n            var resGroup = extend([], levels, null, true);\n            for (var k = 0, length_2 = resGroup.length; k < length_2; k++) {\n                if (k === resGroup.length - 1) {\n                    for (var _j = 0, _k = resGroup[k]; _j < _k.length; _j++) {\n                        var resTd = _k[_j];\n                        resTd.date = headerDate.date;\n                        resTd.workDays = headerDate.workDays;\n                        resTd.startHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.startHourField]) ||\n                            headerDate.startHour;\n                        resTd.endHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.endHourField]) ||\n                            headerDate.endHour;\n                    }\n                }\n                if (!dateHeaderLevels[k]) {\n                    dateHeaderLevels[k] = [];\n                }\n                dateHeaderLevels[k] = dateHeaderLevels[k].concat(resGroup[k]);\n            }\n        }\n        dateHeaderLevels.unshift(datesColumn);\n        return dateHeaderLevels;\n    };\n    ResourceBase.prototype.setResourceValues = function (eventObj, groupIndex) {\n        var _this = this;\n        var setValues = function (index, field, value) {\n            if (_this.resourceCollection[index].allowMultiple && _this.parent.activeViewOptions.group.allowGroupEdit) {\n                eventObj[field] = [value];\n            }\n            else {\n                eventObj[field] = value;\n            }\n        };\n        if (groupIndex === void 0) {\n            groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                this.parent.activeCellsData.groupIndex;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(groupIndex)) {\n            var groupOrder = this.lastResourceLevel[groupIndex].groupOrder;\n            for (var index = 0; index < this.resourceCollection.length; index++) {\n                setValues(index, this.resourceCollection[index].field, groupOrder[index]);\n            }\n        }\n        else if (this.parent.resourceCollection.length > 0) {\n            for (var index = 0; index < this.resourceCollection.length; index++) {\n                var data = this.resourceCollection[index].dataSource[0];\n                if (data) {\n                    setValues(index, this.resourceCollection[index].field, data[this.resourceCollection[index].idField]);\n                }\n            }\n        }\n    };\n    ResourceBase.prototype.getResourceColor = function (eventObj, groupOrder) {\n        var colorFieldIndex = (!isNullOrUndefined(groupOrder) &&\n            this.colorIndex > groupOrder.length - 1) ? groupOrder.length - 1 : this.colorIndex;\n        var resource = this.resourceCollection[colorFieldIndex];\n        if (isNullOrUndefined(groupOrder) && this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n            return undefined;\n        }\n        var id = isNullOrUndefined(groupOrder) ? eventObj[resource.field] : groupOrder[colorFieldIndex];\n        var data = this.filterData(resource.dataSource, resource.idField, id);\n        if (data.length > 0) {\n            return data[0][resource.colorField];\n        }\n        return undefined;\n    };\n    ResourceBase.prototype.getCssClass = function (eventObj) {\n        var resource = this.resourceCollection.slice(-1)[0];\n        if (this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n            return undefined;\n        }\n        var data = this.filterData(resource.dataSource, resource.idField, eventObj[resource.field]);\n        if (data.length > 0) {\n            return data[0][resource.cssClassField];\n        }\n        return undefined;\n    };\n    ResourceBase.prototype.getResourceRenderDates = function () {\n        var _a;\n        var resourceDates = (_a = [].concat).apply.apply(_a, [[]].concat(this.lastResourceLevel.map(function (e) { return e.renderDates; })));\n        var removeDuplicateDates = function (dateColl) { return dateColl.filter(function (date, index, dates) {\n            return dates.map(function (dateObj) { return dateObj.getTime(); }).indexOf(date.getTime()) === index;\n        }); };\n        var renderDates = removeDuplicateDates(resourceDates);\n        renderDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n        return renderDates;\n    };\n    ResourceBase.prototype.filterData = function (dataSource, field, value) {\n        return dataSource.filter(function (data) { return data[field] === value; });\n    };\n    ResourceBase.prototype.getResourceData = function (eventObj, index, groupEditIndex) {\n        if (this.parent.activeViewOptions.group.allowGroupEdit) {\n            var resourceObj = {};\n            for (var _i = 0, groupEditIndex_1 = groupEditIndex; _i < groupEditIndex_1.length; _i++) {\n                var groupIndex = groupEditIndex_1[_i];\n                var resourceLevel = this.lastResourceLevel[groupIndex].groupOrder;\n                for (var level = 0, length_3 = resourceLevel.length; level < length_3; level++) {\n                    var fieldName = this.resourceCollection[level].field;\n                    if (isNullOrUndefined(resourceObj[fieldName])) {\n                        resourceObj[fieldName] = [];\n                    }\n                    resourceObj[fieldName].push(resourceLevel[level]);\n                }\n            }\n            eventObj = extend(eventObj, resourceObj);\n        }\n        else {\n            for (var level = 0, length_4 = this.resourceCollection.length; level < length_4; level++) {\n                eventObj[this.resourceCollection[level].field] = this.lastResourceLevel[index].groupOrder[level];\n            }\n        }\n    };\n    ResourceBase.prototype.addResource = function (resources, name, index) {\n        var resourceCollection = (resources instanceof Array) ? resources : [resources];\n        var _loop_3 = function (resource) {\n            if (resource.name === name) {\n                resourceCollection.forEach(function (addObj, i) {\n                    return new DataManager({ json: resource.dataSource }).insert(addObj, null, null, index + i);\n                });\n                return \"break\";\n            }\n        };\n        for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {\n            var resource = _a[_i];\n            var state_1 = _loop_3(resource);\n            if (state_1 === \"break\")\n                break;\n        }\n        this.refreshLayout(true);\n    };\n    ResourceBase.prototype.removeResource = function (resourceId, name) {\n        var resourceCollection = (resourceId instanceof Array) ? resourceId : [resourceId];\n        var _loop_4 = function (resource) {\n            if (resource.name === name) {\n                resourceCollection.forEach(function (removeObj) {\n                    return new DataManager({ json: resource.dataSource }).remove(resource.idField, removeObj);\n                });\n                return \"break\";\n            }\n        };\n        for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {\n            var resource = _a[_i];\n            var state_2 = _loop_4(resource);\n            if (state_2 === \"break\")\n                break;\n        }\n        this.refreshLayout(true);\n    };\n    ResourceBase.prototype.getIndexFromResourceId = function (id, name, resourceData, event, parentField) {\n        var resource = resourceData.dataSource.filter(function (e) {\n            if (event && e[resourceData.idField] === id) {\n                if (e[resourceData.groupIDField] === event[parentField]) {\n                    return e[resourceData.idField] === id;\n                }\n                return null;\n            }\n            else {\n                return e[resourceData.idField] === id;\n            }\n        })[0];\n        return (this.lastResourceLevel.map(function (e) { return e.resourceData; }).indexOf(resource));\n    };\n    ResourceBase.prototype.resourceExpand = function (id, name, hide) {\n        var resource = this.parent.resourceCollection.filter(function (e) {\n            if (e.name === name) {\n                return e;\n            }\n            return null;\n        })[0];\n        var index = 0;\n        var resourceData = resource.dataSource.filter(function (e) { return e[resource.idField] === id; })[0];\n        if (!this.parent.activeViewOptions.group.byGroupID) {\n            index = this.getIndexFromResourceId(id, name, resource);\n        }\n        else {\n            index = this.lastResourceLevel.map(function (e) { return e.resourceData; }).indexOf(resourceData);\n        }\n        var target = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + (\"[data-group-index=\\\"\" + index + \"\\\"]\") +\n            ' ' + '.' + cls.RESOURCE_TREE_ICON_CLASS);\n        if (target) {\n            if (target.classList.contains(cls.RESOURCE_EXPAND_CLASS) && !hide) {\n                target.click();\n            }\n            else if (target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) && hide) {\n                target.click();\n            }\n        }\n    };\n    ResourceBase.prototype.resourceScroll = function (id, name) {\n        if (this.parent.isAdaptive || ['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n            return;\n        }\n        var levelName = name || this.parent.resourceCollection.slice(-1)[0].name;\n        var levelIndex = this.parent.resourceCollection.length - 1;\n        var resource = this.parent.resourceCollection.filter(function (e, index) {\n            if (e.name === levelName) {\n                levelIndex = index;\n                return e;\n            }\n            return null;\n        })[0];\n        var scrollElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var index = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (!this.parent.activeViewOptions.group.byGroupID) {\n                index = this.getIndexFromResourceId(id, levelName, resource);\n            }\n            else {\n                var resourceData = resource.dataSource.filter(function (e) {\n                    return e[resource.idField] === id;\n                })[0];\n                index = this.lastResourceLevel.map(function (e) { return e.resourceData; }).indexOf(resourceData);\n            }\n            if (this.parent.virtualScrollModule) {\n                var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n                var averageRowHeight = Math.round(virtual.offsetHeight / this.expandedResources.length);\n                if (this.parent.rowAutoHeight) {\n                    scrollElement.scrollTop = 0;\n                    this.parent.virtualScrollModule.virtualScrolling();\n                }\n                scrollElement.scrollTop = (index * averageRowHeight) - (((this.parent.virtualScrollModule.bufferCount - 1) * averageRowHeight));\n                this.parent.virtualScrollModule.virtualScrolling();\n                if (this.parent.rowAutoHeight) {\n                    var td = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n                    if (td && !td.parentElement.classList.contains(cls.HIDDEN_CLASS)) {\n                        scrollElement.scrollTop =\n                            (scrollElement.scrollTop < td.offsetTop) ? td.offsetTop : scrollElement.scrollTop + td.offsetTop;\n                    }\n                }\n                else {\n                    scrollElement.scrollTop = (index * averageRowHeight);\n                }\n            }\n            else {\n                var td = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n                if (td && !td.parentElement.classList.contains(cls.HIDDEN_CLASS)) {\n                    scrollElement.scrollTop = td.offsetTop;\n                }\n            }\n        }\n        else {\n            if (!this.parent.activeViewOptions.group.byGroupID) {\n                index = this.getIndexFromResourceId(id, levelName, resource);\n            }\n            else {\n                if (levelName === this.parent.resourceCollection.slice(-1)[0].name) {\n                    index = this.lastResourceLevel.map(function (e) { return e.resourceData[resource.idField]; }).indexOf(id);\n                }\n                else {\n                    index = resource.dataSource.map(function (e) { return e[resource.idField]; }).indexOf(id);\n                }\n            }\n            var offsetTarget = this.parent.element.querySelector(\".\" + cls.HEADER_ROW_CLASS + \":nth-child(\" + (levelIndex + 1) + \")\");\n            var offset = [].slice.call(offsetTarget.children).map(function (node) { return node.offsetLeft; });\n            scrollElement.scrollLeft = offset[index];\n        }\n    };\n    ResourceBase.prototype.destroy = function () {\n        this.parent.off(events.documentClick, this.documentClick);\n        if (this.treeViewObj) {\n            this.treeViewObj.destroy();\n            this.treeViewObj = null;\n        }\n        if (this.treePopup) {\n            this.treePopup.destroy();\n            this.treePopup = null;\n            remove(this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP));\n            remove(this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP_OVERLAY));\n        }\n        var resToolBarEle = this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER);\n        if (resToolBarEle) {\n            remove(resToolBarEle);\n        }\n    };\n    return ResourceBase;\n}());\nexport { ResourceBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Component, Property, Event, Animation, Collection } from '@syncfusion/ej2-base';\nimport { EventHandler, Browser, Internationalization, getDefaultDateObject, cldrData, L10n } from '@syncfusion/ej2-base';\nimport { getValue, compile, extend, isNullOrUndefined, NotifyPropertyChanges, Complex } from '@syncfusion/ej2-base';\nimport { getElement, removeClass, addClass, classList, remove } from '@syncfusion/ej2-base';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { HeaderRenderer } from '../renderer/header-renderer';\nimport { Scroll } from '../actions/scroll';\nimport { ScheduleTouch } from '../actions/touch';\nimport { KeyboardInteraction } from '../actions/keyboard';\nimport { Data } from '../actions/data';\nimport { EventBase } from '../event-renderer/event-base';\nimport { InlineEdit } from '../event-renderer/inline-edit';\nimport { QuickPopups } from '../popups/quick-popups';\nimport { EventTooltip } from '../popups/event-tooltip';\nimport { EventWindow } from '../popups/event-window';\nimport { Render } from '../renderer/renderer';\nimport { WorkHours } from '../models/work-hours';\nimport { TimeScale } from '../models/time-scale';\nimport { QuickInfoTemplates } from '../models/quick-info-templates';\nimport { HeaderRows } from '../models/header-rows';\nimport { Crud } from '../actions/crud';\nimport { WorkCellInteraction } from '../actions/work-cells';\nimport { EventSettings } from '../models/event-settings';\nimport { Group } from '../models/group';\nimport { Resources } from '../models/resources';\nimport { Gregorian, Islamic } from '../../common/calendar-util';\nimport { ResourceBase } from '../base/resource';\nimport { Timezone } from '../timezone/timezone';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Represents the Schedule component that displays a list of events scheduled against specific date and timings,\n * thus helping us to plan and manage it properly.\n * ```html\n * <div id=\"schedule\"></div>\n * ```\n * ```typescript\n * <script>\n *   var scheduleObj = new Schedule();\n *   scheduleObj.appendTo(\"#schedule\");\n * </script>\n * ```\n */\nvar Schedule = /** @class */ (function (_super) {\n    __extends(Schedule, _super);\n    /**\n     * Constructor for creating the Schedule widget\n     *\n     * @param {ScheduleModel} options Accepts the schedule model properties to initiate the rendering\n     * @param {string | HTMLElement} element Accepts the DOM element reference\n     */\n    function Schedule(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * Core method that initializes the control rendering.\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.render = function () {\n        var addClasses = [];\n        var removeClasses = [];\n        addClasses.push(cls.ROOT);\n        if (this.enableRtl) {\n            addClasses.push(cls.RTL);\n        }\n        else {\n            removeClasses.push(cls.RTL);\n        }\n        if (this.isAdaptive) {\n            addClasses.push(cls.DEVICE_CLASS);\n        }\n        else {\n            removeClasses.push(cls.DEVICE_CLASS);\n        }\n        if (this.allowMultiDrag) {\n            addClasses.push(cls.MULTI_DRAG);\n        }\n        else {\n            removeClasses.push(cls.MULTI_DRAG);\n        }\n        if (this.cssClass) {\n            var cssClass = this.cssClass.split(' ');\n            for (var _i = 0, cssClass_1 = cssClass; _i < cssClass_1.length; _i++) {\n                var cls_1 = cssClass_1[_i];\n                addClasses.push(cls_1);\n            }\n        }\n        classList(this.element, addClasses, removeClasses);\n        this.validateDate();\n        this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n        this.editorTemplateFn = this.templateParser(this.editorTemplate);\n        this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n        this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n        this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n        createSpinner({ target: this.element });\n        this.scrollModule = new Scroll(this);\n        this.scrollModule.setWidth();\n        this.scrollModule.setHeight();\n        this.renderModule = new Render(this);\n        this.eventBase = new EventBase(this);\n        this.workCellAction = new WorkCellInteraction(this);\n        if (this.allowKeyboardInteraction) {\n            this.keyboardInteractionModule = new KeyboardInteraction(this);\n        }\n        this.inlineModule = new InlineEdit(this);\n        this.initializeDataModule();\n        this.renderTableContainer();\n        this.activeViewOptions = this.getActiveViewOptions();\n        this.initializeResources();\n        this.wireEvents();\n    };\n    Schedule.prototype.renderTableContainer = function () {\n        if (!this.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS)) {\n            this.element.appendChild(this.createElement('div', { className: cls.TABLE_CONTAINER_CLASS }));\n        }\n    };\n    /**\n     * Method to render react templates\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.renderTemplates = function () {\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    };\n    /**\n     * Method to reset react templates\n     *\n     * @param {string[]} templates Accepts the template ID\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.resetTemplates = function (templates) {\n        if (this.isAngular || this.isReact) {\n            this.clearTemplate(templates);\n        }\n    };\n    Schedule.prototype.initializeResources = function (isSetModel) {\n        if (isSetModel === void 0) { isSetModel = false; }\n        if (this.resources.length > 0) {\n            this.resourceBase = new ResourceBase(this);\n            this.resourceBase.bindResourcesData(isSetModel);\n        }\n        else {\n            this.resourceBase = null;\n            this.resourceCollection = [];\n            this.renderElements(isSetModel);\n        }\n    };\n    /**\n     * Method to render the layout elements\n     *\n     * @param {boolean} isLayoutOnly Accepts the boolean value to render layout or not\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.renderElements = function (isLayoutOnly) {\n        if (isLayoutOnly) {\n            this.initializeView(this.currentView);\n            this.eventWindow.refresh();\n            return;\n        }\n        this.destroyHeaderModule();\n        if (this.showHeaderBar) {\n            this.headerModule = new HeaderRenderer(this);\n        }\n        this.renderTableContainer();\n        if (Browser.isDevice || Browser.isTouch) {\n            this.scheduleTouchModule = new ScheduleTouch(this);\n        }\n        this.initializeView(this.currentView);\n        this.destroyPopups();\n        this.initializePopups();\n    };\n    Schedule.prototype.validateDate = function (selectedDate) {\n        if (selectedDate === void 0) { selectedDate = this.selectedDate; }\n        // persist the selected date value\n        var date = selectedDate instanceof Date ? new Date(selectedDate.getTime()) : new Date(selectedDate);\n        var minDate = this.minDate instanceof Date ? new Date(this.minDate.getTime()) : new Date(this.minDate);\n        var maxDate = this.maxDate instanceof Date ? new Date(this.maxDate.getTime()) : new Date(this.maxDate);\n        if (minDate <= maxDate) {\n            if (date < minDate) {\n                date = minDate;\n            }\n            if (date > maxDate) {\n                date = maxDate;\n            }\n            this.setScheduleProperties({ selectedDate: new Date('' + date), minDate: new Date('' + minDate), maxDate: new Date('' + maxDate) });\n            if (this.eventWindow) {\n                this.eventWindow.updateMinMaxDateToEditor();\n            }\n        }\n        else {\n            throw Error('minDate should be equal or less than maxDate');\n        }\n    };\n    Schedule.prototype.getViewIndex = function (viewName) {\n        for (var item = 0; item < this.viewCollections.length; item++) {\n            var checkIndex = this.viewCollections[item].option;\n            if (checkIndex === viewName) {\n                return item;\n            }\n        }\n        return -1;\n    };\n    Schedule.prototype.setViewOptions = function (isModuleLoad) {\n        if (isModuleLoad === void 0) { isModuleLoad = false; }\n        this.viewOptions = {};\n        this.viewCollections = [];\n        var viewName;\n        var selectedView;\n        var prevIndex = this.viewIndex;\n        var count = 0;\n        this.viewIndex = -1;\n        for (var _i = 0, _a = this.views; _i < _a.length; _i++) {\n            var view = _a[_i];\n            var isOptions = (typeof view === 'string') ? false : true;\n            if (typeof view === 'string') {\n                viewName = view;\n                if (this.currentView === viewName) {\n                    selectedView = viewName;\n                    this.viewIndex = count;\n                }\n            }\n            else {\n                viewName = view.option;\n                if (view.isSelected) {\n                    selectedView = viewName;\n                    this.viewIndex = count;\n                }\n            }\n            var obj = extend({ option: viewName }, isOptions ? view : {});\n            var fieldViewName = viewName.charAt(0).toLowerCase() + viewName.slice(1);\n            obj.cellHeaderTemplateName = obj.cellHeaderTemplate ? obj.option : '';\n            obj.dateHeaderTemplateName = obj.dateHeaderTemplate ? obj.option : '';\n            obj.cellTemplateName = obj.cellTemplate ? obj.option : '';\n            obj.resourceHeaderTemplateName = obj.resourceHeaderTemplate ? obj.option : '';\n            obj.eventTemplateName = obj.eventTemplate ? obj.option : '';\n            if (!isNullOrUndefined(obj.firstDayOfWeek) && obj.firstDayOfWeek === 0) {\n                delete obj.firstDayOfWeek;\n            }\n            if (!isNullOrUndefined(obj.interval) && obj.interval === 1) {\n                delete obj.interval;\n            }\n            this.viewCollections.push(obj);\n            if (isNullOrUndefined(this.viewOptions[fieldViewName])) {\n                this.viewOptions[fieldViewName] = [obj];\n            }\n            else {\n                this.viewOptions[fieldViewName].push(obj);\n            }\n            count++;\n        }\n        if (!isModuleLoad && selectedView) {\n            this.setScheduleProperties({ currentView: selectedView });\n        }\n        if (this.viewIndex === -1) {\n            var currentIndex = this.getViewIndex(this.currentView);\n            this.viewIndex = ((typeof this.views[0] !== 'string') && (!isNullOrUndefined(prevIndex) && prevIndex !== -1)) ? prevIndex :\n                (currentIndex === -1) ? 0 : currentIndex;\n        }\n    };\n    Schedule.prototype.getActiveViewOptions = function () {\n        var timeScale = {\n            enable: this.timeScale.enable,\n            interval: this.timeScale.interval,\n            slotCount: this.timeScale.slotCount,\n            majorSlotTemplate: this.timeScale.majorSlotTemplate,\n            minorSlotTemplate: this.timeScale.minorSlotTemplate\n        };\n        var group = {\n            byDate: this.group.byDate,\n            byGroupID: this.group.byGroupID,\n            allowGroupEdit: this.group.allowGroupEdit,\n            resources: this.group.resources,\n            headerTooltipTemplate: this.group.headerTooltipTemplate,\n            enableCompactView: this.group.enableCompactView\n        };\n        var workDays = this.viewCollections[this.viewIndex].workDays ? [] : this.workDays;\n        var scheduleOptions = {\n            dateFormat: this.dateFormat,\n            endHour: this.endHour,\n            isSelected: false,\n            option: null,\n            readonly: this.readonly,\n            startHour: this.startHour,\n            allowVirtualScrolling: false,\n            cellHeaderTemplate: this.cellHeaderTemplate,\n            cellTemplate: this.cellTemplate,\n            eventTemplate: this.eventSettings.template,\n            dateHeaderTemplate: this.dateHeaderTemplate,\n            resourceHeaderTemplate: this.resourceHeaderTemplate,\n            firstDayOfWeek: this.firstDayOfWeek,\n            workDays: workDays,\n            showWeekend: this.showWeekend,\n            showWeekNumber: this.showWeekNumber,\n            displayName: null,\n            interval: 1,\n            timeScale: timeScale,\n            timeFormat: this.internalTimeFormat,\n            group: group,\n            headerRows: this.headerRows,\n            orientation: 'Horizontal'\n        };\n        var viewOptions = this.viewCollections[this.viewIndex];\n        var viewsData = extend(scheduleOptions, viewOptions, undefined, true);\n        if (this.firstDayOfWeek !== 0 && viewOptions.firstDayOfWeek && this.firstDayOfWeek !== viewOptions.firstDayOfWeek) {\n            viewsData.firstDayOfWeek = this.firstDayOfWeek;\n        }\n        return viewsData;\n    };\n    Schedule.prototype.initializeDataModule = function () {\n        this.eventFields = {\n            id: this.eventSettings.fields.id,\n            isBlock: this.eventSettings.fields.isBlock,\n            subject: this.eventSettings.fields.subject.name,\n            startTime: this.eventSettings.fields.startTime.name,\n            endTime: this.eventSettings.fields.endTime.name,\n            startTimezone: this.eventSettings.fields.startTimezone.name,\n            endTimezone: this.eventSettings.fields.endTimezone.name,\n            location: this.eventSettings.fields.location.name,\n            description: this.eventSettings.fields.description.name,\n            isAllDay: this.eventSettings.fields.isAllDay.name,\n            recurrenceID: this.eventSettings.fields.recurrenceID.name,\n            recurrenceRule: this.eventSettings.fields.recurrenceRule.name,\n            recurrenceException: this.eventSettings.fields.recurrenceException.name,\n            isReadonly: this.eventSettings.fields.isReadonly,\n            followingID: this.eventSettings.fields.followingID\n        };\n        this.setEditorTitles();\n        this.dataModule = new Data(this.eventSettings.dataSource, this.eventSettings.query);\n        this.crudModule = new Crud(this);\n    };\n    Schedule.prototype.setEditorTitles = function () {\n        this.editorTitles = {\n            subject: this.eventSettings.fields.subject.title || this.localeObj.getConstant('title'),\n            startTime: this.eventSettings.fields.startTime.title || this.localeObj.getConstant('start'),\n            endTime: this.eventSettings.fields.endTime.title || this.localeObj.getConstant('end'),\n            isAllDay: this.eventSettings.fields.isAllDay.title || this.localeObj.getConstant('allDay'),\n            startTimezone: this.eventSettings.fields.startTimezone.title || this.localeObj.getConstant('startTimezone'),\n            endTimezone: this.eventSettings.fields.endTimezone.title || this.localeObj.getConstant('endTimezone'),\n            location: this.eventSettings.fields.location.title || this.localeObj.getConstant('location'),\n            description: this.eventSettings.fields.description.title || this.localeObj.getConstant('description'),\n            recurrenceRule: this.eventSettings.fields.recurrenceRule.title || this.localeObj.getConstant('repeat')\n        };\n    };\n    Schedule.prototype.initializeView = function (viewName) {\n        this.showSpinner();\n        this.activeViewOptions = this.getActiveViewOptions();\n        if (this.resourceBase) {\n            this.resourceBase.setResourceCollection();\n        }\n        this.initializeTemplates();\n        this.renderModule.render(viewName);\n    };\n    Schedule.prototype.initializeTemplates = function () {\n        this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);\n        this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n        this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n        this.majorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate);\n        this.minorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate);\n        this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n        this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n        this.headerTooltipTemplateFn = this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);\n    };\n    Schedule.prototype.initializePopups = function () {\n        this.eventWindow = new EventWindow(this);\n        this.quickPopup = new QuickPopups(this);\n    };\n    /**\n     * Method to get day names\n     *\n     * @param {string} type Accepts the day name\n     * @returns {string[]} Returns the collection of day names\n     * @private\n     */\n    Schedule.prototype.getDayNames = function (type) {\n        var culShortNames = [];\n        var cldrObj;\n        var nameSpace = '';\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            nameSpace = 'days.stand-alone.';\n            cldrObj = (getValue(nameSpace + type, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            nameSpace = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.format.' + type;\n            cldrObj = (getValue(nameSpace, cldrData));\n        }\n        for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n            var obj = _a[_i];\n            culShortNames.push(getValue(obj, cldrObj));\n        }\n        return culShortNames;\n    };\n    Schedule.prototype.setCldrTimeFormat = function () {\n        if (!isNullOrUndefined(this.timeFormat)) {\n            this.internalTimeFormat = this.timeFormat;\n            return;\n        }\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            this.internalTimeFormat = (getValue('timeFormats.short', getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            this.internalTimeFormat = (getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.timeFormats.short', cldrData));\n        }\n    };\n    /**\n     * Method to get calendar mode\n     *\n     * @returns {string} Returns the calendar mode\n     * @private\n     */\n    Schedule.prototype.getCalendarMode = function () {\n        return this.calendarMode.toLowerCase();\n    };\n    /**\n     * Method to get time in string\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {string} Returns the time in string\n     * @private\n     */\n    Schedule.prototype.getTimeString = function (date) {\n        var time = this.globalize.formatDate(date, {\n            format: this.activeViewOptions.timeFormat,\n            type: 'time', calendar: this.getCalendarMode()\n        });\n        return time.toLocaleUpperCase();\n    };\n    /**\n     * Method to get  date object\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {Date} Returns the date object\n     * @private\n     */\n    Schedule.prototype.getDateTime = function (date) {\n        return date instanceof Date ? new Date(date.getTime()) : new Date(date);\n    };\n    Schedule.prototype.setCalendarMode = function () {\n        if (this.calendarMode === 'Islamic') {\n            this.calendarUtil = new Islamic();\n        }\n        else {\n            this.calendarUtil = new Gregorian();\n        }\n    };\n    /**\n     * Method to set dynamic property values\n     *\n     * @param {Object} properties Accepts the property object\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.setScheduleProperties = function (properties) {\n        this.allowServerDataBinding = false;\n        this.setProperties(properties, true);\n        this.allowServerDataBinding = true;\n    };\n    /**\n     * Method to change the current view\n     *\n     * @param {View} view Accepts the view name\n     * @param {Event} event Accepts the event object\n     * @param {boolean} muteOnChange Accepts the value to enable or disable mute on change\n     * @param {number} index Accepts the index value\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.changeView = function (view, event, muteOnChange, index) {\n        var _this = this;\n        if (isNullOrUndefined(index)) {\n            index = this.getViewIndex(view);\n        }\n        if (!muteOnChange && index === this.viewIndex && this.currentView === view || index < 0) {\n            return;\n        }\n        this.viewIndex = index;\n        var args = { requestType: 'viewNavigate', cancel: false, event: event };\n        this.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var navArgs = {\n                    action: 'view', cancel: false, previousView: _this.currentView, currentView: view, viewIndex: _this.viewIndex\n                };\n                _this.trigger(events.navigating, navArgs, function (navigationArgs) {\n                    if (!navigationArgs.cancel) {\n                        _this.viewIndex = navigationArgs.viewIndex;\n                        _this.setScheduleProperties({ currentView: view });\n                        if (_this.headerModule) {\n                            _this.headerModule.updateActiveView();\n                            _this.headerModule.setCalendarDate(_this.selectedDate);\n                            _this.headerModule.setCalendarView();\n                        }\n                        _this.initializeView(_this.currentView);\n                        _this.animateLayout();\n                        args = { requestType: 'viewNavigate', cancel: false, event: event };\n                        _this.trigger(events.actionComplete, args);\n                    }\n                });\n            }\n        });\n    };\n    /**\n     * Method to change the view date\n     *\n     * @param {Date} selectedDate Accepts the selected date\n     * @param {Event} event Accepts the event object\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.changeDate = function (selectedDate, event) {\n        var _this = this;\n        var args = { requestType: 'dateNavigate', cancel: false, event: event };\n        this.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var navArgs = {\n                    action: 'date', cancel: false, previousDate: _this.selectedDate, currentDate: selectedDate\n                };\n                _this.trigger(events.navigating, navArgs, function (navigationArgs) {\n                    if (!navigationArgs.cancel) {\n                        _this.uiStateValues.isInitial = _this.activeView.isTimelineView() ? true : _this.uiStateValues.isInitial;\n                        _this.validateDate(navigationArgs.currentDate);\n                        if (_this.headerModule) {\n                            _this.headerModule.setCalendarDate(navigationArgs.currentDate);\n                        }\n                        _this.initializeView(_this.currentView);\n                        _this.animateLayout();\n                        args = { requestType: 'dateNavigate', cancel: false, event: event };\n                        _this.trigger(events.actionComplete, args);\n                    }\n                });\n            }\n        });\n    };\n    /**\n     * Method to validate min and max date\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {boolean} Returns the boolean result to validate the min and max date\n     * @private\n     */\n    Schedule.prototype.isMinMaxDate = function (date) {\n        if (date === void 0) { date = this.selectedDate; }\n        return ((date.getTime() >= this.minDate.getTime()) && (date.getTime() <= this.maxDate.getTime()));\n    };\n    /**\n     * Method to validate the selected date\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {boolean} Returns the boolean value for given date is selected date or not\n     * @private\n     */\n    Schedule.prototype.isSelectedDate = function (date) {\n        return date.setHours(0, 0, 0, 0) === new Date('' + this.selectedDate).setHours(0, 0, 0, 0);\n    };\n    /**\n     * Method to get the current time\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {Date} Returns the date object after performing the timezone conversion\n     * @private\n     */\n    Schedule.prototype.getCurrentTime = function (date) {\n        if (date === void 0) { date = new Date(); }\n        if (this.timezone) {\n            return this.tzModule.convert(date, this.tzModule.getLocalTimezoneName(), this.timezone);\n        }\n        return date;\n    };\n    /** Method to get navigate view\n     *\n     * @returns {View} Return the navigate view name\n     * @private\n     */\n    Schedule.prototype.getNavigateView = function () {\n        if (this.activeView.isTimelineView()) {\n            return this.currentView === 'TimelineMonth' || this.currentView === 'TimelineYear' ? 'TimelineDay' : 'Agenda';\n        }\n        return 'Day';\n    };\n    Schedule.prototype.animateLayout = function () {\n        if (!this.activeView.element) {\n            return;\n        }\n        new Animation({ duration: 600, name: 'FadeIn', timingFunction: 'easeIn' }).animate(this.activeView.element);\n    };\n    /**\n     * To provide the array of modules needed for control rendering\n     *\n     * @returns {ModuleDeclaration[]} Returns the declared modules\n     * @private\n     */\n    Schedule.prototype.requiredModules = function () {\n        var modules = [];\n        this.setViewOptions(true);\n        for (var _i = 0, _a = Object.keys(this.viewOptions); _i < _a.length; _i++) {\n            var view = _a[_i];\n            view = (view === 'timelineDay' || view === 'timelineWeek' || view === 'timelineWorkWeek') ? 'timelineViews' : view;\n            modules.push({ member: view, args: [this] });\n        }\n        if (this.allowDragAndDrop) {\n            modules.push({ member: 'dragAndDrop', args: [this] });\n        }\n        if (this.allowResizing) {\n            modules.push({ member: 'resize', args: [this] });\n        }\n        modules.push({ member: 'excelExport', args: [this] });\n        modules.push({ member: 'iCalendarExport', args: [this] });\n        modules.push({ member: 'iCalendarImport', args: [this] });\n        modules.push({ member: 'print', args: [this] });\n        return modules;\n    };\n    /**\n     * Initializes the values of private members.\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.preRender = function () {\n        this.isAdaptive = Browser.isDevice || util.isIPadDevice();\n        this.globalize = new Internationalization(this.locale);\n        this.tzModule = new Timezone();\n        if (this && isNullOrUndefined(this.uiStateValues) || !(this.enablePersistence)) {\n            this.uiStateValues = {\n                expand: false, isInitial: true, left: 0, top: 0, isGroupAdaptive: false,\n                isIgnoreOccurrence: false, groupIndex: 0, action: false, isBlock: false\n            };\n        }\n        this.activeCellsData = { startTime: this.getCurrentTime(), endTime: this.getCurrentTime(), isAllDay: false };\n        this.activeEventData = { event: undefined, element: undefined };\n        this.getDefaultLocale();\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        this.setCldrTimeFormat();\n        this.setCalendarMode();\n        this.eventsData = [];\n        this.eventsProcessed = [];\n        this.blockData = [];\n        this.blockProcessed = [];\n        this.resourceCollection = [];\n        this.currentAction = null;\n        this.selectedElements = [];\n        this.setViewOptions();\n    };\n    Schedule.prototype.getDefaultLocale = function () {\n        this.defaultLocale = {\n            day: 'Day',\n            week: 'Week',\n            workWeek: 'Work Week',\n            month: 'Month',\n            year: 'Year',\n            agenda: 'Agenda',\n            weekAgenda: 'Week Agenda',\n            workWeekAgenda: 'Work Week Agenda',\n            monthAgenda: 'Month Agenda',\n            today: 'Today',\n            noEvents: 'No events',\n            emptyContainer: 'There are no events scheduled on this day.',\n            allDay: 'All day',\n            start: 'Start',\n            end: 'End',\n            more: 'more',\n            close: 'Close',\n            cancel: 'Cancel',\n            noTitle: '(No Title)',\n            delete: 'Delete',\n            deleteEvent: 'Delete Event',\n            deleteMultipleEvent: 'Delete Multiple Events',\n            selectedItems: 'Items selected',\n            deleteSeries: 'Entire Series',\n            edit: 'Edit',\n            editSeries: 'Entire Series',\n            editEvent: 'Edit Event',\n            createEvent: 'Create',\n            subject: 'Subject',\n            addTitle: 'Add title',\n            moreDetails: 'More Details',\n            save: 'Save',\n            editContent: 'How would you like to change the appointment in the series?',\n            deleteContent: 'Are you sure you want to delete this event?',\n            deleteMultipleContent: 'Are you sure you want to delete the selected events?',\n            newEvent: 'New Event',\n            title: 'Title',\n            location: 'Location',\n            description: 'Description',\n            timezone: 'Timezone',\n            startTimezone: 'Start Timezone',\n            endTimezone: 'End Timezone',\n            repeat: 'Repeat',\n            saveButton: 'Save',\n            cancelButton: 'Cancel',\n            deleteButton: 'Delete',\n            recurrence: 'Recurrence',\n            wrongPattern: 'The recurrence pattern is not valid.',\n            seriesChangeAlert: 'Do you want to cancel the changes made to specific ' +\n                'instances of this series and match it to the whole series again?',\n            createError: 'The duration of the event must be shorter than how frequently it occurs. ' +\n                'Shorten the duration, or change the recurrence pattern in the recurrence event editor.',\n            sameDayAlert: 'Two occurrences of the same event cannot occur on the same day.',\n            editRecurrence: 'Edit Recurrence',\n            repeats: 'Repeats',\n            alert: 'Alert',\n            startEndError: 'The selected end date occurs before the start date.',\n            invalidDateError: 'The entered date value is invalid.',\n            blockAlert: 'Events cannot be scheduled within the blocked time range.',\n            ok: 'Ok',\n            yes: 'Yes',\n            no: 'No',\n            occurrence: 'Occurrence',\n            series: 'Series',\n            previous: 'Previous',\n            next: 'Next',\n            timelineDay: 'Timeline Day',\n            timelineWeek: 'Timeline Week',\n            timelineWorkWeek: 'Timeline Work Week',\n            timelineMonth: 'Timeline Month',\n            timelineYear: 'Timeline Year',\n            editFollowingEvent: 'Following Events',\n            deleteTitle: 'Delete Event',\n            editTitle: 'Edit Event',\n            beginFrom: 'Begin From',\n            endAt: 'Ends At',\n            expandAllDaySection: 'Expand-all-day-section',\n            collapseAllDaySection: 'Collapse-all-day-section'\n        };\n    };\n    Schedule.prototype.wireEvents = function () {\n        EventHandler.add(window, 'resize', this.onScheduleResize, this);\n        EventHandler.add(window, 'orientationchange', this.onScheduleResize, this);\n        EventHandler.add(document, Browser.touchStartEvent, this.onDocumentClick, this);\n    };\n    /**\n     * Method to remove selected class\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.removeSelectedClass = function () {\n        var selectedCells = this.getSelectedElements();\n        for (var _i = 0, selectedCells_1 = selectedCells; _i < selectedCells_1.length; _i++) {\n            var cell = selectedCells_1[_i];\n            cell.setAttribute('aria-selected', 'false');\n            cell.removeAttribute('tabindex');\n        }\n        removeClass(selectedCells, cls.SELECTED_CELL_CLASS);\n    };\n    /**\n     * Method to add selected class\n     *\n     * @param {HTMLTableCellElement[]} cells Accepts the collection of elements\n     * @param {HTMLTableCellElement} focusCell Accepts the focus element\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.addSelectedClass = function (cells, focusCell) {\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            cell.setAttribute('aria-selected', 'true');\n        }\n        addClass(cells, cls.SELECTED_CELL_CLASS);\n        if (focusCell) {\n            focusCell.setAttribute('tabindex', '0');\n            focusCell.focus();\n        }\n    };\n    /**\n     * Method to select cell\n     *\n     * @param {HTMLElement | HTMLTableCellElement} element Accepts the select element\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.selectCell = function (element) {\n        this.removeSelectedClass();\n        this.addSelectedClass([element], element);\n    };\n    /**\n     * Method to get all day row element\n     *\n     * @returns {Element} Returns the all day row element\n     * @private\n     */\n    Schedule.prototype.getAllDayRow = function () {\n        return this.element.querySelector('.' + cls.ALLDAY_ROW_CLASS);\n    };\n    /**\n     * Method to get content table element\n     *\n     * @returns {HTMLElement} Returns the content table element\n     * @private\n     */\n    Schedule.prototype.getContentTable = function () {\n        return this.activeView.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n    };\n    /**\n     * Method to get all content table rows\n     *\n     * @returns {HTMLElement[]} Returns the content table rows\n     * @private\n     */\n    Schedule.prototype.getTableRows = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr:not(.' + cls.HIDDEN_CLASS + ')'));\n    };\n    /**\n     * Method to get work cell elements\n     *\n     * @returns {Element[]} Returns the all work cell elements\n     * @private\n     */\n    Schedule.prototype.getWorkCellElements = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n    };\n    /**\n     * Method to get the index from date collection\n     *\n     * @param {Date[]} collection Accepts the collections of date\n     * @param {Date} date Accepts the date object\n     * @returns {number} Returns the index compared date with date collections\n     * @private\n     */\n    Schedule.prototype.getIndexOfDate = function (collection, date) {\n        return collection.map(Number).indexOf(+date);\n    };\n    /**\n     * Method to find all day cell\n     *\n     * @param {Element} td Accepts the DOM Element\n     * @returns {boolean} Returns the boolean value\n     * @private\n     */\n    Schedule.prototype.isAllDayCell = function (td) {\n        if (['Month', 'TimelineMonth', 'TimelineYear', 'MonthAgenda'].indexOf(this.currentView) > -1 ||\n            td.classList.contains(cls.ALLDAY_CELLS_CLASS) ||\n            td.classList.contains(cls.HEADER_CELLS_CLASS) || !this.activeViewOptions.timeScale.enable) {\n            return true;\n        }\n        if (this.activeView.isTimelineView() && this.activeViewOptions.headerRows.length > 0 &&\n            this.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Method to get date from element\n     *\n     * @param {Element} td Accepts the DOM element\n     * @returns {Date} Returns the date object\n     * @private\n     */\n    Schedule.prototype.getDateFromElement = function (td) {\n        var dateString = td.getAttribute('data-date');\n        if (!isNullOrUndefined(dateString)) {\n            var dateInMS = parseInt(dateString, 10);\n            var date = new Date(dateInMS);\n            return date;\n        }\n        return undefined;\n    };\n    /**\n     * Method to get target element from given selector\n     *\n     * @param {string} selector Accepts the element selector\n     * @param {number} left Accepts the pageX value\n     * @param {number} top Accepts the pageY value\n     * @returns {Element[]} Returns the collection of elements based on the given selector\n     * @private\n     */\n    Schedule.prototype.getTargetElement = function (selector, left, top) {\n        var element = document.elementFromPoint(left, top);\n        var targetElement;\n        if (element) {\n            targetElement = element.closest(selector);\n        }\n        return (targetElement) ? [targetElement] : null;\n    };\n    /**\n     * Method to process cell header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getCellHeaderTemplate = function () {\n        return this.cellHeaderTemplateFn;\n    };\n    /**\n     * Method to process cell template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getCellTemplate = function () {\n        return this.cellTemplateFn;\n    };\n    /**\n     * Method to process date header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getDateHeaderTemplate = function () {\n        return this.dateHeaderTemplateFn;\n    };\n    /**\n     * Method to process major slot template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getMajorSlotTemplate = function () {\n        return this.majorSlotTemplateFn;\n    };\n    /**\n     * Method to process minor slot template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getMinorSlotTemplate = function () {\n        return this.minorSlotTemplateFn;\n    };\n    /**\n     * Method to process appointment template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getAppointmentTemplate = function () {\n        return this.appointmentTemplateFn;\n    };\n    /**\n     * Method to process appointment tooltip template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getEventTooltipTemplate = function () {\n        return this.eventTooltipTemplateFn;\n    };\n    /**\n     * Method to process header tooltip template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getHeaderTooltipTemplate = function () {\n        return this.headerTooltipTemplateFn;\n    };\n    /**\n     * Method to process editor template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getEditorTemplate = function () {\n        return this.editorTemplateFn;\n    };\n    /**\n     * Method to process quick info eader template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getQuickInfoTemplatesHeader = function () {\n        return this.quickInfoTemplatesHeaderFn;\n    };\n    /**\n     * Method to process quick info content template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getQuickInfoTemplatesContent = function () {\n        return this.quickInfoTemplatesContentFn;\n    };\n    /**\n     * Method to process quick info footer template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getQuickInfoTemplatesFooter = function () {\n        return this.quickInfoTemplatesFooterFn;\n    };\n    /**\n     * Method to process resource header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getResourceHeaderTemplate = function () {\n        return this.resourceHeaderTemplateFn;\n    };\n    /**\n     * Method to get dynamic CSS properties\n     *\n     * @returns {ScrollCss} Returns the CSS properties dynamically\n     * @private\n     */\n    Schedule.prototype.getCssProperties = function () {\n        var cssProps = {\n            border: this.enableRtl ? 'borderLeftWidth' : 'borderRightWidth',\n            padding: this.enableRtl ? 'paddingLeft' : 'paddingRight',\n            rtlBorder: this.enableRtl ? 'borderRightWidth' : 'borderLeftWidth',\n            rtlPadding: this.enableRtl ? 'paddingRight' : 'paddingLeft'\n        };\n        return cssProps;\n    };\n    /**\n     * Method to remove new event element in adaptive mode\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.removeNewEventElement = function () {\n        var eventClone = this.element.querySelector('.' + cls.NEW_EVENT_CLASS);\n        if (!isNullOrUndefined(eventClone)) {\n            remove(eventClone);\n        }\n    };\n    /**\n     * Method to get start end time from string\n     *\n     * @param {string} startEndTime Accepts the start end time string value\n     * @returns {Date} Returns the date object\n     * @private\n     */\n    Schedule.prototype.getStartEndTime = function (startEndTime) {\n        if (!isNullOrUndefined(startEndTime) && startEndTime !== '') {\n            var startEndDate = util.resetTime(this.getCurrentTime());\n            var timeString = startEndTime.split(':');\n            if (timeString.length === 2) {\n                startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);\n            }\n            return startEndDate;\n        }\n        return null;\n    };\n    Schedule.prototype.onDocumentClick = function (args) {\n        this.notify(events.documentClick, { event: args });\n    };\n    Schedule.prototype.onScheduleResize = function () {\n        if (isNullOrUndefined(this.activeView)) {\n            return;\n        }\n        if (this.quickPopup) {\n            this.quickPopup.onClosePopup();\n        }\n        if (this.currentView === 'Month' || ((this.currentView !== 'Agenda' && this.currentView !== 'MonthAgenda')\n            && !this.activeViewOptions.timeScale.enable) || this.activeView.isTimelineView()) {\n            this.activeView.resetColWidth();\n            this.notify(events.scrollUiUpdate, { cssProperties: this.getCssProperties(), isPreventScrollUpdate: true });\n            this.notify(events.dataReady, {});\n        }\n    };\n    /**\n     * Method to process the templates\n     *\n     * @param {string} template Accepts the template in string\n     * @returns {CallbackFunction} Returns the calback function\n     * @private\n     */\n    Schedule.prototype.templateParser = function (template) {\n        if (template) {\n            try {\n                if (document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n            }\n            catch (error) {\n                return compile(template);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Method to generate the annocement string\n     *\n     * @param {Object} event Accepts the event object\n     * @param {string} subject Accepts the subject text\n     * @returns {string} Returns the annocement string\n     * @private\n     */\n    Schedule.prototype.getAnnocementString = function (event, subject) {\n        var resourceName;\n        if (this.quickPopup && this.activeViewOptions.group.resources.length > 0) {\n            var constantText = '\"s event - ';\n            resourceName = this.quickPopup.getResourceText({ event: event }, 'event') + constantText;\n        }\n        var recordSubject = (subject || (event[this.eventFields.subject] || this.eventSettings.fields.subject.default));\n        var skeleton = 'full';\n        var startDateText = this.globalize.formatDate(event[this.eventFields.startTime], {\n            type: 'dateTime', skeleton: skeleton, calendar: this.getCalendarMode()\n        });\n        var endDateText = this.globalize.formatDate(event[this.eventFields.endTime], {\n            type: 'dateTime', skeleton: skeleton, calendar: this.getCalendarMode()\n        });\n        var annocementString = recordSubject + ' ' + this.localeObj.getConstant('beginFrom') + ' '\n            + startDateText + ' ' + this.localeObj.getConstant('endAt') + ' ' + endDateText;\n        if (resourceName) {\n            annocementString = resourceName + ' ' + annocementString;\n        }\n        return annocementString;\n    };\n    /**\n     * Method to process the element boundary validation\n     *\n     * @param {number} pageY Accepts the pageY value\n     * @param {number} pageX Accepts the pageX value\n     * @returns {ResizeEdges} Returns the boundary validation object\n     * @private\n     */\n    Schedule.prototype.boundaryValidation = function (pageY, pageX) {\n        var autoScrollDistance = 30;\n        var scrollEdges = { left: false, right: false, top: false, bottom: false };\n        var viewBoundaries = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS).getBoundingClientRect();\n        if ((pageY < viewBoundaries.top + autoScrollDistance + window.pageYOffset) &&\n            (pageY > viewBoundaries.top + window.pageYOffset)) {\n            scrollEdges.top = true;\n        }\n        if ((pageY > (viewBoundaries.bottom - autoScrollDistance) + window.pageYOffset) &&\n            (pageY < viewBoundaries.bottom + window.pageYOffset)) {\n            scrollEdges.bottom = true;\n        }\n        if ((pageX < viewBoundaries.left + autoScrollDistance + window.pageXOffset) &&\n            (pageX > viewBoundaries.left + window.pageXOffset)) {\n            scrollEdges.left = true;\n        }\n        if ((pageX > (viewBoundaries.right - autoScrollDistance) + window.pageXOffset) &&\n            (pageX < viewBoundaries.right + window.pageXOffset)) {\n            scrollEdges.right = true;\n        }\n        return scrollEdges;\n    };\n    /**\n     * Method to get the week number.\n     *\n     * @param {Date[]} dates Accepts the date collections\n     * @returns {number} Returns the week number\n     * @private\n     */\n    Schedule.prototype.getWeekNumberContent = function (dates) {\n        var weekNumber;\n        if (this.weekRule === 'FirstDay') {\n            var weekNumberDate = util.getWeekLastDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            weekNumber = util.getWeekNumber(weekNumberDate);\n        }\n        else if (this.weekRule === 'FirstFourDayWeek') {\n            var weekFirstDate = util.getWeekFirstDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            var weekLastDate = util.getWeekLastDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            var weekMidDate = util.getWeekMiddleDate(weekFirstDate, weekLastDate);\n            weekNumber = util.getWeekNumber(weekMidDate);\n        }\n        else if (this.weekRule === 'FirstFullWeek') {\n            var weekFirstDate = util.getWeekFirstDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            weekNumber = util.getWeekNumber(weekFirstDate);\n        }\n        return weekNumber;\n    };\n    Schedule.prototype.unwireEvents = function () {\n        EventHandler.remove(window, 'resize', this.onScheduleResize);\n        EventHandler.remove(window, 'orientationchange', this.onScheduleResize);\n        EventHandler.remove(document, Browser.touchStartEvent, this.onDocumentClick);\n    };\n    /**\n     * Core method to return the component name.\n     *\n     * @returns {string} Returns the module name\n     * @private\n     */\n    Schedule.prototype.getModuleName = function () {\n        return 'schedule';\n    };\n    /**\n     * Returns the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persistance data\n     * @private\n     */\n    Schedule.prototype.getPersistData = function () {\n        return this.addOnPersist(['currentView', 'selectedDate', 'scrollTop', 'scrollLeft']);\n    };\n    /**\n     * Called internally, if any of the property value changed.\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var state = {\n            isRefresh: false, isResource: false, isDate: false, isView: false, isLayout: false, isDataManager: false\n        };\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'views':\n                    this.setViewOptions();\n                    if (this.headerModule) {\n                        this.headerModule.updateItems();\n                    }\n                    state.isView = true;\n                    break;\n                case 'currentView':\n                    state.isView = true;\n                    break;\n                case 'minDate':\n                case 'maxDate':\n                case 'selectedDate':\n                    state.isDate = true;\n                    break;\n                case 'dateFormat':\n                    this.activeViewOptions = this.getActiveViewOptions();\n                    if (this.headerModule) {\n                        this.headerModule.updateDateRange(this.activeView.getDateRangeText());\n                    }\n                    break;\n                case 'showHeaderBar':\n                    this.destroyHeaderModule();\n                    if (newProp.showHeaderBar) {\n                        this.headerModule = new HeaderRenderer(this);\n                        this.headerModule.updateDateRange(this.activeView.getDateRangeText());\n                    }\n                    this.notify(events.scrollUiUpdate, { cssProperties: this.getCssProperties() });\n                    if (this.activeView.isTimelineView()) {\n                        this.notify(events.dataReady, {});\n                    }\n                    break;\n                case 'showWeekend':\n                case 'workDays':\n                case 'startHour':\n                case 'endHour':\n                case 'workHours':\n                case 'readonly':\n                case 'headerRows':\n                case 'showWeekNumber':\n                case 'rowAutoHeight':\n                    state.isLayout = true;\n                    break;\n                case 'locale':\n                case 'calendarMode':\n                    this.globalize = new Internationalization(this.locale);\n                    this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n                    this.setCldrTimeFormat();\n                    this.setCalendarMode();\n                    state.isRefresh = true;\n                    break;\n                case 'firstDayOfWeek':\n                    this.activeViewOptions.firstDayOfWeek = newProp.firstDayOfWeek;\n                    if (this.eventWindow) {\n                        this.eventWindow.refreshRecurrenceEditor();\n                    }\n                    state.isLayout = true;\n                    break;\n                case 'showTimeIndicator':\n                    if (this.activeViewOptions.timeScale.enable && this.activeView) {\n                        this.activeView.highlightCurrentTime();\n                    }\n                    break;\n                case 'cellHeaderTemplate':\n                    this.activeViewOptions.cellHeaderTemplate = newProp.cellHeaderTemplate;\n                    this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'cellTemplate':\n                    this.activeViewOptions.cellTemplate = newProp.cellTemplate;\n                    this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'dateHeaderTemplate':\n                    this.activeViewOptions.dateHeaderTemplate = newProp.dateHeaderTemplate;\n                    this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'resourceHeaderTemplate':\n                    this.activeViewOptions.resourceHeaderTemplate = newProp.resourceHeaderTemplate;\n                    this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'timezone':\n                    this.eventBase.timezonePropertyChange(oldProp.timezone);\n                    this.headerModule.setCalendarTimezone();\n                    break;\n                case 'enableRtl':\n                    this.setRtlClass();\n                    state.isRefresh = true;\n                    break;\n                default:\n                    this.extendedPropertyChange(prop, newProp, oldProp, state);\n                    break;\n            }\n        }\n        this.propertyChangeAction(state);\n    };\n    Schedule.prototype.propertyChangeAction = function (state) {\n        if (state.isRefresh) {\n            this.refresh();\n        }\n        else if (state.isResource) {\n            this.initializeResources(true);\n        }\n        else if (state.isView) {\n            this.changeView(this.currentView, null, true);\n        }\n        else if (state.isDate) {\n            this.changeDate(this.selectedDate);\n        }\n        else if (state.isLayout) {\n            this.initializeView(this.currentView);\n        }\n        else if (state.isDataManager && this.renderModule) {\n            if (this.dragAndDropModule) {\n                this.dragAndDropModule.actionObj.action = '';\n                removeClass([this.element], cls.EVENT_ACTION_CLASS);\n            }\n            this.renderModule.refreshDataManager();\n        }\n    };\n    Schedule.prototype.extendedPropertyChange = function (prop, newProp, oldProp, state) {\n        switch (prop) {\n            case 'width':\n            case 'height':\n                this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n                break;\n            case 'cssClass':\n                if (oldProp.cssClass) {\n                    removeClass([this.element], oldProp.cssClass.split(' '));\n                }\n                if (newProp.cssClass) {\n                    addClass([this.element], newProp.cssClass.split(' '));\n                }\n                break;\n            case 'hideEmptyAgendaDays':\n            case 'agendaDaysCount':\n                this.activeViewOptions = this.getActiveViewOptions();\n                state.isView = true;\n                break;\n            case 'eventSettings':\n                this.onEventSettingsPropertyChanged(newProp.eventSettings, oldProp.eventSettings, state);\n                break;\n            case 'allowKeyboardInteraction':\n                if (this.keyboardInteractionModule) {\n                    this.keyboardInteractionModule.destroy();\n                    this.keyboardInteractionModule = null;\n                }\n                if (newProp.allowKeyboardInteraction) {\n                    this.keyboardInteractionModule = new KeyboardInteraction(this);\n                }\n                break;\n            case 'editorTemplate':\n                if (!isNullOrUndefined(this.editorTemplate)) {\n                    this.editorTemplateFn = this.templateParser(this.editorTemplate);\n                }\n                if (this.eventWindow) {\n                    this.eventWindow.setDialogContent();\n                }\n                break;\n            case 'quickInfoTemplates':\n                if (this.quickInfoTemplates.header) {\n                    this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n                }\n                if (this.quickInfoTemplates.content) {\n                    this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n                }\n                if (this.quickInfoTemplates.footer) {\n                    this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n                }\n                break;\n            case 'group':\n                this.onGroupSettingsPropertyChanged(newProp.group, oldProp.group, state);\n                break;\n            case 'resources':\n                state.isResource = true;\n                break;\n            case 'timeScale':\n                this.activeViewOptions.timeScale.interval = newProp.timeScale.interval || this.activeViewOptions.timeScale.interval;\n                this.activeViewOptions.timeScale.slotCount = newProp.timeScale.slotCount || this.activeViewOptions.timeScale.slotCount;\n                if (this.eventWindow) {\n                    this.eventWindow.refreshDateTimePicker();\n                }\n                state.isLayout = true;\n                break;\n            case 'allowDragAndDrop':\n            case 'allowResizing':\n                this.notify(events.dataReady, { processedData: this.eventBase.processData(this.eventsData) });\n                break;\n            case 'eventDragArea':\n                this.notify(events.dataReady, {});\n                break;\n            case 'weekRule':\n                state.isLayout = true;\n                break;\n            case 'timeFormat':\n                this.internalTimeFormat = newProp.timeFormat || this.activeViewOptions.timeFormat;\n                if (this.eventWindow) {\n                    this.eventWindow.refreshDateTimePicker();\n                }\n                state.isLayout = true;\n                break;\n        }\n    };\n    Schedule.prototype.setRtlClass = function () {\n        if (this.enableRtl) {\n            addClass([this.element], 'e-rtl');\n        }\n        else {\n            removeClass([this.element], 'e-rtl');\n        }\n    };\n    Schedule.prototype.onGroupSettingsPropertyChanged = function (newProp, oldProp, state) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            if (prop === 'headerTooltipTemplate') {\n                this.headerTooltipTemplateFn = this.templateParser(newProp[prop]);\n            }\n            else {\n                state.isLayout = true;\n                if (this.eventWindow) {\n                    this.eventWindow.refresh();\n                }\n            }\n        }\n    };\n    Schedule.prototype.onEventSettingsPropertyChanged = function (newProp, oldProp, state) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'dataSource':\n                case 'query':\n                case 'fields':\n                    this.initializeDataModule();\n                    state.isDataManager = true;\n                    break;\n                case 'template':\n                    this.activeViewOptions.eventTemplate = newProp.template;\n                    this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n                    state.isDataManager = true;\n                    break;\n                case 'enableTooltip':\n                    if (this.eventTooltip) {\n                        this.eventTooltip.destroy();\n                        this.eventTooltip = null;\n                    }\n                    if (newProp.enableTooltip) {\n                        this.eventTooltip = new EventTooltip(this);\n                    }\n                    break;\n                case 'tooltipTemplate':\n                    this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n                    break;\n                case 'resourceColorField':\n                    if (this.resourceBase) {\n                        this.resourceBase.setResourceCollection();\n                    }\n                    state.isDataManager = true;\n                    break;\n                case 'editFollowingEvents':\n                    if (this.quickPopup) {\n                        this.quickPopup.refreshQuickDialog();\n                    }\n                    break;\n                case 'allowAdding':\n                case 'allowEditing':\n                case 'allowDeleting':\n                    if (this.eventWindow) {\n                        this.eventWindow.refresh();\n                    }\n                    break;\n                case 'enableMaxHeight':\n                case 'enableIndicator':\n                    this.notify(events.dataReady, { processedData: this.eventBase.processData(this.eventsData) });\n                    break;\n                case 'ignoreWhitespace':\n                    state.isLayout = true;\n                    break;\n            }\n        }\n    };\n    Schedule.prototype.destroyHeaderModule = function () {\n        if (this.headerModule) {\n            this.headerModule.destroy();\n            this.headerModule = null;\n        }\n    };\n    Schedule.prototype.destroyPopups = function () {\n        if (this.quickPopup) {\n            this.quickPopup.destroy();\n            this.quickPopup = null;\n        }\n        if (this.eventWindow) {\n            this.eventWindow.destroy();\n            this.eventWindow = null;\n        }\n    };\n    /**\n     * Allows to show the spinner on schedule at the required scenarios.\n     *\n     * @function showSpinner\n     * @returns {void}\n     */\n    Schedule.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * When the spinner is shown manually using `showSpinner` method, it can be hidden using this `hideSpinner` method.\n     *\n     * @function hideSpinner\n     * @returns {void}\n     */\n    Schedule.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    /**\n     * Sets different working hours on the required working days by accepting the required start and end time as well as the date collection\n     *  as its parameters.\n     *\n     * @function setWorkHours\n     * @param {Date} dates Collection of dates on which the given start and end hour range needs to be applied.\n     * @param {string} start Defines the work start hour.\n     * @param {string} end Defines the work end hour.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {void}\n     */\n    Schedule.prototype.setWorkHours = function (dates, start, end, groupIndex) {\n        var cells = [];\n        cells = this.getWorkHourCells(dates, start, end, groupIndex);\n        addClass(cells, cls.WORK_HOURS_CLASS);\n    };\n    /**\n     * Removes or resets different working hours on the required working days by accepting the required start and end time as well as the\n     * date collection as its parameters.\n     * if no parameters has been passed to this function, it will remove all the work hours.\n     *\n     * @param {Date} dates Collection of dates on which the given start and end hour range need to be applied.\n     * @param {string} start Defines the work start hour.\n     * @param {string} end Defines the work end hour.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {void}\n     */\n    Schedule.prototype.resetWorkHours = function (dates, start, end, groupIndex) {\n        if (dates === void 0) { dates = this.activeView.renderDates; }\n        if (dates && start && end) {\n            var cells = this.getWorkHourCells(dates, start, end, groupIndex);\n            removeClass(cells, cls.WORK_HOURS_CLASS);\n        }\n        else {\n            var workHourCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_HOURS_CLASS));\n            removeClass(workHourCells, cls.WORK_HOURS_CLASS);\n        }\n    };\n    Schedule.prototype.getWorkHourCells = function (dates, start, end, groupIndex) {\n        if (['Agenda', 'MonthAgenda', 'Month', 'TimelineMonth'].indexOf(this.currentView) > -1) {\n            return [];\n        }\n        var startHour = this.getStartEndTime(start);\n        var endHour = this.getStartEndTime(end);\n        var tableEle = this.getContentTable();\n        if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour) || !tableEle) {\n            return [];\n        }\n        startHour.setMilliseconds(0);\n        endHour.setMilliseconds(0);\n        var viewStartHour = this.activeView.getStartHour();\n        if (startHour < viewStartHour) {\n            startHour = viewStartHour;\n        }\n        var viewEndHour = this.activeView.getEndHour();\n        if (endHour > viewEndHour) {\n            endHour = viewEndHour;\n        }\n        var msMajorInterval = this.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.activeViewOptions.timeScale.slotCount;\n        var startIndex = Math.round((startHour.getTime() - viewStartHour.getTime()) / msInterval);\n        var endIndex = Math.ceil((endHour.getTime() - viewStartHour.getTime()) / msInterval);\n        var tempStartIndex = startIndex;\n        var tempEndIndex = endIndex;\n        var cells = [];\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var date = dates_1[_i];\n            date = this.getDateTime(date);\n            util.resetTime(date);\n            var renderDates = this.activeView.renderDates;\n            if (!isNullOrUndefined(groupIndex) && this.resourceBase && !this.activeView.isTimelineView()) {\n                renderDates = this.resourceBase.lastResourceLevel[groupIndex].renderDates;\n            }\n            var colIndex = this.getIndexOfDate(renderDates, date);\n            if (colIndex >= 0) {\n                if (this.activeView.isTimelineView()) {\n                    var slotsPerDay = Math.round((viewEndHour.getTime() - viewStartHour.getTime()) / msInterval);\n                    startIndex = tempStartIndex + (colIndex * slotsPerDay);\n                    endIndex = tempEndIndex + (colIndex * slotsPerDay);\n                }\n                for (var i = startIndex; i < endIndex; i++) {\n                    if (this.activeView.isTimelineView()) {\n                        var rowIndex = (!isNullOrUndefined(groupIndex)) ? groupIndex : 0;\n                        cells.push(tableEle.rows[rowIndex].cells[i]);\n                    }\n                    else {\n                        if (!isNullOrUndefined(groupIndex)) {\n                            var selector = '.' + cls.WORK_CELLS_CLASS + '[data-group-index=\"' + groupIndex + '\"]';\n                            var tds = [].slice.call(tableEle.rows[i].querySelectorAll(selector));\n                            cells.push(tds[colIndex]);\n                        }\n                        else {\n                            cells.push(tableEle.rows[i].cells[colIndex]);\n                        }\n                    }\n                }\n            }\n        }\n        return cells;\n    };\n    /**\n     * Retrieves the start and end time information of the specific cell element.\n     *\n     * @function getCellDetails\n     * @param {Element | Element[]} tdCol Accepts the single or collection of elements.\n     * @returns {CellClickEventArgs} Object An object holding the startTime, endTime and all-day information along with the target HTML element will be returned.\n     */\n    Schedule.prototype.getCellDetails = function (tdCol) {\n        var td = (tdCol instanceof Array) ? tdCol : [tdCol];\n        var firstTd = getElement(td[0]);\n        var lastTd = getElement(td.slice(-1)[0]);\n        var startTime = this.getDateFromElement(firstTd);\n        var endTime = this.getDateFromElement(lastTd);\n        if (isNullOrUndefined(startTime) || isNullOrUndefined(endTime)) {\n            return undefined;\n        }\n        var endDateFromColSpan = this.activeView.isTimelineView() && !isNullOrUndefined(lastTd.getAttribute('colSpan')) &&\n            this.headerRows.length > 0;\n        var duration = endDateFromColSpan ? parseInt(lastTd.getAttribute('colSpan'), 10) : 1;\n        if (!this.activeViewOptions.timeScale.enable || endDateFromColSpan || lastTd.classList.contains(cls.ALLDAY_CELLS_CLASS) ||\n            lastTd.classList.contains(cls.HEADER_CELLS_CLASS)) {\n            endTime = util.addDays(new Date(endTime.getTime()), duration);\n        }\n        else {\n            endTime = this.activeView.getEndDateFromStartDate(endTime);\n        }\n        var data = {\n            startTime: startTime,\n            endTime: endTime,\n            isAllDay: this.isAllDayCell(firstTd),\n            element: tdCol\n        };\n        var groupIndex = firstTd.getAttribute('data-group-index');\n        if (!isNullOrUndefined(groupIndex)) {\n            data.groupIndex = parseInt(groupIndex, 10);\n        }\n        return data;\n    };\n    /**\n     * Retrieves the selected cell elements.\n     *\n     * @function getSelectedElements\n     * @returns {Element[]} The elements of currently selected cells will be returned.\n     */\n    Schedule.prototype.getSelectedElements = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.SELECTED_CELL_CLASS));\n    };\n    /**\n     * To get the resource collection\n     *\n     * @function getResourceCollections\n     * @returns {ResourcesModel[]} Returns the resource collections\n     */\n    Schedule.prototype.getResourceCollections = function () {\n        return this.resourceCollection;\n    };\n    /**\n     * To set the resource collection\n     *\n     * @function setResourceCollections\n     * @param {ResourcesModel[]} resourceCol Accepts the resource collections in ResourcesModel type\n     * @returns {void}\n     */\n    Schedule.prototype.setResourceCollections = function (resourceCol) {\n        this.setProperties({ resources: resourceCol }, false);\n    };\n    /**\n     * Current View could be change based on the provided parameters.\n     *\n     * @function changeCurrentView\n     * @param {View} viewName Accept the view in the viewCollections.\n     * @param {number} viewIndex Accept the viewIndex in the viewCollections.\n     * @returns {void}\n     */\n    Schedule.prototype.changeCurrentView = function (viewName, viewIndex) {\n        var index = this.getViewIndex(viewName);\n        var view = viewName.charAt(0).toLowerCase() + viewName.slice(1);\n        var viewOptions = this.viewOptions[view];\n        if (viewOptions) {\n            index = this.viewCollections.indexOf(viewOptions[viewIndex || 0]);\n        }\n        if (index === -1 || index === this.viewIndex) {\n            return;\n        }\n        this.changeView(viewName, null, null, index);\n    };\n    /**\n     * Return the current view Index.\n     *\n     * @function getCurrentViewIndex\n     * @returns {number} Returns the view index\n     */\n    Schedule.prototype.getCurrentViewIndex = function () {\n        return this.viewIndex;\n    };\n    /**\n     * Retrieves the resource details based on the provided resource index.\n     *\n     * @param {number} index index of the resources at the last level.\n     * @returns {ResourceDetails} Object An object holding the details of resource and resourceData.\n     */\n    Schedule.prototype.getResourcesByIndex = function (index) {\n        if (this.resourceBase && this.resourceBase.lastResourceLevel) {\n            if (index < 0 || index >= this.resourceBase.lastResourceLevel.length) {\n                return undefined;\n            }\n            var data = this.resourceBase.lastResourceLevel[index];\n            var groupData = {};\n            this.resourceBase.setResourceValues(groupData, index);\n            return { resource: data.resource, resourceData: data.resourceData, groupData: groupData };\n        }\n        return undefined;\n    };\n    /**\n     * This method allows to expand the resource that available on the scheduler.\n     *\n     * @function expandResource\n     * @param {string | number} resourceId Accepts the resource id in either string or number type\n     * @param {string} name Accepts the name of the resource collection\n     * @returns {void}\n     */\n    Schedule.prototype.expandResource = function (resourceId, name) {\n        if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {\n            this.resourceBase.resourceExpand(resourceId, name, false);\n        }\n    };\n    /**\n     * This method allows to collapse the resource that available on the scheduler.\n     *\n     * @function collapseResource\n     * @param {string | number} resourceId Accepts the resource id in either string or number type\n     * @param {string} name Accepts the name of the resource collection\n     * @returns {void}\n     */\n    Schedule.prototype.collapseResource = function (resourceId, name) {\n        if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {\n            this.resourceBase.resourceExpand(resourceId, name, true);\n        }\n    };\n    /**\n     * Scrolls the Schedule content area to the specified time.\n     *\n     * @function scrollTo\n     * @param {string} hour Accepts the time value in the skeleton format of 'Hm'.\n     * @param {Date} scrollDate Accepts the date object value.\n     * @returns {void}\n     */\n    Schedule.prototype.scrollTo = function (hour, scrollDate) {\n        if (this.activeView.scrollToDate && isNullOrUndefined(hour) && scrollDate) {\n            this.activeView.scrollToDate(scrollDate);\n        }\n        else if (this.activeView.scrollToHour) {\n            this.activeView.scrollToHour(hour, scrollDate);\n        }\n    };\n    /**\n     * This method allows scroll to the position of the any resources that available on the scheduler.\n     * This method is applicable for without Agenda and Month agenda views of the schedule.\n     *\n     * @function scrollToResource\n     * @param {string | number} resourceId Accepts the resource id in either string or number type\n     * @param {string} groupName Accepts the name of the resource collection\n     * @returns {void}\n     */\n    Schedule.prototype.scrollToResource = function (resourceId, groupName) {\n        if (this.resourceBase && this.resourceBase.lastResourceLevel) {\n            this.resourceBase.resourceScroll(resourceId, groupName);\n        }\n    };\n    /**\n     * Exports the Scheduler events to a calendar (.ics) file. By default, the calendar is exported with a file name `Calendar.ics`.\n     * To change this file name on export, pass the custom string value as `fileName` to get the file downloaded with this provided name.\n     *\n     * @function exportToICalendar\n     * @param {string} fileName Accepts the string value.\n     * @param {Object[]} customData Accepts the collection of objects.\n     * @returns {void}\n     */\n    Schedule.prototype.exportToICalendar = function (fileName, customData) {\n        if (this.iCalendarExportModule) {\n            this.iCalendarExportModule.initializeCalendarExport(fileName, customData);\n        }\n        else {\n            throw Error('Inject ICalendarExport module');\n        }\n    };\n    /**\n     * Imports the events from an .ics file downloaded from any of the calendars like Google or Outlook into the Scheduler.\n     * This method accepts the blob object or string format of an .ics file to be imported as a mandatory argument.\n     *\n     * @function importICalendar\n     * @param {Blob | string} fileContent Accepts the file object or string format of an .ics file.\n     * @returns {void}\n     */\n    Schedule.prototype.importICalendar = function (fileContent) {\n        if (this.iCalendarImportModule) {\n            this.iCalendarImportModule.initializeCalendarImport(fileContent);\n        }\n        else {\n            throw Error('Inject ICalendarImport module');\n        }\n    };\n    /**\n     * Adds the newly created event into the Schedule dataSource.\n     *\n     * @function addEvent\n     * @param {Object | Object[]} data Single or collection of event objects to be added into Schedule.\n     * @returns {void}\n     */\n    Schedule.prototype.addEvent = function (data) {\n        this.crudModule.addEvent(data);\n    };\n    /**\n     * Allows the Scheduler events data to be exported as an Excel file either in .xlsx or .csv file formats.\n     * By default, the whole event collection bound to the Scheduler gets exported as an Excel file.\n     * To export only the specific events of Scheduler, you need to pass the custom data collection as\n     * a parameter to this `exportToExcel` method. This method accepts the export options as arguments such as fileName,\n     * exportType, fields, customData, and includeOccurrences. The `fileName` denotes the name to be given for the exported\n     * file and the `exportType` allows you to set the format of an Excel file to be exported either as .xlsx or .csv.\n     * The custom or specific field collection of event dataSource to be exported can be provided through `fields` option\n     * and the custom data collection can be exported by passing them through the `customData` option. There also exists\n     * option to export each individual instances of the recurring events to an Excel file, by setting true or false to the\n     * `includeOccurrences` option, denoting either to include or exclude the occurrences as separate instances on an exported Excel file.\n     *\n     * @function exportToExcel\n     * @param  {ExportOptions} excelExportOptions The export options to be set before start with exporting the Scheduler events to an Excel file.\n     * @returns {void}\n     */\n    Schedule.prototype.exportToExcel = function (excelExportOptions) {\n        if (this.excelExportModule) {\n            this.excelExportModule.initializeExcelExport(excelExportOptions || {});\n        }\n        else {\n            throw Error('Inject ExcelExport module');\n        }\n    };\n    /**\n     * Method allows to print the scheduler.\n     *\n     * @function print\n     * @returns {void}\n     */\n    Schedule.prototype.print = function () {\n        if (this.printModule) {\n            this.printModule.printScheduler();\n        }\n        else {\n            throw Error('Inject Print module');\n        }\n    };\n    /**\n     * Updates the changes made in the event object by passing it as an parameter into the dataSource.\n     *\n     * @function saveEvent\n     * @param {Object | Object[]} data Single or collection of event objects to be saved into Schedule.\n     * @param {CurrentAction} currentAction Denotes the action that takes place either for editing occurrence or series.\n     *  The valid current action names are `EditOccurrence` or `EditSeries`.\n     * @returns {void}\n     */\n    Schedule.prototype.saveEvent = function (data, currentAction) {\n        this.crudModule.saveEvent(data, currentAction);\n    };\n    /**\n     * Deletes the events based on the provided ID or event collection in the argument list.\n     *\n     * @function deleteEvent\n     * @param {string | number | Object | Object[]} id Accepts the ID as string or number type or single or collection of the event object which needs to be removed from the Schedule.\n     * @param {CurrentAction} currentAction Denotes the delete action that takes place either on occurrence or series events.\n     *  The valid current action names are `Delete`, `DeleteOccurrence` or `DeleteSeries`.\n     * @returns {void}\n     */\n    Schedule.prototype.deleteEvent = function (id, currentAction) {\n        this.crudModule.deleteEvent(id, currentAction);\n    };\n    /**\n     * Retrieves the entire collection of events bound to the Schedule.\n     *\n     * @function getEvents\n     * @param {Date} startDate Accepts the start date.\n     * @param {Date} endDate Accepts te end date.\n     * @param {boolean} includeOccurrences Accepts the boolean value to process the occurrence from recurrence series.\n     * @returns {Object[]} Returns the collection of event objects from the Schedule.\n     */\n    Schedule.prototype.getEvents = function (startDate, endDate, includeOccurrences) {\n        var eventCollections = [];\n        if (includeOccurrences) {\n            eventCollections = this.eventBase.getProcessedEvents();\n        }\n        else {\n            eventCollections = this.eventsData;\n        }\n        if (startDate) {\n            startDate = this.getDateTime(startDate);\n        }\n        if (endDate) {\n            endDate = this.getDateTime(endDate);\n        }\n        eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);\n        return eventCollections;\n    };\n    /**\n     * Retrieves the entire collection of block events bound to the Schedule.\n     *\n     * @function getBlockEvents\n     * @param {Date} startDate Accepts the start date.\n     * @param {Date} endDate Accepts te end date.\n     * @param {boolean} includeOccurrences Accepts the boolean value to process the occurrence from recurrence series.\n     * @returns {Object[]} Returns the collection of block event objects from the Schedule.\n     */\n    Schedule.prototype.getBlockEvents = function (startDate, endDate, includeOccurrences) {\n        var eventCollections = [];\n        if (includeOccurrences) {\n            eventCollections = this.eventBase.getProcessedEvents(this.blockData);\n        }\n        else {\n            eventCollections = this.blockData;\n        }\n        if (startDate) {\n            startDate = this.getDateTime(startDate);\n        }\n        if (endDate) {\n            endDate = this.getDateTime(endDate);\n        }\n        eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);\n        return eventCollections;\n    };\n    /**\n     * Retrieves the occurrences of a single recurrence event based on the provided parent ID.\n     *\n     * @function getOccurrencesByID\n     * @param {number} eventID ID of the parent recurrence data from which the occurrences are fetched.\n     * @returns {Object[]} Returns the collection of occurrence event objects.\n     */\n    Schedule.prototype.getOccurrencesByID = function (eventID) {\n        return this.eventBase.getOccurrencesByID(eventID);\n    };\n    /**\n     * Retrieves all the occurrences that lies between the specific start and end time range.\n     *\n     * @function getOccurrencesByRange\n     * @param {Date} startTime Denotes the start time range.\n     * @param {Date} endTime Denotes the end time range.\n     * @returns {Object[]} Returns the collection of occurrence event objects that lies between the provided start and end time.\n     */\n    Schedule.prototype.getOccurrencesByRange = function (startTime, endTime) {\n        startTime = this.getDateTime(startTime);\n        endTime = this.getDateTime(endTime);\n        return this.eventBase.getOccurrencesByRange(startTime, endTime);\n    };\n    /**\n     * Retrieves the dates that lies on active view of Schedule.\n     *\n     * @function getCurrentViewDates\n     * @returns {Date[]} Returns the collection of dates.\n     */\n    Schedule.prototype.getCurrentViewDates = function () {\n        return this.activeView ? this.activeView.renderDates : [];\n    };\n    /**\n     * Set the recurrence editor instance from custom editor template.\n     *\n     * @function setRecurrenceEditor\n     * @param {RecurrenceEditor} recurrenceEditor instance has passed to fetch the instance in event window.\n     * @returns {void}\n     */\n    Schedule.prototype.setRecurrenceEditor = function (recurrenceEditor) {\n        this.eventWindow.setRecurrenceEditor(recurrenceEditor);\n    };\n    /**\n     * Get the maximum id of an event.\n     *\n     * @function getEventMaxID\n     * @returns {number | string} Returns the maximum ID from scheduler data collections.\n     */\n    Schedule.prototype.getEventMaxID = function () {\n        return this.eventBase.getEventMaxID();\n    };\n    /**\n     * Get deleted occurrences from given recurrence series.\n     *\n     * @function getDeletedOccurrences\n     * @param {string | number | Object} recurrenceData Accepts the parent ID of the event object or parent event object\n     * @returns {Object[]} Returns the collection of deleted occurrence events.\n     */\n    Schedule.prototype.getDeletedOccurrences = function (recurrenceData) {\n        return this.eventBase.getDeletedOccurrences(recurrenceData);\n    };\n    /**\n     * Retrieves the events that lies on the current date range of the active view of Schedule.\n     *\n     * @function getCurrentViewEvents\n     * @returns {Object[]} Returns the collection of events.\n     */\n    Schedule.prototype.getCurrentViewEvents = function () {\n        return this.eventsProcessed;\n    };\n    /**\n     * Refreshes the event dataSource. This method may be useful when the events alone in the schedule needs to be re-rendered.\n     *\n     * @function refreshEvents\n     * @returns {void}\n     */\n    Schedule.prototype.refreshEvents = function () {\n        if (this.dragAndDropModule) {\n            this.dragAndDropModule.actionObj.action = '';\n            removeClass([this.element], cls.EVENT_ACTION_CLASS);\n        }\n        this.renderModule.refreshDataManager();\n    };\n    /**\n     * To retrieve the appointment object from element.\n     *\n     * @function getEventDetails\n     * @param {Element} element Denotes the event UI element on the Schedule.\n     * @returns {Object} Returns the event details.\n     */\n    Schedule.prototype.getEventDetails = function (element) {\n        element = getElement(element);\n        var guid = element.getAttribute('data-guid');\n        if (guid) {\n            return this.eventBase.getEventByGuid(guid);\n        }\n        return {};\n    };\n    /**\n     * To check whether the given time range slots are available for event creation or already occupied by other events.\n     *\n     * @function isSlotAvailable\n     * @param {Date | Object} startTime Denotes the start time of the slot.\n     * @param {Date} endTime Denotes the end time of the slot.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {boolean} Returns true, if the slot that lies in the provided time range does not contain any other events.\n     */\n    Schedule.prototype.isSlotAvailable = function (startTime, endTime, groupIndex) {\n        var _this = this;\n        var eventStart;\n        var eventEnd;\n        var eventObj = this.activeEventData.event;\n        if (startTime instanceof Date || typeof (startTime) === 'string') {\n            eventStart = startTime;\n            eventEnd = endTime;\n        }\n        else {\n            eventObj = startTime;\n            eventStart = startTime[this.eventFields.startTime];\n            eventEnd = startTime[this.eventFields.endTime];\n            if (this.resourceBase) {\n                groupIndex = this.eventBase.getGroupIndexFromEvent(startTime);\n            }\n        }\n        if (isNullOrUndefined(eventStart) || isNullOrUndefined(eventEnd)) {\n            return true;\n        }\n        eventStart = this.getDateTime(eventStart);\n        eventEnd = this.getDateTime(eventEnd);\n        var eventCollection = this.eventBase.filterEvents(eventStart, eventEnd);\n        if (!isNullOrUndefined(groupIndex) && this.resourceBase && this.resourceBase.lastResourceLevel.length > 0) {\n            eventCollection = this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[groupIndex], eventCollection);\n        }\n        if (eventObj) {\n            if (eventObj.Guid) {\n                eventCollection = eventCollection.filter(function (event) { return event.Guid !== eventObj.Guid; });\n            }\n            else {\n                eventCollection = eventCollection.filter(function (event) {\n                    return event[_this.eventFields.id] !== eventObj[_this.eventFields.id];\n                });\n            }\n        }\n        return (eventCollection.length > 0) ? false : true;\n    };\n    /**\n     * To manually open the event editor on specific time or on certain events.\n     *\n     * @function openEditor\n     * @param {Object} data It can be either cell data or event data.\n     * @param {CurrentAction} action Defines the action for which the editor needs to be opened such as either for new event creation or\n     *  for editing of existing events. The applicable action names that can be used here are `Add`, `Save`, `EditOccurrence`\n     *  and `EditSeries`.\n     * @param {boolean} isEventData It allows to decide whether the editor needs to be opened with the clicked cell details or with the\n     *  passed event details.\n     * @param {number} repeatType It opens the editor with the recurrence options based on the provided repeat type.\n     * @returns {void}\n     */\n    Schedule.prototype.openEditor = function (data, action, isEventData, repeatType) {\n        if (action === 'Add' && !isEventData) {\n            data.startTime = this.getDateTime(data.startTime);\n            data.endTime = this.getDateTime(data.endTime);\n            if (!isNullOrUndefined(data.element)) {\n                data.element = getElement(data.element);\n            }\n        }\n        else {\n            data[this.eventFields.startTime] = this.getDateTime(data[this.eventFields.startTime]);\n            data[this.eventFields.endTime] = this.getDateTime(data[this.eventFields.endTime]);\n        }\n        this.currentAction = action;\n        if (action !== 'Add') {\n            this.activeEventData.event = data;\n        }\n        this.eventWindow.openEditor(data, action, isEventData, repeatType);\n    };\n    /**\n     * To manually close the event editor window\n     *\n     * @function closeEditor\n     * @returns {void}\n     */\n    Schedule.prototype.closeEditor = function () {\n        if (this.eventWindow) {\n            this.eventWindow.dialogClose();\n        }\n    };\n    /**\n     * To manually close the quick info popup\n     *\n     * @function closeQuickInfoPopup\n     * @returns {void}\n     */\n    Schedule.prototype.closeQuickInfoPopup = function () {\n        if (this.quickPopup) {\n            this.quickPopup.quickPopupHide(true);\n        }\n    };\n    /**\n     * Adds the resources to the specified index.\n     *\n     * @param {Object | Object[]} resources Accepts the resource data in single or collection of data.\n     * @param {string} name Name of the resource defined in resources collection.\n     * @param {number} index Index or position where the resource should be added.\n     * @returns {void}\n     */\n    Schedule.prototype.addResource = function (resources, name, index) {\n        this.resourceBase.addResource(resources, name, index);\n    };\n    /**\n     * Removes the specified resource.\n     *\n     * @param {string | string[] | number | number[]} resourceId Specifies the resource id to be removed.\n     * @param {string} name Specifies the resource name from which the id should be referred.\n     * @returns {void}\n     */\n    Schedule.prototype.removeResource = function (resourceId, name) {\n        this.resourceBase.removeResource(resourceId, name);\n    };\n    /**\n     * Destroys the Schedule component.\n     *\n     * @function destroy\n     * @returns {void}\n     */\n    Schedule.prototype.destroy = function () {\n        if (this.eventTooltip) {\n            this.eventTooltip.destroy();\n            this.eventTooltip = null;\n        }\n        this.destroyPopups();\n        this.unwireEvents();\n        this.destroyHeaderModule();\n        this.workCellAction.destroy();\n        this.inlineModule.destroy();\n        if (this.keyboardInteractionModule) {\n            this.keyboardInteractionModule.destroy();\n        }\n        if (this.scrollModule) {\n            this.scrollModule.destroy();\n            this.scrollModule = null;\n        }\n        if (this.activeView) {\n            this.resetTemplates();\n            this.activeView.removeEventListener();\n            this.activeView.destroy();\n            this.activeView = null;\n        }\n        if (this.scheduleTouchModule) {\n            this.scheduleTouchModule.destroy();\n            this.scheduleTouchModule = null;\n        }\n        _super.prototype.destroy.call(this);\n        util.removeChildren(this.element);\n        var removeClasses = [cls.ROOT];\n        if (this.cssClass) {\n            removeClasses = removeClasses.concat(this.cssClass.split(' '));\n        }\n        removeClass([this.element], removeClasses);\n    };\n    __decorate([\n        Property('auto')\n    ], Schedule.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], Schedule.prototype, \"height\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showHeaderBar\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showTimeIndicator\", void 0);\n    __decorate([\n        Property('Week')\n    ], Schedule.prototype, \"currentView\", void 0);\n    __decorate([\n        Property(['Day', 'Week', 'WorkWeek', 'Month', 'Agenda'])\n    ], Schedule.prototype, \"views\", void 0);\n    __decorate([\n        Property(new Date())\n    ], Schedule.prototype, \"selectedDate\", void 0);\n    __decorate([\n        Property(new Date(1900, 0, 1))\n    ], Schedule.prototype, \"minDate\", void 0);\n    __decorate([\n        Property(new Date(2099, 11, 31))\n    ], Schedule.prototype, \"maxDate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"dateFormat\", void 0);\n    __decorate([\n        Property('Gregorian')\n    ], Schedule.prototype, \"calendarMode\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showWeekend\", void 0);\n    __decorate([\n        Property(0)\n    ], Schedule.prototype, \"firstDayOfWeek\", void 0);\n    __decorate([\n        Property('FirstDay')\n    ], Schedule.prototype, \"weekRule\", void 0);\n    __decorate([\n        Property([1, 2, 3, 4, 5])\n    ], Schedule.prototype, \"workDays\", void 0);\n    __decorate([\n        Property('00:00')\n    ], Schedule.prototype, \"startHour\", void 0);\n    __decorate([\n        Property('24:00')\n    ], Schedule.prototype, \"endHour\", void 0);\n    __decorate([\n        Property(null)\n    ], Schedule.prototype, \"timeFormat\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Complex({}, WorkHours)\n    ], Schedule.prototype, \"workHours\", void 0);\n    __decorate([\n        Complex({}, TimeScale)\n    ], Schedule.prototype, \"timeScale\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowKeyboardInteraction\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowDragAndDrop\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"dateHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"cellHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"cellTemplate\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"readonly\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showQuickInfo\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"allowInline\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowMultiCellSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowMultiRowSelection\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"quickInfoOnSelectionEnd\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"showWeekNumber\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"rowAutoHeight\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"allowMultiDrag\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"editorTemplate\", void 0);\n    __decorate([\n        Complex({}, QuickInfoTemplates)\n    ], Schedule.prototype, \"quickInfoTemplates\", void 0);\n    __decorate([\n        Property(7)\n    ], Schedule.prototype, \"agendaDaysCount\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"hideEmptyAgendaDays\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"enableRecurrenceValidation\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"timezone\", void 0);\n    __decorate([\n        Complex({}, EventSettings)\n    ], Schedule.prototype, \"eventSettings\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"resourceHeaderTemplate\", void 0);\n    __decorate([\n        Complex({}, Group)\n    ], Schedule.prototype, \"group\", void 0);\n    __decorate([\n        Collection([], Resources)\n    ], Schedule.prototype, \"resources\", void 0);\n    __decorate([\n        Collection([], HeaderRows)\n    ], Schedule.prototype, \"headerRows\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"eventDragArea\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"cellClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"cellDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"moreEventsClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"hover\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"navigating\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"renderCell\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"eventClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"eventRendered\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dataBinding\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"popupOpen\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"popupClose\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dragStart\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"drag\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dragStop\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dataBound\", void 0);\n    Schedule = __decorate([\n        NotifyPropertyChanges\n    ], Schedule);\n    return Schedule;\n}(Component));\nexport { Schedule };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, createElement, extend, isNullOrUndefined, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { formatUnit, remove, removeClass } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Base class for the common drag and resize related actions\n */\nvar ActionBase = /** @class */ (function () {\n    function ActionBase(parent) {\n        this.daysVariation = 0;\n        this.parent = parent;\n        this.actionObj = {\n            X: 0, Y: 0, groupIndex: 0, cellWidth: 0, cellHeight: 0, slotInterval: 0, interval: 0, actionIndex: 0,\n            cloneElement: [], originalElement: [], action: null, isAllDay: null, excludeSelectors: null,\n            index: 0, navigationInterval: null, scrollInterval: null\n        };\n        this.scrollArgs = { element: null, width: 0, height: 0 };\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    }\n    ActionBase.prototype.getChangedData = function (multiData) {\n        var _this = this;\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n        eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n        if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n            eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var originalElement = this.getOriginalElement(this.actionObj.element);\n            if (originalElement) {\n                var indexCol_1 = originalElement.map(function (element) { return parseInt(element.getAttribute('data-group-index'), 10); });\n                if (indexCol_1.indexOf(this.actionObj.groupIndex) === -1 || (!isNullOrUndefined(multiData) && multiData.length > 0)) {\n                    var cloneIndex_1 = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n                    indexCol_1 = indexCol_1.filter(function (index) { return index !== cloneIndex_1; });\n                    indexCol_1.push(this.actionObj.groupIndex);\n                    if (multiData && multiData.length > 0) {\n                        multiData.forEach(function (data) {\n                            _this.parent.resourceBase.getResourceData(data, _this.actionObj.groupIndex, indexCol_1);\n                        });\n                    }\n                    else {\n                        this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol_1);\n                    }\n                }\n            }\n        }\n        return eventObj;\n    };\n    ActionBase.prototype.saveChangedData = function (eventArgs, isMultiSelect) {\n        if (isMultiSelect === void 0) { isMultiSelect = false; }\n        this.parent.activeEventData.event = this.actionObj.event;\n        this.parent.currentAction = 'Save';\n        var currentAction;\n        var eventsCollection = [eventArgs.data];\n        if (isMultiSelect) {\n            eventsCollection = eventArgs.selectedData;\n        }\n        for (var _i = 0, eventsCollection_1 = eventsCollection; _i < eventsCollection_1.length; _i++) {\n            var eventObj = eventsCollection_1[_i];\n            var isSameResource = (this.parent.activeViewOptions.group.resources.length > 0) ?\n                parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n            if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] &&\n                +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n                return;\n            }\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                var eveId = (eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id]);\n                if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n                    eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n                    currentAction = 'EditOccurrence';\n                }\n                if (this.parent.enableRecurrenceValidation\n                    && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                    return;\n                }\n            }\n            else {\n                currentAction = null;\n            }\n            if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n                this.parent.eventBase.timezoneConvert(eventObj);\n            }\n            this.parent.crudModule.saveEvent(eventObj, currentAction);\n        }\n    };\n    ActionBase.prototype.calculateIntervalTime = function (date) {\n        var intervalTime = new Date(+date);\n        intervalTime.setMinutes(Math.floor(intervalTime.getMinutes() / this.actionObj.interval) * this.actionObj.interval);\n        return intervalTime;\n    };\n    ActionBase.prototype.getContentAreaDimension = function () {\n        var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var trElement = [].slice.call(viewElement.querySelector('tr').children);\n        if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.isAdaptive) {\n            trElement = this.getResourceElements(trElement);\n        }\n        var leftOffset = trElement[0].getBoundingClientRect();\n        var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n        var viewDimension = {\n            bottom: viewElement.scrollHeight - 5,\n            left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n            right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n            top: 0\n        };\n        return viewDimension;\n    };\n    ActionBase.prototype.getPageCoordinates = function (e) {\n        var eventArgs = e.event;\n        return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] :\n            eventArgs || e;\n    };\n    ActionBase.prototype.getIndex = function (index) {\n        var contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n        var indexes = { minIndex: 0, maxIndex: contentElements.length - 1 };\n        if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n            var groupElements = this.getResourceElements(contentElements);\n            indexes.minIndex = groupElements[0].cellIndex;\n            indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n        }\n        if (index < indexes.minIndex) {\n            index = indexes.minIndex;\n        }\n        if (index > indexes.maxIndex) {\n            index = indexes.maxIndex;\n        }\n        return index;\n    };\n    ActionBase.prototype.updateTimePosition = function (date, multiData) {\n        var index = 0;\n        for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n            var cloneElement = _a[_i];\n            var timeElement = cloneElement.querySelector('.' + cls.APPOINTMENT_TIME);\n            if (timeElement) {\n                var startTime = this.actionObj.start;\n                var endTime = this.actionObj.end;\n                if (multiData && multiData.length > 0) {\n                    startTime = multiData[index][this.parent.eventFields.startTime];\n                    endTime = multiData[index][this.parent.eventFields.endTime];\n                }\n                timeElement.innerHTML = this.parent.getTimeString(startTime) + ' - ' +\n                    this.parent.getTimeString(endTime);\n            }\n            index++;\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' ||\n            this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (!timeIndicator) {\n            timeIndicator = createElement('div', { className: cls.CLONE_TIME_INDICATOR_CLASS });\n            var wrapperClass = this.parent.activeView.isTimelineView() ? cls.DATE_HEADER_WRAP_CLASS : cls.TIME_CELLS_WRAP_CLASS;\n            this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n        }\n        timeIndicator.innerHTML = this.parent.getTimeString(date);\n        var offsetValue = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (this.parent.enableRtl) {\n                var rightValue = parseInt(this.actionObj.clone.style.right, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    rightValue + this.actionObj.clone.offsetWidth : rightValue;\n                timeIndicator.style.right = formatUnit(offsetValue);\n            }\n            else {\n                var leftValue = parseInt(this.actionObj.clone.style.left, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    leftValue : leftValue + this.actionObj.clone.offsetWidth;\n                timeIndicator.style.left = formatUnit(offsetValue);\n            }\n        }\n        else {\n            offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop :\n                this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n            timeIndicator.style.top = formatUnit(offsetValue);\n        }\n    };\n    ActionBase.prototype.getResourceElements = function (table) {\n        var _this = this;\n        return table.filter(function (element) {\n            return parseInt(element.getAttribute('data-group-index'), 10) === _this.actionObj.groupIndex;\n        });\n    };\n    ActionBase.prototype.getOriginalElement = function (element) {\n        var originalElement;\n        var guid = element.getAttribute('data-guid');\n        var isMorePopup = element.offsetParent && element.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS);\n        if (isMorePopup || this.parent.activeView.isTimelineView()) {\n            originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n        }\n        else {\n            var tr = closest(element, 'tr');\n            if (tr) {\n                originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n            }\n        }\n        return originalElement;\n    };\n    ActionBase.prototype.createCloneElement = function (element) {\n        var cloneWrapper = createElement('div', { innerHTML: element.outerHTML });\n        var cloneElement = cloneWrapper.children[0];\n        var cloneClassLists = [cls.CLONE_ELEMENT_CLASS];\n        cloneClassLists.push((this.actionObj.action === 'drag') ? cls.DRAG_CLONE_CLASS : cls.RESIZE_CLONE_CLASS);\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n            cloneClassLists.push(cls.MONTH_CLONE_ELEMENT_CLASS);\n        }\n        addClass([cloneElement], cloneClassLists);\n        addClass([element], cls.EVENT_ACTION_CLASS);\n        if (!isNullOrUndefined(element.parentElement)) {\n            element.parentElement.appendChild(cloneElement);\n        }\n        cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n        if (this.parent.eventDragArea && this.actionObj.action === 'drag') {\n            document.querySelector(this.parent.eventDragArea).appendChild(cloneElement);\n        }\n        setStyleAttribute(cloneElement, { border: '0px' });\n        return cloneElement;\n    };\n    ActionBase.prototype.removeCloneElementClasses = function () {\n        var elements = this.actionObj.originalElement;\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.EVENT_ACTION_CLASS));\n        }\n        removeClass(elements, cls.EVENT_ACTION_CLASS);\n    };\n    ActionBase.prototype.removeCloneElement = function () {\n        this.actionObj.originalElement = [];\n        for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n            var cloneElement = _a[_i];\n            if (!isNullOrUndefined(cloneElement.parentNode)) {\n                remove(cloneElement);\n            }\n        }\n        this.actionObj.cloneElement = [];\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (timeIndicator) {\n            remove(timeIndicator);\n        }\n    };\n    ActionBase.prototype.getCursorElement = function (e) {\n        var pages = this.getPageCoordinates(e);\n        return document.elementFromPoint(pages.clientX, pages.clientY);\n    };\n    ActionBase.prototype.autoScroll = function () {\n        var parent = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n        var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n        var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n        var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n        if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n            parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n                    this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n        if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n            parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n                    this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n    };\n    ActionBase.prototype.autoScrollValidation = function () {\n        if (!this.actionObj.scroll.enable) {\n            return false;\n        }\n        var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n        this.scrollEdges = res;\n        return res.bottom || res.top || res.left || res.right;\n    };\n    ActionBase.prototype.actionClass = function (type) {\n        if (type === 'addClass') {\n            addClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n        else {\n            removeClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n    };\n    ActionBase.prototype.updateScrollPosition = function (e) {\n        var _this = this;\n        if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n            this.actionObj.scrollInterval = window.setInterval(function () {\n                if (_this.autoScrollValidation() && !_this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                    if (_this.parent.activeView.isTimelineView() && _this.parent.activeViewOptions.group.resources.length > 0\n                        && _this.actionObj.groupIndex < 0) {\n                        return;\n                    }\n                    _this.autoScroll();\n                    if (_this.actionObj.action === 'drag') {\n                        _this.parent.dragAndDropModule.updateDraggingDateTime(e);\n                    }\n                    else {\n                        _this.parent.resizeModule.updateResizingDirection(e);\n                    }\n                }\n            }, this.actionObj.scroll.timeDelay);\n        }\n    };\n    ActionBase.prototype.updateOriginalElement = function (cloneElement) {\n        var query = '[data-id=\"' + cloneElement.getAttribute('data-id') + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query.concat('[data-group-index = \"' + cloneElement.getAttribute('data-group-index') + '\"]');\n        }\n        var elements = [].slice.call(this.parent.element.querySelectorAll(query));\n        addClass(elements, cls.EVENT_ACTION_CLASS);\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n        removeClass(eventWrappers, cls.EVENT_ACTION_CLASS);\n    };\n    ActionBase.prototype.getUpdatedEvent = function (startTime, endTime, eventObj) {\n        var event = JSON.parse(JSON.stringify(eventObj));\n        event[this.parent.eventFields.startTime] = startTime;\n        event[this.parent.eventFields.endTime] = endTime;\n        return event;\n    };\n    ActionBase.prototype.dynamicYearlyEventsRendering = function (event, isResize) {\n        if (isResize === void 0) { isResize = false; }\n        var appWidth = this.actionObj.cellWidth - 7;\n        if (isResize && (this.resizeEdges.left || this.resizeEdges.right)) {\n            appWidth = this.actionObj.cellWidth * event.count;\n        }\n        if (!isResize && (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length === 0)) {\n            var month = event[this.parent.eventFields.startTime].getMonth();\n            var eventObj = this.yearEvent.isSpannedEvent(event, month);\n            if (eventObj[this.parent.eventFields.startTime].getTime() ===\n                eventObj[this.parent.eventFields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n        }\n        var appointmentElement = this.createAppointmentElement(this.actionObj.groupIndex, event[this.parent.eventFields.subject]);\n        appointmentElement.setAttribute('drag', 'true');\n        addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n        setStyleAttribute(appointmentElement, {\n            'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none',\n            'position': 'absolute', 'overflow': 'hidden', 'padding': '3px'\n        });\n        if (this.actionObj.clone.style.backgroundColor !== '') {\n            setStyleAttribute(appointmentElement, { 'backgroundColor': this.actionObj.clone.style.backgroundColor });\n        }\n        var date = util.resetTime(event[this.parent.eventFields.startTime]).getTime();\n        var query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"][data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n        }\n        var cellTd = this.parent.element.querySelector(query);\n        if (isNullOrUndefined(cellTd)) {\n            return;\n        }\n        if (isResize) {\n            var dateHeader = cellTd.querySelector('.' + cls.DATE_HEADER_CLASS);\n            var appHeight = this.actionObj.cellHeight * event.count -\n                (dateHeader ? dateHeader.offsetHeight : 0) - 7;\n            if (this.resizeEdges.right || this.resizeEdges.left) {\n                appHeight = parseInt(this.actionObj.clone.style.height, 10);\n            }\n            setStyleAttribute(appointmentElement, { 'height': appHeight + 'px' });\n        }\n        this.renderDynamicElement(cellTd, appointmentElement, true);\n        this.actionObj.cloneElement.push(appointmentElement);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ActionBase.prototype.renderDynamicElement = function (cellTd, element, isAppointment) {\n        if (isAppointment === void 0) { isAppointment = false; }\n        if (cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS)) {\n            cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    };\n    ActionBase.prototype.createAppointmentElement = function (resIndex, innerText) {\n        var appointmentWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            innerHTML: innerText\n        });\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        return appointmentWrapper;\n    };\n    ActionBase.prototype.dynamicEventsRendering = function (event) {\n        var _this = this;\n        var dateRender = this.parent.activeView.renderDates;\n        var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        var workDays = this.parent.activeViewOptions.workDays;\n        var groupOrder;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resources = this.parent.resourceBase.lastResourceLevel.\n                filter(function (res) { return res.groupIndex === _this.actionObj.groupIndex; });\n            dateRender = resources[0].renderDates;\n            var elementSelector = \".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + this.actionObj.groupIndex + \"\\\"]\";\n            workCells = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n            workDays = resources[0].workDays;\n            groupOrder = resources[0].groupOrder;\n        }\n        this.monthEvent.dateRender = dateRender;\n        this.monthEvent.getSlotDates(workDays);\n        if (this.resizeEdges.left || this.resizeEdges.right) {\n            var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n            for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n                var wrapper = eventWrappers_1[_i];\n                remove(wrapper);\n            }\n        }\n        var splittedEvents = this.monthEvent.splitEvent(event, dateRender);\n        for (var _a = 0, splittedEvents_1 = splittedEvents; _a < splittedEvents_1.length; _a++) {\n            var event_1 = splittedEvents_1[_a];\n            var day = this.parent.getIndexOfDate(dateRender, util.resetTime(event_1[this.monthEvent.fields.startTime]));\n            var diffInDays = event_1.data.count;\n            var appWidth = (diffInDays * this.actionObj.cellWidth) - 7;\n            var appointmentElement = this.monthEvent.createAppointmentElement(event_1, this.actionObj.groupIndex, true);\n            appointmentElement.setAttribute('drag', 'true');\n            addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n            this.monthEvent.applyResourceColor(appointmentElement, event_1, 'backgroundColor', groupOrder);\n            setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none' });\n            var cellTd = workCells[day];\n            if (cellTd) {\n                this.monthEvent.renderElement(cellTd, appointmentElement, true);\n                this.actionObj.cloneElement.push(appointmentElement);\n            }\n        }\n    };\n    ActionBase.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.actionObj = {};\n        this.scrollArgs = {};\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    };\n    return ActionBase;\n}());\nexport { ActionBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, Browser, EventHandler, remove, closest, extend, formatUnit, setStyleAttribute, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ActionBase } from '../actions/action-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Schedule events resize actions\n */\nvar Resize = /** @class */ (function (_super) {\n    __extends(Resize, _super);\n    function Resize() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Resize.prototype.wireResizeEvent = function (element) {\n        var resizeElement = [].slice.call(element.querySelectorAll('.' + cls.EVENT_RESIZE_CLASS));\n        for (var _i = 0, resizeElement_1 = resizeElement; _i < resizeElement_1.length; _i++) {\n            var element_1 = resizeElement_1[_i];\n            EventHandler.add(element_1, Browser.touchStartEvent, this.resizeStart, this);\n        }\n    };\n    Resize.prototype.resizeHelper = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.allowGroupEdit) {\n            for (var i = 0, len = this.actionObj.originalElement.length; i < len; i++) {\n                var cloneElement = this.createCloneElement(this.actionObj.originalElement[i]);\n                this.actionObj.cloneElement[i] = cloneElement;\n                if (this.actionObj.element === this.actionObj.originalElement[i]) {\n                    this.actionObj.clone = cloneElement;\n                }\n            }\n        }\n        else {\n            this.actionObj.clone = this.createCloneElement(this.actionObj.element);\n            this.actionObj.cloneElement = [this.actionObj.clone];\n            this.actionObj.originalElement = [this.actionObj.element];\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        var _this = this;\n        this.actionObj.action = 'resize';\n        this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        this.actionObj.interval = this.actionObj.slotInterval;\n        var resizeTarget = closest(e.target, '.' + cls.EVENT_RESIZE_CLASS);\n        this.actionObj.element = closest(resizeTarget, '.' + cls.APPOINTMENT_CLASS);\n        this.actionObj.event = this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute('data-guid'));\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            interval: this.actionObj.interval,\n            scroll: { enable: true, scrollBy: 30, timeDelay: 100 }\n        };\n        this.parent.trigger(event.resizeStart, resizeArgs, function (resizeEventArgs) {\n            if (resizeEventArgs.cancel) {\n                return;\n            }\n            _this.actionClass('addClass');\n            _this.parent.uiStateValues.action = true;\n            _this.resizeEdges = {\n                left: resizeTarget.classList.contains(cls.LEFT_RESIZE_HANDLER),\n                right: resizeTarget.classList.contains(cls.RIGHT_RESIZE_HANDLER),\n                top: resizeTarget.classList.contains(cls.TOP_RESIZE_HANDLER),\n                bottom: resizeTarget.classList.contains(cls.BOTTOM_RESIZE_HANDLER)\n            };\n            _this.actionObj.groupIndex = _this.parent.uiStateValues.isGroupAdaptive ? _this.parent.uiStateValues.groupIndex : 0;\n            var workCell = _this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n            _this.actionObj.cellWidth = workCell.offsetWidth;\n            _this.actionObj.cellHeight = workCell.offsetHeight;\n            var hRows = _this.parent.activeViewOptions.headerRows.map(function (row) { return row.option; });\n            if (_this.parent.activeView.isTimelineView() && hRows.length > 0 && ['Date', 'Hour'].indexOf(hRows.slice(-1)[0]) < 0) {\n                var tr = _this.parent.getContentTable().querySelector('tr');\n                var noOfDays = 0;\n                var tdCollections = [].slice.call(tr.children);\n                for (var _i = 0, tdCollections_1 = tdCollections; _i < tdCollections_1.length; _i++) {\n                    var td = tdCollections_1[_i];\n                    noOfDays += parseInt(td.getAttribute('colspan'), 10);\n                }\n                _this.actionObj.cellWidth = tr.offsetWidth / noOfDays;\n                _this.actionObj.cellHeight = tr.offsetHeight;\n            }\n            var pages = _this.getPageCoordinates(e);\n            _this.actionObj.X = pages.pageX;\n            _this.actionObj.Y = pages.pageY;\n            _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n            _this.actionObj.interval = resizeEventArgs.interval;\n            _this.actionObj.scroll = resizeEventArgs.scroll;\n            _this.actionObj.start = new Date(eventObj[_this.parent.eventFields.startTime].getTime());\n            _this.actionObj.end = new Date(eventObj[_this.parent.eventFields.endTime].getTime());\n            _this.actionObj.originalElement = _this.getOriginalElement(_this.actionObj.element);\n            if (_this.parent.currentView === 'Month') {\n                _this.daysVariation = -1;\n                _this.monthEvent = new MonthEvent(_this.parent);\n            }\n            var viewElement = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            _this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };\n            EventHandler.add(document, Browser.touchMoveEvent, _this.resizing, _this);\n            EventHandler.add(document, Browser.touchEndEvent, _this.resizeStop, _this);\n        });\n    };\n    Resize.prototype.resizing = function (e) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        if (this.parent.element.querySelectorAll('.' + cls.RESIZE_CLONE_CLASS).length === 0) {\n            this.resizeHelper();\n        }\n        if ((!isNullOrUndefined(e.target)) && e.target.classList.contains(cls.DISABLE_DATES)) {\n            return;\n        }\n        var pages = this.getPageCoordinates(e);\n        this.actionObj.pageX = pages.pageX;\n        this.actionObj.pageY = pages.pageY;\n        this.updateScrollPosition(e);\n        this.updateResizingDirection(e);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            startTime: this.actionObj.start,\n            endTime: this.actionObj.end\n        };\n        if (this.parent.group.resources.length > 0) {\n            resizeArgs.groupIndex = this.actionObj.groupIndex;\n        }\n        this.parent.trigger(event.resizing, resizeArgs);\n    };\n    Resize.prototype.updateResizingDirection = function (e) {\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n            this.monthResizing();\n            return;\n        }\n        var resizeValidation = this.resizeValidation(e);\n        if (this.resizeEdges.left) {\n            if (resizeValidation) {\n                var leftStyles = this.getLeftRightStyles(e, true);\n                if (parseInt(leftStyles.width, 10) < 1) {\n                    return;\n                }\n                for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n                    var cloneElement = _a[_i];\n                    setStyleAttribute(cloneElement, leftStyles);\n                    addClass([cloneElement], cls.LEFT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(!this.parent.enableRtl);\n        }\n        if (this.resizeEdges.right) {\n            if (resizeValidation) {\n                var rightStyles = this.getLeftRightStyles(e, false);\n                if (parseInt(rightStyles.width, 10) < 1) {\n                    return;\n                }\n                for (var _b = 0, _c = this.actionObj.cloneElement; _b < _c.length; _b++) {\n                    var cloneElement = _c[_b];\n                    setStyleAttribute(cloneElement, rightStyles);\n                    addClass([cloneElement], cls.RIGHT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(this.parent.enableRtl);\n        }\n        if (this.resizeEdges.top) {\n            if (resizeValidation) {\n                var topStyles = this.getTopBottomStyles(e, true);\n                if (parseInt(topStyles.height, 10) < 1) {\n                    return;\n                }\n                for (var _d = 0, _e = this.actionObj.cloneElement; _d < _e.length; _d++) {\n                    var cloneElement = _e[_d];\n                    setStyleAttribute(cloneElement, topStyles);\n                    addClass([cloneElement], cls.TOP_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(true);\n        }\n        if (this.resizeEdges.bottom) {\n            if (resizeValidation) {\n                var bottomStyles = this.getTopBottomStyles(e, false);\n                if (parseInt(bottomStyles.height, 10) < 1) {\n                    return;\n                }\n                for (var _f = 0, _g = this.actionObj.cloneElement; _f < _g.length; _f++) {\n                    var cloneElement = _g[_f];\n                    setStyleAttribute(cloneElement, bottomStyles);\n                    addClass([cloneElement], cls.BOTTOM_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(false);\n        }\n    };\n    Resize.prototype.monthResizing = function () {\n        this.removeCloneElement();\n        var td = document.elementFromPoint(this.actionObj.pageX, this.actionObj.pageY);\n        if (isNullOrUndefined(td)) {\n            return;\n        }\n        var resizeTime = this.parent.getDateFromElement(td);\n        var isSameCell = this.parent.activeViewOptions.group.resources.length > 0 ?\n            parseInt(td.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n        var startTime = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n        var endTime = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n        if ((!this.parent.enableRtl && this.resizeEdges.left) || (this.parent.enableRtl && this.resizeEdges.right)\n            || this.resizeEdges.top) {\n            startTime = resizeTime;\n        }\n        else if ((!this.parent.enableRtl && this.resizeEdges.right) || (this.parent.enableRtl && this.resizeEdges.left)\n            || this.resizeEdges.bottom) {\n            endTime = util.addDays(resizeTime, 1);\n        }\n        if (isSameCell && startTime < endTime) {\n            this.actionObj.start = startTime;\n            this.actionObj.end = endTime;\n            var event_1 = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n            if (this.parent.currentView === 'TimelineYear') {\n                this.yearEventsRendering(event_1);\n            }\n            else {\n                this.dynamicEventsRendering(event_1);\n            }\n            this.updateOriginalElement(this.actionObj.clone);\n        }\n    };\n    Resize.prototype.yearEventsRendering = function (event) {\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        var endDate = new Date(event[this.parent.eventFields.endTime]);\n        var monthDiff = 0;\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            monthDiff = this.getMonthDiff(event[this.parent.eventFields.startTime], util.addDays(endDate, -1));\n        }\n        for (var i = 0; i <= monthDiff; i++) {\n            var eventObj = void 0;\n            if (this.parent.activeViewOptions.group.resources.length === 0) {\n                eventObj = this.getEventCount(event, this.actionObj.start.getMonth() + i);\n            }\n            else {\n                eventObj = extend({}, event, null, true);\n                endDate = this.resizeEdges.left || this.resizeEdges.right ? util.addDays(endDate, -1) : endDate;\n                eventObj.count = this.getMonthDiff(event[this.parent.eventFields.startTime], endDate) + 1;\n            }\n            this.dynamicYearlyEventsRendering(eventObj, true);\n        }\n    };\n    Resize.prototype.getMonthDiff = function (startDate, endDate) {\n        var months;\n        months = (endDate.getFullYear() - startDate.getFullYear()) * 12;\n        months -= startDate.getMonth();\n        months += endDate.getMonth();\n        return months <= 0 ? 0 : months;\n    };\n    Resize.prototype.getEventCount = function (eventObj, month) {\n        var eventData = extend({}, eventObj, null, true);\n        var eventStart = eventData[this.parent.eventFields.startTime];\n        var eventEnd = eventData[this.parent.eventFields.endTime];\n        var monthStart = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n        var monthEnd = util.addDays(new Date(this.parent.selectedDate.getFullYear(), month + 1, 0), 1);\n        var count = 1;\n        if (eventStart.getTime() < monthStart.getTime()) {\n            eventData[this.parent.eventFields.startTime] = monthStart;\n        }\n        if (eventEnd.getTime() > monthEnd.getTime()) {\n            eventData[this.parent.eventFields.endTime] = monthEnd;\n        }\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            count = Math.ceil((eventData[this.parent.eventFields.endTime].getTime() -\n                eventData[this.parent.eventFields.startTime].getTime()) / util.MS_PER_DAY);\n        }\n        eventData.count = count;\n        return eventData;\n    };\n    Resize.prototype.resizeStop = function (e) {\n        var _this = this;\n        EventHandler.remove(document, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeStop);\n        clearInterval(this.actionObj.scrollInterval);\n        this.actionObj.scrollInterval = null;\n        this.removeCloneElementClasses();\n        this.removeCloneElement();\n        this.actionClass('removeClass');\n        this.parent.uiStateValues.action = false;\n        var resizeArgs = { cancel: false, data: this.getChangedData(), element: this.actionObj.element, event: e };\n        this.parent.trigger(event.resizeStop, resizeArgs, function (resizeEventArgs) {\n            if (resizeEventArgs.cancel) {\n                return;\n            }\n            if (_this.parent.activeViewOptions.group.resources.length > 0 && !_this.parent.rowAutoHeight\n                && !_this.parent.activeViewOptions.group.allowGroupEdit && !_this.parent.virtualScrollModule\n                && _this.parent.activeViewOptions.group.byGroupID) {\n                _this.parent.crudModule.crudObj.sourceEvent =\n                    [_this.parent.resourceBase.lastResourceLevel[parseInt(resizeEventArgs.element.getAttribute('data-group-index'), 10)]];\n                _this.parent.crudModule.crudObj.targetEvent = _this.parent.crudModule.crudObj.sourceEvent;\n                _this.parent.crudModule.crudObj.isCrudAction = true;\n            }\n            _this.saveChangedData(resizeEventArgs);\n        });\n    };\n    Resize.prototype.verticalResizing = function (isTop) {\n        var offsetValue = this.actionObj.clone.offsetTop;\n        if (!isTop) {\n            offsetValue += this.actionObj.clone.offsetHeight;\n        }\n        var minutes = (offsetValue / this.actionObj.cellHeight) * this.actionObj.slotInterval;\n        var element = this.actionObj.clone.offsetParent;\n        if (isNullOrUndefined(element)) {\n            return;\n        }\n        var resizeTime = util.resetTime(this.parent.getDateFromElement(element));\n        resizeTime.setHours(this.parent.activeView.getStartHour().getHours());\n        resizeTime.setMinutes(minutes + this.parent.activeView.getStartHour().getMinutes());\n        if (isTop) {\n            this.actionObj.start = this.calculateIntervalTime(resizeTime);\n        }\n        else {\n            this.actionObj.end = this.calculateIntervalTime(resizeTime);\n        }\n        this.updateTimePosition(resizeTime);\n    };\n    Resize.prototype.horizontalResizing = function (isLeft) {\n        var eventStart = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n        var eventEnd = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n        var resizeTime;\n        if (this.parent.activeView.isTimelineView()) {\n            var tr = this.parent.getContentTable().querySelector('tr');\n            var headerName = this.parent.currentView;\n            if (this.parent.activeViewOptions.headerRows.length > 0) {\n                var rows = this.parent.activeViewOptions.headerRows.map(function (row) { return row.option; });\n                headerName = rows.slice(-1)[0];\n                if (this.parent.currentView === 'TimelineMonth' && headerName === 'Hour') {\n                    headerName = rows.slice(-2)[0] || 'Month';\n                }\n            }\n            resizeTime = isLeft ? eventStart : eventEnd;\n            var cellIndex = 0;\n            var tdCollections = [].slice.call(tr.children);\n            var isLastCell = false;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                var noOfDays = 0;\n                for (var _i = 0, tdCollections_2 = tdCollections; _i < tdCollections_2.length; _i++) {\n                    var td = tdCollections_2[_i];\n                    noOfDays += parseInt(td.getAttribute('colspan'), 10);\n                }\n                var offsetValue = this.parent.enableRtl ? parseInt(this.actionObj.clone.style.right, 10) :\n                    parseInt(this.actionObj.clone.style.left, 10);\n                if (!isLeft) {\n                    offsetValue += (this.actionObj.clone.offsetWidth - this.actionObj.cellWidth);\n                }\n                cellIndex = Math.floor(offsetValue / Math.floor(tr.offsetWidth / noOfDays));\n                cellIndex = isLeft ? cellIndex : this.parent.currentView === 'TimelineMonth' ? cellIndex + 1 : cellIndex;\n                isLastCell = cellIndex === tdCollections.length;\n                cellIndex = (cellIndex < 0) ? 0 : (cellIndex >= noOfDays) ? noOfDays - 1 : cellIndex;\n            }\n            else {\n                var cellWidth = this.actionObj.cellWidth;\n                cellIndex = isLeft ? Math.floor(this.actionObj.clone.offsetLeft / this.actionObj.cellWidth) :\n                    Math.ceil((this.actionObj.clone.offsetLeft + (this.actionObj.clone.offsetWidth - cellWidth)) /\n                        this.actionObj.cellWidth);\n                if (this.parent.enableRtl) {\n                    var cellOffsetWidth = 0;\n                    if (headerName === 'TimelineMonth' || (!this.parent.activeViewOptions.timeScale.enable &&\n                        this.parent.currentView !== 'TimelineMonth')) {\n                        cellOffsetWidth = this.actionObj.cellWidth;\n                    }\n                    var offsetWidth = (Math.floor(parseInt(this.actionObj.clone.style.right, 10) / this.actionObj.cellWidth) *\n                        this.actionObj.cellWidth) + (isLeft ? 0 : this.actionObj.clone.offsetWidth - cellOffsetWidth);\n                    cellIndex = Math.floor(offsetWidth / this.actionObj.cellWidth);\n                }\n                isLastCell = cellIndex === tdCollections.length;\n                cellIndex = this.getIndex(cellIndex);\n            }\n            var resizeDate = void 0;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                resizeDate = new Date(this.parent.activeView.renderDates[cellIndex].getTime());\n            }\n            else {\n                resizeDate = this.parent.getDateFromElement(tr.children[cellIndex]);\n            }\n            if (['TimelineMonth', 'Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1 ||\n                !this.parent.activeViewOptions.timeScale.enable) {\n                resizeTime = new Date(resizeDate.setHours(resizeTime.getHours(), resizeTime.getMinutes(), resizeTime.getSeconds()));\n            }\n            else {\n                var offsetValue = this.parent.enableRtl ? parseFloat(this.actionObj.clone.style.right) :\n                    parseFloat(this.actionObj.clone.style.left);\n                if (!isLeft) {\n                    offsetValue += this.actionObj.clone.offsetWidth;\n                }\n                var spanMinutes = Math.ceil((this.actionObj.slotInterval / this.actionObj.cellWidth) *\n                    (offsetValue - Math.floor(offsetValue / this.actionObj.cellWidth) * this.actionObj.cellWidth));\n                spanMinutes = (isLastCell || (!isLeft && spanMinutes === 0)) ? this.actionObj.slotInterval : spanMinutes;\n                resizeTime = new Date(resizeDate.getTime());\n                resizeTime.setMinutes(resizeTime.getMinutes() + spanMinutes);\n                this.updateTimePosition(resizeTime);\n            }\n        }\n        else {\n            var cloneIndex = closest(this.actionObj.clone, 'td').cellIndex;\n            var originalWidth = Math.ceil((isLeft ? this.actionObj.element.offsetWidth : 0) / this.actionObj.cellWidth) *\n                this.actionObj.cellWidth;\n            var noOfDays = Math.ceil((this.actionObj.clone.offsetWidth - originalWidth) / this.actionObj.cellWidth);\n            var tr = closest(this.actionObj.clone, 'tr');\n            var dayIndex = isLeft ? cloneIndex - noOfDays : cloneIndex + noOfDays - 1;\n            dayIndex = this.getIndex(dayIndex);\n            resizeTime = this.parent.getDateFromElement(tr.children[dayIndex]);\n            if (isLeft) {\n                resizeTime.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n            }\n            else {\n                resizeTime.setHours(eventEnd.getHours(), eventEnd.getMinutes(), eventEnd.getSeconds());\n            }\n        }\n        if (isLeft) {\n            if ((this.actionObj.event[this.parent.eventFields.endTime].getTime() - resizeTime.getTime()) <= 0) {\n                resizeTime = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n            }\n            this.actionObj.start = this.parent.activeViewOptions.timeScale.enable ? this.calculateIntervalTime(resizeTime) : resizeTime;\n        }\n        else {\n            var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 &&\n                this.parent.activeViewOptions.timeScale.enable;\n            var resizeEnd = (!isTimeViews && resizeTime.getHours() === 0 && resizeTime.getMinutes() === 0) ?\n                util.addDays(resizeTime, 1) : resizeTime;\n            this.actionObj.end = this.parent.activeViewOptions.timeScale.enable && this.parent.currentView !== 'Month' ?\n                this.calculateIntervalTime(resizeEnd) : resizeEnd;\n        }\n    };\n    Resize.prototype.getTopBottomStyles = function (e, isTop) {\n        var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var slotInterval = (this.actionObj.cellHeight / this.actionObj.slotInterval) * this.actionObj.interval;\n        var clnHeight = isTop ? this.actionObj.element.offsetHeight + (this.actionObj.Y - this.actionObj.pageY) :\n            this.actionObj.element.offsetHeight + (this.actionObj.pageY - this.actionObj.Y);\n        var clnTop = isTop ? this.actionObj.element.offsetTop -\n            (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.clone.offsetTop;\n        clnHeight = (clnTop < 0) ? this.actionObj.clone.offsetHeight :\n            (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) > this.scrollArgs.height ?\n                this.actionObj.clone.offsetHeight : clnHeight;\n        clnTop = (clnTop < 0) ? 0 : clnTop;\n        clnTop = isTop ? Math.floor(clnTop / slotInterval) * slotInterval : clnTop;\n        clnHeight = clnTop + clnHeight >= viewElement.scrollHeight ? viewElement.scrollHeight - clnTop :\n            Math.ceil(clnHeight / slotInterval) * slotInterval;\n        var styles = {\n            height: formatUnit(clnHeight < this.actionObj.cellHeight ? Math.floor(clnHeight / slotInterval) * slotInterval : clnHeight),\n            top: formatUnit((clnHeight < this.actionObj.cellHeight && isTop) ? Math.ceil(clnTop / slotInterval) * slotInterval : clnTop),\n            left: '0px', right: '0px', width: '100%'\n        };\n        return styles;\n    };\n    Resize.prototype.getLeftRightStyles = function (e, isLeft) {\n        var styles = {};\n        var isTimelineView = this.parent.activeView.isTimelineView();\n        var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 &&\n            this.parent.activeViewOptions.timeScale.enable;\n        var slotInterval = (this.actionObj.cellWidth / this.actionObj.slotInterval) * this.actionObj.interval;\n        var pageWidth = isLeft ? (this.actionObj.X - this.actionObj.pageX) : (this.actionObj.pageX - this.actionObj.X);\n        var targetWidth = isTimelineView ?\n            (this.actionObj.element.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n            this.parent.currentView === 'Month' ? this.actionObj.element.offsetWidth :\n                Math.ceil(this.actionObj.element.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n        var offsetWidth = targetWidth + (Math.ceil(pageWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth);\n        if (isTimeViews) {\n            offsetWidth = targetWidth + (isLeft ? (Math.ceil(pageWidth / slotInterval) * slotInterval) :\n                (Math.floor(pageWidth / slotInterval) * slotInterval));\n            this.actionObj.event[this.parent.eventFields.isAllDay] = false;\n        }\n        var width = !isLeft && ((offsetWidth + this.actionObj.clone.offsetLeft > this.scrollArgs.width)) ?\n            this.actionObj.clone.offsetWidth : (offsetWidth < this.actionObj.cellWidth) ? offsetWidth : offsetWidth;\n        if (this.parent.enableRtl) {\n            var rightValue = isTimelineView ? parseInt(this.actionObj.element.style.right, 10) :\n                -(offsetWidth - this.actionObj.cellWidth);\n            rightValue = isTimelineView ? rightValue : isLeft ? 0 : rightValue > 0 ? 0 : rightValue;\n            if (isTimelineView && !isLeft) {\n                rightValue = Math.ceil((this.actionObj.element.offsetLeft + (this.actionObj.element.offsetWidth +\n                    (this.actionObj.pageX - this.actionObj.X))) / slotInterval) * slotInterval;\n                rightValue = rightValue < 0 ? Math.abs(rightValue) : -rightValue;\n            }\n            rightValue = rightValue >= this.scrollArgs.width ? this.scrollArgs.width - this.actionObj.cellWidth : rightValue;\n            styles.right = formatUnit(rightValue);\n            width = width + rightValue > this.scrollArgs.width ? this.actionObj.clone.offsetWidth : width;\n        }\n        else {\n            var offsetLeft = isLeft ? this.actionObj.element.offsetLeft - (this.actionObj.X - this.actionObj.pageX) :\n                this.parent.enableRtl ? this.actionObj.element.offsetLeft : 0;\n            if (isTimelineView) {\n                offsetLeft = isLeft ? offsetLeft : parseInt(this.actionObj.clone.style.left, 10);\n                if (this.parent.enableRtl) {\n                    offsetLeft = !isLeft ? (this.actionObj.pageX < this.actionObj.X - this.actionObj.clone.offsetWidth) ?\n                        parseInt(this.actionObj.clone.style.right, 10) : offsetLeft : offsetLeft;\n                }\n                else {\n                    offsetLeft = isLeft ? (this.actionObj.pageX > this.actionObj.X + this.actionObj.clone.offsetWidth &&\n                        this.actionObj.clone.offsetWidth === this.actionObj.cellWidth) ?\n                        parseInt(this.actionObj.clone.style.left, 10) : offsetLeft : offsetLeft;\n                }\n            }\n            var leftValue = offsetLeft;\n            offsetLeft = isTimelineView ? isTimeViews ? isLeft ? Math.floor(offsetLeft / slotInterval) * slotInterval : offsetLeft :\n                Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n                Math.ceil(Math.abs(offsetLeft) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            if (offsetLeft < 0) {\n                offsetLeft = 0;\n                width = this.actionObj.clone.offsetWidth;\n            }\n            var cloneWidth = Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            if (isLeft) {\n                styles.left = formatUnit(isTimelineView ? offsetLeft : isLeft ? leftValue < 0 ? -offsetLeft :\n                    (Math.ceil((targetWidth - cloneWidth) / this.actionObj.cellWidth) * this.actionObj.cellWidth) : offsetLeft);\n            }\n        }\n        styles.width = formatUnit(width);\n        return styles;\n    };\n    Resize.prototype.resizeValidation = function (e) {\n        var pages = this.getPageCoordinates(e);\n        var viewDimension = this.getContentAreaDimension();\n        var resizeValidation = false;\n        if (this.resizeEdges.left) {\n            resizeValidation = (pages.pageX - this.actionObj.cellWidth) >= viewDimension.left;\n        }\n        if (this.resizeEdges.right) {\n            resizeValidation = (pages.pageX + this.actionObj.cellWidth) <= viewDimension.right;\n        }\n        if (this.resizeEdges.top) {\n            resizeValidation = this.actionObj.clone.offsetTop >= viewDimension.top;\n        }\n        if (this.resizeEdges.bottom) {\n            resizeValidation = (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) <= this.scrollArgs.height;\n        }\n        return resizeValidation;\n    };\n    /**\n     * Get module name\n     *\n     * @returns {string} Returns the module name..\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    return Resize;\n}(ActionBase));\nexport { Resize };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, append, createElement, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, EventHandler } from '@syncfusion/ej2-base';\nimport { TimelineEvent } from './timeline-view';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nvar EVENT_GAP = 2;\n/**\n * Year view events render\n */\nvar YearEvent = /** @class */ (function (_super) {\n    __extends(YearEvent, _super);\n    function YearEvent(parent) {\n        var _this = _super.call(this, parent, 'day') || this;\n        _this.isResource = false;\n        return _this;\n    }\n    YearEvent.prototype.renderAppointments = function () {\n        this.fields = this.parent.eventFields;\n        var elementSelector = (this.parent.currentView === 'Year') ? '.' + cls.APPOINTMENT_CLASS :\n            '.' + cls.APPOINTMENT_WRAPPER_CLASS + ',.' + cls.MORE_INDICATOR_CLASS;\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        this.renderedEvents = [];\n        if (this.parent.currentView === 'Year') {\n            this.yearViewEvents();\n        }\n        else {\n            this.removeCellHeight();\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                this.isResource = true;\n                this.timelineResourceEvents();\n            }\n            else {\n                this.timelineYearViewEvents();\n            }\n        }\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n    };\n    YearEvent.prototype.yearViewEvents = function () {\n        for (var month = 0; month < 12; month++) {\n            var queryString = \".e-month-calendar:nth-child(\" + (month + 1) + \") td.e-work-cells\";\n            var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, this.parent.selectedDate.getDate());\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            var startDate = util.getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\n            var endDate = util.addDays(util.getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\n            for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n                var start = util.resetTime(new Date(startDate.getTime()));\n                var end = util.addDays(new Date(start.getTime()), 1);\n                var filterEvents = this.parent.eventBase.filterEvents(start, end);\n                if (filterEvents.length > 0) {\n                    var workCell = workCells[index];\n                    if (workCell) {\n                        workCell.appendChild(createElement('div', { className: cls.APPOINTMENT_CLASS }));\n                    }\n                }\n                startDate = util.addDays(new Date(startDate.getTime()), 1);\n            }\n        }\n    };\n    YearEvent.prototype.timelineYearViewEvents = function () {\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.cellWidth = workCell.offsetWidth;\n        this.cellHeader = util.getOuterHeight(workCell.querySelector('.' + cls.DATE_HEADER_CLASS));\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        for (var row = 0; row < 12; row++) {\n            var wrapper = wrapperCollection[row];\n            var td = row + 1;\n            var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(eventWrapper);\n            var monthStart = new Date(this.parent.selectedDate.getFullYear(), row, 1);\n            var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n            var dayIndex = monthStart.getDay();\n            var isSpannedCollection = [];\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                this.renderedEvents = [];\n            }\n            while (monthStart.getTime() <= monthEnd.getTime()) {\n                var leftValue = void 0;\n                var rightValue = void 0;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    var wrapper_1 = wrapperCollection[dayIndex];\n                    td = dayIndex + 1;\n                    var eventWrapper_1 = wrapper_1.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n                    if (!eventWrapper_1) {\n                        eventWrapper_1 = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                        wrapper_1.appendChild(eventWrapper_1);\n                    }\n                    if (this.parent.enableRtl) {\n                        rightValue = row * this.cellWidth;\n                    }\n                    else {\n                        leftValue = row * this.cellWidth;\n                    }\n                }\n                else {\n                    if (this.parent.enableRtl) {\n                        rightValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                    else {\n                        leftValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                }\n                var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n                this.cellHeight = rowTd.offsetHeight;\n                var dayStart = util.resetTime(new Date(monthStart.getTime()));\n                var dayEnd = util.addDays(new Date(dayStart.getTime()), 1);\n                var resource = void 0;\n                if (this.parent.uiStateValues.isGroupAdaptive) {\n                    resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                }\n                var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n                var _loop_1 = function (index, count) {\n                    var eventData = extend({}, dayEvents[index], null, true);\n                    this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n                    var overlapIndex = this_1.getIndex(dayStart);\n                    eventData.Index = overlapIndex;\n                    var availedHeight = this_1.cellHeader + (this_1.eventHeight * (index + 1)) + EVENT_GAP + this_1.moreIndicatorHeight;\n                    if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                        var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        var isSpanned = isSpannedCollection.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        if (isRendered.length > 0 || isSpanned.length > 0) {\n                            return \"continue\";\n                        }\n                    }\n                    var isRowAutoHeight = this_1.parent.rowAutoHeight && this_1.parent.activeViewOptions.orientation === 'Horizontal';\n                    if (isRowAutoHeight || this_1.cellHeight > availedHeight) {\n                        this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, dayIndex);\n                        this_1.updateCellHeight(rowTd, availedHeight);\n                        isSpannedCollection.push(eventData);\n                    }\n                    else {\n                        var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                        this_1.renderMoreIndicatior(eventWrapper, count - index, dayStart, moreIndex, leftValue, rightValue);\n                        if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                            for (var a = index; a < dayEvents.length; a++) {\n                                var moreData = extend({}, dayEvents[a], { Index: overlapIndex + a }, true);\n                                this_1.renderedEvents.push(moreData);\n                                isSpannedCollection.push(eventData);\n                            }\n                        }\n                        return \"break\";\n                    }\n                };\n                var this_1 = this;\n                for (var index = 0, count = dayEvents.length; index < count; index++) {\n                    var state_1 = _loop_1(index, count);\n                    if (state_1 === \"break\")\n                        break;\n                }\n                monthStart = util.addDays(new Date(monthStart.getTime()), 1);\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    dayIndex++;\n                    this.renderedEvents = [];\n                }\n            }\n        }\n    };\n    YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n        var isLeftRightResize = (this.isResource && this.parent.activeViewOptions.orientation === 'Vertical') ||\n            (!this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal');\n        var data = { isLeft: true, isRight: true, isBottom: true, isTop: true };\n        if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n            if (isLeftRightResize) {\n                data.isLeft = false;\n            }\n            else {\n                data.isTop = false;\n            }\n        }\n        if ((dayEnd.getTime() >= eventObj[this.fields.endTime].getTime()) || (isLeftRightResize && !this.isResource &&\n            util.addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth())) {\n            if (isLeftRightResize) {\n                data.isRight = false;\n            }\n            else {\n                data.isBottom = false;\n            }\n        }\n        eventObj.data = data;\n    };\n    YearEvent.prototype.timelineResourceEvents = function () {\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.cellWidth = workCell.offsetWidth;\n        this.cellHeader = 0;\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel;\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            for (var month = 0; month < 12; month++) {\n                for (var i = 0, len = resources.length; i < len; i++) {\n                    this.renderedEvents = [];\n                    this.renderResourceEvent(wrapperCollection[i], resources[i], month, i);\n                }\n            }\n        }\n        else {\n            for (var i = 0, len = resources.length; i < len; i++) {\n                this.renderedEvents = [];\n                for (var month = 0; month < 12; month++) {\n                    this.renderResourceEvent(wrapperCollection[i], resources[i], month, i);\n                }\n            }\n        }\n    };\n    YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index) {\n        var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n        wrapper.appendChild(eventWrapper);\n        var monthStart = util.firstDateOfMonth(new Date(this.parent.selectedDate.getFullYear(), month, 1));\n        var monthEnd = util.addDays(util.lastDateOfMonth(new Date(monthStart.getTime())), 1);\n        var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n        var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n        var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n        this.cellHeight = td.offsetHeight;\n        for (var a = 0; a < eventDatas.length; a++) {\n            var data = eventDatas[a];\n            var overlapIndex = void 0;\n            var eventData = extend({}, data, null, true);\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                var eventObj = this.isSpannedEvent(eventData, month);\n                overlapIndex = this.getIndex(eventObj[this.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            else {\n                overlapIndex = this.getIndex(eventData[this.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            var availedHeight = this.cellHeader + (this.eventHeight * (a + 1)) + EVENT_GAP + this.moreIndicatorHeight;\n            var leftValue = (this.parent.activeViewOptions.orientation === 'Vertical') ?\n                month * this.cellWidth : index * this.cellWidth;\n            if (this.parent.rowAutoHeight || this.cellHeight > availedHeight) {\n                this.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, index);\n                this.updateCellHeight(td, availedHeight);\n            }\n            else {\n                var moreIndex = this.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n                this.renderMoreIndicatior(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n                if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                    for (var i = index; i < eventDatas.length; i++) {\n                        var moreData = extend({}, eventDatas[i], { Index: overlapIndex + i }, true);\n                        this.renderedEvents.push(moreData);\n                    }\n                }\n                break;\n            }\n        }\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, rowIndex) {\n        var _this = this;\n        var eventObj = this.isSpannedEvent(eventData, row);\n        var wrap = this.createEventElement(eventObj);\n        var width;\n        var index;\n        if (eventObj.isSpanned.count === 1) {\n            var endTime = util.addDays(eventObj[this.fields.endTime], -1);\n            eventObj[this.fields.endTime] = (endTime > eventObj[this.fields.startTime]) ? endTime : eventObj[this.fields.endTime];\n        }\n        if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n            return;\n        }\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            index = row + 1;\n            if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            width = eventObj.isSpanned.count * this.cellWidth;\n        }\n        else {\n            index = rowIndex + 1;\n            width = this.cellWidth;\n        }\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n        var top = rowTd.offsetTop + this.cellHeader + (this.eventHeight * eventObj.Index) + EVENT_GAP;\n        setStyleAttribute(wrap, {\n            'width': width + 'px', 'height': this.eventHeight + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px'\n        });\n        var args = { data: eventObj, element: wrap, cancel: false, type: 'event' };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                wrapper.appendChild(wrap);\n                _this.wireAppointmentEvents(wrap, eventObj);\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if (!eventObj.isSpanned.isRight) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if ((eventObj.isSpanned.isRight\n                    || eventObj.isSpanned.isLeft)\n                    && _this.parent.activeViewOptions.orientation === 'Horizontal') {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n            }\n        });\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderMoreIndicatior = function (wrapper, count, startDate, row, left, right, index) {\n        var endDate;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            endDate = util.addDays(util.lastDateOfMonth(new Date(startDate.getTime())), 1);\n        }\n        else {\n            endDate = util.addDays(new Date(startDate.getTime()), 1);\n        }\n        var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n        var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n        var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n        left = (Math.floor(left / this.cellWidth) * this.cellWidth);\n        right = (Math.floor(right / this.cellWidth) * this.cellWidth);\n        setStyleAttribute(moreIndicator, { 'width': this.cellWidth + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px' });\n        if (!isNullOrUndefined(index)) {\n            moreIndicator.setAttribute('data-group-index', index.toString());\n        }\n        wrapper.appendChild(moreIndicator);\n        EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n    };\n    YearEvent.prototype.createEventElement = function (record) {\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default);\n        var eventWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.fields.id],\n                'data-guid': record.Guid,\n                'role': 'button', 'tabindex': '0',\n                'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record), 'aria-selected': 'false', 'aria-grabbed': 'true',\n                'aria-label': this.parent.getAnnocementString(record)\n            }\n        });\n        if (this.cssClass) {\n            addClass([eventWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([eventWrapper], cls.READ_ONLY);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resIndex = this.getGroupIndexFromEvent(record);\n            eventWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        var templateElement = [];\n        var eventObj = extend({}, record, null, true);\n        if (this.parent.activeViewOptions.eventTemplate) {\n            var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            var locationEle = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var subjectEle = createElement('div', {\n                className: cls.SUBJECT_CLASS,\n                innerHTML: (eventSubject + (locationEle ? ';&nbsp' + locationEle : ''))\n            });\n            var startTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n            });\n            var endTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n            });\n            addClass([subjectEle], 'e-text-center');\n            if (record[this.fields.isAllDay]) {\n                templateElement = [subjectEle];\n            }\n            else if (!eventObj.isLeft && !eventObj.isRight) {\n                templateElement = [startTimeEle, subjectEle, endTimeEle];\n            }\n            else {\n                if (!eventObj.isLeft) {\n                    templateElement.push(startTimeEle);\n                }\n                templateElement.push(subjectEle);\n                if (!eventObj.isRight) {\n                    templateElement.push(endTimeEle);\n                }\n            }\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        append(templateElement, appointmentDetails);\n        eventWrapper.appendChild(appointmentDetails);\n        this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n        this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n        return eventWrapper;\n    };\n    YearEvent.prototype.isSpannedEvent = function (eventObj, month) {\n        var monthStart = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n        var monthEnd = util.addDays(new Date(this.parent.selectedDate.getFullYear(), month + 1, 0), 1);\n        var eventData = extend({}, eventObj, null, true);\n        var eventStart = eventData[this.fields.startTime];\n        var eventEnd = eventData[this.fields.endTime];\n        var isSpanned = { isLeft: false, isRight: false, count: 1 };\n        if (this.isResource) {\n            this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n        }\n        if (eventStart.getTime() < monthStart.getTime()) {\n            eventData[this.fields.startTime] = monthStart;\n            isSpanned.isLeft = true;\n        }\n        if (eventEnd.getTime() > monthEnd.getTime()) {\n            eventData[this.fields.endTime] = monthEnd;\n            isSpanned.isRight = true;\n        }\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            isSpanned.count = Math.ceil((eventData[this.fields.endTime].getTime() -\n                eventData[this.fields.startTime].getTime()) / util.MS_PER_DAY);\n        }\n        eventData.isSpanned = isSpanned;\n        if (util.resetTime(eventStart).getTime() < util.resetTime(this.parent.minDate).getTime()) {\n            eventData[this.fields.startTime] = this.parent.minDate;\n        }\n        if (util.resetTime(eventEnd).getTime() > util.resetTime(this.parent.maxDate).getTime()) {\n            eventData[this.fields.endTime] = this.parent.maxDate;\n        }\n        return eventData;\n    };\n    YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        var dateStart;\n        var dateEnd;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n            var monthEnd = util.addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n            dateStart = util.resetTime(new Date(monthStart.getTime())).getTime();\n            dateEnd = util.resetTime(new Date(monthEnd.getTime())).getTime();\n        }\n        else {\n            if (this.parent.rowAutoHeight) {\n                dateStart = util.resetTime(new Date(date.getTime())).getTime();\n                dateEnd = util.addDays(util.resetTime(new Date(date.getTime())), 1).getTime();\n            }\n            else {\n                dateStart = dateEnd = util.resetTime(new Date(date.getTime())).getTime();\n            }\n        }\n        for (var _i = 0, _a = appointments; _i < _a.length; _i++) {\n            var app = _a[_i];\n            var appStart = new Date(app[this.fields.startTime].getTime());\n            var appEnd = new Date(app[this.fields.endTime].getTime());\n            if (this.parent.activeViewOptions.orientation === 'Vertical' &&\n                this.parent.activeViewOptions.group.resources.length > 0) {\n                if ((util.resetTime(appStart).getTime() >= dateStart)\n                    && (util.resetTime(appEnd).getTime() <= dateEnd)) {\n                    appointmentsList.push(app);\n                }\n            }\n            else {\n                if (this.parent.rowAutoHeight && (((util.resetTime(appStart).getTime() <= dateStart)\n                    && (util.resetTime(appEnd).getTime() >= dateStart)) || (util.resetTime(appStart).getTime() >= dateStart)\n                    && (util.resetTime(appEnd).getTime() <= dateEnd))) {\n                    appointmentsList.push(app);\n                }\n                if (!this.parent.rowAutoHeight && (util.resetTime(appStart).getTime() <= dateStart)\n                    && (util.resetTime(appEnd).getTime() > dateStart)) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        return appointmentsList;\n    };\n    YearEvent.prototype.removeCellHeight = function () {\n        var elementSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n        var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstElementChild.style.height = '';\n        }\n    };\n    return YearEvent;\n}(TimelineEvent));\nexport { YearEvent };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, closest, Draggable, extend, formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { addClass, remove, removeClass, setStyleAttribute, Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { ActionBase } from '../actions/action-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport { YearEvent } from '../event-renderer/year';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar MINUTES_PER_DAY = 1440;\n/**\n * Schedule events drag actions\n */\nvar DragAndDrop = /** @class */ (function (_super) {\n    __extends(DragAndDrop, _super);\n    function DragAndDrop() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.widthUptoCursorPoint = 0;\n        _this.heightUptoCursorPoint = 0;\n        _this.cursorPointIndex = 0;\n        _this.isHeaderRows = false;\n        _this.isTimelineDayProcess = false;\n        _this.widthPerMinute = 0;\n        _this.heightPerMinute = 0;\n        _this.minDiff = 0;\n        _this.isStepDragging = false;\n        _this.isMorePopupOpened = false;\n        _this.isAllDayDrag = false;\n        _this.isMultiSelect = false;\n        _this.multiData = [];\n        _this.updatedData = [];\n        _this.swagData = [];\n        _this.startTime = 0;\n        _this.isAllDayTarget = false;\n        _this.targetTd = null;\n        return _this;\n    }\n    DragAndDrop.prototype.wireDragEvent = function (element) {\n        var dragObj = new Draggable(element, {\n            abort: '.' + cls.EVENT_RESIZE_CLASS,\n            clone: true,\n            isDragScroll: true,\n            enableTapHold: this.parent.isAdaptive,\n            enableTailMode: (this.parent.eventDragArea) ? true : false,\n            cursorAt: (this.parent.eventDragArea) ? { left: -20, top: -20 } : { left: 0, top: 0 },\n            dragArea: (this.parent.eventDragArea) ?\n                document.querySelector(this.parent.eventDragArea) :\n                this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS),\n            dragStart: this.dragStart.bind(this),\n            drag: this.drag.bind(this),\n            dragStop: this.dragStop.bind(this),\n            enableAutoScroll: false,\n            helper: this.dragHelper.bind(this),\n            queryPositionInfo: this.dragPosition.bind(this)\n        });\n        if (!(dragObj.enableTapHold && Browser.isDevice && Browser.isTouch)) {\n            EventHandler.remove(element, 'touchstart', dragObj.initialize);\n        }\n    };\n    DragAndDrop.prototype.dragHelper = function (e) {\n        var _this = this;\n        this.setDragActionDefaultValues();\n        this.actionObj.element = e.element;\n        this.actionObj.action = 'drag';\n        var elements = [];\n        if (!this.parent.allowMultiDrag || isNullOrUndefined(this.parent.selectedElements) || this.parent.selectedElements.length === 0 ||\n            (this.parent.selectedElements.length > 0 && this.parent.selectedElements.indexOf(this.actionObj.element) === -1)) {\n            elements = [e.element];\n        }\n        else {\n            elements = this.parent.selectedElements;\n            this.isMultiSelect = true;\n        }\n        elements.forEach(function (ele) {\n            var cloneElement = _this.createCloneElement(ele);\n            if (ele.getAttribute('data-guid') === _this.actionObj.element.getAttribute('data-guid')) {\n                _this.actionObj.clone = cloneElement;\n                if (!_this.parent.eventDragArea && _this.parent.currentView !== 'Month' &&\n                    _this.parent.activeViewOptions.timeScale.enable && !_this.parent.activeView.isTimelineView() &&\n                    !_this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                    setStyleAttribute(_this.actionObj.clone, { cursor: 'move', left: '0%', right: '0%', width: '100%' });\n                }\n                _this.actionObj.clone.style.top = formatUnit(_this.actionObj.element.offsetTop);\n            }\n            _this.actionObj.cloneElement.push(cloneElement);\n            _this.actionObj.originalElement.push(ele);\n        });\n        return this.actionObj.clone;\n    };\n    DragAndDrop.prototype.dragPosition = function (e) {\n        if (this.parent.eventDragArea) {\n            return { left: e.left, top: e.top };\n        }\n        var cellHeight = (this.actionObj.cellHeight / this.actionObj.slotInterval) * this.actionObj.interval;\n        var leftValue = formatUnit(0);\n        if (this.parent.currentView === 'Month') {\n            leftValue = e.left;\n        }\n        if (this.parent.activeView.isTimelineView()) {\n            leftValue = formatUnit(this.actionObj.clone.offsetLeft);\n        }\n        var topValue;\n        if ((this.parent.activeView.isTimelineView() || !this.parent.timeScale.enable ||\n            (!isNullOrUndefined(this.actionObj.clone.offsetParent) &&\n                this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)))) {\n            topValue = formatUnit(this.actionObj.clone.offsetTop);\n        }\n        else if (this.parent.currentView === 'Month') {\n            topValue = formatUnit(0);\n        }\n        else if (this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n            topValue = formatUnit(this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop);\n            setStyleAttribute(this.actionObj.clone, {\n                width: formatUnit(Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth),\n                right: this.parent.enableRtl && formatUnit(0)\n            });\n        }\n        else {\n            if (this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) &&\n                !this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                setStyleAttribute(this.actionObj.clone, {\n                    height: formatUnit(this.actionObj.cellHeight),\n                    width: formatUnit(this.actionObj.cellWidth - 1),\n                    pointerEvents: 'none'\n                });\n            }\n            var top_1 = parseInt(e.top, 10);\n            top_1 = top_1 < 0 ? 0 : top_1;\n            topValue = formatUnit(Math.ceil(top_1 / cellHeight) * cellHeight);\n            var scrollHeight = this.parent.element.querySelector('.e-content-wrap').scrollHeight;\n            var cloneBottom = parseInt(topValue, 10) + this.actionObj.clone.offsetHeight;\n            if (cloneBottom > scrollHeight) {\n                topValue = (parseInt(topValue, 10) - (cloneBottom - scrollHeight)) + 'px';\n            }\n        }\n        return { left: leftValue, top: topValue };\n    };\n    DragAndDrop.prototype.setDragActionDefaultValues = function () {\n        this.actionObj.action = 'drag';\n        this.actionObj.isAllDay = null;\n        this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        this.actionObj.interval = this.actionObj.slotInterval;\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.actionObj.cellWidth = workCell.offsetWidth;\n        this.actionObj.cellHeight = workCell.offsetHeight;\n    };\n    DragAndDrop.prototype.dragStart = function (e) {\n        var _this = this;\n        var eventGuid = this.actionObj.element.getAttribute('data-guid');\n        this.actionObj.event = this.parent.eventBase.getEventByGuid(eventGuid);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        this.startTime = eventObj[this.parent.eventFields.startTime].getTime();\n        var dragArgs = {\n            cancel: false,\n            data: eventObj,\n            selectedData: this.getSelectedData(),\n            event: e,\n            excludeSelectors: null,\n            element: this.actionObj.element,\n            interval: this.actionObj.interval,\n            navigation: { enable: false, timeDelay: 2000 },\n            scroll: { enable: true, scrollBy: 30, timeDelay: 100 }\n        };\n        this.parent.trigger(events.dragStart, dragArgs, function (dragEventArgs) {\n            if (dragEventArgs.cancel || (!isNullOrUndefined(_this.actionObj.element) &&\n                isNullOrUndefined(_this.actionObj.element.parentElement))) {\n                var dragObj = _this.actionObj.element.ej2_instances[0];\n                if (!isNullOrUndefined(dragObj)) {\n                    dragObj.intDestroy(e.event);\n                }\n                _this.actionObj.action = '';\n                _this.removeCloneElementClasses();\n                _this.removeCloneElement();\n                return;\n            }\n            _this.actionClass('addClass');\n            _this.parent.uiStateValues.action = true;\n            _this.actionObj.start = eventObj[_this.parent.eventFields.startTime];\n            _this.actionObj.end = eventObj[_this.parent.eventFields.endTime];\n            _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n            _this.actionObj.interval = dragEventArgs.interval;\n            _this.actionObj.navigation = dragEventArgs.navigation;\n            _this.actionObj.scroll = dragEventArgs.scroll;\n            _this.actionObj.excludeSelectors = dragEventArgs.excludeSelectors;\n            var viewElement = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            _this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };\n            _this.widthPerMinute = (_this.actionObj.cellWidth / _this.actionObj.slotInterval) * _this.actionObj.interval;\n            _this.heightPerMinute = (_this.actionObj.cellHeight / _this.actionObj.slotInterval) * _this.actionObj.interval;\n            _this.widthUptoCursorPoint = 0;\n            _this.heightUptoCursorPoint = 0;\n            _this.cursorPointIndex = -1;\n            _this.isHeaderRows = false;\n            _this.isTimelineDayProcess = false;\n            _this.minDiff = 0;\n            _this.isMorePopupOpened = false;\n            _this.daysVariation = -1;\n            _this.isAllDayTarget = _this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS);\n            if ((_this.parent.activeView.isTimelineView() || !_this.parent.timeScale.enable) && _this.parent.currentView !== 'TimelineYear') {\n                if (!isNullOrUndefined(_this.actionObj.clone.offsetParent) &&\n                    _this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)) {\n                    _this.isMorePopupOpened = true;\n                }\n                var rows = _this.parent.activeViewOptions.headerRows;\n                _this.isHeaderRows = rows.length > 0 && rows[rows.length - 1].option !== 'Hour' &&\n                    rows[rows.length - 1].option !== 'Date';\n                _this.isTimelineDayProcess = !_this.parent.activeViewOptions.timeScale.enable || _this.isHeaderRows ||\n                    _this.parent.currentView === 'TimelineMonth' || (rows.length > 0 && rows[rows.length - 1].option === 'Date');\n                _this.isStepDragging = !_this.isTimelineDayProcess && (_this.actionObj.slotInterval !== _this.actionObj.interval);\n                if (_this.isTimelineDayProcess) {\n                    _this.timelineEventModule = new TimelineEvent(_this.parent, 'day');\n                }\n                else {\n                    _this.timelineEventModule = new TimelineEvent(_this.parent, 'hour');\n                }\n            }\n            if (_this.parent.currentView === 'TimelineYear') {\n                _this.yearEvent = new YearEvent(_this.parent);\n            }\n            if (_this.parent.currentView === 'Month') {\n                _this.startTime = util.resetTime(new Date(_this.startTime)).getTime();\n                _this.updateOriginalElement(_this.actionObj.clone);\n                _this.monthEvent = new MonthEvent(_this.parent);\n            }\n            if (_this.parent.currentView === 'Day' || _this.parent.currentView === 'Week' || _this.parent.currentView === 'WorkWeek') {\n                _this.verticalEvent = new VerticalEvent(_this.parent);\n            }\n        });\n    };\n    DragAndDrop.prototype.getSelectedData = function () {\n        if (this.isMultiSelect && this.multiData.length === 0 && this.parent.selectedElements.length > 0) {\n            for (var _i = 0, _a = this.parent.selectedElements; _i < _a.length; _i++) {\n                var element = _a[_i];\n                var eventGuid = element.getAttribute('data-guid');\n                var data = this.parent.eventBase.getEventByGuid(eventGuid);\n                this.multiData.push(extend({}, data, null, true));\n            }\n        }\n        return this.multiData;\n    };\n    DragAndDrop.prototype.drag = function (e) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide(true);\n        }\n        if ((!isNullOrUndefined(e.target)) && e.target.classList.contains(cls.DISABLE_DATES)) {\n            return;\n        }\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventArgs = this.getPageCoordinates(e);\n        this.actionObj.Y = this.actionObj.pageY = eventArgs.pageY;\n        this.actionObj.X = this.actionObj.pageX = eventArgs.pageX;\n        this.actionObj.target = e.target;\n        this.widthUptoCursorPoint = (this.widthUptoCursorPoint === 0) ?\n            Math.ceil((Math.abs(this.actionObj.clone.getBoundingClientRect().left - this.actionObj.X) / this.widthPerMinute)) *\n                this.widthPerMinute : this.widthUptoCursorPoint;\n        this.widthUptoCursorPoint = this.isMorePopupOpened ? this.actionObj.cellWidth : this.widthUptoCursorPoint;\n        this.heightUptoCursorPoint = (this.heightUptoCursorPoint === 0) ?\n            Math.ceil((Math.abs(this.actionObj.clone.getBoundingClientRect().top - this.actionObj.Y) / this.heightPerMinute)) *\n                this.heightPerMinute : this.heightUptoCursorPoint;\n        this.isAllDayDrag = (this.parent.activeViewOptions.timeScale.enable) ?\n            this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) :\n            this.actionObj.event[this.parent.eventFields.isAllDay];\n        if (this.isStepDragging && this.minDiff === 0) {\n            this.calculateMinutesDiff(eventObj);\n        }\n        if ((this.parent.currentView === 'Month' || this.isAllDayDrag) && this.daysVariation < 0) {\n            var date = this.parent.getDateFromElement(this.actionObj.target);\n            if (!isNullOrUndefined(date)) {\n                var currentDate = util.resetTime(date);\n                var startDate = util.resetTime(new Date(eventObj[this.parent.eventFields.startTime].getTime()));\n                this.daysVariation = (currentDate.getTime() - startDate.getTime()) / util.MS_PER_DAY;\n            }\n            else {\n                this.daysVariation = 0;\n            }\n        }\n        else {\n            this.daysVariation = 0;\n        }\n        if (this.parent.eventDragArea) {\n            var targetElement = eventArgs.target;\n            this.actionObj.clone.style.top = formatUnit(targetElement.offsetTop);\n            this.actionObj.clone.style.left = formatUnit(targetElement.offsetLeft);\n            var currentTarget = closest(targetElement, '.' + cls.ROOT);\n            if (!currentTarget) {\n                this.actionObj.clone.style.height = '';\n                this.actionObj.clone.style.width = '';\n            }\n            else {\n                if (!(this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'Day')) {\n                    this.actionObj.clone.style.width = formatUnit(this.actionObj.element.offsetWidth);\n                }\n            }\n        }\n        this.updateScrollPosition(e);\n        this.updateNavigatingPosition(e);\n        this.updateDraggingDateTime(e);\n        var dragArgs = {\n            data: eventObj, event: e, element: this.actionObj.element, startTime: this.actionObj.start,\n            endTime: this.actionObj.end, selectedData: this.updatedData\n        };\n        if (this.parent.group.resources.length > 0) {\n            dragArgs.groupIndex = this.actionObj.groupIndex;\n        }\n        this.parent.trigger(events.drag, dragArgs);\n    };\n    DragAndDrop.prototype.calculateMinutesDiff = function (eventObj) {\n        if (this.parent.enableRtl) {\n            this.minDiff =\n                ((this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint) / this.widthPerMinute) * this.actionObj.interval;\n        }\n        else {\n            this.minDiff = (this.widthUptoCursorPoint / this.widthPerMinute) * this.actionObj.interval;\n        }\n        var startDate = eventObj[this.parent.eventFields.startTime];\n        var startTime = this.parent.activeView.renderDates[0];\n        var startEndHours = util.getStartEndHours(startTime, this.parent.activeView.getStartHour(), this.parent.activeView.getEndHour());\n        if (startEndHours.startHour.getTime() > startDate.getTime()) {\n            this.minDiff = this.minDiff + ((startEndHours.startHour.getTime() - startDate.getTime()) / util.MS_PER_MINUTE);\n        }\n    };\n    DragAndDrop.prototype.dragStop = function (e) {\n        var _this = this;\n        this.removeCloneElementClasses();\n        this.removeCloneElement();\n        clearInterval(this.actionObj.navigationInterval);\n        this.actionObj.navigationInterval = null;\n        clearInterval(this.actionObj.scrollInterval);\n        this.actionObj.scrollInterval = null;\n        this.actionClass('removeClass');\n        this.parent.uiStateValues.action = false;\n        this.actionObj.action = null;\n        if (this.isAllowDrop(e)) {\n            return;\n        }\n        var target = ((!e.target.classList.contains('e-work-cells') && this.parent.cellTemplate) ?\n            closest(e.target, '.e-work-cells') : e.target);\n        var dragArgs = {\n            cancel: false, data: this.getChangedData(this.updatedData), selectedData: this.updatedData,\n            event: e, element: this.actionObj.element, target: target\n        };\n        this.parent.trigger(events.dragStop, dragArgs, function (dragEventArgs) {\n            if (dragEventArgs.cancel) {\n                return;\n            }\n            if (_this.parent.activeViewOptions.group.resources.length > 0 && !_this.parent.activeViewOptions.group.allowGroupEdit\n                && !_this.parent.rowAutoHeight && !_this.parent.virtualScrollModule && _this.parent.activeViewOptions.group.byGroupID) {\n                _this.parent.crudModule.crudObj.isCrudAction = true;\n                _this.parent.crudModule.crudObj.sourceEvent =\n                    [_this.parent.resourceBase.lastResourceLevel[parseInt(dragArgs.element.getAttribute('data-group-index'), 10)]];\n                var currentGroupIndex = parseInt(dragArgs.target.getAttribute('data-group-index'), 10) || _this.actionObj.groupIndex;\n                _this.parent.crudModule.crudObj.targetEvent = [_this.parent.resourceBase.lastResourceLevel[currentGroupIndex]];\n            }\n            _this.saveChangedData(dragEventArgs, _this.isMultiSelect);\n        });\n        this.updatedData = [];\n        this.multiData = [];\n        this.isMultiSelect = false;\n        this.parent.selectedElements = [];\n    };\n    DragAndDrop.prototype.updateNavigatingPosition = function (e) {\n        var _this = this;\n        if (this.actionObj.navigation.enable) {\n            var currentDate_1 = this.parent.getCurrentTime();\n            if (isNullOrUndefined(this.actionObj.navigationInterval)) {\n                this.actionObj.navigationInterval = window.setInterval(function () {\n                    if (currentDate_1) {\n                        var crtDate = _this.parent.getCurrentTime();\n                        var end = crtDate.getSeconds();\n                        var start = currentDate_1.getSeconds() + (_this.actionObj.navigation.timeDelay / 1000);\n                        start = (start >= 60) ? start - 60 : start;\n                        if (start === end) {\n                            currentDate_1 = _this.parent.getCurrentTime();\n                            _this.viewNavigation(e);\n                            _this.updateDraggingDateTime(e);\n                        }\n                    }\n                }, this.actionObj.navigation.timeDelay);\n            }\n        }\n    };\n    DragAndDrop.prototype.updateDraggingDateTime = function (e) {\n        if (!isNullOrUndefined(this.actionObj.clone.offsetParent) &&\n            this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)) {\n            this.morePopupEventDragging(e);\n        }\n        else if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear') {\n            this.timelineEventModule.dateRender = this.parent.activeView.renderDates;\n            this.timelineEventModule.cellWidth = this.actionObj.cellWidth;\n            this.timelineEventModule.getSlotDates();\n            this.actionObj.cellWidth = this.isHeaderRows ? this.timelineEventModule.cellWidth : this.actionObj.cellWidth;\n            this.calculateTimelineTime(e);\n        }\n        else {\n            if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n                this.calculateVerticalDate(e);\n            }\n            else {\n                this.calculateVerticalTime(e);\n            }\n        }\n    };\n    DragAndDrop.prototype.navigationWrapper = function () {\n        if (!this.parent.activeView.isTimelineView()) {\n            if (this.parent.currentView === 'Month' || !this.parent.timeScale.enable) {\n                var outerWrapperCls = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n                this.actionObj.index = (this.parent.activeView.renderDates.length < this.actionObj.index) ?\n                    this.parent.activeView.renderDates.length - 1 : this.actionObj.index;\n                var targetWrapper = outerWrapperCls[this.actionObj.index].querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n                if (!targetWrapper) {\n                    targetWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                    outerWrapperCls[this.actionObj.index].appendChild(targetWrapper);\n                }\n                targetWrapper.appendChild(this.actionObj.clone);\n            }\n            else {\n                var wrapperClass = this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) ?\n                    '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS;\n                this.parent.element.querySelectorAll(wrapperClass)\n                    .item(this.actionObj.index).appendChild(this.actionObj.clone);\n                if (wrapperClass === '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS) {\n                    var elementHeight = this.getAllDayEventHeight();\n                    var event_2 = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS + ':first-child'));\n                    if (event_2[0].offsetHeight < elementHeight) {\n                        for (var _i = 0, event_1 = event_2; _i < event_1.length; _i++) {\n                            var e = event_1[_i];\n                            e.style.height = ((elementHeight + 2) / 12) + 'em';\n                        }\n                    }\n                    this.actionObj.clone.style.height = formatUnit(elementHeight);\n                }\n                this.actionObj.height = parseInt(this.actionObj.clone.style.height, 10);\n            }\n        }\n        else {\n            var outWrapper = void 0;\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                outWrapper = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(this.actionObj.index);\n            }\n            else {\n                outWrapper = this.parent.element.querySelector('.' + cls.APPOINTMENT_CONTAINER_CLASS);\n            }\n            var tarWrapper_1 = outWrapper.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n            if (!tarWrapper_1) {\n                tarWrapper_1 = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                outWrapper.appendChild(tarWrapper_1);\n            }\n            this.actionObj.cloneElement.forEach(function (ele) {\n                tarWrapper_1.appendChild(ele);\n            });\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DragAndDrop.prototype.viewNavigation = function (e) {\n        var navigationType;\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (dragArea && ((!this.scrollEdges.top && !this.scrollEdges.bottom) ||\n            closest(this.actionObj.clone, '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS))) {\n            if ((dragArea.scrollLeft === 0) &&\n                (Math.round(this.actionObj.X) <=\n                    Math.round(dragArea.getBoundingClientRect().left + this.actionObj.cellWidth + window.pageXOffset))) {\n                navigationType = this.parent.enableRtl ? 'next' : 'previous';\n            }\n            else if ((Math.round(dragArea.scrollLeft) + dragArea.clientWidth === dragArea.scrollWidth) &&\n                (Math.round(this.actionObj.X) >=\n                    Math.round(dragArea.getBoundingClientRect().right - this.actionObj.cellWidth + window.pageXOffset))) {\n                navigationType = this.parent.enableRtl ? 'previous' : 'next';\n            }\n            if (navigationType) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate(navigationType));\n            }\n        }\n    };\n    DragAndDrop.prototype.morePopupEventDragging = function (e) {\n        if (isNullOrUndefined(e.target) || (e.target && isNullOrUndefined(closest(e.target, 'td')))) {\n            return;\n        }\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var td = closest(e.target, 'td');\n        if (this.parent.currentView === 'TimelineYear' && !td.classList.contains('e-work-cells')) {\n            return;\n        }\n        var dragStart = this.parent.getDateFromElement(td);\n        var dragEnd = new Date(dragStart.getTime());\n        dragEnd.setMilliseconds(eventDuration);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        this.actionObj.start = new Date(dragStart.getTime());\n        this.actionObj.end = new Date(dragEnd.getTime());\n        this.actionObj.clone.style.top = formatUnit(td.offsetParent.offsetTop);\n        this.actionObj.clone.style.left = formatUnit(td.offsetLeft);\n        this.actionObj.clone.style.width = formatUnit(td.offsetWidth);\n        var eventContainer = td;\n        var eventWrapper;\n        if (this.parent.activeView.isTimelineView()) {\n            var rowIndex = closest(td, 'tr').rowIndex;\n            eventContainer = this.parent.element.querySelectorAll('.e-appointment-container').item(rowIndex);\n        }\n        eventWrapper = eventContainer.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (!eventWrapper) {\n            eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            eventContainer.appendChild(eventWrapper);\n        }\n        this.appendCloneElement(eventWrapper);\n    };\n    DragAndDrop.prototype.calculateVerticalTime = function (e) {\n        var _this = this;\n        if (isNullOrUndefined(this.actionObj.target) ||\n            (this.actionObj.target && isNullOrUndefined(closest(this.actionObj.target, 'tr'))) ||\n            (!(closest(this.actionObj.target, 'td').classList.contains(cls.WORK_CELLS_CLASS)) &&\n                !(closest(this.actionObj.target, 'td').classList.contains(cls.ALLDAY_CELLS_CLASS)))) {\n            return;\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.swapDragging(e);\n        }\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventStart = eventObj[this.parent.eventFields.startTime];\n        var eventEnd = eventObj[this.parent.eventFields.endTime];\n        var eventDuration = eventEnd.getTime() - eventStart.getTime();\n        var offsetTop = Math.floor(parseInt(this.actionObj.clone.style.top, 10) / this.actionObj.cellHeight)\n            * this.actionObj.cellHeight;\n        offsetTop = offsetTop < 0 ? 0 : offsetTop;\n        if (this.scrollEdges.top || this.scrollEdges.bottom) {\n            offsetTop = this.scrollEdges.top ? dragArea.scrollTop - this.heightUptoCursorPoint +\n                this.actionObj.cellHeight + window.pageYOffset :\n                (dragArea.scrollTop + dragArea.offsetHeight - this.actionObj.clone.offsetHeight + window.pageYOffset) +\n                    (this.actionObj.clone.offsetHeight - this.heightUptoCursorPoint);\n            offsetTop = Math.round(offsetTop / this.actionObj.cellHeight) * this.actionObj.cellHeight;\n            this.actionObj.clone.style.top = formatUnit(offsetTop);\n        }\n        var rowIndex = (this.parent.activeViewOptions.timeScale.enable) ? (offsetTop / this.actionObj.cellHeight) : 0;\n        var heightPerMinute = this.actionObj.cellHeight / this.actionObj.slotInterval;\n        var diffInMinutes = parseInt(this.actionObj.clone.style.top, 10) - offsetTop;\n        var tr;\n        if (this.isAllDayDrag) {\n            tr = this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS);\n        }\n        else {\n            var trCollections = [].slice.call(this.parent.getContentTable().querySelectorAll('tr'));\n            tr = trCollections[rowIndex];\n        }\n        var index;\n        if (closest(this.actionObj.target, 'td').classList.contains(cls.WORK_CELLS_CLASS) ||\n            closest(this.actionObj.target, 'td').classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            index = closest(this.actionObj.target, 'td').cellIndex;\n        }\n        var colIndex = isNullOrUndefined(index) ? closest(this.actionObj.clone, 'td').cellIndex : index;\n        this.actionObj.index = colIndex;\n        if (isNullOrUndefined(tr)) {\n            return;\n        }\n        var td = tr.children[colIndex];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        var dragStart;\n        var dragEnd;\n        if (this.parent.activeViewOptions.timeScale.enable && !this.isAllDayDrag) {\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            dragStart = this.parent.getDateFromElement(td);\n            dragStart.setMinutes(dragStart.getMinutes() + (diffInMinutes / heightPerMinute));\n            dragEnd = new Date(dragStart.getTime());\n            if (this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                dragEnd.setMinutes(dragEnd.getMinutes() + this.actionObj.slotInterval);\n            }\n            else {\n                dragEnd.setMilliseconds(eventDuration);\n            }\n        }\n        else {\n            dragStart = this.parent.getDateFromElement(td);\n            dragStart.setDate(dragStart.getDate() - this.daysVariation);\n            dragStart.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n            dragEnd = new Date(dragStart.getTime());\n            dragEnd.setMilliseconds(eventDuration);\n            if (!this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) &&\n                this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                dragEnd = util.addDays(util.resetTime(dragEnd), 1);\n            }\n            this.updateAllDayEvents(dragStart, dragEnd, this.parent.activeViewOptions.group.byDate ? colIndex : undefined);\n        }\n        this.actionObj.start = new Date(+dragStart);\n        this.actionObj.end = new Date(+dragEnd);\n        var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n        if (this.multiData.length > 0) {\n            if (this.isAllDayTarget && this.isAllDayDrag && !isNullOrUndefined(this.actionObj.isAllDay) && !this.actionObj.isAllDay) {\n                var targetCellTime_1 = parseInt((closest(this.actionObj.target, 'td')).getAttribute('data-date'), 10);\n                this.multiData.forEach(function (data) {\n                    _this.swagData.push(extend({}, data, null, true));\n                    if (data[_this.parent.eventFields.isAllDay]) {\n                        data[_this.parent.eventFields.startTime] =\n                            new Date(data[_this.parent.eventFields.startTime].getTime() + (targetCellTime_1 - _this.startTime));\n                        var startTime = new Date(data[_this.parent.eventFields.startTime]);\n                        var endTime = new Date(startTime.setMinutes(startTime.getMinutes() + _this.actionObj.slotInterval));\n                        data[_this.parent.eventFields.endTime] = endTime;\n                        data[_this.parent.eventFields.isAllDay] = false;\n                    }\n                });\n                this.startTime = targetCellTime_1;\n            }\n            if (this.isAllDayTarget && this.isAllDayDrag &&\n                !isNullOrUndefined(this.actionObj.isAllDay) && this.actionObj.isAllDay && this.swagData.length > 0) {\n                this.multiData = this.swagData;\n                this.swagData = [];\n                var eventObj_1 = extend({}, this.actionObj.event, null, true);\n                this.startTime = eventObj_1[this.parent.eventFields.startTime].getTime();\n            }\n            var startTimeDiff = event[this.parent.eventFields.startTime].getTime() - this.startTime;\n            for (var index_1 = 0; index_1 < this.multiData.length; index_1++) {\n                this.updatedData[index_1] = this.updateMultipleData(this.multiData[index_1], startTimeDiff);\n                var dayIndex = this.getDayIndex(this.updatedData[index_1]);\n                if (dayIndex >= 0) {\n                    var wrapper = this.getEventWrapper(dayIndex, this.updatedData[index_1][this.parent.eventFields.isAllDay]);\n                    this.appendCloneElement(wrapper, this.actionObj.cloneElement[index_1]);\n                    this.updateEventHeight(this.updatedData[index_1], index_1, dayIndex);\n                }\n                else {\n                    if (!isNullOrUndefined(this.actionObj.cloneElement[index_1].parentNode)) {\n                        remove(this.actionObj.cloneElement[index_1]);\n                    }\n                }\n            }\n        }\n        else {\n            this.updateEventHeight(event);\n        }\n        this.updateTimePosition(this.actionObj.start, this.updatedData);\n    };\n    DragAndDrop.prototype.updateMultipleData = function (data, timeDifference) {\n        var eventObj = extend({}, data, null, true);\n        if (!isNullOrUndefined(this.actionObj.isAllDay) && this.parent.activeViewOptions.timeScale.enable &&\n            ((this.isAllDayTarget && eventObj[this.parent.eventFields.isAllDay]) ||\n                (!this.isAllDayTarget && !eventObj[this.parent.eventFields.isAllDay]))) {\n            eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n        }\n        var endTimeDiff = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        if (eventObj[this.parent.eventFields.isAllDay]) {\n            var differInDays = Math.ceil(timeDifference / (1000 * 3600 * 24));\n            var day = Math.ceil(endTimeDiff / (1000 * 3600 * 24));\n            var startTime = new Date(eventObj[this.parent.eventFields.startTime]);\n            eventObj[this.parent.eventFields.startTime] = util.resetTime(new Date(startTime.setDate(startTime.getDate() + differInDays)));\n            eventObj[this.parent.eventFields.endTime] = util.addDays(eventObj[this.parent.eventFields.startTime], day);\n        }\n        else {\n            eventObj[this.parent.eventFields.startTime] =\n                new Date(eventObj[this.parent.eventFields.startTime].getTime() + timeDifference);\n            eventObj[this.parent.eventFields.endTime] =\n                new Date(eventObj[this.parent.eventFields.startTime].getTime() + endTimeDiff);\n        }\n        return eventObj;\n    };\n    DragAndDrop.prototype.getDayIndex = function (event) {\n        var eventObj = extend({}, event, null, true);\n        var startTime = util.resetTime(eventObj[this.parent.eventFields.startTime]).getTime();\n        var query = '';\n        var wrapper = cls.DAY_WRAPPER_CLASS;\n        if (this.parent.activeViewOptions.timeScale.enable && (eventObj[this.parent.eventFields.isAllDay])) {\n            wrapper = cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS;\n        }\n        else {\n            wrapper = cls.WORK_CELLS_CLASS;\n        }\n        query = '.' + wrapper + '[data-date=\"' + startTime + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query + '[data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n        }\n        this.targetTd = this.parent.element.querySelector(query);\n        if (isNullOrUndefined(this.targetTd)) {\n            return -1;\n        }\n        return this.targetTd.cellIndex;\n    };\n    DragAndDrop.prototype.updateEventHeight = function (event, index, colIndex) {\n        this.verticalEvent.initializeValues();\n        var datesCount = 0;\n        for (var i = 0; i < this.actionObj.groupIndex; i++) {\n            datesCount = datesCount + this.verticalEvent.dateRender[i].length;\n        }\n        var target = (this.parent.activeViewOptions.group.byDate &&\n            !isNullOrUndefined(this.parent.getDateFromElement(this.actionObj.target))) ? true : false;\n        if (target || !this.parent.activeViewOptions.group.byDate) {\n            var dayIndex = !this.parent.activeViewOptions.group.byDate ?\n                isNullOrUndefined(index) ? this.actionObj.index - datesCount : colIndex - datesCount\n                : this.parent.getIndexOfDate(this.verticalEvent.dateRender[this.actionObj.groupIndex], util.resetTime(\n                // eslint-disable-next-line max-len\n                this.parent.getDateFromElement(isNullOrUndefined(index) ? this.actionObj.target : this.targetTd)));\n            var record = this.verticalEvent.isSpannedEvent(event, dayIndex, this.actionObj.groupIndex);\n            var eStart = record[this.verticalEvent.fields.startTime];\n            var eEnd = record[this.verticalEvent.fields.endTime];\n            var appHeight = this.parent.activeViewOptions.timeScale.enable ? this.verticalEvent.getHeight(eStart, eEnd) :\n                this.actionObj.element.offsetHeight;\n            var topValue = this.parent.activeViewOptions.timeScale.enable ?\n                this.verticalEvent.getTopValue(eStart, dayIndex, this.actionObj.groupIndex) : this.actionObj.element.offsetTop;\n            if (isNullOrUndefined(index)) {\n                this.actionObj.clone.style.top = formatUnit(topValue);\n                this.actionObj.clone.style.height = formatUnit(appHeight);\n            }\n            else {\n                var appWidth = this.actionObj.cellWidth;\n                if (event[this.parent.eventFields.isAllDay]) {\n                    topValue = this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop;\n                    appHeight = this.getAllDayEventHeight();\n                    var timeDiff = event[this.parent.eventFields.endTime].getTime() -\n                        event[this.parent.eventFields.startTime].getTime();\n                    var allDayDifference = Math.ceil(timeDiff / (1000 * 3600 * 24));\n                    if (allDayDifference >= 0) {\n                        appWidth = (allDayDifference * this.actionObj.cellWidth);\n                    }\n                }\n                if (this.actionObj.cloneElement[index]) {\n                    this.actionObj.cloneElement[index].style.top = formatUnit(topValue);\n                    this.actionObj.cloneElement[index].style.height = formatUnit(appHeight);\n                    this.actionObj.cloneElement[index].style.width = formatUnit(appWidth);\n                    this.actionObj.cloneElement[index].style.left = formatUnit(0);\n                }\n            }\n        }\n    };\n    DragAndDrop.prototype.updateAllDayEvents = function (startDate, endDate, colIndex) {\n        var _this = this;\n        var _a, _b;\n        this.parent.eventBase.slots = [];\n        var event = this.getUpdatedEvent(startDate, endDate, this.actionObj.event);\n        var renderDates = this.parent.activeView.renderDates;\n        (_a = this.parent.eventBase.slots).push.apply(_a, this.parent.activeView.renderDates.map(function (date) { return +date; }));\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.eventBase.slots = [];\n            var resources = this.parent.resourceBase.lastResourceLevel.\n                filter(function (res) { return res.groupIndex === _this.actionObj.groupIndex; });\n            renderDates = resources[0].renderDates;\n            (_b = this.parent.eventBase.slots).push.apply(_b, renderDates.map(function (date) { return +date; }));\n        }\n        var events = this.parent.eventBase.splitEvent(event, renderDates);\n        var query = \".e-all-day-cells[data-date=\\\"\" + events[0][this.parent.eventFields.startTime].getTime() + \"\\\"]\";\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n        }\n        var cell = [].slice.call(this.parent.element.querySelectorAll(query));\n        if (cell.length > 0 || !isNullOrUndefined(colIndex)) {\n            var cellIndex = !isNullOrUndefined(colIndex) ? colIndex : cell[0].cellIndex;\n            this.appendCloneElement(this.getEventWrapper(cellIndex));\n            // eslint-disable-next-line max-len\n            this.actionObj.clone.style.width = formatUnit(events[0].data.count * this.actionObj.cellWidth);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DragAndDrop.prototype.swapDragging = function (e) {\n        var colIndex = closest(this.actionObj.target, 'td').cellIndex;\n        if (closest(this.actionObj.target, '.' + cls.DATE_HEADER_WRAP_CLASS) &&\n            !closest(this.actionObj.clone, '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS)) {\n            addClass([this.actionObj.clone], cls.ALLDAY_APPOINTMENT_CLASS);\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            this.actionObj.isAllDay = true;\n            var eventHeight = this.getAllDayEventHeight();\n            var allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS + ':first-child'));\n            if (allDayElement[0].offsetHeight < eventHeight) {\n                for (var _i = 0, allDayElement_1 = allDayElement; _i < allDayElement_1.length; _i++) {\n                    var element = allDayElement_1[_i];\n                    element.style.height = ((eventHeight + 2) / 12) + 'em';\n                }\n            }\n            setStyleAttribute(this.actionObj.clone, {\n                width: formatUnit(this.actionObj.cellWidth),\n                height: formatUnit(eventHeight),\n                top: formatUnit(this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop)\n            });\n        }\n        if (closest(this.actionObj.target, '.' + cls.WORK_CELLS_CLASS) &&\n            !closest(this.actionObj.clone, '.' + cls.DAY_WRAPPER_CLASS)) {\n            removeClass([this.actionObj.clone], cls.ALLDAY_APPOINTMENT_CLASS);\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            this.actionObj.isAllDay = false;\n            // eslint-disable-next-line max-len\n            var height = (this.actionObj.element.offsetHeight === 0) ? this.actionObj.height : this.actionObj.element.offsetHeight;\n            setStyleAttribute(this.actionObj.clone, {\n                left: formatUnit(0),\n                height: formatUnit(height),\n                width: formatUnit(this.actionObj.cellWidth)\n            });\n        }\n    };\n    DragAndDrop.prototype.calculateVerticalDate = function (e) {\n        if (isNullOrUndefined(e.target) || (e.target && isNullOrUndefined(closest(e.target, 'tr'))) ||\n            (e.target && e.target.tagName === 'DIV')) {\n            return;\n        }\n        this.removeCloneElement();\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var td = closest(this.actionObj.target, 'td');\n        if (!isNullOrUndefined(td)) {\n            var tr = td.parentElement;\n            this.actionObj.index = (tr.rowIndex * tr.children.length) + td.cellIndex;\n            var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n            td = workCells[this.actionObj.index];\n            var currentDate = this.parent.getDateFromElement(td);\n            if (!isNullOrUndefined(currentDate)) {\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n                }\n                var timeString = new Date(currentDate.setDate(currentDate.getDate() - this.daysVariation));\n                var dragStart = new Date(timeString.getTime());\n                var dragEnd = new Date(dragStart.getTime());\n                var startTimeDiff = eventObj[this.parent.eventFields.startTime].getTime() -\n                    (util.resetTime(new Date(+eventObj[this.parent.eventFields.startTime]))).getTime();\n                dragStart = new Date(dragStart.getTime() + startTimeDiff);\n                dragEnd = new Date(dragStart.getTime() + eventDuration);\n                this.actionObj.start = new Date(dragStart.getTime());\n                this.actionObj.end = new Date(dragEnd.getTime());\n            }\n        }\n        var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        if (this.multiData && this.multiData.length > 0) {\n            var startTime = util.resetTime(new Date(event[this.parent.eventFields.startTime]));\n            var startTimeDiff = startTime.getTime() - this.startTime;\n            if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n                startTimeDiff = (startTime.getFullYear() - new Date(this.startTime).getFullYear()) * 12;\n                startTimeDiff -= new Date(this.startTime).getMonth();\n                startTimeDiff += startTime.getMonth();\n            }\n            for (var index = 0; index < this.multiData.length; index++) {\n                this.updatedData[index] = this.updateMultipleVerticalDate(this.multiData[index], startTimeDiff);\n                if (this.parent.currentView === 'TimelineYear') {\n                    this.dynamicYearlyEventsRendering(this.updatedData[index]);\n                }\n                else {\n                    this.dynamicEventsRendering(this.updatedData[index]);\n                }\n            }\n        }\n        else {\n            if (this.parent.currentView === 'TimelineYear') {\n                this.dynamicYearlyEventsRendering(event);\n            }\n            else {\n                this.dynamicEventsRendering(event);\n            }\n        }\n    };\n    DragAndDrop.prototype.updateMultipleVerticalDate = function (data, timeDifference) {\n        var eventObj = extend({}, data, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var startDate = new Date(eventObj[this.parent.eventFields.startTime]);\n        if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n            eventObj[this.parent.eventFields.startTime] = new Date(startDate.setMonth(startDate.getMonth() + timeDifference));\n        }\n        else {\n            var differInDays = Math.ceil(timeDifference / util.MS_PER_DAY);\n            eventObj[this.parent.eventFields.startTime] = new Date(startDate.setDate(startDate.getDate() + differInDays));\n        }\n        eventObj[this.parent.eventFields.endTime] =\n            new Date(eventObj[this.parent.eventFields.startTime].getTime() + eventDuration);\n        return eventObj;\n    };\n    DragAndDrop.prototype.calculateTimelineTime = function (e) {\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var offsetLeft = this.parent.enableRtl ? Math.abs(this.actionObj.clone.offsetLeft) - this.actionObj.clone.offsetWidth :\n            parseInt(this.actionObj.clone.style.left, 10);\n        offsetLeft = Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n        var rightOffset;\n        if (this.parent.enableRtl) {\n            rightOffset = Math.abs(parseInt(this.actionObj.clone.style.right, 10));\n            this.actionObj.clone.style.right = formatUnit(rightOffset);\n        }\n        offsetLeft = this.getOffsetValue(offsetLeft, rightOffset);\n        var colIndex = this.getColumnIndex(offsetLeft);\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var leftVal = (this.parent.eventDragArea) ? dragArea.scrollLeft - dragArea.offsetLeft : 0;\n        var cloneIndex = Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().left + leftVal) / this.actionObj.cellWidth);\n        if (this.parent.enableRtl) {\n            cloneIndex = Math.abs(Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().right) /\n                this.actionObj.cellWidth)) - 1;\n        }\n        if (this.cursorPointIndex < 0) {\n            this.cursorIndex(e, eventObj, offsetLeft, cloneIndex);\n        }\n        var tr = this.parent.getContentTable().querySelector('tr');\n        var index = this.getCursorCurrentIndex(colIndex, cloneIndex, tr);\n        index = index < 0 ? 0 : index;\n        var eventStart = this.isHeaderRows ? new Date(this.timelineEventModule.dateRender[index].getTime()) :\n            this.parent.getDateFromElement(tr.children[index]);\n        if (this.isStepDragging) {\n            var widthDiff = this.getWidthDiff(tr, index);\n            if (widthDiff !== 0) {\n                var timeDiff = Math.round(widthDiff / this.widthPerMinute);\n                eventStart.setMinutes(eventStart.getMinutes() + (timeDiff * this.actionObj.interval));\n                eventStart.setMinutes(eventStart.getMinutes() - this.minDiff);\n            }\n            else {\n                eventStart = this.actionObj.start;\n            }\n        }\n        else {\n            eventStart.setMinutes(eventStart.getMinutes() -\n                (this.cursorPointIndex * (this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval)));\n        }\n        eventStart = this.calculateIntervalTime(eventStart);\n        if (this.isTimelineDayProcess) {\n            var eventSrt = eventObj[this.parent.eventFields.startTime];\n            eventStart.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds());\n        }\n        var eventEnd = new Date(eventStart.getTime());\n        eventEnd.setMilliseconds(eventDuration);\n        var eventsData = [this.getUpdatedEvent(eventStart, eventEnd, this.actionObj.event)];\n        if (this.multiData.length > 0) {\n            var startTimeDiff = eventsData[0][this.parent.eventFields.startTime].getTime() - this.startTime;\n            for (var i = 0; i < this.multiData.length; i++) {\n                this.updatedData[i] = this.updateMultipleData(this.multiData[i], startTimeDiff);\n            }\n            eventsData = this.updatedData;\n        }\n        for (var dataIndex = 0; dataIndex < eventsData.length; dataIndex++) {\n            var events_1 = this.timelineEventModule.splitEvent(eventsData[dataIndex], this.timelineEventModule.dateRender);\n            var eventData = events_1[0].data;\n            var startTime = this.timelineEventModule.getStartTime(events_1[0], eventData);\n            var endTime = this.timelineEventModule.getEndTime(events_1[0], eventData);\n            // eslint-disable-next-line max-len\n            var width = this.timelineEventModule.getEventWidth(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], eventData.count);\n            // eslint-disable-next-line max-len\n            var day = this.parent.getIndexOfDate(this.timelineEventModule.dateRender, util.resetTime(new Date(startTime.getTime())));\n            day = day < 0 ? 0 : day;\n            var left = this.timelineEventModule.getPosition(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], day);\n            var cloneElement = this.multiData.length > 0 ? this.actionObj.cloneElement[dataIndex] : this.actionObj.clone;\n            if (this.parent.enableRtl) {\n                cloneElement.style.right = formatUnit(left);\n            }\n            else {\n                cloneElement.style.left = formatUnit(left);\n            }\n            if (!this.isMorePopupOpened) {\n                cloneElement.style.width = formatUnit(width);\n            }\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                this.calculateResourceGroupingPosition(e, cloneElement);\n            }\n            this.actionObj.start = new Date(eventStart.getTime());\n            this.actionObj.end = new Date(eventEnd.getTime());\n            this.updateTimePosition(this.actionObj.start, this.updatedData);\n        }\n    };\n    DragAndDrop.prototype.getOffsetValue = function (offsetLeft, rightOffset) {\n        if (this.scrollEdges.left || this.scrollEdges.right) {\n            var viewEle = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            if (this.parent.enableRtl) {\n                rightOffset = viewEle.offsetWidth - viewEle.scrollLeft;\n                if (this.scrollEdges.right) {\n                    rightOffset = (rightOffset - viewEle.offsetWidth + this.actionObj.clone.offsetWidth) -\n                        (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n                }\n                else {\n                    rightOffset = rightOffset + this.widthUptoCursorPoint;\n                    if (rightOffset - this.widthUptoCursorPoint >= viewEle.scrollWidth) {\n                        this.actionObj.clone.style.width =\n                            formatUnit(this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint + this.actionObj.cellWidth);\n                        rightOffset = (viewEle.scrollLeft - viewEle.scrollWidth);\n                    }\n                }\n                this.actionObj.clone.style.left = formatUnit(rightOffset);\n            }\n            else {\n                if (this.scrollEdges.left) {\n                    offsetLeft = viewEle.scrollLeft - this.widthUptoCursorPoint + this.actionObj.cellWidth;\n                    if (viewEle.scrollLeft + viewEle.offsetWidth >= viewEle.offsetWidth) {\n                        viewEle.scrollLeft = viewEle.scrollLeft - 1;\n                    }\n                    else if (this.actionObj.clone.offsetLeft === 0) {\n                        offsetLeft = viewEle.scrollLeft;\n                    }\n                }\n                else {\n                    offsetLeft = (viewEle.scrollLeft + viewEle.offsetWidth -\n                        this.actionObj.clone.offsetWidth) + (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n                }\n                offsetLeft = offsetLeft < 0 ? 0 : offsetLeft;\n                this.actionObj.clone.style.left = formatUnit(offsetLeft);\n            }\n        }\n        return offsetLeft;\n    };\n    DragAndDrop.prototype.getWidthDiff = function (tr, index) {\n        var pages = this.scrollArgs.element.getBoundingClientRect();\n        if (pages.left <= this.actionObj.pageX && pages.right >= this.actionObj.pageX) {\n            var targetLeft = tr.children[index].offsetLeft;\n            var pageX = this.actionObj.pageX - pages.left;\n            if (this.parent.enableRtl) {\n                return (targetLeft + this.actionObj.cellWidth) - (this.scrollArgs.element.scrollLeft + pageX);\n            }\n            else {\n                return (this.scrollArgs.element.scrollLeft + pageX) - targetLeft;\n            }\n        }\n        return 0;\n    };\n    DragAndDrop.prototype.getColumnIndex = function (offsetLeft) {\n        var index = Math.floor(offsetLeft / this.actionObj.cellWidth);\n        if (this.isHeaderRows) {\n            return index;\n        }\n        return this.getIndex(index);\n    };\n    DragAndDrop.prototype.getCursorCurrentIndex = function (colIndex, cloneIndex, tr) {\n        var index = colIndex + cloneIndex;\n        if (this.isHeaderRows) {\n            var dateLength = Math.floor(tr.offsetWidth / this.actionObj.cellWidth);\n            return (index > dateLength - 1) ? dateLength - 1 : index;\n        }\n        return (index > tr.children.length - 1) ? tr.children.length - 1 : index;\n    };\n    DragAndDrop.prototype.cursorIndex = function (e, event, left, index) {\n        var td = closest(e.target, '.e-work-cells');\n        if (!isNullOrUndefined(td) && !this.isMorePopupOpened) {\n            var targetDate = this.parent.getDateFromElement(td);\n            if (this.isHeaderRows) {\n                var currentIndex = Math.floor(left / this.actionObj.cellWidth);\n                targetDate = new Date(this.timelineEventModule.dateRender[currentIndex + index].getTime());\n            }\n            var timeDiff = targetDate.getTime() - event[this.parent.eventFields.startTime].getTime();\n            if (this.isTimelineDayProcess) {\n                this.cursorPointIndex = Math.abs(Math.ceil(timeDiff / (util.MS_PER_DAY)));\n            }\n            else {\n                var widthDiff = Math.floor((timeDiff / util.MS_PER_MINUTE) / (this.actionObj.slotInterval / this.actionObj.cellWidth));\n                this.cursorPointIndex = Math.floor(widthDiff / this.actionObj.cellWidth);\n                this.cursorPointIndex = this.cursorPointIndex < 0 ? 0 : this.cursorPointIndex;\n            }\n        }\n        else {\n            this.cursorPointIndex = 0;\n        }\n    };\n    DragAndDrop.prototype.calculateResourceGroupingPosition = function (e, cloneElement) {\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var trCollection = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap .e-content-table tr:not(.e-hidden)'));\n        var translateY = util.getTranslateY(dragArea.querySelector('table'));\n        translateY = (isNullOrUndefined(translateY)) ? 0 : translateY;\n        var rowHeight = (this.parent.rowAutoHeight) ?\n            ~~(dragArea.querySelector('table').offsetHeight / trCollection.length) : this.actionObj.cellHeight;\n        var rowIndex = Math.floor(Math.floor((this.actionObj.Y + (dragArea.scrollTop - translateY - window.scrollY)) -\n            dragArea.getBoundingClientRect().top) / rowHeight);\n        rowIndex = (rowIndex < 0) ? 0 : (rowIndex > trCollection.length - 1) ? trCollection.length - 1 : rowIndex;\n        this.actionObj.index = rowIndex;\n        var eventContainer = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(rowIndex);\n        var eventWrapper = eventContainer.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (!eventWrapper) {\n            eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            eventContainer.appendChild(eventWrapper);\n        }\n        this.appendCloneElement(eventWrapper, cloneElement);\n        var td = closest(this.actionObj.target, 'td');\n        this.actionObj.groupIndex = (td && !isNaN(parseInt(td.getAttribute('data-group-index'), 10)))\n            ? parseInt(td.getAttribute('data-group-index'), 10) : this.actionObj.groupIndex;\n        var top = trCollection[rowIndex].offsetTop;\n        if (this.parent.rowAutoHeight) {\n            var cursorElement = this.getCursorElement(e);\n            if (cursorElement) {\n                top = cursorElement.classList.contains(cls.WORK_CELLS_CLASS) ? cursorElement.offsetTop :\n                    cursorElement.offsetParent.classList.contains(cls.APPOINTMENT_CLASS) ?\n                        cursorElement.offsetParent.offsetTop : top;\n            }\n        }\n        cloneElement.style.top = formatUnit(top);\n    };\n    DragAndDrop.prototype.appendCloneElement = function (element, cloneElement) {\n        if (cloneElement === void 0) { cloneElement = null; }\n        cloneElement = isNullOrUndefined(cloneElement) ? this.actionObj.clone : cloneElement;\n        if (this.parent.eventDragArea) {\n            document.querySelector(this.parent.eventDragArea).appendChild(cloneElement);\n        }\n        else {\n            element.appendChild(cloneElement);\n        }\n    };\n    DragAndDrop.prototype.getEventWrapper = function (index, isAllDayDrag) {\n        var eventWrapper;\n        if (isNullOrUndefined(isAllDayDrag)) {\n            isAllDayDrag = this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS);\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var wrapperClass = isAllDayDrag ? '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS;\n            eventWrapper = this.parent.element.querySelectorAll(wrapperClass).item(index);\n        }\n        else {\n            var targetWrapper = this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS).item(index);\n            eventWrapper = targetWrapper.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n            if (!eventWrapper) {\n                eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                targetWrapper.appendChild(eventWrapper);\n            }\n        }\n        return eventWrapper;\n    };\n    DragAndDrop.prototype.getAllDayEventHeight = function () {\n        var eventWrapper = createElement('div', { className: cls.APPOINTMENT_CLASS });\n        this.parent.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS).appendChild(eventWrapper);\n        var eventHeight = eventWrapper.offsetHeight;\n        remove(eventWrapper);\n        return eventHeight;\n    };\n    DragAndDrop.prototype.isAllowDrop = function (e) {\n        if (!this.actionObj.excludeSelectors) {\n            return false;\n        }\n        var dropSelectors = this.actionObj.excludeSelectors.split(',');\n        var isAllowDrop = false;\n        for (var _i = 0, dropSelectors_1 = dropSelectors; _i < dropSelectors_1.length; _i++) {\n            var selector = dropSelectors_1[_i];\n            if (e.target.classList.contains(selector)) {\n                isAllowDrop = true;\n                break;\n            }\n        }\n        return isAllowDrop;\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name\n     */\n    DragAndDrop.prototype.getModuleName = function () {\n        return 'dragAndDrop';\n    };\n    return DragAndDrop;\n}(ActionBase));\nexport { DragAndDrop };\n","import { createElement, append, prepend, isNullOrUndefined, getValue, getDefaultDateObject, cldrData, addClass, setStyleAttribute, formatUnit, EventHandler } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * view base\n */\nvar ViewBase = /** @class */ (function () {\n    /**\n     * Constructor\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function ViewBase(parent) {\n        this.parent = parent;\n    }\n    ViewBase.prototype.isTimelineView = function () {\n        return this.parent.currentView.indexOf('Timeline') !== -1;\n    };\n    ViewBase.prototype.getContentRows = function () {\n        return [];\n    };\n    ViewBase.prototype.serverRenderLayout = function () {\n        // Need only for layout server rendering\n    };\n    ViewBase.prototype.getDayName = function (date) {\n        return this.parent.getDayNames('abbreviated')[date.getDay()];\n    };\n    ViewBase.prototype.getDate = function (date) {\n        return this.parent.globalize.formatDate(date, { format: 'd', calendar: this.parent.getCalendarMode() });\n    };\n    ViewBase.prototype.getTime = function (date) {\n        if (this.parent.isAdaptive) {\n            if (this.parent.activeViewOptions.timeFormat === 'HH:mm' || this.parent.activeViewOptions.timeFormat === 'HH.mm') {\n                return this.parent.globalize.formatDate(date, { format: 'H', calendar: this.parent.getCalendarMode() });\n            }\n            return this.parent.globalize.formatDate(date, { skeleton: 'h', calendar: this.parent.getCalendarMode() });\n        }\n        return this.parent.getTimeString(date);\n    };\n    ViewBase.prototype.getTimelineDate = function (date) {\n        var text = this.parent.globalize.formatDate(date, { skeleton: 'MMMd', calendar: this.parent.getCalendarMode() }) + ', ' +\n            this.parent.getDayNames('wide')[date.getDay()];\n        return util.capitalizeFirstWord(text, 'multiple');\n    };\n    ViewBase.prototype.createEventTable = function (trCount) {\n        var eventTable = createElement('div', { className: cls.EVENT_TABLE_CLASS });\n        append(this.getEventRows(trCount), eventTable);\n        return eventTable;\n    };\n    ViewBase.prototype.getEventRows = function (trCount) {\n        var eventRows = [];\n        var eventContainer;\n        for (var row = 0; row < trCount; row++) {\n            eventContainer = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n            if (this.parent.resourceBase && !this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.renderedResources) {\n                eventContainer.setAttribute('data-group-index', this.parent.resourceBase.renderedResources[row].groupIndex.toString());\n            }\n            eventRows.push(eventContainer);\n        }\n        return eventRows;\n    };\n    ViewBase.prototype.collapseRows = function (wrap) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('tbody'));\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('.' + cls.EVENT_TABLE_CLASS));\n        }\n    };\n    ViewBase.prototype.createTableLayout = function (className) {\n        var clsName = className || '';\n        var table = createElement('table', { className: cls.SCHEDULE_TABLE_CLASS + ' ' + clsName });\n        var tbody = createElement('tbody');\n        table.appendChild(tbody);\n        return table;\n    };\n    ViewBase.prototype.createColGroup = function (table, lastRow) {\n        var length = lastRow.length;\n        if (lastRow[0] && lastRow[0].colSpan) {\n            length = lastRow.map(function (value) { return value.colSpan; }).reduce(function (prev, next) { return prev + next; });\n        }\n        var colGroupEle = createElement('colgroup');\n        for (var i = 0; i < length; i++) {\n            colGroupEle.appendChild(createElement('col'));\n        }\n        prepend([colGroupEle], table);\n    };\n    ViewBase.prototype.getScrollXIndent = function (content) {\n        return content.offsetHeight - content.clientHeight > 0 ? util.getScrollBarWidth() : 0;\n    };\n    ViewBase.prototype.scrollTopPanel = function (target) {\n        this.getDatesHeaderElement().firstElementChild.scrollLeft = target.scrollLeft;\n    };\n    ViewBase.prototype.scrollHeaderLabels = function (target) {\n        var headerTable = this.element.querySelector('.e-date-header-wrap table');\n        var colWidth = headerTable.offsetWidth / headerTable.querySelectorAll('colgroup col').length;\n        var applyLeft = function (headerCells, isRtl) {\n            var currentCell;\n            var tdLeft = 0;\n            var colSpan = 0;\n            var hiddenLeft = isRtl ? target.scrollWidth - target.offsetWidth - target.scrollLeft : target.scrollLeft;\n            for (var _i = 0, headerCells_2 = headerCells; _i < headerCells_2.length; _i++) {\n                var cell = headerCells_2[_i];\n                colSpan += parseInt(cell.getAttribute('colSpan'), 10);\n                if (colSpan > Math.floor(hiddenLeft / colWidth)) {\n                    currentCell = cell;\n                    break;\n                }\n                tdLeft += cell.offsetWidth;\n            }\n            if (!isNullOrUndefined(currentCell)) {\n                currentCell.children[0].style[isRtl ? 'right' : 'left'] = (hiddenLeft - tdLeft) + 'px';\n            }\n        };\n        var classNames = ['.e-header-year-cell', '.e-header-month-cell', '.e-header-week-cell', '.e-header-cells'];\n        for (var _i = 0, classNames_1 = classNames; _i < classNames_1.length; _i++) {\n            var className = classNames_1[_i];\n            var headerCells = [].slice.call(this.element.querySelectorAll(className));\n            if (headerCells.length > 0) {\n                for (var _a = 0, headerCells_1 = headerCells; _a < headerCells_1.length; _a++) {\n                    var element = headerCells_1[_a];\n                    element.children[0].style[this.parent.enableRtl ? 'right' : 'left'] = '';\n                }\n                applyLeft(headerCells, this.parent.enableRtl);\n            }\n        }\n    };\n    ViewBase.prototype.addAttributes = function (td, element) {\n        if (td.template) {\n            append(td.template, element);\n        }\n        if (td.colSpan) {\n            element.setAttribute('colspan', td.colSpan.toString());\n        }\n        if (td.className) {\n            addClass([element], td.className);\n        }\n    };\n    ViewBase.prototype.getHeaderBarHeight = function () {\n        var headerBarHeight = 2;\n        if (this.parent.headerModule) {\n            headerBarHeight += util.getOuterHeight(this.parent.headerModule.getHeaderElement());\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resHeader = this.parent.element.querySelector('.' + cls.RESOURCE_HEADER_TOOLBAR);\n            if (resHeader) {\n                headerBarHeight += resHeader.offsetHeight;\n            }\n        }\n        return headerBarHeight;\n    };\n    ViewBase.prototype.renderPanel = function (type) {\n        if (type === cls.PREVIOUS_PANEL_CLASS) {\n            prepend([this.element], this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS));\n        }\n        else {\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n        }\n    };\n    ViewBase.prototype.setPanel = function (panel) {\n        this.element = panel;\n    };\n    ViewBase.prototype.getPanel = function () {\n        return this.element;\n    };\n    ViewBase.prototype.getDatesHeaderElement = function () {\n        return this.element.querySelector('.' + cls.DATE_HEADER_CONTAINER_CLASS);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ViewBase.prototype.getDateSlots = function (renderDates, workDays) {\n        return []; // Here getDateSlots only need in vertical and month views\n    };\n    ViewBase.prototype.generateColumnLevels = function () {\n        return []; // Here generateColumnLevels only need in vertical and month views\n    };\n    ViewBase.prototype.getColumnLevels = function () {\n        return this.colLevels;\n    };\n    ViewBase.prototype.highlightCurrentTime = function () {\n        // Here showTimeIndicator functionalities\n    };\n    ViewBase.prototype.startDate = function () {\n        return this.renderDates[0];\n    };\n    ViewBase.prototype.endDate = function () {\n        return util.addDays(this.renderDates[this.renderDates.length - 1], 1);\n    };\n    ViewBase.prototype.getStartHour = function () {\n        var startHour = this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);\n        if (isNullOrUndefined(startHour)) {\n            startHour = new Date(2000, 0, 0, 0);\n        }\n        return startHour;\n    };\n    ViewBase.prototype.getEndHour = function () {\n        var endHour = this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);\n        if (isNullOrUndefined(endHour)) {\n            endHour = new Date(2000, 0, 0, 0);\n        }\n        return endHour;\n    };\n    ViewBase.prototype.isCurrentDate = function (date) {\n        return date.setHours(0, 0, 0, 0) === this.parent.getCurrentTime().setHours(0, 0, 0, 0);\n    };\n    ViewBase.prototype.isCurrentMonth = function (date) {\n        return date.getFullYear() ===\n            this.parent.getCurrentTime().getFullYear() && date.getMonth() === this.parent.getCurrentTime().getMonth();\n    };\n    ViewBase.prototype.isWorkDay = function (date, workDays) {\n        if (workDays === void 0) { workDays = this.parent.activeViewOptions.workDays; }\n        if (workDays.indexOf(date.getDay()) >= 0) {\n            return true;\n        }\n        return false;\n    };\n    ViewBase.prototype.isWorkHour = function (date, startHour, endHour, workDays) {\n        if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour)) {\n            return false;\n        }\n        startHour.setMilliseconds(0);\n        endHour.setMilliseconds(0);\n        return !(util.getDateInMs(date) < util.getDateInMs(startHour) || util.getDateInMs(date) >= util.getDateInMs(endHour) ||\n            !this.isWorkDay(date, workDays));\n    };\n    ViewBase.prototype.getRenderDates = function (workDays) {\n        var renderDates = [];\n        // Due to same code for vertical and time line, week & work week views, if condition has used\n        if (this.parent.currentView === 'Week' || this.parent.currentView === 'TimelineWeek') {\n            var selectedDate = util.resetTime(this.parent.selectedDate);\n            var start = util.getWeekFirstDate(selectedDate, this.parent.activeViewOptions.firstDayOfWeek);\n            for (var i = 0, length_1 = util.WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_1; i++) {\n                if (this.parent.activeViewOptions.showWeekend) {\n                    renderDates.push(start);\n                }\n                else {\n                    if (this.isWorkDay(start, workDays)) {\n                        renderDates.push(start);\n                    }\n                }\n                start = util.addDays(start, 1);\n            }\n        }\n        else if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n            var start = util.getWeekFirstDate(util.resetTime(this.parent.selectedDate), this.parent.activeViewOptions.firstDayOfWeek);\n            for (var i = 0, length_2 = util.WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_2; i++) {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n                start = util.addDays(start, 1);\n            }\n        }\n        else {\n            var dayCount = this.parent.currentView === 'Agenda' ? this.parent.agendaDaysCount :\n                this.parent.activeViewOptions.interval;\n            var start = util.resetTime(this.parent.selectedDate);\n            do {\n                if (this.parent.activeViewOptions.showWeekend) {\n                    renderDates.push(start);\n                }\n                else {\n                    if (this.isWorkDay(start, workDays)) {\n                        renderDates.push(start);\n                    }\n                }\n                start = util.addDays(start, 1);\n            } while (dayCount !== renderDates.length);\n        }\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        if (this.parent.headerModule) {\n            this.parent.headerModule.previousNextIconHandler();\n        }\n        return renderDates;\n    };\n    ViewBase.prototype.getNextPreviousDate = function (type) {\n        if (this.parent.currentView === 'Day' || this.parent.currentView === 'TimelineDay') {\n            if (this.parent.activeViewOptions.showWeekend) {\n                var daysCount = this.parent.activeViewOptions.interval;\n                return util.addDays(this.parent.selectedDate, type === 'next' ? daysCount : -daysCount);\n            }\n            else {\n                var date = void 0;\n                if (type === 'next') {\n                    date = util.addDays(this.renderDates.slice(-1)[0], 1);\n                    while (!this.isWorkDay(date)) {\n                        date = util.addDays(date, 1);\n                    }\n                }\n                else {\n                    date = util.addDays(this.renderDates[0], -1);\n                    var count = 0;\n                    do {\n                        if (this.isWorkDay(date)) {\n                            count += 1;\n                        }\n                        if (this.parent.activeViewOptions.interval !== count) {\n                            date = util.addDays(date, -1);\n                        }\n                    } while (this.parent.activeViewOptions.interval !== count);\n                }\n                return date;\n            }\n        }\n        var weekLength = type === 'next' ? util.WEEK_LENGTH : -util.WEEK_LENGTH;\n        return util.addDays(this.parent.selectedDate, weekLength * this.parent.activeViewOptions.interval);\n    };\n    ViewBase.prototype.getLabelText = function (view) {\n        var viewStr = view.charAt(0).toLowerCase() + view.substring(1);\n        return this.parent.localeObj.getConstant(viewStr) + ' of ' + util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { skeleton: 'long', calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    ViewBase.prototype.getDateRangeText = function () {\n        if (this.parent.isAdaptive) {\n            var formatDate = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n            return util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: formatDate, calendar: this.parent.getCalendarMode() }), 'single');\n        }\n        return this.formatDateRange(this.renderDates[0], this.renderDates[this.renderDates.length - 1]);\n    };\n    ViewBase.prototype.formatDateRange = function (startDate, endDate) {\n        var globalize = this.parent.globalize;\n        var mode = this.parent.getCalendarMode();\n        if (startDate === endDate) {\n            endDate = null;\n        }\n        if (!isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            var text = '';\n            if (!endDate) {\n                text = globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode });\n                return util.capitalizeFirstWord(text, 'multiple');\n            }\n            text = (globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode }) +\n                ' - ' + globalize.formatDate(endDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode }));\n            return util.capitalizeFirstWord(text, 'multiple');\n        }\n        var formattedStr;\n        var longDateFormat;\n        if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n            longDateFormat = getValue('dateFormats.long', getDefaultDateObject(mode));\n        }\n        else {\n            longDateFormat = getValue('main.' + '' + this.parent.locale + '.dates.calendars.' + mode + '.dateFormats.long', cldrData);\n        }\n        if (!endDate) {\n            return util.capitalizeFirstWord(globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }), 'single');\n        }\n        var dateFormat = longDateFormat.trim().toLocaleLowerCase();\n        if (dateFormat.substr(0, 1) === 'd') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMMM yyyy', calendar: mode });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd MMM', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: mode });\n                }\n            }\n            else {\n                formattedStr = globalize.formatDate(startDate, { format: 'dd MMM yyyy', calendar: mode }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: mode });\n            }\n        }\n        else if (dateFormat.substr(0, 1) === 'm') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMMM dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd, yyyy', calendar: mode });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMM dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: mode });\n                }\n            }\n            else {\n                formattedStr = globalize.\n                    formatDate(startDate, { format: 'MMM dd, yyyy', calendar: mode }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: mode });\n            }\n        }\n        else {\n            formattedStr = globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }) + ' - ' +\n                globalize.formatDate(endDate, { format: longDateFormat, calendar: mode });\n        }\n        return util.capitalizeFirstWord(formattedStr, 'multiple');\n    };\n    ViewBase.prototype.getMobileDateElement = function (date, className) {\n        var wrap = createElement('div', {\n            className: className,\n            innerHTML: '<div class=\"e-m-date\">' + this.parent.globalize.formatDate(date, { format: 'd', calendar: this.parent.getCalendarMode() }) + '</div>' + '<div class=\"e-m-day\">' +\n                util.capitalizeFirstWord(this.parent.globalize.formatDate(date, { format: 'E', calendar: this.parent.getCalendarMode() }), 'single') + '</div>'\n        });\n        return wrap;\n    };\n    ViewBase.prototype.setResourceHeaderContent = function (tdElement, tdData, className) {\n        if (className === void 0) { className = cls.TEXT_ELLIPSIS; }\n        if (this.parent.activeViewOptions.resourceHeaderTemplate) {\n            var data = { resource: tdData.resource, resourceData: tdData.resourceData };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.resourceHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'resourceHeaderTemplate';\n            var quickTemplate = [].slice.call(this.parent.getResourceHeaderTemplate()(data, this.parent, 'resourceHeaderTemplate', templateId, false));\n            append(quickTemplate, tdElement);\n        }\n        else {\n            tdElement.appendChild(createElement('div', {\n                className: className, innerHTML: tdData.resourceData[tdData.resource.textField]\n            }));\n        }\n    };\n    ViewBase.prototype.renderResourceMobileLayout = function () {\n        if (this.parent.resourceBase.lastResourceLevel && this.parent.resourceBase.lastResourceLevel.length <= 0) {\n            return;\n        }\n        this.parent.resourceBase.renderResourceHeader();\n        this.parent.resourceBase.renderResourceTree();\n    };\n    ViewBase.prototype.addAutoHeightClass = function (element) {\n        if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            addClass([element], cls.AUTO_HEIGHT);\n        }\n    };\n    ViewBase.prototype.getColElements = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' col, .' + cls.DATE_HEADER_WRAP_CLASS + ' col'));\n    };\n    ViewBase.prototype.setColWidth = function (content) {\n        if (this.isTimelineView()) {\n            var colElements = this.getColElements();\n            var contentBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n            var colWidth_1 = Math.ceil(contentBody.offsetWidth / (colElements.length / 2));\n            colElements.forEach(function (col) { return setStyleAttribute(col, { 'width': formatUnit(colWidth_1) }); });\n            if (content.offsetHeight !== content.clientHeight) {\n                var resourceColumn = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n                if (!isNullOrUndefined(resourceColumn)) {\n                    setStyleAttribute(resourceColumn, { 'height': formatUnit(content.clientHeight) });\n                }\n            }\n        }\n    };\n    ViewBase.prototype.resetColWidth = function () {\n        var colElements = this.getColElements();\n        for (var _i = 0, colElements_1 = colElements; _i < colElements_1.length; _i++) {\n            var col = colElements_1[_i];\n            col.style.width = '';\n        }\n    };\n    ViewBase.prototype.getContentAreaElement = function () {\n        return this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    };\n    ViewBase.prototype.wireExpandCollapseIconEvents = function () {\n        if (this.parent.resourceBase && this.parent.resourceBase.resourceCollection.length > 1) {\n            var treeIcons = [].slice.call(this.element.querySelectorAll('.' + cls.RESOURCE_TREE_ICON_CLASS));\n            for (var _i = 0, treeIcons_1 = treeIcons; _i < treeIcons_1.length; _i++) {\n                var icon = treeIcons_1[_i];\n                EventHandler.clearEvents(icon);\n                EventHandler.add(icon, 'click', this.parent.resourceBase.onTreeIconClick, this.parent.resourceBase);\n            }\n        }\n    };\n    ViewBase.prototype.scrollToDate = function (scrollDate) {\n        if (['Month', 'TimelineMonth'].indexOf(this.parent.currentView) === -1 || isNullOrUndefined(scrollDate)) {\n            return;\n        }\n        var scrollWrap = this.getContentAreaElement();\n        var tdDate = new Date(util.resetTime(new Date(+scrollDate)).getTime()).getTime();\n        var dateElement = scrollWrap.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + tdDate + \"\\\"]\");\n        if (this.parent.currentView === 'Month' && dateElement) {\n            scrollWrap.scrollTop = dateElement.offsetTop;\n        }\n        if (this.parent.currentView === 'TimelineMonth' && dateElement) {\n            if (!this.parent.enableRtl) {\n                scrollWrap.scrollLeft = dateElement.offsetLeft;\n            }\n            else {\n                scrollWrap.scrollLeft = -(this.parent.getContentTable().offsetWidth - dateElement.offsetLeft - dateElement.offsetWidth);\n            }\n        }\n    };\n    ViewBase.prototype.setPersistence = function () {\n        if (this.parent.enablePersistence) {\n            var contentWrap = this.element.querySelector('.e-content-wrap');\n            if (!isNullOrUndefined(contentWrap)) {\n                this.parent.scrollLeft = contentWrap.scrollLeft;\n                this.parent.scrollTop = contentWrap.scrollTop;\n            }\n        }\n    };\n    ViewBase.prototype.retainScrollPosition = function () {\n        if (this.parent.enablePersistence) {\n            var conWrap = this.parent.element.querySelector('.e-content-wrap');\n            if (!isNullOrUndefined(conWrap) && !isNullOrUndefined(this.parent.scrollLeft) && !isNullOrUndefined(this.parent.scrollTop)) {\n                conWrap.scrollTop = this.parent.scrollTop;\n                conWrap.scrollLeft = this.parent.scrollLeft;\n            }\n        }\n    };\n    return ViewBase;\n}());\nexport { ViewBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend, EventHandler, formatUnit, Browser } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * vertical view\n */\nvar VerticalView = /** @class */ (function (_super) {\n    __extends(VerticalView, _super);\n    function VerticalView(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-day-view';\n        _this.isInverseTableSelect = true;\n        _this.baseCssClass = 'e-vertical-view';\n        return _this;\n    }\n    VerticalView.prototype.getModuleName = function () {\n        return 'verticalView';\n    };\n    VerticalView.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.scrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.renderEvents, this);\n    };\n    VerticalView.prototype.removeEventListener = function () {\n        this.parent.off(event.scrollUiUpdate, this.scrollUiUpdate);\n        this.parent.off(event.dataReady, this.renderEvents);\n    };\n    VerticalView.prototype.renderEvents = function () {\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var appointment = new VerticalEvent(this.parent);\n            appointment.renderAppointments();\n        }\n        else {\n            var appointment = new MonthEvent(this.parent);\n            appointment.renderAppointments();\n        }\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    VerticalView.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        var target = e.target;\n        this.parent.notify(event.virtualScroll, e);\n        this.scrollLeftPanel(target);\n        this.scrollTopPanel(target);\n        if (!this.parent.isAdaptive) {\n            this.parent.uiStateValues.top = target.scrollTop;\n        }\n        this.parent.uiStateValues.left = target.scrollLeft;\n        if (!isNullOrUndefined(this.parent.quickPopup)) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        this.setPersistence();\n    };\n    VerticalView.prototype.onApaptiveMove = function (e) {\n        if (this.parent.uiStateValues.action) {\n            e.preventDefault();\n        }\n    };\n    VerticalView.prototype.onApaptiveScroll = function (e) {\n        this.parent.removeNewEventElement();\n        this.parent.uiStateValues.top = e.target.scrollTop;\n    };\n    VerticalView.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (!isNullOrUndefined(leftPanel)) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollUiUpdate = function (args) {\n        var headerBarHeight = this.getHeaderBarHeight();\n        var timecells = this.getLeftPanelElement();\n        var content = this.getScrollableElement();\n        var header = this.getDatesHeaderElement();\n        var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n        this.setColWidth(content);\n        this.setContentHeight(content, timecells, scrollerHeight);\n        var scrollBarWidth = util.getScrollBarWidth();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.style[args.cssProperties.rtlPadding] = '';\n        if (content.offsetWidth - content.clientWidth > 0) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = '';\n        }\n        if (!args.isPreventScrollUpdate) {\n            if (this.parent.uiStateValues.isInitial) {\n                this.scrollToWorkHour();\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                if (timecells) {\n                    timecells.scrollTop = this.parent.uiStateValues.top;\n                }\n                content.scrollTop = this.parent.uiStateValues.top;\n                content.scrollLeft = this.parent.uiStateValues.left;\n            }\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.highlightCurrentTime();\n        }\n        this.retainScrollPosition();\n    };\n    VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n        else {\n            if (!isNullOrUndefined(leftPanelElement)) {\n                leftPanelElement.style.height = (this.parent.height === 'auto') ? 'auto'\n                    : formatUnit(height - this.getScrollXIndent(element));\n            }\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n    };\n    VerticalView.prototype.scrollToWorkHour = function () {\n        if (this.parent.workHours.highlight) {\n            var firstWorkHourCell = this.element.querySelector('.' + cls.WORK_HOURS_CLASS);\n            if (firstWorkHourCell) {\n                this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.left = 0;\n            }\n        }\n    };\n    VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\n        var date = this.parent.getStartEndTime(hour);\n        if (isNullOrUndefined(date) || !isNullOrUndefined(scrollDate)) {\n            return;\n        }\n        this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n    };\n    VerticalView.prototype.generateColumnLevels = function () {\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        var columnLevels = [];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n                var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n                var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n                columnLevels = [dateSlots];\n            }\n        }\n        else {\n            columnLevels.push(level);\n        }\n        this.colLevels = columnLevels;\n        return columnLevels;\n    };\n    // eslint-disable-next-line max-len\n    VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n        if (workStartHour === void 0) { workStartHour = this.parent.workHours.start; }\n        if (workEndHour === void 0) { workEndHour = this.parent.workHours.end; }\n        var dateCol = [];\n        var start = this.parent.getStartEndTime(workStartHour);\n        var end = this.parent.getStartEndTime(workEndHour);\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList = [cls.HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateCol.push({\n                date: col, type: 'dateHeader', className: classList, colSpan: 1,\n                workDays: workDays, startHour: new Date(+start), endHour: new Date(+end)\n            });\n        }\n        return dateCol;\n    };\n    VerticalView.prototype.isWorkHourRange = function (date) {\n        return (this.getStartHour().getTime() <= date.getTime()) && (this.getEndHour().getTime() >= date.getTime());\n    };\n    VerticalView.prototype.highlightCurrentTime = function () {\n        var _this = this;\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return;\n        }\n        if (this.parent.showTimeIndicator && this.isWorkHourRange(this.parent.getCurrentTime())) {\n            var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n            if (currentDateIndex.length > 0) {\n                var workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n                if (workCells.length > 0) {\n                    this.changeCurrentTimePosition();\n                }\n                if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n                    this.currentTimeIndicatorTimer = window.setInterval(function () { _this.changeCurrentTimePosition(); }, util.MS_PER_MINUTE);\n                }\n            }\n            else {\n                this.clearCurrentTimeIndicatorTimer();\n            }\n        }\n        else {\n            this.clearCurrentTimeIndicatorTimer();\n        }\n    };\n    VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        if (!isNullOrUndefined(this.parent.resourceBase) && (this.parent.activeViewOptions.group.resources.length > 0) &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            var count = 0;\n            for (var _i = 0, _a = this.parent.resourceBase.lastResourceLevel; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                var index = this.parent.getIndexOfDate(resource.renderDates, util.resetTime(this.parent.getCurrentTime()));\n                if (index >= 0) {\n                    var resIndex = this.parent.activeViewOptions.group.byDate ?\n                        (this.parent.resourceBase.lastResourceLevel.length * index) + count : count + index;\n                    currentDateIndex.push(resIndex);\n                }\n                count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n            }\n        }\n        else {\n            var renderDates = (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0)\n                ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n            var index = this.parent.getIndexOfDate(renderDates, util.resetTime(this.parent.getCurrentTime()));\n            if (index >= 0) {\n                currentDateIndex.push(index);\n            }\n        }\n        return currentDateIndex;\n    };\n    VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n        if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n            window.clearInterval(this.currentTimeIndicatorTimer);\n            this.currentTimeIndicatorTimer = null;\n            this.removeCurrentTimeIndicatorElements();\n        }\n    };\n    VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n        var queryString = '.' + cls.PREVIOUS_TIMELINE_CLASS + ',.' + cls.CURRENT_TIMELINE_CLASS + ',.' + cls.CURRENT_TIME_CLASS;\n        var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n        for (var _i = 0, timeIndicator_1 = timeIndicator; _i < timeIndicator_1.length; _i++) {\n            var indicator = timeIndicator_1[_i];\n            remove(indicator);\n        }\n    };\n    VerticalView.prototype.changeCurrentTimePosition = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var firstRow = this.parent.getContentTable().rows[0];\n        var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n        var topInPx = formatUnit(top);\n        var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n        var timeCellsWrap = this.getLeftPanelElement();\n        var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n        if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\n            return;\n        }\n        var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + cls.TIMELINE_WRAPPER_CLASS));\n        for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n            curTimeWrap[i].appendChild(createElement('div', { className: cls.PREVIOUS_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n            var day = currentDateIndex_1[_i];\n            curTimeWrap[day].appendChild(createElement('div', { className: cls.CURRENT_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: cls.CURRENT_TIME_CLASS,\n            styles: 'top:' + topInPx\n        });\n        if (rowIndex <= timeTrs.length) {\n            removeClass(timeCellsWrap.querySelectorAll('.' + cls.HIDE_CHILDS_CLASS), cls.HIDE_CHILDS_CLASS);\n            if (timeTrs[rowIndex]) {\n                addClass([timeTrs[rowIndex].lastElementChild], cls.HIDE_CHILDS_CLASS);\n            }\n            prepend([currentTimeEle], timeCellsWrap);\n            currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - (currentTimeEle.offsetHeight / 2));\n        }\n    };\n    VerticalView.prototype.getTopFromDateTime = function (date) {\n        var startHour = this.getStartHour();\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount) /\n            this.parent.activeViewOptions.timeScale.interval;\n    };\n    VerticalView.prototype.getWorkCellHeight = function () {\n        return this.element.querySelector('.' + cls.WORK_CELLS_CLASS).offsetHeight;\n    };\n    VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n        var cntEle;\n        var wrapper = createElement('div');\n        var templateName = '';\n        var templateId = this.parent.element.id + '_';\n        switch (type) {\n            case 'dateHeader':\n                if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                    templateName = 'dateHeaderTemplate';\n                    var args = { date: date, type: type };\n                    var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                    cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = this.parent.activeView.isTimelineView() ?\n                        \"<span class=\\\"e-header-date e-navigate\\\">\" + this.getTimelineDate(date) + \"</span>\" :\n                        \"<div class=\\\"e-header-day\\\">\" + util.capitalizeFirstWord(this.getDayName(date), 'single') + \"</div>\" +\n                            (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + this.getDate(date) + \"</div>\");\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'majorSlot':\n                if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n                    templateName = 'majorSlotTemplate';\n                    var args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = \"<span>\" + this.getTime(date) + \"</span>\";\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'minorSlot':\n                if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n                    templateName = 'minorSlotTemplate';\n                    var args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = '&nbsp;';\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'alldayCells':\n                if (this.parent.activeViewOptions.cellTemplate) {\n                    var viewName = this.parent.activeViewOptions.cellTemplateName;\n                    templateName = 'cellTemplate';\n                    var args = { date: date, type: type, groupIndex: groupIndex };\n                    cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n                }\n                break;\n        }\n        return cntEle;\n    };\n    VerticalView.prototype.renderLayout = function (type) {\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var clsList = [this.baseCssClass, this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            addClass([this.element], [cls.TIMESCALE_DISABLE, this.viewClass]);\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(cls.IGNORE_WHITESPACE);\n        }\n        this.renderPanel(type);\n        addClass([this.element], clsList);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    VerticalView.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var indentTd = createElement('td', { className: cls.LEFT_INDENT_CLASS });\n            indentTd.appendChild(this.renderLeftIndent());\n            tr.appendChild(indentTd);\n        }\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    VerticalView.prototype.renderContent = function () {\n        var tr = createElement('tr');\n        var workTd = createElement('td');\n        if (this.parent.isAdaptive) {\n            workTd.setAttribute('colspan', (this.parent.activeViewOptions.timeScale.enable ? '2' : '1'));\n            var scrollContainer = createElement('div', { className: cls.SCROLL_CONTAINER_CLASS });\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                scrollContainer.appendChild(this.renderTimeCells());\n            }\n            scrollContainer.appendChild(this.renderContentArea());\n            workTd.appendChild(scrollContainer);\n            EventHandler.add(scrollContainer, 'scroll', this.onApaptiveScroll, this);\n            EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onApaptiveMove, this);\n            tr.appendChild(workTd);\n        }\n        else {\n            workTd.appendChild(this.renderContentArea());\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                var timesTd = createElement('td');\n                timesTd.appendChild(this.renderTimeCells());\n                tr.appendChild(timesTd);\n            }\n            tr.appendChild(workTd);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    VerticalView.prototype.renderLeftIndent = function () {\n        var wrap = createElement('div', { className: cls.LEFT_INDENT_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var rowCount = this.colLevels.length;\n        for (var i = 0; i < rowCount; i++) {\n            var ntr_1 = trEle.cloneNode();\n            var data_1 = { className: [(this.colLevels[i][0] && this.colLevels[i][0].className[0])], type: 'emptyCells' };\n            if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(cls.HEADER_CELLS_CLASS) !== -1) {\n                data_1.className.push(cls.WEEK_NUMBER_CLASS);\n                var weekNo = this.parent.getWeekNumberContent(this.renderDates);\n                data_1.template = [createElement('span', {\n                        innerHTML: '' + weekNo,\n                        attrs: { title: this.parent.localeObj.getConstant('week') + ' ' + weekNo }\n                    })];\n            }\n            ntr_1.appendChild(this.createTd(data_1));\n            tbl.querySelector('tbody').appendChild(ntr_1);\n        }\n        var ntr = trEle.cloneNode();\n        var appointmentExpandCollapse = createElement('div', {\n            attrs: {\n                'tabindex': '0', 'role': 'list',\n                title: this.parent.localeObj.getConstant('expandAllDaySection'), 'aria-disabled': 'false', 'aria-label': 'Expand section'\n            },\n            className: cls.ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + cls.APPOINTMENT_ROW_EXPAND_CLASS + ' ' +\n                cls.ICON + ' ' + cls.DISABLE_CLASS\n        });\n        var data = { className: [cls.ALLDAY_CELLS_CLASS], type: 'emptyCells' };\n        var nth = this.createTd(data);\n        nth.appendChild(appointmentExpandCollapse);\n        ntr.appendChild(nth);\n        tbl.querySelector('tbody').appendChild(ntr);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var rowCount = this.colLevels.length;\n        var lastLevel = this.colLevels[rowCount - 1];\n        for (var i = 0; i < rowCount; i++) {\n            var ntr = trEle.cloneNode();\n            addClass([ntr], cls.HEADER_ROW_CLASS);\n            var level = this.colLevels[i];\n            for (var j = 0; j < level.length; j++) {\n                ntr.appendChild(this.createTd(level[j]));\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        this.createAllDayRow(tbl, lastLevel);\n        this.createColGroup(tbl, lastLevel);\n        wrap.appendChild(tbl);\n        return container;\n    };\n    VerticalView.prototype.createAllDayRow = function (table, tdData) {\n        var ntr = createElement('tr');\n        addClass([ntr], cls.ALLDAY_ROW_CLASS);\n        for (var j = 0; j < tdData.length; j++) {\n            var td = extend({}, tdData[j]);\n            td.className = [cls.ALLDAY_CELLS_CLASS];\n            td.type = 'alldayCells';\n            var ntd = this.createTd(td);\n            ntd.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                ntd.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            this.wireCellEvents(ntd);\n            ntr.appendChild(ntd);\n        }\n        table.querySelector('tbody').appendChild(ntr);\n        var thead = createElement('thead');\n        thead.appendChild(this.createEventWrapper('allDay'));\n        prepend([thead], table);\n    };\n    VerticalView.prototype.createTd = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.date && td.type) {\n            var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n            if (ele && ele.length) {\n                append(ele, tdEle);\n            }\n        }\n        if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + td.date)))) {\n            addClass([tdEle], cls.DISABLE_DATES);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader' && td.className.indexOf(cls.HEADER_CELLS_CLASS) >= 0) {\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            this.wireMouseEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return tdEle;\n    };\n    VerticalView.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        this.wireMouseEvents(element);\n    };\n    VerticalView.prototype.wireMouseEvents = function (element) {\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    VerticalView.prototype.renderTimeCells = function () {\n        var _this = this;\n        var wrap = createElement('div', { className: cls.TIME_CELLS_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.last ? [cls.TIME_CELLS_CLASS, cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS];\n            var ntr = trEle.cloneNode();\n            var data = { date: r.date, type: r.type, className: r.className };\n            ntr.appendChild(_this.createTd(data));\n            tbl.querySelector('tbody').appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentArea = function () {\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.addAutoHeightClass(tbl);\n        this.renderContentTable(tbl);\n        this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n        wrap.appendChild(tbl);\n        this.wireCellEvents(tbl.querySelector('tbody'));\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        EventHandler.add(wrap, Browser.touchMoveEvent, this.onApaptiveMove, this);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentTable = function (table) {\n        var _this = this;\n        var tr = createElement('tr', { attrs: { role: 'row' } });\n        var td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        var tbody = table.querySelector('tbody');\n        var handler = function (r) {\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                var ntd = _this.createContentTd(tdData, r, td);\n                ntr.appendChild(ntd);\n            }\n            tbody.appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        this.renderContentTableHeader(table);\n    };\n    VerticalView.prototype.createContentTd = function (tdData, r, td) {\n        var ntd = td.cloneNode();\n        if (tdData.colSpan) {\n            ntd.setAttribute('colspan', tdData.colSpan.toString());\n        }\n        var clsName = this.getContentTdClass(r);\n        if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + tdData.date)))) {\n            clsName.push(cls.DISABLE_DATES);\n        }\n        var cellDate = util.resetTime(new Date('' + tdData.date));\n        util.setTime(cellDate, util.getDateInMs(r.date));\n        var type = 'workCells';\n        if (tdData.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n            clsName.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && ((this.parent.activeViewOptions.timeScale.enable &&\n            this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays)) ||\n            (!this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays)))) {\n            clsName.push(cls.WORK_HOURS_CLASS);\n        }\n        addClass([ntd], clsName);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var args_1 = { date: cellDate, type: type, groupIndex: tdData.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\n            var templateId = scheduleId + viewName + 'cellTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n            append(tooltipTemplate, ntd);\n        }\n        ntd.setAttribute('data-date', cellDate.getTime().toString());\n        if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                tdData.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        var args = { elementType: type, element: ntd, date: cellDate, groupIndex: tdData.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return ntd;\n    };\n    VerticalView.prototype.getContentTdClass = function (r) {\n        return r.last ? [cls.WORK_CELLS_CLASS] : [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n    };\n    VerticalView.prototype.renderContentTableHeader = function (table) {\n        var thead = createElement('thead');\n        thead.appendChild(this.createEventWrapper());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            thead.appendChild(this.createEventWrapper('timeIndicator'));\n        }\n        prepend([thead], table);\n    };\n    VerticalView.prototype.createEventWrapper = function (type) {\n        if (type === void 0) { type = ''; }\n        var tr = createElement('tr');\n        var levels = this.colLevels.slice(-1)[0];\n        for (var i = 0, len = levels.length; i < len; i++) {\n            var col = levels[i];\n            var appointmentWrap = createElement('td', {\n                className: (type === 'allDay') ? cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : (type === 'timeIndicator') ?\n                    cls.TIMELINE_WRAPPER_CLASS : cls.DAY_WRAPPER_CLASS, attrs: { 'data-date': col.date.getTime().toString() }\n            });\n            if (!isNullOrUndefined(col.groupIndex)) {\n                appointmentWrap.setAttribute('data-group-index', col.groupIndex.toString());\n            }\n            if (type === '') {\n                var innerWrapper = createElement('div', {\n                    id: cls.APPOINTMENT_WRAPPER_CLASS + '-' + i.toString(),\n                    className: cls.APPOINTMENT_WRAPPER_CLASS\n                });\n                appointmentWrap.appendChild(innerWrapper);\n            }\n            tr.appendChild(appointmentWrap);\n        }\n        return tr;\n    };\n    VerticalView.prototype.getScrollableElement = function () {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    };\n    VerticalView.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.TIME_CELLS_WRAP_CLASS);\n    };\n    VerticalView.prototype.getEndDateFromStartDate = function (start) {\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var end = new Date(start.getTime());\n        end.setMilliseconds(end.getMilliseconds() + msInterval);\n        return end;\n    };\n    VerticalView.prototype.getTimeSlotRows = function (handler) {\n        var rows = [];\n        var startHour = this.getStartHour();\n        var endHour = this.getEndHour();\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var length = Math.round(util.MS_PER_DAY / msInterval);\n        var msStartHour = startHour.getTime();\n        var msEndHour = endHour.getTime();\n        if (msStartHour !== msEndHour) {\n            length = (Math.abs(msEndHour - msStartHour) / msInterval) - ((new Date(msEndHour).getTimezoneOffset()\n                - new Date(msStartHour).getTimezoneOffset()) / (60 / this.parent.activeViewOptions.timeScale.slotCount));\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            length = 1;\n        }\n        var start = this.parent.getStartEndTime(this.parent.workHours.start);\n        var end = this.parent.getStartEndTime(this.parent.workHours.end);\n        for (var i = 0; i < length; i++) {\n            var dt = new Date(msStartHour + (msInterval * i));\n            if (util.isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n                var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n                dt = new Date(dt.getTime() - (1000 * 60 * timeOffset));\n            }\n            var majorTickDivider = i % (msMajorInterval / msInterval);\n            var row = {\n                date: new Date('' + dt),\n                startHour: start,\n                endHour: end,\n                first: (majorTickDivider === 0),\n                middle: (majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1),\n                last: (majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1),\n                type: ''\n            };\n            if (handler) {\n                handler(row);\n            }\n            rows.push(row);\n        }\n        return rows;\n    };\n    VerticalView.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.clearCurrentTimeIndicatorTimer();\n        if (this.element) {\n            var contentScrollableEle = this.getContentAreaElement();\n            if (contentScrollableEle) {\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n            }\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            remove(this.element);\n            this.element = null;\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n        }\n    };\n    return VerticalView;\n}(ViewBase));\nexport { VerticalView };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { VerticalView } from './vertical-view';\n/**\n * day view\n */\nvar Day = /** @class */ (function (_super) {\n    __extends(Day, _super);\n    /**\n     * Constructor for day view\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function Day(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-day-view';\n        return _this;\n    }\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    Day.prototype.getModuleName = function () {\n        return 'day';\n    };\n    return Day;\n}(VerticalView));\nexport { Day };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { VerticalView } from './vertical-view';\n/**\n * week view\n */\nvar Week = /** @class */ (function (_super) {\n    __extends(Week, _super);\n    /**\n     * Constructor for week view\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function Week(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-week-view';\n        return _this;\n    }\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    Week.prototype.getModuleName = function () {\n        return 'week';\n    };\n    return Week;\n}(VerticalView));\nexport { Week };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { VerticalView } from './vertical-view';\nimport * as util from '../base/util';\n/**\n * work week view\n */\nvar WorkWeek = /** @class */ (function (_super) {\n    __extends(WorkWeek, _super);\n    /**\n     * Constructor for work week view\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function WorkWeek(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-work-week-view';\n        return _this;\n    }\n    WorkWeek.prototype.startDate = function () {\n        var startDate = this.renderDates[0];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            startDate = this.parent.resourceBase.getResourceRenderDates()[0];\n        }\n        return startDate;\n    };\n    WorkWeek.prototype.endDate = function () {\n        var endDate = util.addDays(this.renderDates[this.renderDates.length - 1], 1);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            endDate = util.addDays(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0], 1);\n        }\n        return endDate;\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    WorkWeek.prototype.getModuleName = function () {\n        return 'workWeek';\n    };\n    return WorkWeek;\n}(VerticalView));\nexport { WorkWeek };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, append, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * month view\n */\nvar Month = /** @class */ (function (_super) {\n    __extends(Month, _super);\n    function Month(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dayNameFormat = 'wide';\n        _this.viewClass = 'e-month-view';\n        _this.isInverseTableSelect = false;\n        _this.monthDates = {};\n        return _this;\n    }\n    Month.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onScrollUIUpdate, this);\n        this.parent.on(event.dataReady, this.onDataReady, this);\n        this.parent.on(event.cellClick, this.onCellClick, this);\n    };\n    Month.prototype.removeEventListener = function () {\n        this.parent.off(event.scrollUiUpdate, this.onScrollUIUpdate);\n        this.parent.off(event.dataReady, this.onDataReady);\n        this.parent.off(event.cellClick, this.onCellClick);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Month.prototype.onDataReady = function (args) {\n        var monthEvent = new MonthEvent(this.parent);\n        monthEvent.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Month.prototype.onCellClick = function (event) { };\n    Month.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        this.parent.notify(event.virtualScroll, e);\n        this.scrollTopPanel(e.target);\n        this.scrollLeftPanel(e.target);\n        this.setPersistence();\n    };\n    Month.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (leftPanel) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    Month.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.WEEK_NUMBER_WRAPPER_CLASS);\n    };\n    Month.prototype.onScrollUIUpdate = function (args) {\n        var headerHeight = this.getHeaderBarHeight();\n        var header = this.getDatesHeaderElement();\n        var content = this.getContentAreaElement();\n        var height = this.parent.element.offsetHeight - headerHeight - header.offsetHeight;\n        var leftPanel = this.getLeftPanelElement();\n        this.setContentHeight(content, leftPanel, height);\n        var scrollBarWidth = util.getScrollBarWidth();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.style[args.cssProperties.rtlPadding] = '';\n        if (content.offsetWidth - content.clientWidth > 0) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = '';\n        }\n        this.setColWidth(content);\n        if (args.scrollPosition) {\n            if (leftPanel) {\n                leftPanel.scrollTop = args.scrollPosition.top;\n            }\n            content.scrollTop = args.scrollPosition.top;\n            content.scrollLeft = args.scrollPosition.left;\n        }\n        else {\n            var headerCell = this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + '[data-date=\"'\n                + this.parent.selectedDate.getTime().toString() + '\"]');\n            if (!isNullOrUndefined(headerCell)) {\n                content.scrollLeft = !this.parent.enableRtl ?\n                    headerCell.offsetLeft : -(this.parent.getContentTable().offsetWidth - headerCell.offsetLeft - headerCell.offsetWidth);\n            }\n            else {\n                content.scrollLeft = 0;\n            }\n        }\n        this.retainScrollPosition();\n    };\n    Month.prototype.setContentHeight = function (content, leftPanelElement, height) {\n        content.style.height = 'auto';\n        if (this.parent.currentView === 'Month') {\n            content.style.height = formatUnit(height);\n        }\n        if (leftPanelElement) {\n            if (this.parent.currentView === 'MonthAgenda') {\n                height = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight;\n            }\n            leftPanelElement.style.height = 'auto';\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n        }\n    };\n    Month.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            colLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.currentView === 'MonthAgenda') {\n                colLevels = [level];\n            }\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                colLevels = [this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays)];\n            }\n        }\n        else {\n            colLevels.push(level);\n        }\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    Month.prototype.getDateSlots = function (renderDates, workDays) {\n        var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : workDays.length;\n        var dateSlots = [];\n        for (var col = 0; col < count; col++) {\n            var classList = [cls.HEADER_CELLS_CLASS];\n            var currentDateIndex = renderDates.slice(0, count).map(function (date) { return date.getDay(); });\n            if (this.isCurrentMonth(this.parent.selectedDate) && currentDateIndex.indexOf(this.parent.getCurrentTime().getDay()) === col) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateSlots.push({ date: renderDates[col], type: 'monthDay', className: classList, colSpan: 1, workDays: workDays });\n        }\n        return dateSlots;\n    };\n    Month.prototype.getDayNameFormat = function () {\n        if (this.parent.isAdaptive || this.parent.activeViewOptions.group.resources.length > 0) {\n            return 'abbreviated';\n        }\n        return 'wide';\n    };\n    Month.prototype.renderLayout = function (type) {\n        this.dayNameFormat = this.getDayNameFormat();\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var clsList = [this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(cls.IGNORE_WHITESPACE);\n        }\n        addClass([this.element], clsList);\n        this.renderPanel(type);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        var target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        if (this.parent.uiStateValues.isGroupAdaptive && !target.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    Month.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    Month.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        this.renderLeftIndent(tr);\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    Month.prototype.renderLeftIndent = function (tr) {\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(createElement('td', { className: 'e-left-indent' }));\n        }\n    };\n    Month.prototype.renderContent = function () {\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(this.renderWeekNumberContent());\n        }\n        var workTd = createElement('td');\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        var contentArea = this.renderContentArea();\n        if (this.parent.currentView === 'Month') {\n            wrap.appendChild(contentArea);\n        }\n        else {\n            var monthAgendaWrapper = createElement('div', { className: cls.TABLE_CONTAINER_CLASS });\n            monthAgendaWrapper.appendChild(contentArea);\n            wrap.appendChild(monthAgendaWrapper);\n        }\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        workTd.appendChild(wrap);\n        tr.appendChild(workTd);\n        this.element.querySelector('tbody').appendChild(tr);\n        this.renderAppointmentContainer();\n    };\n    Month.prototype.renderWeekNumberContent = function () {\n        var dateCol = this.renderDates.map(function (date) { return new Date(+date); });\n        var td = createElement('td');\n        var contentWrapper = createElement('div', { className: cls.WEEK_NUMBER_WRAPPER_CLASS });\n        td.appendChild(contentWrapper);\n        var contentWrapTable = this.createTableLayout();\n        contentWrapper.appendChild(contentWrapTable);\n        var noOfDays = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH :\n            this.parent.activeViewOptions.workDays.length;\n        for (var i = 0, length_1 = (this.renderDates.length / noOfDays); i < length_1; i++) {\n            var dates = dateCol.splice(0, noOfDays);\n            var weekNumber = this.parent.getWeekNumberContent(dates).toString();\n            contentWrapTable.querySelector('tbody').appendChild(this.createWeekNumberElement(weekNumber));\n        }\n        return td;\n    };\n    Month.prototype.renderAppointmentContainer = function () {\n        //Here needs to render mobile view appointment details on selected date\n    };\n    Month.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var table = this.createTableLayout();\n        this.createColGroup(table, this.colLevels[this.colLevels.length - 1]);\n        var trEle = createElement('tr');\n        for (var i = 0; i < this.colLevels.length; i++) {\n            var level = this.colLevels[i];\n            var ntr = trEle.cloneNode();\n            for (var j = 0; j < level.length; j++) {\n                var td = level[j];\n                ntr.appendChild(this.createHeaderCell(td));\n            }\n            table.querySelector('tbody').appendChild(ntr);\n        }\n        wrap.appendChild(table);\n        return container;\n    };\n    Month.prototype.createHeaderCell = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.type === 'monthDay') {\n            var ele = createElement('span', { innerHTML: util.capitalizeFirstWord(this.parent.getDayNames(this.dayNameFormat)[td.date.getDay()], 'single') });\n            tdEle.appendChild(ele);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader') {\n            addClass([tdEle], cls.DATE_HEADER_CLASS);\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                var cellArgs = { date: td.date, type: td.type };\n                var elementId = this.parent.element.id + '_';\n                var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                var templateId = elementId + viewName + 'dateHeaderTemplate';\n                var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(cellArgs, this.parent, 'dateHeaderTemplate', templateId, false));\n                if (dateTemplate && dateTemplate.length) {\n                    append(dateTemplate, tdEle);\n                }\n            }\n            else {\n                var ele = createElement('span', { className: cls.NAVIGATE_CLASS });\n                var skeleton = 'full';\n                var title = this.parent.globalize.formatDate(td.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n                ele.setAttribute('title', util.capitalizeFirstWord(title, 'multiple'));\n                var innerText = (this.parent.calendarUtil.isMonthStart(td.date) && !this.isCurrentDate(td.date) && !this.parent.isAdaptive) ?\n                    this.parent.globalize.formatDate(td.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                    this.parent.globalize.formatDate(td.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n                ele.innerHTML = util.capitalizeFirstWord(innerText, 'single');\n                tdEle.appendChild(ele);\n            }\n            this.wireCellEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return tdEle;\n    };\n    Month.prototype.getContentSlots = function () {\n        if (!(this.colLevels[this.colLevels.length - 1] && this.colLevels[this.colLevels.length - 1][0])) {\n            return [];\n        }\n        var slotDatas = [];\n        var prepareSlots = function (rowIndex, renderDate, resData, classList) {\n            var data = {\n                date: new Date(+renderDate), groupIndex: resData.groupIndex, workDays: resData.workDays,\n                type: 'monthCells', className: classList || [cls.WORK_CELLS_CLASS]\n            };\n            if (!slotDatas[rowIndex]) {\n                slotDatas[rowIndex] = [];\n            }\n            slotDatas[rowIndex].push(data);\n        };\n        var includeResource = this.parent.currentView !== 'MonthAgenda' &&\n            this.parent.activeViewOptions.group.resources.length > 0;\n        if (includeResource && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeViewOptions.group.byDate) {\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 2]; _i < _a.length; _i++) {\n                var res = _a[_i];\n                var dates = res.renderDates.map(function (date) { return new Date(+date); });\n                var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : res.workDays.length;\n                for (var i = 0; i < (res.renderDates.length / count); i++) {\n                    var colDates = dates.splice(0, count);\n                    for (var _b = 0, colDates_1 = colDates; _b < colDates_1.length; _b++) {\n                        var colDate = colDates_1[_b];\n                        prepareSlots(i, colDate, res);\n                    }\n                }\n            }\n        }\n        else {\n            var dates = this.renderDates.map(function (date) { return new Date(+date); });\n            var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH :\n                this.parent.activeViewOptions.workDays.length;\n            for (var i = 0; i < (this.renderDates.length / count); i++) {\n                var colDates = dates.splice(0, count);\n                for (var _c = 0, colDates_2 = colDates; _c < colDates_2.length; _c++) {\n                    var colDate = colDates_2[_c];\n                    if (includeResource) {\n                        var lastRow = this.colLevels[(this.colLevels.length - 1)];\n                        var resourcesTd = lastRow.slice(0, lastRow.length / count);\n                        for (var resIndex = 0; resIndex < resourcesTd.length; resIndex++) {\n                            var clsList = void 0;\n                            if (resIndex !== 0) {\n                                clsList = [cls.WORK_CELLS_CLASS, cls.DISABLE_DATE];\n                            }\n                            prepareSlots(i, colDate, resourcesTd[resIndex], clsList);\n                        }\n                    }\n                    else {\n                        prepareSlots(i, colDate, this.colLevels[this.colLevels.length - 1][0]);\n                    }\n                }\n            }\n        }\n        return slotDatas;\n    };\n    Month.prototype.updateClassList = function (data) {\n        if (this.isOtherMonth(data.date)) {\n            data.className.push(cls.OTHERMONTH_CLASS);\n        }\n        if (!this.parent.isMinMaxDate(data.date)) {\n            data.className.push(cls.DISABLE_DATES);\n        }\n        if (this.parent.currentView === 'MonthAgenda' && this.parent.isSelectedDate(data.date)) {\n            data.className.push(cls.SELECTED_CELL_CLASS);\n        }\n    };\n    Month.prototype.isOtherMonth = function (date) {\n        return date.getTime() < this.monthDates.start.getTime() || date.getTime() > this.monthDates.end.getTime();\n    };\n    Month.prototype.renderContentArea = function () {\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.addAutoHeightClass(tbl);\n        if (this.parent.currentView === 'TimelineMonth') {\n            this.createColGroup(tbl, this.colLevels[this.colLevels.length - 1]);\n        }\n        var monthDate = new Date(this.parent.selectedDate.getTime());\n        this.monthDates = {\n            start: this.parent.calendarUtil.firstDateOfMonth(monthDate),\n            end: this.parent.calendarUtil.lastDateOfMonth(util.addMonths(monthDate, this.parent.activeViewOptions.interval - 1))\n        };\n        var tBody = tbl.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n        this.wireCellEvents(tBody);\n        return tbl;\n    };\n    Month.prototype.getContentRows = function () {\n        var trows = [];\n        var tr = createElement('tr', { attrs: { role: 'row' } });\n        var td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        var slotDatas = this.getContentSlots();\n        for (var row = 0; row < slotDatas.length; row++) {\n            var ntr = tr.cloneNode();\n            for (var col = 0; col < slotDatas[row].length; col++) {\n                var ntd = this.createContentTd(slotDatas[row][col], td);\n                ntr.appendChild(ntd);\n            }\n            trows.push(ntr);\n        }\n        return trows;\n    };\n    Month.prototype.createContentTd = function (data, td) {\n        var ntd = td.cloneNode();\n        if (data.colSpan) {\n            ntd.setAttribute('colspan', data.colSpan.toString());\n        }\n        this.updateClassList(data);\n        var type = data.type;\n        if (data.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n            data.className.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && this.isWorkDay(data.date, data.workDays)) {\n            data.className.push(cls.WORKDAY_CLASS);\n        }\n        if (this.isCurrentDate(data.date)) {\n            data.className.push(cls.CURRENTDATE_CLASS);\n        }\n        addClass([ntd], data.className);\n        ntd.setAttribute('data-date', data.date.getTime().toString());\n        if (!isNullOrUndefined(data.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                data.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        this.renderDateHeaderElement(data, ntd);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var args_1 = { date: data.date, type: type, groupIndex: data.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\n            var templateId = scheduleId + viewName + 'cellTemplate';\n            var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n            append(cellTemplate, ntd);\n        }\n        var args = { elementType: type, element: ntd, date: data.date, groupIndex: data.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return ntd;\n    };\n    Month.prototype.renderDateHeaderElement = function (data, ntd) {\n        if (this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var dateHeader = createElement('div', { className: cls.DATE_HEADER_CLASS });\n        if (this.parent.activeViewOptions.cellHeaderTemplate) {\n            var args = { date: data.date, type: data.type, groupIndex: data.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'cellHeaderTemplate';\n            var cellheaderTemplate = [].slice.call(this.parent.getCellHeaderTemplate()(args, this.parent, 'cellHeaderTemplate', templateId, false));\n            append(cellheaderTemplate, dateHeader);\n        }\n        else {\n            var innerText = (this.parent.calendarUtil.isMonthStart(data.date) && !this.isCurrentDate(data.date) && !this.parent.isAdaptive) ?\n                this.parent.globalize.formatDate(data.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                this.parent.globalize.formatDate(data.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n            dateHeader.innerHTML = util.capitalizeFirstWord(innerText, 'single');\n        }\n        ntd.appendChild(dateHeader);\n        if (this.getModuleName() === 'month') {\n            addClass([dateHeader], cls.NAVIGATE_CLASS);\n            var skeleton = 'full';\n            var annocementText = this.parent.globalize.formatDate(data.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n            dateHeader.setAttribute('aria-label', annocementText);\n        }\n    };\n    Month.prototype.getMonthStart = function (currentDate) {\n        var monthStart = util.getWeekFirstDate(this.parent.calendarUtil.firstDateOfMonth(currentDate), this.parent.activeViewOptions.firstDayOfWeek);\n        var start = new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n        return start;\n    };\n    Month.prototype.getMonthEnd = function (currentDate) {\n        var endDate = util.addMonths(currentDate, this.parent.activeViewOptions.interval - 1);\n        var lastWeekOfMonth = util.getWeekFirstDate(this.parent.calendarUtil.lastDateOfMonth(endDate), this.parent.activeViewOptions.firstDayOfWeek);\n        var monthEnd = util.addDays(lastWeekOfMonth, util.WEEK_LENGTH - 1);\n        return monthEnd;\n    };\n    Month.prototype.getRenderDates = function (workDays) {\n        var renderDates = [];\n        var currentDate = util.resetTime(this.parent.selectedDate);\n        var start = this.getMonthStart(currentDate);\n        var monthEnd = this.getMonthEnd(currentDate);\n        do {\n            if (this.parent.activeViewOptions.showWeekend) {\n                renderDates.push(start);\n            }\n            else {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n            }\n            start = util.addDays(start, 1);\n            if (start.getHours() > 0) {\n                start = util.resetTime(start);\n            }\n        } while (start.getTime() <= monthEnd.getTime());\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        if (this.parent.headerModule) {\n            this.parent.headerModule.previousNextIconHandler();\n        }\n        return renderDates;\n    };\n    Month.prototype.getNextPreviousDate = function (type) {\n        if (type === 'next') {\n            return util.addMonths(this.parent.selectedDate, this.parent.activeViewOptions.interval);\n        }\n        else {\n            return util.addMonths(this.parent.selectedDate, -(this.parent.activeViewOptions.interval));\n        }\n    };\n    Month.prototype.getEndDateFromStartDate = function (start) {\n        return util.addDays(new Date(start.getTime()), 1);\n    };\n    Month.prototype.getDateRangeText = function () {\n        if (this.parent.isAdaptive || isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            if (this.parent.activeViewOptions.interval > 1) {\n                var endDate = util.addMonths(util.lastDateOfMonth(this.parent.selectedDate), this.parent.activeViewOptions.interval - 1);\n                if (this.parent.selectedDate.getFullYear() === endDate.getFullYear()) {\n                    var monthNames = (this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' - ' +\n                        (this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() })) +\n                        endDate.getFullYear();\n                    return util.capitalizeFirstWord(monthNames, 'single');\n                }\n                var text = (this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' ' +\n                    this.parent.selectedDate.getFullYear() + ' - ' +\n                    this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() }) +\n                    endDate.getFullYear();\n                return util.capitalizeFirstWord(text, 'single');\n            }\n            var format = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n            return util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: format, calendar: this.parent.getCalendarMode() }), 'single');\n        }\n        return this.formatDateRange(this.parent.selectedDate);\n    };\n    Month.prototype.getLabelText = function (view) {\n        return this.parent.localeObj.getConstant(view) + ' of ' + util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM y', calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    Month.prototype.createWeekNumberElement = function (text) {\n        var tr = createElement('tr');\n        var td = createElement('td', {\n            className: cls.WEEK_NUMBER_CLASS,\n            attrs: { 'title': (text ? this.parent.localeObj.getConstant('week') + ' ' + text : '') },\n            innerHTML: (text || '')\n        });\n        tr.appendChild(td);\n        var args = { elementType: 'weekNumberCell', element: td };\n        this.parent.trigger(event.renderCell, args);\n        return tr;\n    };\n    Month.prototype.unwireEvents = function () {\n        // No scroller events for month view\n    };\n    Month.prototype.getModuleName = function () {\n        return 'month';\n    };\n    Month.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            this.unwireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            remove(this.element);\n            this.element = null;\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n        }\n    };\n    return Month;\n}(ViewBase));\nexport { Month };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { EventHandler, formatUnit, remove, createElement, addClass, closest, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { YearEvent } from '../event-renderer/year';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * year view\n */\nvar Year = /** @class */ (function (_super) {\n    __extends(Year, _super);\n    function Year(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-year-view';\n        _this.isInverseTableSelect = false;\n        return _this;\n    }\n    Year.prototype.getModuleName = function () {\n        return 'year';\n    };\n    Year.prototype.renderLayout = function (className) {\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.generateResourceLevels([{ renderDates: this.parent.activeView.renderDates }]);\n        }\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var viewTypeClass = this.parent.activeViewOptions.orientation === 'Horizontal' ? 'e-horizontal' : 'e-vertical';\n        addClass([this.element], [this.viewClass, viewTypeClass, className]);\n        this.renderPanel(className);\n        var calendarTable = this.createTableLayout(cls.OUTER_TABLE_CLASS);\n        this.element.appendChild(calendarTable);\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        var calendarTBody = calendarTable.querySelector('tbody');\n        this.rowCount = this.getRowColumnCount('row');\n        this.columnCount = this.getRowColumnCount('column');\n        this.renderHeader(calendarTBody);\n        this.renderContent(calendarTBody);\n        if (this.parent.currentView !== 'Year' && this.parent.uiStateValues.isGroupAdaptive) {\n            this.generateColumnLevels();\n            this.renderResourceMobileLayout();\n        }\n        this.wireEvents(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), 'scroll');\n        this.parent.notify(event.contentReady, {});\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Year.prototype.renderHeader = function (headerWrapper) { };\n    Year.prototype.renderContent = function (content) {\n        var tr = createElement('tr');\n        content.appendChild(tr);\n        var td = createElement('td');\n        tr.appendChild(td);\n        this.element.querySelector('tbody').appendChild(tr);\n        var contentWrapper = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        td.appendChild(contentWrapper);\n        var calendarTable = this.createTableLayout('e-calendar-table');\n        contentWrapper.appendChild(calendarTable);\n        var cTr = createElement('tr');\n        calendarTable.querySelector('tbody').appendChild(cTr);\n        var cTd = createElement('td');\n        cTr.appendChild(cTd);\n        var calendarWrapper = createElement('div', { className: 'e-calendar-wrapper' });\n        cTd.appendChild(calendarWrapper);\n        // eslint-disable-next-line prefer-spread\n        var monthCollection = Array.apply(null, { length: 12 }).map(function (value, index) { return index; });\n        for (var _i = 0, monthCollection_1 = monthCollection; _i < monthCollection_1.length; _i++) {\n            var month = monthCollection_1[_i];\n            var currentMonth = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            var calendarElement = createElement('div', {\n                className: 'e-month-calendar e-calendar',\n                attrs: { 'data-role': 'calendar' }\n            });\n            calendarElement.appendChild(this.renderCalendarHeader(currentMonth));\n            calendarElement.appendChild(this.renderCalendarContent(currentMonth));\n            calendarWrapper.appendChild(calendarElement);\n        }\n    };\n    Year.prototype.renderCalendarHeader = function (currentDate) {\n        var headerWrapper = createElement('div', { className: 'e-header e-month' });\n        var headerContent = createElement('div', { className: 'e-day e-title', innerHTML: this.getMonthName(currentDate) });\n        headerWrapper.appendChild(headerContent);\n        this.parent.trigger(event.renderCell, { elementType: 'headerCells', element: headerContent, date: currentDate });\n        return headerWrapper;\n    };\n    Year.prototype.renderCalendarContent = function (currentDate) {\n        var dateCollection = this.getMonthDates(currentDate);\n        var contentWrapper = createElement('div', { className: 'e-content e-month' });\n        var contentTable = this.createTableLayout('e-calendar-table ' + cls.CONTENT_TABLE_CLASS);\n        contentWrapper.appendChild(contentTable);\n        var thead = createElement('thead', { className: 'e-week-header' });\n        var tr = createElement('tr');\n        var currentWeek = util.getWeekFirstDate(util.firstDateOfMonth(currentDate), this.parent.firstDayOfWeek);\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(createElement('th'));\n        }\n        for (var i = 0; i < util.WEEK_LENGTH; i++) {\n            tr.appendChild(createElement('th', { innerHTML: this.parent.getDayNames('narrow')[currentWeek.getDay()] }));\n            currentWeek = new Date(currentWeek.getTime() + util.MS_PER_DAY);\n        }\n        thead.appendChild(tr);\n        prepend([thead], contentTable);\n        var tbody = contentTable.querySelector('tbody');\n        while (dateCollection.length > 0) {\n            var weekDates = dateCollection.splice(0, util.WEEK_LENGTH);\n            var tr_1 = createElement('tr', { attrs: { 'role': 'row' } });\n            if (this.parent.activeViewOptions.showWeekNumber) {\n                var weekNumber = this.parent.getWeekNumberContent(weekDates);\n                var td = createElement('td', {\n                    className: 'e-week-number',\n                    attrs: { 'role': 'gridcell', 'title': 'Week ' + weekNumber },\n                    innerHTML: weekNumber.toString()\n                });\n                tr_1.appendChild(td);\n                this.parent.trigger(event.renderCell, { elementType: 'weekNumberCells', element: td });\n            }\n            for (var _i = 0, weekDates_1 = weekDates; _i < weekDates_1.length; _i++) {\n                var date = weekDates_1[_i];\n                var td = createElement('td', {\n                    className: 'e-cell ' + cls.WORK_CELLS_CLASS,\n                    attrs: { 'role': 'gridcell', 'aria-selected': 'false', 'data-date': date.getTime().toString() }\n                });\n                td.appendChild(createElement('span', { className: 'e-day', innerHTML: date.getDate().toString() }));\n                var classList = [];\n                if (currentDate.getMonth() !== date.getMonth()) {\n                    classList.push(cls.OTHERMONTH_CLASS);\n                }\n                if (this.isCurrentDate(date) && currentDate.getMonth() === date.getMonth()) {\n                    classList = classList.concat(['e-today', 'e-selected']);\n                }\n                if (classList.length > 0) {\n                    addClass([td], classList);\n                }\n                tr_1.appendChild(td);\n                this.wireEvents(td, 'cell');\n                this.parent.trigger(event.renderCell, { elementType: 'workCells', element: td, date: date });\n            }\n            tbody.appendChild(tr_1);\n        }\n        return contentWrapper;\n    };\n    Year.prototype.createTableColGroup = function (count) {\n        var colGroupEle = createElement('colgroup');\n        for (var i = 0; i < count; i++) {\n            colGroupEle.appendChild(createElement('col'));\n        }\n        return colGroupEle;\n    };\n    Year.prototype.getMonthName = function (date) {\n        var month = this.parent.globalize.formatDate(date, {\n            format: this.parent.activeViewOptions.dateFormat || 'MMMM',\n            calendar: this.parent.getCalendarMode()\n        });\n        return util.capitalizeFirstWord(month, 'multiple');\n    };\n    Year.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots([this.parent.selectedDate], this.parent.activeViewOptions.workDays);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            colLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.uiStateValues.isGroupAdaptive) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                colLevels = [this.getDateSlots([this.parent.selectedDate], resourceLevel.workDays)];\n            }\n        }\n        else {\n            colLevels.push(level);\n        }\n        colLevels.pop();\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    // eslint-disable-next-line max-len\n    Year.prototype.getDateSlots = function (renderDates, workDays, startHour, endHour) {\n        if (startHour === void 0) { startHour = this.parent.workHours.start; }\n        if (endHour === void 0) { endHour = this.parent.workHours.end; }\n        var dateCol = [{\n                date: renderDates[0], type: 'dateHeader', className: [cls.HEADER_CELLS_CLASS], colSpan: 1, workDays: workDays,\n                startHour: new Date(+this.parent.globalize.parseDate(startHour, { skeleton: 'Hm' })),\n                endHour: new Date(+this.parent.globalize.parseDate(endHour, { skeleton: 'Hm' }))\n            }];\n        return dateCol;\n    };\n    Year.prototype.getMonthDates = function (date) {\n        var startDate = util.getWeekFirstDate(util.firstDateOfMonth(date), this.parent.firstDayOfWeek);\n        var endDate = util.addDays(new Date(+startDate), (6 * util.WEEK_LENGTH));\n        var dateCollection = [];\n        for (var start = startDate; start.getTime() < endDate.getTime(); start = util.addDays(start, 1)) {\n            dateCollection.push(util.resetTime(new Date(start)));\n        }\n        return dateCollection;\n    };\n    Year.prototype.getRowColumnCount = function (type) {\n        var monthCount = 12;\n        var year = this.parent.selectedDate.getFullYear();\n        var months = [];\n        for (var month = 0; month < monthCount; month++) {\n            months.push(new Date(year, month, 1).getDay() + new Date(year, month + 1, 0).getDate());\n        }\n        var maxCount = Math.max.apply(Math, months);\n        var count;\n        if (type === 'row') {\n            count = this.parent.activeViewOptions.orientation === 'Horizontal' ? monthCount : maxCount;\n        }\n        else {\n            count = this.parent.activeViewOptions.orientation === 'Horizontal' ? maxCount : monthCount;\n        }\n        return count;\n    };\n    Year.prototype.isCurrentDate = function (date) {\n        return util.resetTime(new Date()).getTime() === util.resetTime(new Date(date.getTime())).getTime();\n    };\n    Year.prototype.onCellClick = function (e) {\n        var target = closest(e.target, '.' + cls.WORK_CELLS_CLASS);\n        var startDate = this.parent.getDateFromElement(target);\n        var endDate = util.addDays(new Date(startDate.getTime()), 1);\n        var filteredEvents = this.parent.eventBase.filterEvents(startDate, endDate);\n        var moreEventArgs = { date: startDate, event: filteredEvents, element: e.target };\n        this.parent.quickPopup.moreEventClick(moreEventArgs, new Date());\n    };\n    Year.prototype.onContentScroll = function (e) {\n        var target = e.target;\n        var headerWrapper = this.getDatesHeaderElement();\n        if (headerWrapper) {\n            headerWrapper.firstElementChild.scrollLeft = target.scrollLeft;\n        }\n        var scrollTopSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \",.\" + cls.RESOURCE_COLUMN_WRAP_CLASS;\n        var scrollTopElement = this.element.querySelector(scrollTopSelector);\n        if (scrollTopElement) {\n            scrollTopElement.scrollTop = target.scrollTop;\n        }\n        this.setPersistence();\n    };\n    Year.prototype.onScrollUiUpdate = function (args) {\n        var height = this.parent.element.offsetHeight - this.getHeaderBarHeight();\n        var headerWrapper = this.element.querySelector('.' + cls.DATE_HEADER_CONTAINER_CLASS);\n        if (headerWrapper) {\n            height -= headerWrapper.offsetHeight;\n        }\n        var contentWrapper = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (contentWrapper) {\n            contentWrapper.style.height = formatUnit(height);\n        }\n        var leftPanelSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \",.\" + cls.RESOURCE_COLUMN_WRAP_CLASS;\n        var leftPanelElement = this.element.querySelector(leftPanelSelector);\n        if (leftPanelElement) {\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(contentWrapper));\n        }\n        if (!this.parent.isAdaptive && headerWrapper) {\n            var scrollBarWidth = util.getScrollBarWidth();\n            if (contentWrapper.offsetWidth - contentWrapper.clientWidth > 0) {\n                headerWrapper.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n                headerWrapper.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n            }\n            else {\n                headerWrapper.firstElementChild.style[args.cssProperties.border] = '';\n                headerWrapper.style[args.cssProperties.padding] = '';\n            }\n        }\n        this.setColWidth(this.getContentAreaElement());\n        this.retainScrollPosition();\n    };\n    Year.prototype.startDate = function () {\n        var startDate = new Date(this.parent.selectedDate.getFullYear(), 0, 1);\n        return util.getWeekFirstDate(startDate, this.parent.firstDayOfWeek);\n    };\n    Year.prototype.endDate = function () {\n        var endDate = new Date(this.parent.selectedDate.getFullYear(), 11, 31);\n        return util.addDays(util.getWeekLastDate(endDate, this.parent.firstDayOfWeek), 1);\n    };\n    Year.prototype.getEndDateFromStartDate = function (start) {\n        var date = new Date(start.getTime());\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            date = util.lastDateOfMonth(date);\n        }\n        return util.addDays(new Date(date.getTime()), 1);\n    };\n    Year.prototype.getNextPreviousDate = function (type) {\n        return util.addYears(this.parent.selectedDate, ((type === 'next') ? 1 : -1));\n    };\n    Year.prototype.getDateRangeText = function () {\n        return this.parent.globalize.formatDate(this.parent.selectedDate, { skeleton: 'y' });\n    };\n    Year.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onScrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.onDataReady, this);\n    };\n    Year.prototype.removeEventListener = function () {\n        this.parent.off(event.scrollUiUpdate, this.onScrollUiUpdate);\n        this.parent.off(event.dataReady, this.onDataReady);\n    };\n    Year.prototype.onDataReady = function (args) {\n        var yearEventModule = new YearEvent(this.parent);\n        yearEventModule.renderAppointments();\n        this.parent.notify('events-loaded', args);\n    };\n    Year.prototype.wireEvents = function (element, type) {\n        if (type === 'cell') {\n            if (this.parent.currentView !== 'TimelineYear') {\n                EventHandler.add(element, 'click', this.onCellClick, this);\n            }\n            else {\n                EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n                if (!this.parent.isAdaptive) {\n                    EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n                }\n            }\n        }\n        else {\n            EventHandler.add(element, 'scroll', this.onContentScroll, this);\n        }\n    };\n    Year.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            remove(this.element);\n            this.element = null;\n        }\n    };\n    return Year;\n}(ViewBase));\nexport { Year };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, addClass, createElement, append, EventHandler, extend, remove } from '@syncfusion/ej2-base';\nimport { ListBase } from '@syncfusion/ej2-lists';\nimport { ViewBase } from '../renderer/view-base';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nvar AgendaBase = /** @class */ (function () {\n    function AgendaBase(parent) {\n        this.parent = parent;\n        this.viewBase = new ViewBase(parent);\n    }\n    // eslint-disable-next-line max-len\n    AgendaBase.prototype.createAgendaContentElement = function (type, listData, aTd, groupOrder, groupIndex) {\n        var listElement;\n        var fieldMapping = this.parent.eventFields;\n        if (type === 'noEvents') {\n            var noEvents = [{ 'subject': this.parent.localeObj.getConstant('noEvents') }];\n            listElement = ListBase.createList(this.parent.createElement, noEvents, {\n                moduleName: 'agenda',\n                listClass: this.parent.activeView.viewClass,\n                itemClass: this.parent.activeView.viewClass,\n                template: '<div class=' + cls.AGENDA_NO_EVENT_CLASS + '>${subject}</div>'\n            });\n        }\n        else {\n            listElement = ListBase.createList(this.parent.createElement, listData, {\n                moduleName: 'agenda',\n                listClass: this.parent.activeView.viewClass,\n                itemClass: this.parent.activeView.viewClass\n            });\n            var _loop_1 = function (li, length_1) {\n                var appWrapper = createElement('div', {\n                    className: cls.APPOINTMENT_CLASS, attrs: {\n                        'data-id': 'Appointment_' + listData[li][this_1.parent.eventFields.id],\n                        'data-guid': listData[li].Guid,\n                        'role': 'button',\n                        'tabindex': '0',\n                        'aria-readonly': this_1.parent.eventBase.getReadonlyAttribute(listData[li]),\n                        'aria-selected': 'false',\n                        'aria-grabbed': 'true',\n                        'aria-label': this_1.parent.getAnnocementString(listData[li])\n                    }\n                });\n                if (!isNullOrUndefined(groupIndex)) {\n                    appWrapper.setAttribute('data-group-index', groupIndex.toString());\n                }\n                this_1.parent.eventBase.applyResourceColor(appWrapper, listData[li], 'borderColor', groupOrder);\n                var templateEle = void 0;\n                if (!isNullOrUndefined(this_1.parent.activeViewOptions.eventTemplate)) {\n                    addClass([appWrapper], cls.EVENT_TEMPLATE);\n                    var scheduleId = this_1.parent.element.id + '_';\n                    var viewName = this_1.parent.activeViewOptions.eventTemplateName;\n                    var templateId = scheduleId + viewName + 'eventTemplate';\n                    templateEle = this_1.parent.getAppointmentTemplate()(listData[li], this_1.parent, 'eventTemplate', templateId, false);\n                    if (!isNullOrUndefined(listData[li][fieldMapping.recurrenceRule])) {\n                        var iconClass = (listData[li][fieldMapping.id] === listData[li][fieldMapping.recurrenceID]) ?\n                            cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n                        appWrapper.appendChild(createElement('div', { className: cls.ICON + ' ' + iconClass }));\n                    }\n                }\n                else {\n                    templateEle = this_1.createAppointment(listData[li]);\n                }\n                append([].slice.call(templateEle), appWrapper);\n                util.removeChildren(listElement.children[li]);\n                listElement.children[li].appendChild(appWrapper);\n                var args = {\n                    data: extend({}, listData[li], null, true),\n                    element: listElement.children[li], cancel: false\n                };\n                this_1.parent.trigger(event.eventRendered, args, function (eventArgs) {\n                    if (eventArgs.cancel) {\n                        remove(listElement.children[li]);\n                    }\n                });\n            };\n            var this_1 = this;\n            for (var li = 0, length_1 = listData.length; li < length_1; li++) {\n                _loop_1(li, length_1);\n            }\n        }\n        aTd.appendChild(listElement);\n        if ((this.parent.currentView === 'MonthAgenda' && this.parent.activeViewOptions.group.resources.length > 0)\n            || this.parent.currentView === 'Agenda') {\n            addClass([aTd], cls.AGENDA_DAY_BORDER_CLASS);\n        }\n        this.parent.renderTemplates();\n        return aTd;\n    };\n    AgendaBase.prototype.createAppointment = function (event) {\n        var fieldMapping = this.parent.eventFields;\n        var eventSubject = (event[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default);\n        var eventLocation = (event[fieldMapping.location] || this.parent.eventSettings.fields.location.default);\n        var appSubjectWrap = createElement('div', { className: cls.SUBJECT_WRAP });\n        if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n            eventSubject += ',';\n        }\n        appSubjectWrap.appendChild(createElement('div', { className: cls.SUBJECT_CLASS, innerHTML: eventSubject }));\n        if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n            appSubjectWrap.appendChild(createElement('div', { className: cls.LOCATION_CLASS, innerHTML: eventLocation }));\n        }\n        if (!isNullOrUndefined(event[fieldMapping.recurrenceRule])) {\n            var iconClass = (event[fieldMapping.id] === event[fieldMapping.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appSubjectWrap.appendChild(createElement('div', { className: cls.ICON + ' ' + iconClass }));\n        }\n        var strDate = event[fieldMapping.startTime];\n        var endDate = event[fieldMapping.endTime];\n        var isAllDay = event[fieldMapping.isAllDay];\n        var allDayStr = this.parent.localeObj.getConstant('allDay');\n        var timeStr = this.parent.getTimeString(strDate) + ' - ' + this.parent.getTimeString(endDate);\n        if (!isNullOrUndefined(event.data)) {\n            var milliSeconds = (endDate.getTimezoneOffset() !== strDate.getTimezoneOffset()) ?\n                (endDate.getTime() - strDate.getTime() + 3600000) : (endDate.getTime() - strDate.getTime());\n            var eventString = (milliSeconds / util.MS_PER_DAY) >= 1 ? allDayStr : timeStr;\n            allDayStr = eventString + ' (' + this.parent.localeObj.getConstant('day') + ' '\n                + event.data.index + '/' + event.data.count + ')';\n        }\n        var displayStr = (!isNullOrUndefined(event.data) || isAllDay) ? allDayStr : timeStr;\n        var appDateTime = createElement('div', { className: cls.DATE_TIME_CLASS, innerHTML: displayStr });\n        return [appSubjectWrap, appDateTime];\n    };\n    AgendaBase.prototype.processAgendaEvents = function (events) {\n        var eventsProcessed = [];\n        if (isNullOrUndefined(events)) {\n            return eventsProcessed;\n        }\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\n            var event_1 = events_1[_i];\n            var splited = this.parent.eventBase.splitEventByDay(event_1);\n            eventsProcessed = eventsProcessed.concat(splited.length > 1 ? splited : event_1);\n        }\n        return eventsProcessed;\n    };\n    AgendaBase.prototype.wireEventActions = function () {\n        var eventElement = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        for (var _i = 0, eventElement_1 = eventElement; _i < eventElement_1.length; _i++) {\n            var element = eventElement_1[_i];\n            this.parent.eventBase.wireAppointmentEvents(element, null, true);\n        }\n        var dateHeaderElement = [].slice.call(this.parent.element.querySelectorAll('.e-m-date'));\n        for (var _a = 0, dateHeaderElement_1 = dateHeaderElement; _a < dateHeaderElement_1.length; _a++) {\n            var element = dateHeaderElement_1[_a];\n            EventHandler.add(element, 'click', this.parent.agendaModule.dayNavigationClick, this);\n        }\n    };\n    AgendaBase.prototype.calculateResourceTableElement = function (tBody, noOfDays, agendaDate) {\n        if (isNullOrUndefined(this.parent.resourceBase.lastResourceLevel)) {\n            var level = this.viewBase.getDateSlots(this.viewBase.renderDates, this.parent.activeViewOptions.workDays);\n            this.parent.resourceBase.generateResourceLevels(level);\n        }\n        var agendaLastDate = util.addDays(new Date(agendaDate.getTime()), noOfDays);\n        var days = (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') ? noOfDays : 1;\n        var resColl = this.parent.resourceBase.resourceCollection;\n        var resData = this.parent.resourceBase.lastResourceLevel;\n        var initialDate = agendaDate;\n        for (var i = 0; i < days; i++) {\n            var lastLevelInfo = [];\n            var tempLastLevelInfo = [];\n            var tempIndex = 0;\n            var eventObj = void 0;\n            var dateObj = void 0;\n            var firstDate = util.addDays(initialDate, i);\n            var finalDate = (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda')\n                ? util.addDays(firstDate, 1) : agendaLastDate;\n            var agendaCollection = this.parent.eventBase.filterEvents(firstDate, finalDate);\n            if (agendaCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                for (var res = 0; res < resData.length; res++) {\n                    noOfDays = (!this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') ? noOfDays : 1;\n                    var data = [];\n                    agendaDate = firstDate;\n                    // eslint-disable-next-line max-len\n                    var resDataCollection = this.parent.eventBase.filterEvents(agendaDate, agendaLastDate, agendaCollection, resData[res]);\n                    if (resDataCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                        for (var r = 0; r < noOfDays; r++) {\n                            // eslint-disable-next-line max-len\n                            var resDayCollection = this.parent.eventBase.filterEvents(agendaDate, util.addDays(agendaDate, 1), resDataCollection, undefined);\n                            if (resDayCollection.length > 0 || !this.parent.hideEmptyAgendaDays ||\n                                this.parent.currentView === 'MonthAgenda') {\n                                data.push(resDayCollection[0]);\n                                eventObj = {\n                                    rowSpan: 1, type: 'eventColumn', resource: resColl[resColl.length - 1],\n                                    groupIndex: resData[res].groupIndex, groupOrder: resData[res].groupOrder,\n                                    resourceData: resData[res].resourceData, eventData: resDayCollection, date: agendaDate\n                                };\n                                dateObj = {\n                                    rowSpan: 1, type: 'dateColumn', resource: resColl[resColl.length - 1],\n                                    groupOrder: resData[res].groupOrder, resourceData: resData[res].resourceData,\n                                    date: agendaDate\n                                };\n                                if (!lastLevelInfo[tempIndex]) {\n                                    lastLevelInfo[tempIndex] = [];\n                                }\n                                lastLevelInfo[tempIndex].push(eventObj);\n                                lastLevelInfo[tempIndex].push(dateObj);\n                                tempIndex++;\n                            }\n                            agendaDate = util.addDays(agendaDate, 1);\n                            if (agendaDate.getTime() >= agendaLastDate.getTime() || this.parent.activeViewOptions.group.byDate\n                                || this.parent.currentView === 'MonthAgenda') {\n                                lastLevelInfo[lastLevelInfo.length - 1][1].cssClass = cls.AGENDA_DAY_BORDER_CLASS;\n                                var tempObj = {\n                                    rowSpan: data.length, type: 'resourceColumn', resource: resColl[resColl.length - 1],\n                                    groupOrder: resData[res].groupOrder.slice(0, -1), resourceData: resData[res].resourceData,\n                                    groupIndex: (lastLevelInfo.length - data.length), className: [cls.RESOURCE_NAME],\n                                    date: agendaDate\n                                };\n                                lastLevelInfo[lastLevelInfo.length - data.length].push(tempObj);\n                                tempLastLevelInfo.push(extend({}, tempObj, null, true));\n                                break;\n                            }\n                        }\n                    }\n                }\n                var topResources = resColl.slice(0, -1);\n                var tempGroupedData = [];\n                var totalRowSpan = 0;\n                for (var y = 0; y < topResources.length; y++) {\n                    var data = topResources[topResources.length - (y + 1)].dataSource;\n                    for (var x = 0; x < data.length; x++) {\n                        var z = 0;\n                        for (var u = 0; u < tempLastLevelInfo.length; u++) {\n                            // eslint-disable-next-line max-len\n                            if (tempLastLevelInfo[u].groupOrder[topResources.length - (y + 1)] === data[x][topResources[topResources.length - (y + 1)].idField]) {\n                                totalRowSpan = totalRowSpan + tempLastLevelInfo[u].rowSpan;\n                                tempGroupedData.push(extend({}, tempLastLevelInfo[u], null, true));\n                            }\n                            if (++z === tempLastLevelInfo.length && tempGroupedData.length > 0) {\n                                tempGroupedData[0].rowSpan = totalRowSpan;\n                                tempGroupedData[0].type = 'parentColumnLevel_' + (y + 1);\n                                tempGroupedData[0].resource = topResources[topResources.length - (y + 1)];\n                                tempGroupedData[0].resourceData = data[x];\n                                tempGroupedData[0].date = agendaDate;\n                                lastLevelInfo[tempGroupedData[0].groupIndex].push(tempGroupedData[0]);\n                                tempGroupedData = [];\n                                totalRowSpan = 0;\n                            }\n                        }\n                    }\n                }\n                this.createResourceTableRow(lastLevelInfo, tBody);\n            }\n        }\n        var totalCollection = this.parent.eventBase.filterEvents(initialDate, agendaLastDate);\n        if (totalCollection.length === 0 && !this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n            this.renderEmptyContent(tBody, initialDate);\n        }\n    };\n    AgendaBase.prototype.createResourceTableRow = function (tContent, tBody) {\n        var tr = createElement('tr', { attrs: { role: 'row' } });\n        var ntr;\n        var td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        var tempData;\n        var rowSpan = 0;\n        var level;\n        if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n            var tContentCollection = [];\n            var parentCollection = this.parent.resourceBase.resourceCollection.slice(0, -1);\n            for (var w = 0; w < tContent.length; w++) {\n                tContentCollection = tContentCollection.concat(tContent[w]);\n            }\n            level = (parentCollection.length > 0) ? 'parentColumnLevel_' + parentCollection.length : 'resourceColumn';\n            var rowSpanCollection = tContentCollection.filter(function (data) { return data.type === level; });\n            for (var x = 0; x < rowSpanCollection.length; x++) {\n                rowSpan = rowSpan + rowSpanCollection[x].rowSpan;\n            }\n        }\n        for (var row = 0; row < tContent.length; row++) {\n            ntr = tr.cloneNode();\n            for (var col = tContent[row].length - 1; col >= 0; col--) {\n                var data = tContent[row][col];\n                var ntd = td.cloneNode();\n                if (data.type === 'dateColumn') {\n                    if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                        tempData = tContent[row][col];\n                        continue;\n                    }\n                    ntd.setAttribute('data-date', data.date.getTime().toString());\n                    ntd.appendChild(this.createDateHeaderElement(data.date));\n                    var className = [cls.AGENDA_CELLS_CLASS, cls.AGENDA_DATE_CLASS];\n                    if (data.cssClass) {\n                        className.push(data.cssClass);\n                    }\n                    addClass([ntd], className);\n                    ntr.appendChild(ntd);\n                }\n                else if (data.type === 'eventColumn') {\n                    var elementType = (data.eventData.length === 0) ? 'noEvents' : 'data';\n                    ntd = this.createAgendaContentElement(elementType, data.eventData, ntd, data.groupOrder, data.groupIndex);\n                    ntd.setAttribute('data-date', data.date.getTime().toString());\n                    if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                        addClass([ntd], [cls.AGENDA_CELLS_CLASS, cls.AGENDA_DAY_PADDING_CLASS]);\n                    }\n                    ntr.appendChild(ntd);\n                }\n                else {\n                    ntd.setAttribute('rowspan', data.rowSpan.toString());\n                    addClass([ntd], cls.AGENDA_RESOURCE_CLASS);\n                    this.viewBase.setResourceHeaderContent(ntd, data, data.className[0]);\n                    ntr.appendChild(ntd);\n                }\n            }\n            if (this.parent.activeViewOptions.group.byDate && row === 0 && this.parent.currentView !== 'MonthAgenda') {\n                var ntd = td.cloneNode();\n                ntd.setAttribute('data-date', tempData.date.getTime().toString());\n                ntd.setAttribute('rowspan', rowSpan.toString());\n                ntd.appendChild(this.createDateHeaderElement(tempData.date));\n                addClass([ntd], [cls.AGENDA_CELLS_CLASS, cls.AGENDA_DATE_CLASS, cls.DATE_BORDER_CLASS]);\n                var daysCount = util.getDaysCount(this.parent.selectedDate.getTime(), tempData.date.getTime());\n                ntr.setAttribute('aria-rowindex', daysCount.toString());\n                if (this.parent.element.querySelector(\".e-agenda-view tr[aria-rowindex=\\\"\" + daysCount + \"\\\"]\")) {\n                    break;\n                }\n                ntr.insertBefore(ntd, ntr.childNodes[0]);\n            }\n            tBody.appendChild(ntr);\n        }\n    };\n    AgendaBase.prototype.createDateHeaderElement = function (date) {\n        var dateHeader;\n        if (this.parent.activeViewOptions.dateHeaderTemplate) {\n            dateHeader = createElement('div', { className: cls.AGENDA_HEADER_CLASS });\n            var args = { date: date, type: 'dateHeader' };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'dateHeaderTemplate';\n            var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, 'dateHeaderTemplate', templateId, false));\n            append(dateTemplate, dateHeader);\n        }\n        else {\n            dateHeader = this.viewBase.getMobileDateElement(date, cls.AGENDA_HEADER_CLASS);\n        }\n        return dateHeader;\n    };\n    AgendaBase.prototype.renderEmptyContent = function (tBody, agendaDate) {\n        var eTr = this.createTableRowElement(agendaDate, 'noEvents');\n        var eTd = eTr.children[0];\n        var noEvents = createElement('div', {\n            className: cls.AGENDA_EMPTY_EVENT_CLASS,\n            innerHTML: this.parent.localeObj.getConstant('noEvents')\n        });\n        eTd.appendChild(noEvents);\n        tBody.appendChild(eTr);\n    };\n    AgendaBase.prototype.createTableRowElement = function (date, type) {\n        var daysCount = util.getDaysCount(this.parent.selectedDate.getTime(), date.getTime());\n        var tr = createElement('tr', { attrs: { 'role': 'row', 'aria-rowindex': daysCount.toString() } });\n        var td = createElement('td', {\n            attrs: {\n                'class': (type === 'monthHeader') ? cls.MONTH_HEADER_CLASS : cls.AGENDA_CELLS_CLASS,\n                'role': 'gridcell',\n                'aria-selected': 'false',\n                'aria-colindex': daysCount.toString(),\n                'data-date': date.getTime().toString()\n            }\n        });\n        var dTd = td.cloneNode();\n        var aTd = td.cloneNode();\n        tr.appendChild(dTd);\n        if (type !== 'noEvents') {\n            tr.appendChild(aTd);\n        }\n        return tr;\n    };\n    return AgendaBase;\n}());\nexport { AgendaBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { formatUnit, isNullOrUndefined, closest, extend, append, prepend } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, EventHandler } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport { ViewBase } from './view-base';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * agenda view\n */\nvar Agenda = /** @class */ (function (_super) {\n    __extends(Agenda, _super);\n    function Agenda(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-agenda-view';\n        _this.isInverseTableSelect = false;\n        _this.agendaDates = {};\n        _this.virtualScrollTop = 1;\n        _this.agendaBase = new AgendaBase(parent);\n        return _this;\n    }\n    Agenda.prototype.getModuleName = function () {\n        return 'agenda';\n    };\n    Agenda.prototype.renderLayout = function () {\n        this.agendaDates = {};\n        this.element = createElement('div', { className: cls.TABLE_WRAP_CLASS });\n        addClass([this.element], this.viewClass);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n        var eTr = createElement('tr');\n        this.element.querySelector('tbody').appendChild(eTr);\n        var workTd = createElement('td');\n        eTr.appendChild(workTd);\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        workTd.appendChild(wrap);\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        wrap.appendChild(tbl);\n        var tBody = tbl.querySelector('tbody');\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        this.agendaBase.renderEmptyContent(tBody, agendaDate);\n        this.wireEvents();\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.generateResourceLevels([{ renderDates: this.parent.activeView.renderDates }]);\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    Agenda.prototype.eventLoad = function (args) {\n        this.dataSource = extend([], this.parent.eventsData, null, true);\n        for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n            var event_1 = _a[_i];\n            delete event_1.generatedDates;\n        }\n        var eventCollection = args.processedData;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            this.dataSource = this.parent.eventBase.filterEventsByResource(resource, this.dataSource);\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.parent.eventsProcessed = this.agendaBase.processAgendaEvents(eventCollection);\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        var tBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n        util.removeChildren(tBody);\n        this.renderInitialContent(tBody, agendaDate);\n        this.agendaBase.wireEventActions();\n        var contentArea = closest(tBody, '.' + cls.CONTENT_WRAP_CLASS);\n        contentArea.scrollTop = 1;\n        this.parent.notify(event.eventsLoaded, {});\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.retainScrollPosition();\n        }\n    };\n    Agenda.prototype.refreshEvent = function (refreshDate) {\n        var processedData = [];\n        var fields = this.parent.eventFields;\n        for (var _i = 0, _a = this.dataSource; _i < _a.length; _i++) {\n            var data = _a[_i];\n            if (isNullOrUndefined(data[fields.recurrenceID]) && !isNullOrUndefined(data[fields.recurrenceRule]) &&\n                !isNullOrUndefined(data.generatedDates) && refreshDate >= data.generatedDates.end) {\n                processedData = processedData.concat(this.parent.eventBase.generateOccurrence(data, refreshDate));\n            }\n        }\n        this.parent.eventsProcessed = this.parent.eventsProcessed.concat(this.agendaBase.processAgendaEvents(processedData));\n    };\n    Agenda.prototype.renderInitialContent = function (tBody, agendaDate) {\n        var emptyTBody = createElement('tbody');\n        var firstDate = new Date(agendaDate.getTime());\n        var lastDate = (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) ?\n            this.getEndDateFromStartDate(firstDate) : util.addDays(firstDate, this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody, firstDate, lastDate);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n        // Initial rendering, to load previous date events upto scroll bar enable\n        if (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays && this.parent.eventsData.length > 0) {\n            var contentArea = this.getContentAreaElement();\n            var contentChild = contentArea.querySelector('.e-content-table');\n            while (contentArea.offsetWidth <= contentArea.clientWidth) {\n                if (this.parent.isAdaptive && contentChild.offsetHeight >= contentArea.clientHeight) {\n                    break;\n                }\n                var emptyTBody_1 = createElement('tbody');\n                lastDate = firstDate;\n                firstDate = util.addDays(lastDate, -this.parent.agendaDaysCount);\n                this.renderContent(emptyTBody_1, firstDate, lastDate);\n                prepend([].slice.call(emptyTBody_1.childNodes), tBody);\n                if (firstDate <= this.parent.minDate) {\n                    break;\n                }\n            }\n        }\n        if (tBody.childNodes.length <= 0) {\n            this.agendaBase.renderEmptyContent(tBody, agendaDate);\n        }\n    };\n    Agenda.prototype.renderContent = function (tBody, agendaDate, lastDate) {\n        var fieldMapping = this.parent.eventFields;\n        var firstDate = new Date(agendaDate.getTime());\n        var isObject = this.appointmentFiltering(firstDate, lastDate);\n        if (isObject.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n            agendaDate = isObject[0][fieldMapping.startTime];\n            agendaDate = new Date(new Date(agendaDate.getTime()).setHours(0, 0, 0, 0));\n            this.updateHeaderText(isObject[0][fieldMapping.startTime]);\n        }\n        var endDate;\n        if (!this.parent.hideEmptyAgendaDays || (this.parent.agendaDaysCount > 0 && isObject.length > 0)) {\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                var date = agendaDate;\n                if (!this.parent.activeViewOptions.group.byDate) {\n                    this.parent.activeViewOptions.allowVirtualScrolling = false;\n                    date = firstDate;\n                    if (this.parent.headerModule) {\n                        this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText());\n                        this.parent.headerModule.updateHeaderItems('remove');\n                    }\n                }\n                this.agendaBase.calculateResourceTableElement(tBody, this.parent.agendaDaysCount, date);\n            }\n            else {\n                for (var day = 0; day < this.parent.agendaDaysCount; day++) {\n                    var filterData = this.appointmentFiltering(agendaDate);\n                    var nTr = this.agendaBase.createTableRowElement(agendaDate, 'data');\n                    if (this.element.querySelector('tr[aria-rowindex=\"' + parseInt(nTr.getAttribute('aria-rowindex'), 10) + '\"]')) {\n                        continue;\n                    }\n                    var dTd = nTr.children[0];\n                    var aTd = nTr.children[1];\n                    if (filterData.length > 0 || (!this.parent.hideEmptyAgendaDays && filterData.length === 0)) {\n                        var elementType = (!this.parent.hideEmptyAgendaDays && filterData.length === 0) ? 'noEvents' : 'data';\n                        dTd.appendChild(this.agendaBase.createDateHeaderElement(agendaDate));\n                        nTr.appendChild(dTd);\n                        var cTd = this.agendaBase.createAgendaContentElement(elementType, filterData, aTd);\n                        nTr.appendChild(cTd);\n                        if (cTd.querySelectorAll('li').length > 0) {\n                            tBody.appendChild(nTr);\n                        }\n                    }\n                    else if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                        day--;\n                    }\n                    if (this.isCurrentDate(new Date(agendaDate.getTime()))) {\n                        addClass(dTd.childNodes, cls.AGENDA_CURRENT_DAY_CLASS);\n                    }\n                    agendaDate = util.addDays(agendaDate, 1);\n                    if (agendaDate.getTime() > lastDate.getTime()) {\n                        break;\n                    }\n                }\n            }\n            endDate = new Date(agendaDate.getTime() - util.MS_PER_DAY);\n        }\n        this.agendaDates = { start: firstDate, end: endDate };\n    };\n    Agenda.prototype.agendaScrolling = function (event) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.virtualScrolling(event);\n        }\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.setPersistence();\n        }\n    };\n    Agenda.prototype.virtualScrolling = function (event) {\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var direction = (this.virtualScrollTop < scrollTop) ? 'next' : 'previous';\n        var tBody = target.querySelector('tbody');\n        var emptyTBody = createElement('tbody');\n        var topElement = this.getElementFromScrollerPosition(event);\n        var scrollDate = this.parent.getDateFromElement(topElement);\n        var filterDate;\n        var filterData;\n        if (scrollTop === 0) {\n            filterDate = this.getPreviousNextDate(util.addDays(scrollDate, -1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                prepend([].slice.call(emptyTBody.childNodes), tBody);\n                this.agendaBase.wireEventActions();\n                for (var s = 0, element = tBody.children; s < element.length; s++) {\n                    if (element[s].getAttribute('aria-rowindex') === topElement.getAttribute('aria-colindex')) {\n                        var scrollToValue = element[s].offsetTop -\n                            this.element.querySelector('.e-agenda-item').offsetHeight;\n                        target.scrollTop = scrollToValue;\n                        break;\n                    }\n                }\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else if (totalHeight === scrollHeight) {\n            filterDate = this.getPreviousNextDate(util.addDays(scrollDate, 1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                append([].slice.call(emptyTBody.childNodes), tBody);\n                this.agendaBase.wireEventActions();\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else {\n            this.updateHeaderText(scrollDate);\n        }\n        this.virtualScrollTop = scrollTop;\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        if (selectedElements.length > 0) {\n            selectedElements[selectedElements.length - 1].focus();\n        }\n    };\n    Agenda.prototype.getElementFromScrollerPosition = function (event) {\n        var filterElement;\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var liCollection = [].slice.call(target.querySelectorAll('.e-agenda-item'));\n        var li;\n        var liDetails;\n        if (liCollection.length > 0) {\n            if (scrollTop === 0) {\n                li = liCollection[0];\n                filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            }\n            else if (totalHeight === scrollHeight) {\n                li = liCollection[liCollection.length - 1];\n                filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            }\n            else {\n                for (var a = 0, length_1 = liCollection.length; a < length_1; a++) {\n                    li = liCollection[a];\n                    liDetails = li.getBoundingClientRect();\n                    if (liDetails.top >= 0) {\n                        filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n                        break;\n                    }\n                }\n            }\n        }\n        return filterElement;\n    };\n    Agenda.prototype.updateHeaderText = function (date) {\n        if (this.parent.showHeaderBar) {\n            this.parent.headerModule.updateDateRange(this.getDateRangeText(date));\n        }\n    };\n    Agenda.prototype.getPreviousNextDate = function (date, type) {\n        var currentDate = new Date(date.getTime());\n        var firstDate = this.getStartDateFromEndDate(date);\n        var lastDate = this.getEndDateFromStartDate(date);\n        var daysCount = 0;\n        do {\n            var filterData = this.appointmentFiltering(currentDate);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                daysCount++;\n            }\n            currentDate = util.addDays(currentDate, (type === 'next') ? 1 : -1);\n            if (currentDate < firstDate || currentDate > lastDate) {\n                break;\n            }\n        } while (daysCount !== this.parent.agendaDaysCount);\n        var endDate = util.addDays(currentDate, (type === 'next') ? -1 : 1);\n        return (type === 'next') ? { start: date, end: util.addDays(endDate, 1) } : { start: endDate, end: util.addDays(date, 1) };\n    };\n    Agenda.prototype.appointmentFiltering = function (startDate, endDate) {\n        var dateStart;\n        var dateEnd;\n        if (!isNullOrUndefined(startDate) && isNullOrUndefined(endDate)) {\n            dateStart = util.resetTime(new Date(startDate.getTime()));\n            dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n        }\n        else {\n            dateStart = new Date(startDate.getTime());\n            dateEnd = new Date(endDate.getTime());\n        }\n        var filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        if (filterData.length === 0) {\n            this.refreshEvent(startDate);\n            filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        }\n        return filterData;\n    };\n    Agenda.prototype.getStartDateFromEndDate = function (endDate) {\n        var filterDate;\n        var fields = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var firstDate = Math.min.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                return a[fields.startTime].getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(firstDate) : this.parent.minDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(endDate, -1) : this.parent.minDate;\n        }\n        return util.resetTime(filterDate);\n    };\n    Agenda.prototype.getEndDateFromStartDate = function (startDate) {\n        var filterDate;\n        var fieldMapping = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var lastDate = Math.max.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                return a[fieldMapping.endTime].getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(lastDate) : this.parent.maxDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(startDate, 1) : this.parent.maxDate;\n        }\n        return util.resetTime(util.addDays(filterDate, 1));\n    };\n    Agenda.prototype.getNextPreviousDate = function (type) {\n        var noOfDays = (type === 'next') ? 1 : -1;\n        return util.addDays(this.parent.selectedDate, noOfDays);\n    };\n    Agenda.prototype.startDate = function () {\n        return util.resetTime(this.parent.selectedDate);\n    };\n    Agenda.prototype.endDate = function () {\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            return this.getEndDateFromStartDate(this.startDate());\n        }\n        else {\n            return util.addDays(this.startDate(), this.parent.agendaDaysCount);\n        }\n    };\n    Agenda.prototype.getDateRangeText = function (date) {\n        var formatDate = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n        if (this.parent.activeViewOptions.allowVirtualScrolling || this.parent.isAdaptive) {\n            var currentDate = isNullOrUndefined(date) ? this.parent.selectedDate : date;\n            return util.capitalizeFirstWord(this.parent.globalize.formatDate(currentDate, { format: formatDate, calendar: this.parent.getCalendarMode() }), 'multiple');\n        }\n        else {\n            var startDate = this.parent.selectedDate;\n            var endDate = util.addDays(startDate, this.parent.agendaDaysCount - 1);\n            return this.formatDateRange(startDate, endDate);\n        }\n    };\n    Agenda.prototype.dayNavigationClick = function (e) {\n        var element = closest(e.currentTarget, '.' + cls.AGENDA_CELLS_CLASS);\n        var date = this.parent.getDateFromElement(element);\n        if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n            this.parent.setScheduleProperties({ selectedDate: date });\n            this.parent.changeView('Day', e);\n        }\n    };\n    Agenda.prototype.wireEvents = function () {\n        EventHandler.add(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling, this);\n    };\n    Agenda.prototype.unWireEvents = function () {\n        EventHandler.remove(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling);\n        var dateHeaderElement = [].slice.call(this.element.querySelectorAll('.e-m-date'));\n        for (var _i = 0, dateHeaderElement_1 = dateHeaderElement; _i < dateHeaderElement_1.length; _i++) {\n            var element = dateHeaderElement_1[_i];\n            EventHandler.remove(element, 'click', this.dayNavigationClick);\n        }\n    };\n    Agenda.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onAgendaScrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.eventLoad, this);\n    };\n    Agenda.prototype.removeEventListener = function () {\n        this.parent.off(event.scrollUiUpdate, this.onAgendaScrollUiUpdate);\n        this.parent.off(event.dataReady, this.eventLoad);\n    };\n    Agenda.prototype.onAgendaScrollUiUpdate = function () {\n        var headerHeight = this.getHeaderBarHeight();\n        if (this.parent.headerModule) {\n            if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('add');\n            }\n            else {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n        }\n        var contentArea = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        contentArea.style.height = formatUnit(this.parent.element.offsetHeight - headerHeight);\n    };\n    Agenda.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            this.unWireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            remove(this.element);\n            this.element = null;\n            if (this.parent.headerModule && this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n        }\n    };\n    return Agenda;\n}(ViewBase));\nexport { Agenda };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, addClass, formatUnit, remove } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport { Month } from './month';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * month agenda view\n */\nvar MonthAgenda = /** @class */ (function (_super) {\n    __extends(MonthAgenda, _super);\n    function MonthAgenda(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dayNameFormat = 'narrow';\n        _this.viewClass = 'e-month-agenda-view';\n        _this.agendaDates = {};\n        _this.agendaBase = new AgendaBase(parent);\n        _this.monthAgendaDate = new Date('' + parent.selectedDate);\n        return _this;\n    }\n    MonthAgenda.prototype.getModuleName = function () {\n        return 'monthAgenda';\n    };\n    MonthAgenda.prototype.renderAppointmentContainer = function () {\n        var contentArea = this.getContentAreaElement();\n        var wrapperContainer = createElement('div', { className: cls.WRAPPER_CONTAINER_CLASS });\n        contentArea.appendChild(wrapperContainer);\n        var appWrap = createElement('div', { className: cls.APPOINTMENT_WRAP_CLASS });\n        wrapperContainer.appendChild(appWrap);\n        this.appendAppContainer(appWrap);\n        this.setEventWrapperHeight();\n    };\n    MonthAgenda.prototype.getDayNameFormat = function () {\n        if (this.parent.isAdaptive) {\n            return 'narrow';\n        }\n        return 'abbreviated';\n    };\n    MonthAgenda.prototype.setEventWrapperHeight = function () {\n        var headerHeight = (this.parent.headerModule ? this.parent.headerModule.getHeaderElement().offsetHeight : 0) + 2;\n        var resourceWrapper = this.parent.element.querySelector('.' + cls.RESOURCE_HEADER_TOOLBAR);\n        if (resourceWrapper) {\n            headerHeight += resourceWrapper.offsetHeight;\n        }\n        var contentArea = this.getContentAreaElement().firstElementChild;\n        var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var availHeight = this.parent.element.offsetHeight - headerHeight - dateHeader.offsetHeight - contentArea.offsetHeight;\n        var wrapperContainer = this.element.querySelector('.' + cls.WRAPPER_CONTAINER_CLASS);\n        var eventWrapper = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\n        wrapperContainer.style.height = eventWrapper.style.height = formatUnit(availHeight);\n    };\n    MonthAgenda.prototype.onDataReady = function (args) {\n        this.setEventWrapperHeight();\n        this.clearElements();\n        var eventCollection = args.processedData;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.parent.eventsProcessed = this.agendaBase.processAgendaEvents(eventCollection);\n        var count = 0;\n        for (var _i = 0, _a = this.renderDates; _i < _a.length; _i++) {\n            var date = _a[_i];\n            var filterData = this.appointmentFiltering(date);\n            var workCell = this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS)[count];\n            if (filterData.length > 0) {\n                if (!workCell.querySelector('.' + cls.APPOINTMENT_INDICATOR_CLASS)) {\n                    workCell.appendChild(createElement('div', { className: cls.APPOINTMENT_INDICATOR_CLASS }));\n                }\n                if (date.getTime() === util.resetTime(new Date(this.monthAgendaDate.getTime())).getTime()) {\n                    this.onEventRender(filterData, date);\n                }\n            }\n            count++;\n        }\n        this.parent.notify(events.eventsLoaded, {});\n    };\n    MonthAgenda.prototype.onCellClick = function (event) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        var filterData = this.appointmentFiltering(event.startTime);\n        this.onEventRender(filterData, event.startTime);\n        this.parent.notify(events.eventsLoaded, {});\n        this.monthAgendaDate = new Date('' + event.startTime);\n    };\n    MonthAgenda.prototype.onEventRender = function (events, date) {\n        var appWrap = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\n        util.removeChildren(appWrap);\n        if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n            if (events.length > 0) {\n                var appContainer = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n                appWrap.appendChild(this.agendaBase.createAgendaContentElement('data', events, appContainer));\n            }\n            else {\n                this.appendAppContainer(appWrap);\n            }\n        }\n        else {\n            if (events.length > 0) {\n                var table = this.createTableLayout();\n                var tBody = table.querySelector('tbody');\n                this.agendaBase.calculateResourceTableElement(tBody, 1, date);\n                table.appendChild(tBody);\n                appWrap.appendChild(table);\n            }\n            else {\n                this.appendAppContainer(appWrap);\n            }\n        }\n        this.agendaBase.wireEventActions();\n    };\n    MonthAgenda.prototype.appointmentFiltering = function (date) {\n        var dateStart = util.resetTime(new Date(date.getTime()));\n        var dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n        return this.parent.eventBase.filterEvents(dateStart, dateEnd);\n    };\n    MonthAgenda.prototype.clearElements = function () {\n        var appointmentIndicators = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_INDICATOR_CLASS));\n        for (var _i = 0, appointmentIndicators_1 = appointmentIndicators; _i < appointmentIndicators_1.length; _i++) {\n            var appointmentIndicator = appointmentIndicators_1[_i];\n            remove(appointmentIndicator);\n        }\n        this.appendAppContainer(this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS));\n    };\n    MonthAgenda.prototype.appendAppContainer = function (appWrap) {\n        var app = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n        addClass([app], cls.AGENDA_NO_EVENT_CLASS);\n        app.innerHTML = this.parent.localeObj.getConstant('noEvents');\n        util.removeChildren(appWrap);\n        appWrap.appendChild(app);\n    };\n    MonthAgenda.prototype.getNextPreviousDate = function (type) {\n        var selectedDate = this.parent.selectedDate;\n        var interval = (type === 'next') ? this.parent.activeViewOptions.interval : -this.parent.activeViewOptions.interval;\n        var navigateDate = util.addMonths(this.parent.selectedDate, interval);\n        var month = (type === 'next') ? 2 : 0;\n        var lastDate = new Date(selectedDate.getFullYear(), selectedDate.getMonth() + month, 0).getDate();\n        var date = (lastDate >= this.monthAgendaDate.getDate()) ? this.monthAgendaDate.getDate() : lastDate;\n        this.monthAgendaDate = new Date(navigateDate.getFullYear(), navigateDate.getMonth(), date);\n        return this.monthAgendaDate;\n    };\n    return MonthAgenda;\n}(Month));\nexport { MonthAgenda };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { MS_PER_DAY, capitalizeFirstWord } from '../base/util';\n/**\n * timeline header rows\n */\nvar TimelineHeaderRow = /** @class */ (function () {\n    function TimelineHeaderRow(parent, renderDates) {\n        this.parent = parent;\n        this.renderDates = renderDates;\n    }\n    TimelineHeaderRow.prototype.groupByYear = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var d = dates_1[_i];\n            var key = d.getFullYear();\n            result[key] = result[key] || [];\n            result[key].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.groupByMonth = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_2 = dates; _i < dates_2.length; _i++) {\n            var d = dates_2[_i];\n            var key = (d.getFullYear() - 1970) * 12 + d.getMonth();\n            result[key] = result[key] || [];\n            result[key].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.groupByWeek = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_3 = dates; _i < dates_3.length; _i++) {\n            var d = dates_3[_i];\n            var jsDate = +new Date(1970, 0, 1);\n            var tzOffsetDiff = d.getTimezoneOffset() - new Date(1970, 0, 1).getTimezoneOffset();\n            var key = Math.ceil(((((+d - jsDate) - (tzOffsetDiff * 60 * 1000)) / MS_PER_DAY) + new Date(jsDate).getDay() + 1) / 7);\n            if (this.parent.firstDayOfWeek && this.parent.firstDayOfWeek > new Date(+d).getDay()) {\n                key = key - 1;\n            }\n            result[key] = result[key] || [];\n            result[key].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.generateSlots = function (data, colspan, row, cls, type) {\n        var _this = this;\n        var dateParser = function (date, format) {\n            return _this.parent.globalize.formatDate(date, { format: format, calendar: _this.parent.getCalendarMode() });\n        };\n        var tdDatas = [];\n        var keys = Object.keys(data);\n        for (var i = 0; i < keys.length; i++) {\n            var dates = data[keys[i]];\n            var htmlCol = void 0;\n            if (row.template) {\n                var args = { date: dates[0], type: type };\n                var templateId = this.parent.element.id + '_headerRowTemplate';\n                htmlCol = [].slice.call(this.parent.templateParser(row.template)(args, this.parent, 'template', templateId, false));\n            }\n            else {\n                var viewTemplate = void 0;\n                switch (row.option) {\n                    case 'Year':\n                        viewTemplate = \"<span class=\\\"e-header-year\\\">\" + dateParser(dates[0], 'y') + \"</span>\";\n                        break;\n                    case 'Month':\n                        viewTemplate = \"<span class=\\\"e-header-month\\\">\" + capitalizeFirstWord(dateParser(dates[0], 'MMMM'), 'single') + \"</span>\";\n                        break;\n                    case 'Week':\n                        viewTemplate = \"<span class=\\\"e-header-week\\\">\" + this.parent.getWeekNumberContent(dates) + \"</span>\";\n                }\n                var headerWrapper = createElement('div', { innerHTML: viewTemplate });\n                htmlCol = [].slice.call(headerWrapper.childNodes);\n            }\n            tdDatas.push({ date: dates[0], type: type, className: [cls], colSpan: dates.length * colspan, template: htmlCol });\n        }\n        return tdDatas;\n    };\n    TimelineHeaderRow.prototype.generateColumnLevels = function (dateSlots, hourSlots) {\n        var levels = [];\n        var rows = this.parent.activeViewOptions.headerRows;\n        var lastLevelColspan = 1;\n        if (rows[rows.length - 1].option === 'Hour' && hourSlots.length > 0) {\n            lastLevelColspan = hourSlots.length / dateSlots.length;\n        }\n        var tdDatas = [];\n        var byYear;\n        var byMonth;\n        var byWeek;\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            switch (row.option) {\n                case 'Year':\n                    byYear = this.groupByYear(this.renderDates);\n                    tdDatas = this.generateSlots(byYear, lastLevelColspan, row, 'e-header-year-cell', 'yearHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Month':\n                    byMonth = this.groupByMonth(this.renderDates);\n                    tdDatas = this.generateSlots(byMonth, lastLevelColspan, row, 'e-header-month-cell', 'monthHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Week':\n                    byWeek = this.groupByWeek(this.renderDates);\n                    tdDatas = this.generateSlots(byWeek, lastLevelColspan, row, 'e-header-week-cell', 'weekHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Date':\n                    tdDatas = dateSlots;\n                    tdDatas = tdDatas.map(function (value) {\n                        value.colSpan = lastLevelColspan;\n                        return value;\n                    });\n                    levels.push(tdDatas);\n                    break;\n                case 'Hour':\n                    if (hourSlots.length > 0) {\n                        levels.push(hourSlots);\n                    }\n                    break;\n            }\n        }\n        return levels;\n    };\n    return TimelineHeaderRow;\n}());\nexport { TimelineHeaderRow };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, createElement, prepend, extend, formatUnit, append, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { VerticalView } from './vertical-view';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport { TimelineHeaderRow } from './timeline-header-row';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * timeline views\n */\nvar TimelineViews = /** @class */ (function (_super) {\n    __extends(TimelineViews, _super);\n    function TimelineViews(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.baseCssClass = 'e-timeline-view';\n        return _this;\n    }\n    TimelineViews.prototype.getModuleName = function () {\n        return 'timelineViews';\n    };\n    TimelineViews.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    };\n    TimelineViews.prototype.scrollTopPanel = function (target) {\n        _super.prototype.scrollTopPanel.call(this, target);\n        this.scrollHeaderLabels(target);\n    };\n    TimelineViews.prototype.scrollToWorkHour = function () {\n        var start = this.parent.getStartEndTime(this.parent.workHours.start);\n        var currDateTime = this.isWorkDay(this.parent.selectedDate) && this.parent.workHours.highlight &&\n            !isNullOrUndefined(start) ? new Date(+this.parent.selectedDate).setHours(start.getHours(), start.getMinutes(), 0, 0)\n            : new Date(+this.parent.selectedDate).setHours(0, 0, 0, 0);\n        var queryString = '[data-date=\"' + new Date(currDateTime).getTime().toString() + '\"]';\n        var firstWorkHourCell = this.element.querySelector(queryString);\n        if (firstWorkHourCell) {\n            this.getScrollableElement().scrollLeft = firstWorkHourCell.offsetLeft;\n        }\n    };\n    TimelineViews.prototype.scrollToHour = function (hour, scrollDate) {\n        var date;\n        var index;\n        if (scrollDate) {\n            index = this.parent.getIndexOfDate(this.renderDates, util.resetTime(scrollDate));\n            if (index >= 0) {\n                var timeString = hour.split(':');\n                if (timeString.length === 2) {\n                    date = new Date(scrollDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0));\n                }\n            }\n        }\n        date = isNullOrUndefined(scrollDate) ? this.parent.getStartEndTime(hour) : date;\n        if (isNullOrUndefined(date)) {\n            return;\n        }\n        var scrollLeft = isNullOrUndefined(scrollDate) ? this.getLeftFromDateTime(null, date) : this.getLeftFromDateTime([index], date);\n        this.getScrollableElement().scrollLeft = !this.parent.enableRtl ? scrollLeft : -scrollLeft;\n    };\n    TimelineViews.prototype.generateColumnLevels = function () {\n        var levels = [];\n        var dateSlots = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        levels.push(dateSlots);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.generateResourceLevels(dateSlots, !this.parent.uiStateValues.isGroupAdaptive);\n        }\n        var hourSlots = [];\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            hourSlots = this.generateTimeSlots(levels[levels.length - 1]);\n            levels.push(hourSlots);\n        }\n        if (this.parent.activeViewOptions.headerRows.length > 0) {\n            var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n            levels = renderGn.generateColumnLevels(dateSlots, hourSlots);\n        }\n        return levels;\n    };\n    TimelineViews.prototype.generateTimeSlots = function (dateSlots) {\n        var _this = this;\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.first ? [cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS, cls.TIME_CELLS_CLASS];\n            r.workDays = _this.parent.activeViewOptions.workDays;\n            return r;\n        };\n        var timeSlotData = this.getTimeSlotRows(handler);\n        var slots = [];\n        for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {\n            var data = dateSlots_1[_i];\n            data.colSpan = timeSlotData.length;\n            var tempTimeSlots = extend([], timeSlotData, null, true);\n            for (var _a = 0, tempTimeSlots_1 = tempTimeSlots; _a < tempTimeSlots_1.length; _a++) {\n                var slot = tempTimeSlots_1[_a];\n                var cellDate = util.resetTime(new Date('' + data.date));\n                slot.date = util.setTime(cellDate, util.getDateInMs(slot.date));\n                slots.push(slot);\n            }\n        }\n        return slots;\n    };\n    TimelineViews.prototype.changeCurrentTimePosition = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var left = this.getLeftFromDateTime(currentDateIndex, this.parent.getCurrentTime());\n        var height = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight;\n        var headerWrap = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var contentWrap = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        contentWrap.appendChild(createElement('div', {\n            className: cls.CURRENT_TIMELINE_CLASS,\n            styles: (this.parent.enableRtl ? 'right' : 'left') + ':' + formatUnit(left) + '; height:' + formatUnit(height)\n        }));\n        if (this.parent.virtualScrollModule) {\n            var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n            var element = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n            setStyleAttribute(timeIndicator, {\n                transform: element.style.transform\n            });\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: cls.CURRENT_TIME_CLASS\n        });\n        headerWrap.appendChild(currentTimeEle);\n        currentTimeEle.style[this.parent.enableRtl ? 'right' : 'left'] = formatUnit(left - (currentTimeEle.offsetWidth / 2));\n    };\n    TimelineViews.prototype.getLeftFromDateTime = function (currentDateIndex, date) {\n        var startHour = this.getStartHour();\n        var endHour = this.getEndHour();\n        var diffInDates = 0;\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        if (!isNullOrUndefined(currentDateIndex)) {\n            var end = (endHour.getHours() === 0) ? 24 : endHour.getHours();\n            if (currentDateIndex[0] !== 0) {\n                diffInDates = (currentDateIndex[0]) * ((end - startHour.getHours()) * 60) + (endHour.getMinutes() - startHour.getMinutes());\n            }\n            diffInMinutes = diffInDates + diffInMinutes;\n        }\n        return (diffInMinutes * this.getWorkCellWidth() * this.parent.activeViewOptions.timeScale.slotCount) /\n            this.parent.activeViewOptions.timeScale.interval;\n    };\n    TimelineViews.prototype.getWorkCellWidth = function () {\n        return this.element.querySelector('.e-work-cells').getBoundingClientRect().width;\n    };\n    TimelineViews.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    TimelineViews.prototype.createAllDayRow = function (table, tdData) { };\n    TimelineViews.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        var index = this.parent.getIndexOfDate(this.renderDates, util.resetTime(this.parent.getCurrentTime()));\n        if (index >= 0) {\n            currentDateIndex.push(index);\n        }\n        return currentDateIndex;\n    };\n    TimelineViews.prototype.renderContent = function () {\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var resTd = createElement('td');\n            resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            tr.appendChild(resTd);\n        }\n        var workTd = createElement('td');\n        var wrap = this.renderContentArea();\n        wrap.appendChild(this.createEventTable(this.getRowCount()));\n        this.collapseRows(wrap);\n        workTd.appendChild(wrap);\n        tr.appendChild(workTd);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    TimelineViews.prototype.getRowCount = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.resourceBase.renderedResources.length;\n        }\n        return 1;\n    };\n    TimelineViews.prototype.getResourceTdData = function (i, tdData) {\n        var resLevel = this.parent.resourceBase.renderedResources[i];\n        var resSHr = resLevel.resourceData[resLevel.resource.startHourField] || this.parent.workHours.start;\n        var resEHr = resLevel.resourceData[resLevel.resource.endHourField] || this.parent.workHours.end;\n        tdData.startHour = this.parent.getStartEndTime(resSHr);\n        tdData.endHour = this.parent.getStartEndTime(resEHr);\n        tdData.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n        tdData.className = resLevel.className;\n        tdData.groupIndex = resLevel.groupIndex;\n        tdData.groupOrder = resLevel.groupOrder;\n        return tdData;\n    };\n    TimelineViews.prototype.renderContentTable = function (table) {\n        var tBody = table.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n    };\n    TimelineViews.prototype.getContentRows = function () {\n        var rows = [];\n        var tr = createElement('tr', { attrs: { role: 'row' } });\n        var td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        var trCount = this.getRowCount();\n        for (var i = 0; i < trCount; i++) {\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                    tdData = this.getResourceTdData(i, tdData);\n                }\n                var ntd = this.createContentTd(tdData, tdData, td);\n                ntr.appendChild(ntd);\n            }\n            rows.push(ntr);\n        }\n        return rows;\n    };\n    TimelineViews.prototype.getContentTdClass = function (r) {\n        return (r.first || !this.parent.activeViewOptions.timeScale.enable) ? [cls.WORK_CELLS_CLASS] :\n            [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n    };\n    TimelineViews.prototype.renderEvents = function () {\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var appointment = new TimelineEvent(this.parent, 'hour');\n            appointment.renderAppointments();\n        }\n        else {\n            var appointment = new TimelineEvent(this.parent, 'day');\n            appointment.renderAppointments();\n        }\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    return TimelineViews;\n}(VerticalView));\nexport { TimelineViews };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, createElement, formatUnit } from '@syncfusion/ej2-base';\nimport { Month } from './month';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport { TimelineHeaderRow } from './timeline-header-row';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * timeline month view\n */\nvar TimelineMonth = /** @class */ (function (_super) {\n    __extends(TimelineMonth, _super);\n    function TimelineMonth(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-timeline-month-view';\n        _this.isInverseTableSelect = true;\n        return _this;\n    }\n    TimelineMonth.prototype.getModuleName = function () {\n        return 'timelineMonth';\n    };\n    TimelineMonth.prototype.onDataReady = function () {\n        var appointment = new TimelineEvent(this.parent, 'day');\n        appointment.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    TimelineMonth.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    };\n    TimelineMonth.prototype.scrollTopPanel = function (target) {\n        _super.prototype.scrollTopPanel.call(this, target);\n        this.scrollHeaderLabels(target);\n    };\n    TimelineMonth.prototype.setContentHeight = function (content, leftPanelElement, height) {\n        if (leftPanelElement) {\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n        }\n        content.style.height = formatUnit(height);\n    };\n    TimelineMonth.prototype.getDateSlots = function (renderDates, workDays) {\n        var dateSlots = [];\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList = [cls.HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateSlots.push({ date: col, type: 'dateHeader', className: classList, colSpan: 1, workDays: workDays });\n        }\n        return dateSlots;\n    };\n    TimelineMonth.prototype.renderLeftIndent = function (tr) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n    };\n    TimelineMonth.prototype.renderContent = function () {\n        var contentTr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var resTd = createElement('td');\n            resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            contentTr.appendChild(resTd);\n        }\n        var contentTd = createElement('td');\n        this.element.querySelector('tbody').appendChild(contentTr);\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        wrap.appendChild(this.renderContentArea());\n        wrap.appendChild(this.createEventTable(this.getRowCount()));\n        this.collapseRows(wrap);\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        contentTd.appendChild(wrap);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        contentTr.appendChild(contentTd);\n    };\n    TimelineMonth.prototype.getRowCount = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.resourceBase.renderedResources.length;\n        }\n        return 1;\n    };\n    TimelineMonth.prototype.getContentSlots = function () {\n        var slotDatas = [];\n        for (var row = 0; row < this.getRowCount(); row++) {\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var data = _a[_i];\n                data.className = [cls.WORK_CELLS_CLASS];\n                if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                    var resLevel = this.parent.resourceBase.renderedResources[row];\n                    data.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n                    data.className = data.className.concat(resLevel.className);\n                    data.groupIndex = resLevel.groupIndex;\n                    data.groupOrder = resLevel.groupOrder;\n                }\n                var slotData = {\n                    date: new Date(+data.date), colSpan: data.colSpan, groupIndex: data.groupIndex, workDays: data.workDays,\n                    type: 'monthCells', className: data.className\n                };\n                if (!slotDatas[row]) {\n                    slotDatas[row] = [];\n                }\n                slotDatas[row].push(slotData);\n            }\n        }\n        return slotDatas;\n    };\n    TimelineMonth.prototype.updateClassList = function (data) {\n        if (!this.parent.isMinMaxDate(data.date)) {\n            data.className.push(cls.DISABLE_DATES);\n        }\n    };\n    TimelineMonth.prototype.unwireEvents = function () {\n        EventHandler.remove(this.getContentAreaElement(), 'scroll', this.onContentScroll);\n    };\n    TimelineMonth.prototype.getMonthStart = function (currentDate) {\n        var monthStart = this.parent.calendarUtil.firstDateOfMonth(util.resetTime(currentDate));\n        return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n    };\n    TimelineMonth.prototype.getMonthEnd = function (currentDate) {\n        var monthStart = this.parent.calendarUtil.firstDateOfMonth(util.resetTime(currentDate));\n        return this.parent.calendarUtil.lastDateOfMonth(util.addMonths(new Date(+monthStart), this.parent.activeViewOptions.interval - 1));\n    };\n    TimelineMonth.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        colLevels.push(level);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.generateResourceLevels(level, !this.parent.uiStateValues.isGroupAdaptive);\n        }\n        var hourSlots = [];\n        if (this.parent.activeViewOptions.headerRows.length > 0) {\n            var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n            colLevels = renderGn.generateColumnLevels(level, hourSlots);\n        }\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    return TimelineMonth;\n}(Month));\nexport { TimelineMonth };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, addClass, createElement } from '@syncfusion/ej2-base';\nimport { Year } from './year';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * timeline year view\n */\nvar TimelineYear = /** @class */ (function (_super) {\n    __extends(TimelineYear, _super);\n    function TimelineYear(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-timeline-year-view';\n        _this.isInverseTableSelect = true;\n        return _this;\n    }\n    TimelineYear.prototype.getModuleName = function () {\n        return 'timelineYear';\n    };\n    TimelineYear.prototype.renderHeader = function (headerWrapper) {\n        var tr = createElement('tr');\n        headerWrapper.appendChild(tr);\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n        else {\n            var leftHeaderCells = createElement('td', { className: cls.LEFT_INDENT_CLASS });\n            tr.appendChild(leftHeaderCells);\n            leftHeaderCells.appendChild(this.renderResourceHeader(cls.LEFT_INDENT_WRAP_CLASS));\n        }\n        var td = createElement('td');\n        tr.appendChild(td);\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        td.appendChild(container);\n        if (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            container.appendChild(this.renderResourceHeader(cls.DATE_HEADER_WRAP_CLASS));\n            this.columnCount = this.colLevels.slice(-1)[0].length;\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n            container.appendChild(wrapper);\n            var table = this.createTableLayout();\n            wrapper.appendChild(table);\n            table.appendChild(this.createTableColGroup(this.columnCount));\n            var innerTr = createElement('tr');\n            table.querySelector('tbody').appendChild(innerTr);\n            for (var column = 0; column < this.columnCount; column++) {\n                var innerTd = createElement('td', { className: cls.HEADER_CELLS_CLASS });\n                if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                    innerTd.innerHTML = \"<span>\" + this.parent.getDayNames('abbreviated')[column % 7] + \"</span>\";\n                }\n                else {\n                    var date = new Date(this.parent.selectedDate.getFullYear(), column, 1);\n                    innerTd.innerHTML = \"<span>\" + this.getMonthName(date) + \"</span>\";\n                    innerTd.setAttribute('data-date', date.getTime().toString());\n                }\n                innerTr.appendChild(innerTd);\n                this.parent.trigger(event.renderCell, { elementType: 'headerCells', element: innerTd });\n            }\n        }\n    };\n    TimelineYear.prototype.renderResourceHeader = function (className) {\n        var wrap = createElement('div', { className: className });\n        var tbl = this.createTableLayout();\n        wrap.appendChild(tbl);\n        var trEle = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.colLevels = this.generateColumnLevels();\n        }\n        else {\n            var colData = [{ className: [cls.HEADER_CELLS_CLASS], type: 'headerCell' }];\n            this.colLevels = [colData];\n        }\n        for (var _i = 0, _a = this.colLevels; _i < _a.length; _i++) {\n            var col = _a[_i];\n            var ntr = trEle.cloneNode();\n            var count = className === cls.DATE_HEADER_WRAP_CLASS ? col : [col[0]];\n            for (var _b = 0, count_1 = count; _b < count_1.length; _b++) {\n                var c = count_1[_b];\n                var tdEle = createElement('td');\n                if (c.className) {\n                    addClass([tdEle], c.className);\n                }\n                if (className === cls.DATE_HEADER_WRAP_CLASS) {\n                    if (c.template) {\n                        append(c.template, tdEle);\n                    }\n                    if (c.colSpan) {\n                        tdEle.setAttribute('colspan', c.colSpan.toString());\n                    }\n                    this.setResourceHeaderContent(tdEle, c);\n                }\n                var args = { elementType: c.type, element: tdEle, date: c.date, groupIndex: c.groupIndex };\n                this.parent.trigger(event.renderCell, args);\n                ntr.appendChild(tdEle);\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        if (className === cls.DATE_HEADER_WRAP_CLASS) {\n            tbl.appendChild(this.createTableColGroup(this.colLevels.slice(-1)[0].length));\n        }\n        return wrap;\n    };\n    TimelineYear.prototype.renderContent = function (contentWrapper) {\n        var tr = createElement('tr');\n        contentWrapper.appendChild(tr);\n        var firstTd = createElement('td');\n        var lastTd = createElement('td');\n        var tdCollection = [];\n        var monthTBody;\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            tdCollection.push(firstTd);\n            firstTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            this.rowCount = this.parent.resourceBase.lastResourceLevel.length;\n        }\n        else {\n            tdCollection.push(firstTd);\n            var monthWrapper = createElement('div', { className: cls.MONTH_HEADER_WRAPPER });\n            firstTd.appendChild(monthWrapper);\n            monthWrapper.appendChild(this.createTableLayout());\n            monthTBody = monthWrapper.querySelector('tbody');\n        }\n        tdCollection.push(lastTd);\n        append(tdCollection, tr);\n        var content = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        lastTd.appendChild(content);\n        var contentTable = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        content.appendChild(contentTable);\n        var eventWrapper = createElement('div', { className: cls.EVENT_TABLE_CLASS });\n        content.appendChild(eventWrapper);\n        var contentTBody = contentTable.querySelector('tbody');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            if (this.parent.rowAutoHeight) {\n                addClass([contentTable], cls.AUTO_HEIGHT);\n            }\n            var colCount = this.parent.activeViewOptions.orientation === 'Horizontal' ? this.colLevels.slice(-1)[0].length : 12;\n            contentTable.appendChild(this.createTableColGroup(colCount));\n            this.renderResourceContent(eventWrapper, monthTBody, contentTBody);\n        }\n        else {\n            contentTable.appendChild(this.createTableColGroup(this.columnCount));\n            this.renderDefaultContent(eventWrapper, monthTBody, contentTBody);\n        }\n    };\n    TimelineYear.prototype.renderDefaultContent = function (wrapper, monthBody, contentBody) {\n        for (var month = 0; month < this.rowCount; month++) {\n            wrapper.appendChild(createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS }));\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            var tr = createElement('tr', { attrs: { 'role': 'row' } });\n            var monthTr = tr.cloneNode();\n            monthBody.appendChild(monthTr);\n            var contentTr = tr.cloneNode();\n            contentBody.appendChild(contentTr);\n            var monthTd = createElement('td', { className: cls.MONTH_HEADER_CLASS, attrs: { 'role': 'gridcell' } });\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                monthTd.setAttribute('data-date', monthDate.getTime().toString());\n                monthTd.innerHTML = \"<span>\" + this.getMonthName(monthDate) + \"</span>\";\n            }\n            else {\n                monthTd.innerHTML = \"<span>\" + this.parent.getDayNames('abbreviated')[month % 7] + \"</span>\";\n            }\n            monthTr.appendChild(monthTd);\n            this.parent.trigger(event.renderCell, { elementType: 'leftHeaderCells', element: monthTd });\n            var date = new Date(monthStart.getTime());\n            for (var column = 0; column < this.columnCount; column++) {\n                var isDateAvail = void 0;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    monthDate = new Date(this.parent.selectedDate.getFullYear(), column, 1);\n                    monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n                    monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n                    var dayDate = (month - monthStart.getDay()) + 1;\n                    date = new Date(this.parent.selectedDate.getFullYear(), column, dayDate);\n                    isDateAvail = dayDate > 0 && date.getTime() < monthEnd.getTime();\n                }\n                else {\n                    isDateAvail = column >= monthStart.getDay() && date.getTime() < monthEnd.getTime();\n                }\n                var td = createElement('td', {\n                    className: cls.WORK_CELLS_CLASS,\n                    attrs: { 'role': 'gridcell', 'aria-selected': 'false' }\n                });\n                contentTr.appendChild(td);\n                var dateHeader = createElement('div', {\n                    className: cls.DATE_HEADER_CLASS + ' ' + cls.NAVIGATE_CLASS,\n                    innerHTML: (isDateAvail) ? date.getDate().toString() : ''\n                });\n                var skeleton = 'full';\n                var annocementText = this.parent.globalize.formatDate(date, {\n                    skeleton: skeleton,\n                    calendar: this.parent.getCalendarMode()\n                });\n                dateHeader.setAttribute('aria-label', annocementText);\n                if (isDateAvail) {\n                    var tds = [td];\n                    var classList = [];\n                    if (this.parent.activeViewOptions.workDays.indexOf(date.getDay()) > -1) {\n                        classList.push(cls.WORKDAY_CLASS);\n                    }\n                    if (this.isCurrentDate(date)) {\n                        classList.push(cls.CURRENT_DAY_CLASS);\n                        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                            tds.push(this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + (\":nth-child(\" + (column + 1) + \")\")));\n                        }\n                        else {\n                            tds.push(this.element.querySelectorAll('.' + cls.MONTH_HEADER_CLASS).item(month));\n                        }\n                    }\n                    if (classList.length > 0) {\n                        addClass(tds, classList);\n                    }\n                }\n                else {\n                    addClass([td], cls.OTHERMONTH_CLASS);\n                }\n                td.appendChild(dateHeader);\n                if (isDateAvail) {\n                    td.setAttribute('data-date', date.getTime().toString());\n                    this.wireEvents(td, 'cell');\n                }\n                this.renderCellTemplate({ date: date, type: 'workCells' }, td);\n                this.parent.trigger(event.renderCell, { elementType: 'workCells', element: td, date: date });\n                if (isDateAvail) {\n                    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                        date = util.addDays(new Date(date.getTime()), 1);\n                    }\n                }\n            }\n        }\n    };\n    TimelineYear.prototype.renderResourceContent = function (wrapper, monthBody, contentBody) {\n        for (var row = 0; row < this.rowCount; row++) {\n            wrapper.appendChild(createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS }));\n            var tr = createElement('tr', { attrs: { 'role': 'row' } });\n            contentBody.appendChild(tr);\n            var resData = void 0;\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                resData = this.parent.resourceBase.lastResourceLevel[row];\n            }\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), row, 1);\n            var date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                var monthTr = tr.cloneNode();\n                monthBody.appendChild(monthTr);\n                var monthTd = createElement('td', {\n                    className: cls.MONTH_HEADER_CLASS,\n                    innerHTML: \"<span>\" + this.getMonthName(monthDate) + \"</span>\",\n                    attrs: { 'role': 'gridcell', 'data-date': date.getTime().toString() }\n                });\n                monthTr.appendChild(monthTd);\n            }\n            for (var month = 0; month < this.columnCount; month++) {\n                var classList = [];\n                var groupIndex = row;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    classList = classList.concat(resData.className);\n                    if (classList.indexOf(cls.RESOURCE_PARENT_CLASS) > -1) {\n                        classList.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n                    }\n                    else {\n                        classList.push(cls.WORKDAY_CLASS);\n                    }\n                    monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n                    date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n                }\n                else {\n                    groupIndex = this.colLevels.slice(-1)[0][month].groupIndex;\n                    classList.push(cls.WORKDAY_CLASS);\n                }\n                var td = createElement('td', {\n                    className: cls.WORK_CELLS_CLASS,\n                    attrs: {\n                        'role': 'gridcell', 'aria-selected': 'false',\n                        'data-date': date.getTime().toString()\n                    }\n                });\n                addClass([td], classList);\n                td.setAttribute('data-group-index', groupIndex.toString());\n                this.renderCellTemplate({ date: date, type: 'workCells', groupIndex: groupIndex }, td);\n                this.wireEvents(td, 'cell');\n                tr.appendChild(td);\n                this.parent.trigger(event.renderCell, { elementType: 'workCells', element: td, date: date });\n            }\n        }\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n            this.collapseRows(this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS));\n        }\n    };\n    TimelineYear.prototype.renderCellTemplate = function (data, td) {\n        if (!this.parent.activeViewOptions.cellTemplate) {\n            return;\n        }\n        var args = { date: data.date, type: data.type };\n        if (data.groupIndex) {\n            args.groupIndex = data.groupIndex;\n        }\n        var scheduleId = this.parent.element.id + '_';\n        var viewName = this.parent.activeViewOptions.cellTemplateName;\n        var templateId = scheduleId + viewName + 'cellTemplate';\n        var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args, this.parent, 'cellTemplate', templateId, false));\n        append(cellTemplate, td);\n    };\n    TimelineYear.prototype.scrollToDate = function (scrollDate) {\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            var date = +new Date(util.resetTime(scrollDate));\n            var element = this.element.querySelector('[data-date=\"' + date + '\"]');\n            if (element) {\n                this.getScrollableElement().scrollLeft = element.offsetLeft;\n                this.getScrollableElement().scrollTop = element.offsetTop;\n            }\n        }\n    };\n    TimelineYear.prototype.getScrollableElement = function () {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    };\n    return TimelineYear;\n}(Year));\nexport { TimelineYear };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { extend } from '@syncfusion/ej2-base';\nimport { getDateFromRecurrenceDateString, getRecurrenceStringFromDate } from '../../recurrence-editor/date-generator';\n/**\n * ICalendar Export Module\n */\nvar ICalendarExport = /** @class */ (function () {\n    function ICalendarExport(parent) {\n        this.parent = parent;\n    }\n    ICalendarExport.prototype.initializeCalendarExport = function (fileName, customData) {\n        var _this = this;\n        var eventsData = (customData) ? customData :\n            extend([], this.parent.eventsData, null, true);\n        eventsData = this.parent.eventBase.sortByTime(eventsData);\n        var SEPARATOR = (navigator.appVersion.indexOf('Win') !== -1) ? '\\r\\n' : '\\n';\n        var iCalendarEvents = [];\n        var filterCollection = [];\n        var timeZone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        var fields = this.parent.eventFields;\n        eventsData.forEach(function (eventObj) {\n            var uId = _this.parent.eventBase.generateGuid();\n            var editedExDate = [];\n            if (eventObj[fields.recurrenceID]) {\n                var filter = _this.filterEvents(filterCollection, fields.id, eventObj[fields.recurrenceID]);\n                uId = filter[0].UID;\n            }\n            if (!eventObj[fields.recurrenceID] && eventObj[fields.recurrenceRule] && eventObj[fields.recurrenceException]) {\n                var exDate = (eventObj[fields.recurrenceException]).split(',');\n                var editedObj = _this.filterEvents(eventsData, fields.recurrenceID, eventObj[fields.id]);\n                editedObj.forEach(function (edited) {\n                    editedExDate.push(getRecurrenceStringFromDate(edited[fields.startTime]));\n                });\n                var exceptionDateList = exDate.filter(function (value) { return editedExDate.indexOf(value) === -1; });\n                eventObj[fields.recurrenceException] = (exceptionDateList.length > 0) ? (exceptionDateList.join(',') + ',') : '';\n            }\n            var startZone = (eventObj[fields.startTimezone] || timeZone);\n            var endZone = (eventObj[fields.endTimezone] || timeZone);\n            var calendarEvent = [\n                'BEGIN:VEVENT',\n                'LOCATION:' + (eventObj[fields.location] || ''),\n                'SUMMARY:' + (eventObj[fields.subject] || ''),\n                'UID:' + uId,\n                'DESCRIPTION:' + (eventObj[fields.description] || ''),\n                'END:VEVENT'\n            ];\n            if (eventObj[fields.isAllDay]) {\n                calendarEvent.splice(4, 0, 'DTEND;VALUE=DATE:' + _this.convertDateToString(eventObj[fields.endTime], true));\n                calendarEvent.splice(4, 0, 'DTSTART;VALUE=DATE:' + _this.convertDateToString(eventObj[fields.startTime], true));\n            }\n            else if (!eventObj[fields.isAllDay] && !eventObj[fields.recurrenceRule]) {\n                calendarEvent.splice(4, 0, 'DTEND:' + _this.convertDateToString(eventObj[fields.endTime]));\n                calendarEvent.splice(4, 0, 'DTSTART:' + _this.convertDateToString(eventObj[fields.startTime]));\n            }\n            else {\n                calendarEvent.splice(4, 0, 'DTEND;TZID=\"' + endZone + '\":' + _this.convertDateToString(eventObj[fields.endTime]));\n                calendarEvent.splice(4, 0, 'DTSTART;TZID=\"' + startZone + '\":'\n                    + _this.convertDateToString(eventObj[fields.startTime]));\n            }\n            if (eventObj[fields.recurrenceRule]) {\n                calendarEvent.splice(4, 0, 'RRULE:' + eventObj[fields.recurrenceRule]);\n            }\n            if (eventObj[fields.recurrenceException]) {\n                var exDate = eventObj[fields.recurrenceException].split(',');\n                for (var i = 0; i < exDate.length - 1; i++) {\n                    calendarEvent.splice(5, 0, 'EXDATE:' +\n                        _this.convertDateToString(getDateFromRecurrenceDateString(exDate[i]), eventObj[fields.isAllDay]));\n                }\n            }\n            if (eventObj[fields.recurrenceID]) {\n                calendarEvent.splice(4, 0, 'RECURRENCE-ID;TZID=\"' + startZone + '\":'\n                    + _this.convertDateToString(eventObj[fields.startTime], eventObj[fields.isAllDay]));\n            }\n            var customFields = _this.customFieldFilter(eventObj, fields);\n            if (customFields.length > 0) {\n                customFields.forEach(function (customField) {\n                    return calendarEvent.splice(4, 0, customField + ':' + (eventObj[customField] || ''));\n                });\n            }\n            var app = extend({}, eventObj);\n            app.UID = uId;\n            filterCollection.push(app);\n            iCalendarEvents.push(calendarEvent.join(SEPARATOR));\n        });\n        var iCalendar = [\n            'BEGIN:VCALENDAR',\n            'PRODID:-//Syncfusion Inc//Scheduler//EN',\n            'VERSION:2.0',\n            'CALSCALE:GREGORIAN',\n            'METHOD:PUBLISH',\n            'X-WR-CALNAME:' + (fileName || 'Calendar'),\n            'X-WR-TIMEZONE:' + timeZone\n        ].join(SEPARATOR);\n        var icsString = iCalendar + SEPARATOR + iCalendarEvents.join(SEPARATOR) + SEPARATOR + 'END:VCALENDAR';\n        this.download(icsString, fileName);\n    };\n    ICalendarExport.prototype.customFieldFilter = function (eventObj, fields) {\n        var defaultFields = Object.keys(fields).map(function (key) { return fields[key]; });\n        var eventFields = Object.keys(eventObj);\n        return eventFields.filter(function (value) { return (defaultFields.indexOf(value) === -1) && (value !== 'Guid'); });\n    };\n    ICalendarExport.prototype.convertDateToString = function (eventDate, allDay) {\n        var year = ('0000' + (eventDate.getFullYear().toString())).slice(-4);\n        var month = ('00' + ((eventDate.getMonth() + 1).toString())).slice(-2);\n        var date = ('00' + ((eventDate.getDate()).toString())).slice(-2);\n        var hours = ('00' + (eventDate.getHours().toString())).slice(-2);\n        var minutes = ('00' + (eventDate.getMinutes().toString())).slice(-2);\n        var seconds = ('00' + (eventDate.getSeconds().toString())).slice(-2);\n        var timeString = (allDay) ? year + month + date : year + month + date + 'T' + hours + minutes + seconds;\n        return timeString;\n    };\n    ICalendarExport.prototype.download = function (icsString, fileName) {\n        var buffer = new Blob([icsString], { type: 'data:text/calendar;charset=utf8' });\n        fileName = (fileName || 'Calendar') + '.ics';\n        if (navigator.msSaveBlob) {\n            navigator.msSaveBlob(buffer, fileName);\n        }\n        else {\n            var downloadLink_1 = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');\n            downloadLink_1.download = fileName;\n            downloadLink_1.href = URL.createObjectURL(buffer);\n            var event_1 = document.createEvent('MouseEvent');\n            event_1.initEvent('click', true, true);\n            downloadLink_1.dispatchEvent(event_1);\n            setTimeout(function () {\n                URL.revokeObjectURL(downloadLink_1.href);\n                downloadLink_1.href = undefined;\n            });\n        }\n    };\n    ICalendarExport.prototype.filterEvents = function (data, field, value) {\n        return data.filter(function (e) { return e[field] === value; });\n    };\n    ICalendarExport.prototype.getModuleName = function () {\n        return 'iCalendarExport';\n    };\n    ICalendarExport.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent = null;\n    };\n    return ICalendarExport;\n}());\nexport { ICalendarExport };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { getRecurrenceStringFromDate } from '../../recurrence-editor/date-generator';\n/**\n * ICalendar Import Module\n */\nvar ICalendarImport = /** @class */ (function () {\n    function ICalendarImport(parent) {\n        this.allDay = false;\n        this.parent = parent;\n    }\n    ICalendarImport.prototype.initializeCalendarImport = function (fileContent) {\n        var _this = this;\n        if (fileContent && fileContent instanceof Blob) {\n            var fileReader_1 = new FileReader();\n            fileReader_1.onload = function () {\n                var iCalString = fileReader_1.result;\n                _this.iCalendarParser(iCalString);\n            };\n            fileReader_1.readAsText(fileContent, 'UTF-8');\n        }\n        else if (fileContent && typeof fileContent === 'string') {\n            this.iCalendarParser(fileContent);\n        }\n    };\n    ICalendarImport.prototype.iCalendarParser = function (iCalString) {\n        var _this = this;\n        var fields = this.parent.eventFields;\n        var events = [];\n        var uId = 'UID';\n        var calArray = iCalString.replace(new RegExp('\\\\r', 'g'), '').split('\\n');\n        var isEvent = false;\n        var curEvent;\n        var id = this.parent.eventBase.getEventMaxID();\n        calArray.forEach(function (element) {\n            var index;\n            var type;\n            var value;\n            if (!isEvent && element === 'BEGIN:VEVENT') {\n                isEvent = true;\n                curEvent = {};\n            }\n            if (isEvent && element === 'END:VEVENT') {\n                isEvent = false;\n                events.push(curEvent);\n                curEvent = null;\n            }\n            if (isEvent) {\n                index = element.indexOf(':');\n                type = element.substr(0, index).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n                value = element.substr(index + 1, element.length - (index + 1)).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n                if (element.indexOf('SUMMARY') !== -1) {\n                    type = 'SUMMARY';\n                }\n                if (element.indexOf('DTSTART') !== -1) {\n                    curEvent[fields.startTime] = _this.dateParsing(element);\n                    curEvent[fields.isAllDay] = _this.allDay;\n                    _this.allDay = false;\n                }\n                else if (element.indexOf('DTEND') !== -1) {\n                    curEvent[fields.endTime] = _this.dateParsing(element);\n                }\n                else if (element.indexOf('EXDATE') !== -1) {\n                    value = getRecurrenceStringFromDate(_this.dateParsing(element));\n                    curEvent[fields.recurrenceException] = (isNullOrUndefined(curEvent[fields.recurrenceException])) ?\n                        value : curEvent[fields.recurrenceException] + ',' + value;\n                }\n                else if (element.indexOf('RECURRENCE-ID') !== -1) {\n                    value = getRecurrenceStringFromDate(_this.dateParsing(element));\n                    curEvent[fields.recurrenceException] = value;\n                    curEvent[fields.recurrenceID] = value;\n                }\n                else {\n                    switch (type) {\n                        case 'BEGIN':\n                            break;\n                        case 'UID':\n                            curEvent[uId] = value;\n                            curEvent[fields.id] = id++;\n                            break;\n                        case 'SUMMARY':\n                            curEvent[fields.subject] = value;\n                            break;\n                        case 'LOCATION':\n                            curEvent[fields.location] = value;\n                            break;\n                        case 'DESCRIPTION':\n                            curEvent[fields.description] = value;\n                            break;\n                        case 'RRULE':\n                            curEvent[fields.recurrenceRule] = value;\n                            break;\n                        default:\n                            curEvent[type] = value;\n                    }\n                }\n            }\n        });\n        var app = extend([], events, null, true);\n        this.parent.addEvent(this.processOccurrence(app));\n    };\n    ICalendarImport.prototype.processOccurrence = function (app) {\n        var appoint = [];\n        var uId = 'UID';\n        var fields = this.parent.eventFields;\n        app.forEach(function (eventObj) {\n            var parentObj;\n            var id;\n            // eslint-disable-next-line no-prototype-builtins\n            if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n                parentObj = eventObj;\n                id = eventObj[fields.id];\n            }\n            var data = app.filter(function (data) { return data.UID === eventObj[uId]; });\n            if (data.length > 1 && isNullOrUndefined(eventObj[fields.recurrenceID])) {\n                for (var i = 0; i < data.length; i++) {\n                    // eslint-disable-next-line no-prototype-builtins\n                    if (data[i].hasOwnProperty(fields.recurrenceID)) {\n                        var exdate = data[i][fields.recurrenceID];\n                        data[i][fields.recurrenceID] = id;\n                        data[i][fields.recurrenceException] = null;\n                        parentObj[fields.recurrenceException] = (isNullOrUndefined(parentObj[fields.recurrenceException])) ?\n                            exdate : parentObj[fields.recurrenceException] + ',' + exdate;\n                        appoint.push(data[i]);\n                    }\n                }\n                appoint.push(parentObj);\n                // eslint-disable-next-line no-prototype-builtins\n            }\n            else if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n                appoint.push(eventObj);\n            }\n        });\n        return appoint;\n    };\n    ICalendarImport.prototype.getDateString = function (value) {\n        value = value || '';\n        // eslint-disable-next-line no-useless-escape\n        return (value.replace(/\\\\\\,/g, ',').replace(/\\\\\\;/g, ';').replace(/\\\\[nN]/g, '\\n').replace(/\\\\\\\\/g, '\\\\'));\n    };\n    ICalendarImport.prototype.dateParsing = function (element) {\n        var expression = /([^':;]+)((?:;(?:[^':;]+)(?:=(?:(?:'[^']*')|(?:[^':;]+))))*):(.*)/;\n        var split = (element.match(expression)).slice(1);\n        var value = split[split.length - 1];\n        var newDate = new Date(this.getDateString(value));\n        if (element && element.indexOf('VALUE=DATE') > -1) {\n            var data_1 = /^(\\d{4})(\\d{2})(\\d{2})$/.exec(value);\n            if (data_1 !== null) {\n                newDate = new Date(parseInt(data_1[1], 10), parseInt(data_1[2], 10) - 1, parseInt(data_1[3], 10));\n            }\n            if (element.indexOf('DTSTART') > -1) {\n                this.allDay = true;\n            }\n        }\n        var data = /^(\\d{4})(\\d{2})(\\d{2})T(\\d{2})(\\d{2})(\\d{2})(Z)?$/.exec(value);\n        if (data !== null) {\n            if (data[7] === 'Z') {\n                newDate = new Date(Date.UTC(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10)));\n            }\n            else {\n                newDate = new Date(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10));\n            }\n        }\n        return newDate;\n    };\n    ICalendarImport.prototype.getModuleName = function () {\n        return 'iCalendarImport';\n    };\n    ICalendarImport.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n    };\n    return ICalendarImport;\n}());\nexport { ICalendarImport };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Workbook } from '@syncfusion/ej2-excel-export';\nimport { extend } from '@syncfusion/ej2-base';\n/**\n * Excel Export Module\n */\nvar ExcelExport = /** @class */ (function () {\n    function ExcelExport(parent) {\n        this.parent = parent;\n    }\n    ExcelExport.prototype.initializeExcelExport = function (excelExportOptions) {\n        var _this = this;\n        var exportFields = excelExportOptions.fields || Object.keys(this.parent.eventFields).map(function (field) {\n            return _this.parent.eventFields[field];\n        });\n        var exportName = excelExportOptions.fileName || 'Schedule';\n        var exportType = excelExportOptions.exportType || 'xlsx';\n        var isIncludeOccurrences = excelExportOptions.includeOccurrences || false;\n        var eventCollection;\n        if (excelExportOptions.customData) {\n            eventCollection = !isIncludeOccurrences ? excelExportOptions.customData :\n                this.parent.eventBase.getProcessedEvents(excelExportOptions.customData);\n        }\n        else {\n            eventCollection = !isIncludeOccurrences ? this.parent.eventsData : this.parent.eventsProcessed;\n        }\n        this.processWorkbook(exportFields, exportName, exportType, eventCollection);\n    };\n    ExcelExport.prototype.processWorkbook = function (fields, name, type, eventCollection) {\n        var _this = this;\n        var columns = [];\n        var rows = [];\n        var columnHeader = [];\n        fields.forEach(function (field, i) { return columns.push({ index: i + 1, width: (field === 'Id' ? 20 : 150) }); });\n        var style = { fontSize: 12, borders: { color: '#E0E0E0' }, bold: true };\n        fields.forEach(function (field, i) { return columnHeader.push({ index: i + 1, value: field, style: style }); });\n        rows.push({ index: 1, cells: columnHeader });\n        var i = 2;\n        var _loop_1 = function (event_1) {\n            var columnData = [];\n            fields.forEach(function (field, n) {\n                var columnRule = { index: n + 1, value: event_1[field] || '' };\n                if (field === _this.parent.eventFields.startTime || field === _this.parent.eventFields.endTime) {\n                    var styleRule = { fontSize: 12, numberFormat: 'm/d/yyyy h:mm AM/PM' };\n                    columnRule = extend({}, columnRule, { style: styleRule }, true);\n                }\n                columnData.push(columnRule);\n            });\n            rows.push({ index: i, cells: columnData });\n            i++;\n        };\n        for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n            var event_1 = eventCollection_1[_i];\n            _loop_1(event_1);\n        }\n        var workSheet = [{ columns: columns, rows: rows }];\n        var book = new Workbook({ worksheets: workSheet }, type, this.parent.locale);\n        book.save(name + '.' + type);\n    };\n    ExcelExport.prototype.getModuleName = function () {\n        return 'excelExport';\n    };\n    ExcelExport.prototype.destroy = function () {\n        this.parent = null;\n    };\n    return ExcelExport;\n}());\nexport { ExcelExport };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement } from '@syncfusion/ej2-base';\n/**\n * Print Module\n */\nvar Print = /** @class */ (function () {\n    function Print(parent) {\n        this.parent = parent;\n    }\n    Print.prototype.printScheduler = function () {\n        var clone = this.parent.element.cloneNode(true);\n        clone.id = this.parent.element.id + '_print';\n        document.body.appendChild(clone);\n        var scrollableEle = this.getScrollableElement(this.parent.element);\n        this.print(clone, scrollableEle.scrollTop, scrollableEle.scrollLeft);\n    };\n    Print.prototype.getScrollableElement = function (element) {\n        if (this.parent.currentView === 'MonthAgenda') {\n            return element.querySelector('.e-appointment-wrap');\n        }\n        return element.querySelector('.e-content-wrap');\n    };\n    Print.prototype.print = function (clone, top, left) {\n        var _this = this;\n        var links = [].slice.call(document.getElementsByTagName('head')[0].querySelectorAll('link, style'));\n        var reference = '';\n        for (var i = 0, len = links.length; i < len; i++) {\n            reference += links[i].outerHTML;\n        }\n        var div = createElement('div');\n        clone.style.width = this.parent.element.offsetWidth + 'px';\n        var elementWidth = Math.round((parseInt(clone.style.width, 10)) / 100) * 100;\n        div.appendChild(clone);\n        var printWindow = window.open('', 'print', 'height=550,width=' + elementWidth + ',tabbar=no');\n        printWindow.document.write('<!DOCTYPE html> <html><head>' + reference + '</head><body>' + div.innerHTML +\n            '<script> (function() { window.ready = true; })(); </script>' + '</body></html>');\n        printWindow.document.close();\n        printWindow.focus();\n        setTimeout(function () {\n            if (printWindow.ready) {\n                _this.scrolledScheduler(printWindow, top, left);\n                printWindow.print();\n                printWindow.close();\n            }\n        }, 500);\n    };\n    Print.prototype.scrolledScheduler = function (printWindow, top, left) {\n        var scrollableEle = this.getScrollableElement(printWindow.document.body);\n        scrollableEle.scrollLeft = left;\n        scrollableEle.scrollTop = top;\n        var headerTimeCellsScroll = printWindow.document.querySelector('.e-date-header-wrap');\n        if (this.parent.activeView.isTimelineView()) {\n            headerTimeCellsScroll.scrollLeft = left;\n        }\n        if (this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n            var timeCellsScroll = printWindow.document.querySelector('.e-time-cells-wrap');\n            timeCellsScroll.scrollTop = top;\n            headerTimeCellsScroll.scrollLeft = left;\n        }\n        if (this.parent.currentView === 'Month') {\n            headerTimeCellsScroll.scrollLeft = left;\n        }\n    };\n    Print.prototype.getModuleName = function () {\n        return 'print';\n    };\n    Print.prototype.destroy = function () {\n        this.parent = null;\n    };\n    return Print;\n}());\nexport { Print };\n","import * as index from './index';\nindex.Schedule.Inject(index.Day, index.Week, index.WorkWeek, index.Month, index.Year, index.Agenda, index.MonthAgenda, index.TimelineViews, index.TimelineMonth, index.TimelineYear, index.Resize, index.DragAndDrop, index.ExcelExport, index.ICalendarExport, index.ICalendarImport, index.Print);\nexport * from './index';\n"],"names":["getElementHeightFromClass","container","elementClass","height","el","createElement","className","cloneNode","style","visibility","position","appendChild","getBoundingClientRect","remove","getTranslateY","element","getComputedStyle","window","WebKitCSSMatrix","webkitTransform","m42","getWeekFirstDate","date","firstDayOfWeek","date1","Date","getTime","getDay","setDate","getDate","getWeekLastDate","weekFirst","weekLast","getFullYear","getMonth","firstDateOfMonth","lastDateOfMonth","getWeekNumber","valueOf","dayOfYear","MS_PER_DAY","Math","ceil","getWeekMiddleDate","setTime","time","tzOffsetBefore","getTimezoneOffset","d","tzOffsetDiff","MS_PER_MINUTE","resetTime","getDateInMs","localOffset","timezoneOffset","getDateCount","startDate","endDate","addDays","noOfDays","addMonths","noOfMonths","day","setMonth","min","getMaxDays","addYears","noOfYears","setFullYear","getStartEndHours","startHour","endHour","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","date2","getDaysCount","strTime","endTime","round","getDateFromString","indexOf","parseInt","match","toString","replace","getScrollBarWidth","scrollWidth","divNode","value","cssText","document","body","ratio","devicePixelRatio","toFixed","floor","offsetWidth","clientWidth","removeChild","findIndexInData","data","field","event","resourceCollection","i","length_1","length","field_1","slice","Array","join","includes","groupIDField","getOuterHeight","offsetHeight","marginTop","marginBottom","removeChildren","_i","elementChildren_1","call","children","elementChild","classList","contains","isDaylightSavingTime","jan","jul","max","isIPadDevice","navigator","userAgent","toLowerCase","capitalizeFirstWord","inputString","type","split","map","e","charAt","toLocaleUpperCase","substring","array","isNullOrUndefined","index","generateSummary","rule","localeObject","locale","calendarType","cldrObj","cldrObj1","ruleObject","extractObjectFromRule","summary","getConstant","EVERY","calendarMode","nameSpace1","nameSpace","getValue","getDefaultDateObject","cldrData","interval","freq","DAYS","WEEKS","ON","forEach","DAYINDEXOBJECT","MONTHS","getMonthSummary","YEARS","month","count","TIMES","until","tempDate","UNTIL","localeObj","monthDay","pos","setPosition","WEEKPOS","generate","excludeDate","startDayOfWeek","maximumCount","viewDate","oldTimezone","newTimezone","MAXOCCURRENCE","cacheDate","calendarUtil","getCalendarUtil","modifiedDate","tempExcludeDate","tz","Timezone","content","parsedDate","getDateFromRecurrenceDateString","convert","push","recExceptionCount","tempViewDate","maxOccurrence","setFirstDayOfWeek","DAYINDEX","dailyType","weeklyType","monthlyType","yearlyType","recDateString","substr","excludeDateHandler","zeroIndex","expectedCount","expectedDays","compareDates","validateRules","wkstIndex","weekState","weekCollection","wkst","dayIndex","startDateDiff","weekendDate","compareTempDate","insertDataCollection","getStartDateForWeek","validateMonthlyRuleType","monthlyDayTypeProcessforMonthFreq","monthlyDayTypeProcess","monthlyDateTypeProcessforMonthFreq","monthlyDateTypeProcess","checkYearlyType","processWeekNo","processYearDay","firstWeekSpan","weekNo","maxDate","minDate","stDate","getYearLastDate","weekNos","insertDateCollection","state","insertDatasIntoExistingCollection","dateCollection","yearDay","getLeapYearDaysCount","isLeapYear","getYearDaysCount","initializeRecRuleVariables","ruleData","monthCollection","mainDate","monthInit","currentMonthDate","getMonthStartDate","isSameYear","checkMonth","setValidDate","processDateCollectionForByMonthDay","beginDate","setNextValidDate","isLastMonth","getMonthDaysCount","recRuleVariables","isByMonth","validateProperDate","monthData","getMonthCollection","dates","item","HASNUMBER","test","j","expectedDaysArray","SPLITNUMBERANDSTRING","isSameMonth","isNaN","filterDateCollectionByIndex","insertDateCollectionBasedonBySetPos","dayCycleData","processWeekDays","initialDate","datas","week","row","insertDateCollectionBasedonIndex","isHavingNumber","processDateCollectionforByDayWithInteger","compareMonth","newstr","getDayString","currentDate","getRecurrenceCollection","recurrenceCollectionObject","expectedDaysArrays","arrPosition","getDateCollectionforBySetPosNull","recurrenceCollections","dayData","chDate","weekCount","year","firstOfMonth","numberOfDaysInMonth","used","sort","weekIndex","validRules","REMOVENUMBERINSTRING","checkDayIndex","sortedExpectedDays","expectedDaysNumberSplit","expectedDaysArr","rules","temp","splitData","Number","splice","dayCycle","startIndex","checkDate","expectedDate","shift","checkYear","expectedyearDay","getYearDay","startDateCollection","diff","rotate","days","expectedMonth","getExpectedDays","Islamic","Gregorian","getRecurrenceStringFromDate","getUTCFullYear","roundDateValues","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","actionBegin","renderCell","inlineClick","dataReady","contentReady","scrollUiUpdate","ROOT","ICON","TABLE_CONTAINER_CLASS","CONTENT_TABLE_CLASS","POPUP_OPEN","APPOINTMENT_CONTAINER_CLASS","TEXT_ELLIPSIS","FORM_CLASS","EVENT_TOOLTIP_ROOT_CLASS","HeaderRenderer","parent","this","l10n","renderHeader","addEventListener","prototype","on","closeHeaderPopup","removeEventListener","off","closestEle","closest","target","closestPop","contentWrap","querySelector","isAdaptive","cls.POPUP_OPEN","removeClass","popupObj","ej2_instances","hide","addClass","hideHeaderPopup","headerPopup","toolbarEle","insertBefore","firstElementChild","renderToolbar","_this","items","getItems","trigger","events.actionBegin","requestType","args","toolbarObj","Toolbar","overflowMode","clicked","toolbarClickHandler","bind","enableRtl","appendTo","prevNavEle","setAttribute","nextNavEle","updateActiveView","updateItems","dataBind","getPopUpRelativeElement","setDayOfWeek","headerCalendar","setCalendarDate","setCalendarMinMaxDate","getCalendarView","currentView","setCalendarView","calendarView","depth","start","refresh","selEle","querySelectorAll","viewIndex","updateDateRange","text","innerHTML","refreshOverflow","getDateRangeText","util.capitalizeFirstWord","globalize","formatDate","selectedDate","format","calendar","getCalendarMode","align","prefixIcon","tooltipText","overflow","cssClass","htmlAttributes","aria-label","role","suffixIcon","aria-atomic","aria-live","showAlwaysInPopup","views","_a","getItemObject","viewName","displayName","option","view","orientationClass","orientation","renderHeaderPopup","headerPopupEle","headerCalendarEle","Popup","actionOnScroll","targetType","relateTo","X","Y","Calendar","activeViewOptions","change","calendarChange","setCalendarTimezone","calendarDate","util.resetTime","changeDate","timezone","tzModule","getLocalTimezoneName","calculateViewIndex","originalEvent","isSameTime","show","changeView","undefined","isSelectedDate","getCurrentTime","activeView","getNextPreviousDate","activeCellsData","startTime","timeScale","slotCount","msInterval","util.MS_PER_MINUTE","currentTime","setMilliseconds","getMilliseconds","isAllDay","eventWindow","openEditor","extend","cancel","toolbarPopUp","name","duration","getHeaderElement","updateHeaderItems","classType","dateRangeEle","cls.TEXT_ELLIPSIS","previousNextIconHandler","getCurrentViewDates","firstDate","lastDate","util.addDays","util.getWeekFirstDate","util.lastDateOfMonth","util.addMonths","util.firstDateOfMonth","enableItems","getModuleName","destroy","isDestroyed","Scroll","setWidth","width","formatUnit","setHeight","setDimensions","onPropertyChanged","cssProperties","getCssProperties","module","notify","ScheduleTouch","cls.TABLE_CONTAINER_CLASS","touchObj","Touch","scroll","scrollHandler","swipe","swipeHandler","tapHold","tapHoldHandler","swipeSettings","swipeThresholdDistance","EventHandler","add","onTransitionEnd","touchLeftDirection","touchRightDirection","uiStateValues","action","timeStampStart","now","scrollDirection","scrollDiv","isScrollTriggered","preventDefault","stopPropagation","nextPanel","renderPanel","getPanel","x","distanceX","transform","getTranslateX","prevWidth","previousPanel","swipeDate","swipeDirection","renderDates","offsetDist","Browser","isDevice","swapPanels","transitionDuration","confirmSwipe","cancelSwipe","quickPopup","tapHoldEventPopup","clsName","nextPrevType","currentPanel","setProperties","headerModule","getRenderDates","renderLayout","direction","previousDate","navArgs","setPanel","translateX","offsetLeft","renderTemplates","renderModule","refreshDataManager","generateColumnLevels","m41","resetValues","util.removeChildren","KeyboardInteraction","selectedCells","keyConfigs","downArrow","upArrow","rightArrow","leftArrow","shiftDownArrow","shiftUpArrow","shiftRightArrow","shiftLeftArrow","ctrlLeftArrow","ctrlRightArrow","altOne","altTwo","altThree","altFour","altFive","altSix","altSeven","altEight","altNine","enter","escape","delete","home","pageUp","pageDown","tab","shiftTab","ctrlShiftUpArrow","ctrlShiftDownArrow","ctrlShiftLeftArrow","ctrlShiftRightArrow","tabIndex","keyboardModule","KeyboardEvents","keyAction","keyActionHandler","eventName","processDown","shiftKey","processUp","processLeft","processRight","focus","processViewNavigation","processEnter","focusFirstCell","processTab","processDelete","processCtrlShiftNavigationArrows","processEscape","onCellMouseDown","initialTarget","getClosestCell","readonly","which","removeSelectedClass","getContentTable","onMouseSelection","onMoveup","allDayRow","getAllDayRow","appointments","selectionEdges","boundaryValidation","pageY","pageX","bottom","top","left","right","parent_1","yInBounds","scrollHeight","scrollTop","xInBounds","scrollLeft","selectCells","isPreventAction","getSelectedElements","cellData","convertToEventData","showQuickPopup","selectArgs","quickInfoOnSelectionEnd","cellArgs","click","resourceIcon","inlineModule","inlineCrudActions","setScheduleProperties","getDateFromElement","getNavigateView","allowInline","inlineArgs","groupIndex","event.inlineClick","cellDetails","getCellDetails","end","getCells","isInverseTable","tableEle","cells","maxRow","rows","maxColumn","endIndex","inverseCells","focusCell","eventBase","removeSelectedAppointmentClass","isTimelineView","cell","cls.CONTENT_TABLE_CLASS","getWorkCellElements","isInverseTableSelect","isMultiple","targetCell","initialId_1","views_1","allowMultipleRow","removeInlineAppointmentElement","allowMultiRowSelection","parentElement","cellIndex","group","resources","getAttribute","resourceSelectedCells","selectedCells_1","allowMultiCellSelection","allDayCells","getAllDayCells","resourceAllDayCells","allDayCells_1","concat","addSelectedClass","selectAppointment","isReverse","getAppointmentElements","nextAppEle","targetIndex","addSelectedAppointments","selectAppointmentElementFromWorkCell","appointmentElements_1","getUniqueAppointmentElements","filteredElements_1","selectedDate_1","eventsProcessed","filter","eventObject","eventFields","JSON","stringify","Guid","selectedElement","focusElements","getAppointmentElementsByGuid","startCell","endCell","util.MS_PER_DAY","guid","appointmentElements","self","getWorkCellFromAppointmentElement","selectedObject","getEventByGuid","selectWorkCellByTime","key","viewCollections","selectedElements","selectedEventElements","getSelectedAppointments","moreEventWrapper","quickPopupWrapper","getQuickPopupElement","tableRows","getTableRows","curRowIndex","processLeftRight","parentNode","sectionRowIndex","rowIndex","columnIndex","maxIndex","isCancelLeftRightAction","selectedAppointments","calculateNextPrevDate","curColIndex","maxColIndex","allDayRow_1","allDayRow_2","currentCell","initialId","nextPrevDate","getFocusableElements","processTabOnPopup","popupElement","focusableElements","firstEle","footerEle","offsetParent","lastEle","activeElement","popupWrapper","cls.ROOT","appElements","resCellSelector","resourceCell","appSelector","focusAppointment","resourceBase","lastResourceLevel","activeEle","selectedEle","getSelectedEvents","activeEventData","deleteClick","eventEle","renderedResources","onClosePopup","morePopup","Data","dataSource","query","initDataManager","dataManager","DataManager","Query","generateQuery","clone","addParams","toISOString","getData","executeQuery","dt","isMonthStart","getMonthEndDate","dateObj","monthValue","months","hDate","getHijriDate","HijriParser","toGregorian","daysInMonth","getDaysInMonth","gDate","finalGDate","finalHDate","updateDateObj","currentHijri","tempHijri","hDate1","timezoneData","getTimezoneData","offset","convertedDate","toLocaleString","timeZone","error","fromOffset","toOffset","fromLocalOffset","toLocalOffset","removeLocalOffset","Intl","DateTimeFormat","resolvedOptions","Value","Text","SU","MO","TU","WE","TH","FR","SA","EventBase","slots","isDoubleTapped","processData","events","timeZonePropChanged","fields","processed","generateID","id","this_1","events_1","event_1","util.getDateFromString","processTimezoneChange","processTimezone","level","recurrenceRule","recurrenceID","crudModule","crudObj","isCrudAction","recurrenceEvent_1","generateOccurrence","occurrence","app","generateGuid","eventData","isBlock","filterEvents","blockData","blockData_1","eventObj","blockProcessed","getProcessedEvents","eventCollection","eventsData","eventCollection_1","event_2","timezonePropertyChange","event.dataReady","processedData","timezoneConvert","startTimezone","endTimezone","startTz","endTz","filterBlockEvents","resourceData","eStart","eEnd","getGroupIndexFromEvent","resourceTdData","fieldMapping","predicate","Predicate","and","or","json","executeLocal","where","filterEventsByResource","sortByTime","filterEventsByRange","filteredEvents","groupOrder","keys","Object","every","a","b","d1","d2","sortByDateTime","object1","object2","d3","d4","d5","d6","getSmallestMissingNumber","large","apply","splitEventByDay","eventStartTime","eventEndTime","eventLength","util.getDaysCount","isSpanned","splitEvent","dateRender","util.getDateInMs","orgStart","orgEnd","ranges","cStart","slot","byDate","showWeekend","slotDates","slot_1","s","renderedDates","getRenderedDates","renderedDates_1","firstSlot","hasBreak","isLeft","isRight","cloneEventObject","dateInRange","availSlot","_b","availSlot_1","slot_2","getSelectedEventElements","elementSelector","focusElements_1","eventSelect","elementSelect","selectedAppointments_1","cells_1","focusElement","dialogObject","visible","selectedCell","keyboardInteractionModule","nearestTime","isAllDayAppointment","targetArea","queryString","levelIndex","resource","levelName","idField","parentField","getIndexFromResourceId","isFullDay","appointmentBorderRemove","wireAppointmentEvents","isPreventCrud","isReadOnly","isReadonly","eventClick","eventTouchClick","eventDoubleClick","resizeModule","wireResizeEvent","dragAndDropModule","wireDragEvent","setTimeout","renderResizeHandler","spanEvent","allowResizing","resizeEdge","resizeHandler","prepend","append","isTop","isBottom","ctrlKey","target_1","selectEventArgs","eventClickArgs","quickPopupHide","currentAction","openRecurrenceAlert","getEventById","c","r","random","getEventIDType","getEventMaxID","resourceId","eventId","idType","maxId","obj","isMaxCount","eventRule","maxCount","exception","recurrenceException","util.getDateCount","generatedDates","occurrenceCollection","dates_1","clonedObject","followingID","getParentEvent","isParent","parentEvent","getFollowingEvent","collection","getEventCollections","followObj","follow","parentObj","childObj","followingCollection","followingEvent","getOccurrenceEvent","collections","fields_1","fieldValue","isFollowingEvent","parentStart","childStart","isGuid","isFollowing","fieldKey","getOccurrencesByID","parentObject_1","event_3","getOccurrencesByRange","event_4","getDeletedOccurrences","recurrenceData","parentObject","deletedOccurrences","exDateString_1","this_2","len","exDate","childObject","applyResourceColor","alpha","color","getResourceColor","createBlockAppointmentElement","record","resIndex","templateElement","eventSubject","subject","eventSettings","default","appointmentWrapper","attrs","data-id","aria-readonly","aria-selected","eventTemplate","templateId","eventTemplateName","getAppointmentTemplate","setWrapperAttributes","getReadonlyAttribute","isBlockRange","isBlockAlert","event_5","dataCol","dataCol_1","getFilterEventsList","getSeriesEvents","deleteFutureEditEvents","futureEvents","deleteFutureEvent","deleteFutureEditEventList","delId","followingId","startTimeQuery","getEditedOccurrences","delEditedEvents","deleteRecurrenceEventList","deleteFutureEditEventList_1","event_6","delEventQuery","filteredDates","isValidEvent","schedule","isHourRange","isSameRange","__extends","extendStatics","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","create","VerticalEvent","_super","renderedEvents","renderedAllDayEvents","overlapEvents","moreEvents","overlapList","allDayEvents","allDayLevel","getStartHour","getEndHour","animation","Animation","progress","animationUiUpdate","renderAppointments","wrapperElements","isDragging","wrapperElements_1","wrapper","sourceEvent","targetEvent","allDayElement","setAllDayRowHeight","expandCollapse","rowExpandCollapse","initializeValues","processBlockEvents","renderEvents","arr","events.contentReady","isGroupAdaptive","cellHeight","parseFloat","getHeight","appHeight","appendEvent","appointmentElement","appLeft","appointmentWrap","setStyleAttribute","eventType","eventArgs","dateCount","resources_1","getResourceList","filterEvents_1","setValues","renderBlockEvents","dayCount","spannedData","isSpannedEvent","util.getStartEndHours","blockTop","blockHeight","getTopValue","isRender","resources_2","renderedDate","length_2","filterEvents_2","renderAllDayEvents","enableMaxHeight","getOverlapIndex","renderNormalEvents","filterEvents_3","resourceIndex","getCssClass","createAppointmentElement","recordSubject","data-guid","tabindex","aria-grabbed","getAnnocementString","appointmentDetails","appointmentSubject","appointmentStartTime","getTimeString","appointmentEndTime","timeStr","location","iconClass","recurrenceIcon","cls.ICON","renderSpannedIcon","createMoreIndicator","currentDay","countWrapper","childElementCount","innerCountWrap","cls.ROW_COUNT_WRAPPER_CLASS","moreIndicatorElement","data-index","data-count","countCell","moreCount","iconElement","cls.EVENT_INDICATOR_CLASS","iconLeft","iconRight","iconTop","iconBottom","startEndHours","inline","currentDates","allDayRowCell","cellTop","offsetTop","appWidth","topValue","isDateRange","isAlreadyRendered","allDayDifference_1","allDayIndex_1","Index","widthAdjustment","appointmentElement_1","wIndex_1","eventWrapper_1","createInlineAppointmentElement","length_3","allDayRowHeight","expand","addOrRemoveClass","appIndex","argsData","getEventWidth","tempData","adjustOverlapElements","appointmentElement_2","maxHeight","subjectElement","tempWidth","getEventLeft","tempLeft","diffInMinutes","eventsList","date_1","appointmentList_1","appointment_1","recordStart_1","recordEnd_1","filterList","val","Id","eventsList_1","appLevel","length1","length2","eleGuid","apps","animate","moreEventCount","getEventHeight","eventElement","styles","rowHeight","MonthEvent","monthHeaderHeight","moreIndicatorHeight","renderType","enableIndicator","rowAutoHeight","withIndicator","maxOrIndicator","ignoreWhitespace","removeEventWarapper","appElement","appElement_1","wrap","conWrap","ele","appointmentWrapper_1","removeHeightProperty","eventHeight","util.getElementHeightFromClass","virtualScrollModule","renderResourceEvents","renderEventsHandler","workDays","updateBlockElements","isPreventScrollUpdate","scrollPosition","updateVirtualScrollHeight","events.scrollUiUpdate","enablePersistence","resData","blockList","workCells","totalCells","height_1","clientHeight","cellDetail","cellWidth","getSlotDates","splittedEvents_1","sDate","getStartTime","getIndex","updateIndicatorIcon","blockEvents","blockEvents_1","blockSpannedList","isSameDate","isBlockIcon","blockSpannedList_1","blockEvent","splittedEvents_2","isIcon","getEndTime","getIndexOfDate","cellTd","getCellTd","getPosition","renderBlockIndicator","diffInDays","appRight","renderWrapperElement","appTop","getRowTop","blockElement","renderEventElement","blockIndicator","cloneData","sourceRes","slotData","isCloneElement","newRecord","getEventData","eventLocation","innerElement","timeString","appendEventIcons","overlapCount","enableAppRender","inlineValue","firstChild","updateCellHeight","cellTd_1","getFilteredEvents","appArea","renderedAppCount","getMoreIndicatorElement","renderElement","moreIndicatorClick","blockElement_1","getOverlapEvents","appointmentsList","appointments_1","moreArgs","isPopupOpen","clickArgs","moreArgs_1","moreEventClick","isAppointment","pop","setMaxEventHeight","data-start-date","data-end-date","selector","rows_1","headerHeight","util.getOuterHeight","align-items","TimelineEvent","eventContainers","cls.APPOINTMENT_CONTAINER_CLASS","tr","dayLength","headerRows","slotsPerDay","appointments_2","trimStartTime","trimEndTime","source","elem","eleHeight","appWidth_1","top_1","renderApp","getFirstChild","enable","moreIndicator","appPos","isAlreadyAvail","startDateTime","slotStartTime","slotEndTime","getFilterEvents","monthHeader","blockIndicator_1","getNextDay","isSameDay","getSameDayEventsWidth","getSpannedEventsWidth","endWidth","startWidth","spannedWidth","getAppointmentLeft","slotTd","gIndex","indicatorPos","getCellHeight","heightValue","wrapIndex","InlineEdit","events.inlineClick","inlineEdit","moreWrapper","cellEdit","eventEdit","saveObj","generateEventData","getEventDaysCount","createVerticalViewInline","createMonthViewInline","createTimelineViewInline","inlineSubject","subEle","timeEle","innerText","subjectWrap","setSelectionRange","daysCount","verticalEvent","allDayElements","saveObject","monthEvent","monthCellSelector","monthModule","timelineView","workCell","abs","inlineElement","setDefaultValueToObject","setResourceValues","documentClick","addEvent","eventTarget","eventDetails","getEventDetails","saveEvent","inlineData","inlineAppointmentElement","cls.APPOINTMENT_CLASS","inlineDetails","inlineAppointment","node","FieldValidator","renderFormValidator","form","formObj","FormValidator","customPlacement","inputElement","errorPlacement","validationComplete","focusout","focusOut","relatedTarget","ignoreError","inputName","display","status","createTooltip","dlgContent","client","inputClient","div","arrow","destroyToolTip","elements_1","reset","QuickPopups","isMultipleEventSelect","fieldValidator","render","renderQuickPopup","renderMorePopup","renderQuickDialog","cls.POPUP_WRAPPER_CLASS","open","quickPopupOpen","close","quickPopupClose","hideAnimation","showAnimation","collision","viewPortElement","zIndex","moreEventPopup","cls.MORE_POPUP_WRAPPER_CLASS","morePopupOpen","morePopupClose","closeButton","renderButton","closeClick","navigationClick","buttonModel","isPrimary","dialogButtonClick","editFollowingEvents","followingSeriesButton","quickDialog","Dialog","animationSettings","effect","buttons","closeOnEscape","beforeClose","beforeQuickDialogClose","isModal","showCloseIcon","dialogElement","okButton","cancelButton","iconName","isDisabled","clickEvent","Button","disabled","iconCss","quickDialogClass","followingEventButton","applyFormValidation","cls.FORM_CLASS","validation","editDeleteOnly","editFollowingEventsOnly","editDeleteSeries","header","activeEvent","showQuickDialog","openRecurrenceValidationAlert","dialogCancel","enableRecurrenceValidation","openDeleteAlert","openValidationError","popupType","eventProp","popupArgs","createMoreEventList","moreEventContentEle","moreEventWrapperEle","eventText","tempId","eventTitle","closeIcon","editIcon","editClick","deleteIcon","beforeQuickPopupOpen","isCellBlocked","tempObj","cellClick","showQuickInfo","allowAdding","isMinMaxDate","targetEle","newEventClone","subjectElement_1","quickCellPopup","getPopupHeader","getPopupContent","getPopupFooter","Input","createInput","properties","placeholder","popupClose","moreButton","detailsClick","saveButton","saveClick","isSameEventClick","editButton","isQuickTemplate","quickInfoTemplates","templateType","eventTooltip","updateTapHoldEventPopup","quickEventPopup","editAction","allowEditing","deleteAction","allowDeleting","buttonClass","deleteButton","headerType","headerData","headerTemplate","headerArgs","elementType","headerTemp","getQuickInfoTemplatesHeader","getFormattedString","templateWrapper","childNodes","contentTemplate","contentArgs","contentTemp","getQuickInfoTemplatesContent","resourceText","getResourceText","details","getRecurrenceSummary","getTimezone","description","footerType","footerData","footerTemplate","footer","footerArgs","footerTemp","getQuickInfoTemplatesFooter","resourceValue","resourceCollection_1","resourceData_1","id_1","textField","lastResource_1","isArray","resNames_1","lastResourceData_1","util.findIndexInData","resourceDetails","startDateDetails","getDateFormat","endDateDetails","startTimeDetail","endTimeDetail","spanLength","dateElement","moreEventElements","tdDate","subjectEle","updateMoreEventContent","moreElement","cancelBtn","deleteEvent","isIgnoreOccurrence","eventSave","titleContent","zoneDetails","recurrenceEditor","getRecurrenceEditorInstance","ruleSummary","getRuleSummary","toUpperCase","skeletonString","skeleton","getDataFromTarget","cellsData","popupCloseArgs","isEventPopup","destroyButtons","removeAttribute","innerHeight","offsetX","refreshPosition","collide","isCollide","translateY","util.getTranslateY","offsetY","applyEventColor","colorField","colorEle","borderLeftColor","backgroundColor","editElement","popupData","isCellPopup","formvalidator","validate","getObjectFromFormData","navigateEle","currentTarget","classNames","popupWrap","tar","removeNewEventElement","removeEventListner","buttonCollections_1","instance","refreshQuickDialog","refreshQuickPopup","refreshMorePopup","EventTooltip","tooltipObj","Tooltip","mouseTrail","showTipPointer","cls.EVENT_TOOLTIP_ROOT_CLASS","getTargets","beforeRender","onBeforeRender","onBeforeClose","targets","headerTooltipTemplate","enableTooltip","resCollection","getColumnLevels","contentContainer","tooltipTemplate","getHeaderTooltipTemplate","setContent","eventStart","eventEnd","tooltipSubject","tooltipLocation","startMonthDate","startMonthYearDate","endMonthYearDate","tooltipDetails","getEventTooltipTemplate","resetTemplates","__decorate","decorators","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","INPUTWARAPPER","FORMLEFT","ENDONCOUNT","HIDEWRAPPER","PRIMARY","contentType","none","daily","weekly","monthly","yearly","valueData","sun","mon","tue","wed","thu","fri","sat","neverClassList","weekClassList","monthClassList","yearClassList","dailyClassList","noEndClassList","endOnCountClassList","endOnDateClassList","RecurrenceEditor","options","defaultLocale","never","first","second","third","fourth","last","repeat","repeatEvery","onDay","weeks","years","summaryTimes","summaryOn","summaryUntil","summaryRepeat","summaryDay","summaryWeek","summaryMonth","summaryYear","monthWeek","monthPosition","monthExpander","yearExpander","repeatInterval","renderStatus","dayButtons","monthButtons","startState","endOn","showFormElement","updateForm","freshOnEndForm","updateEndOnForm","selectMonthDay","updateUntilDate","onMonthDay","checked","preRender","L10n","applyCustomClass","initialize","renderComponent","repeatType","selectedType","getRecurrenceRule","setRecurrenceRule","triggerChangeEvent","resetDayButton","daySelection","rotateArray","rtlClass","untilDateObj","weekday","monthDate","monthWeekDays","monthWeekPos","getDayPosition","endType","hideElement","renderDropdowns","DropDownList","getRepeatData","floatLabelType","title","frequencies","resetFormValues","getEndData","popupWidth","getPopupWidth","renderDropDownList","dropDownData","onWeekDay","getMonthPosData","getDayData","getMonthData","setDefaultValue","formelement_1","recurreneElement_1","renderDatePickers","DatePicker","dateFormat","getFormat","formatType","dayButtonRender","btns_1","btn","button","isToggle","btns","radioButtonRender","RadioButton","label","numericTextboxRender","recurrenceCount","NumericTextBox","setTemplate","positionCollection","textValue","monthposValue","nameSpaceString","weekday_1","fullDay","getSelectedDaysData","RULEBYDAY","elements","getSelectedMonthData","RULEBYMONTHDAY","getIntervalData","RULEINTERVAL","getEndOnCount","RULECOUNT","getYearMonthRuleData","RULEBYMONTH","updateWeekButton","updateMonthUI","updateUI","getUntilData","RULEUNTIL","destroyComponents","resetFields","updateRuleUntilDate","untilDate","newUntilDate","getRecurrenceDates","RULEFREQ","RULEDAILY","RULEWEEKLY","RULEMONTHLY","RULEYEARLY","endon","removeClasses","getPersistData","addOnPersist","renderComplete","newProp","oldProp","Property","Event","NotifyPropertyChanges","Component","EventWindow","eventWindowTime","renderEventWindow","dialogModel","getEventWindowContent","minHeight","beforeOpen","onBeforeOpen","cls.EVENT_WINDOW_DIALOG_CLASS","eventDelete","dialogClose","refreshRecurrenceEditor","createRecurrenceEditor","setRecurrenceEditor","editorTemplate","isEventData","cellClickAction","renderFormElements","onCellDetailsUpdate","onEventDetailsUpdate","setDialogContent","getSlotDuration","getInstance","deleteObj","callBackPromise","Deferred","refreshDateTimePicker","startObj","endObj","resolve","isInteracted","eventCrudData","processCrudActions","resetForm","onsubmit","getDefaultEventWindowContent","isReact","formElements_1","tempEle","getEditorTemplate","parentDiv","createDivElement","titleLocationDiv","renderTextBox","editorTitles","startEndDateTimeDiv","renderDateTimePicker","onTimeChange","allDayTimezoneDiv","renderCheckBox","timezoneParentDiv","renderDropDown","repeatParentDiv","repeatDiv","repeatEditConainer","buttonObj","REPEAT_BUTTON_ICON_CLASS","loadRecurrenceEditor","resourceParentDiv","renderResourceDetails","cls.DESCRIPTION_CLASS","submit","renderRecurrenceEditor","updateMinMaxDateToEditor","createInputElement","fieldName","changeEvent","dateTimeDiv","getFieldName","dateTimeInput","DateTimePicker","timeFormat","getFieldLabel","step","startEndElement_1","labelValue","resourceDiv","resourceInput","resourceTemplate","allowMultiple","MultiSelect","onMultiselectResourceChange","itemTemplate","popupHeight","mode","onDropdownResourceChange","timezoneDiv","timezoneInput","allowFiltering","onTimezoneChange","filterBarPlaceholder","filtering","updateData","byGroupID","getColumnName","resObject","createInstance","datasource","resourceModel","groupId","filterRes","filterDatasource","resObj","itemData","resValue","startTimezoneObj","endTimezoneObj","checkBoxDiv","checkBoxInput","checkBox","CheckBox","onChange","repeatStatus","textBoxDiv","textBoxInput","labelText","onAllDayChange","timezoneChangeStyle","onRepeatChange","renderRepeatDialog","repeatDialogObject","repeatSaveDialog","repeatCancelDialog","repeatOpenDialog","repeatRule","repeatStartDate","updateRepeatLabel","closeRepeatDialog","repeatTempRule","showDetails","disableButton","RecurrenceRule","getValidationRule","trimAllDay","formelement","getFormElements","keyNames","curElement","columnName","setValueToElement","setDefaultValueToElement","timezoneObj","cls.TIME_ZONE_CLASS","attrName","isDropDowns","fieldSelector","classSelector","control","attrEle","allDayStatus","updateDateTime","getStartEndTime","workHours","timezoneValue","isDisable","saveIcon","untilObj","resetFormFields","localTimezoneName","some","formElement_1","currentElement","alert","formElement","dataCollection","getEventDataFromEditor","processEventValidation","Repeat","alertType","isShowAlert","recurrenceValidation","getResourceData","isResourceEventExpand","allowGroupEdit","getEventIdFromForm","resourceSaveEvent","eveId_1","editedData","editOccurrenceValidation","formElement_2","getValueFromElement","alertMessage","recEditor","excludedEvents","seriesEvents","types","tempDiff","tempvalue","getRecurrenceIndex","recColl","recIndex","currentData","editData","recurColl","recurColl_1","lastResouceData","lastlevel","eventList","state_1","addValues","k","lastResource","resCol","groupId_1","index_1","l","eventList_1","SanitizeHtmlHelper","sanitize","dateValue","formelement_2","VirtualScroll","itemSize","bufferCount","renderedLength","averageRowHeight","isScrollHeightNull","virtualScrolling","getRenderedCount","setItemSize","setTranslateValue","resWrap","eventWrap","timeIndicator","renderVirtualTrackHeight","setTranslate","resourceWrap","setExpandedResources","startIndex_1","endIndex_1","expandedResources","virtual","renderVirtualTrack","lastResourceIndex","conTable","updateVirtualTrackHeight","resourceCount","lastRenderIndex","renderedResConut","events.dataReady","hideSpinner","firstTDIndex","upScroll","downScroll","showSpinner","updateContent","actionObj","navigationWrapper","clearTimeout","timeValue","prevSetCollection","getBufferCollection","nextSetResIndex","lastIndex","nextSetCollection","renderedLenth","resourceRows","getContentRows","contentRows","eventRows","getEventRows","Render","isDataRefresh","initializeLayout","dayModule","weekModule","workWeekModule","yearModule","agendaModule","monthAgendaModule","timelineViewsModule","viewClass","timelineMonthModule","timelineYearModule","firstView","Error","updateLabelText","enableCompactView","allowVirtualScrolling","updateHeader","getLabelText","dataModule","then","dataManagerSuccess","catch","dataManagerFailure","resultData","result","WorkHours","ChildProperty","TimeScale","QuickInfoTemplates","HeaderRows","Crud","getQuery","getTable","fromTable","refreshData","actionArgs","addedRecords","editParams","changedRecords","deletedRecords","crudData_1","promise","tdData","offline","offlineArgs","onlineArgs","isBlockEvent","addEvents","addArgs","saveChanges","insert","crudArgs","processSave","processOccurrences","processFollowSeries","processEntireSeries","saveArgs","eventData_1","update","deleteEvents","deleteArgs","occurrenceData","isDeletedRecords","eventData_2","updateEvents","occurrenceArgs","occurrenceEvents","childEvent","parentException","exceptionDate","excludeDateCheck","followData","eventData_3","updateFollowEvents","followArgs","followEvents","followData_1","processRecurrenceRule","seriesData","eventData_4","event_7","updateSeriesEvents","seriesArgs","fields_2","eventCollections","deletedEvents","originalParent","deleteData","eventData_5","fields_3","isDelete","parentEvent_1","isEdited","editedDate","eventData_6","editArgs","exceptionString","parentEle","exceptionDateList","followEvent","newRecurrenceRule","getUpdatedRecurrenceRule","updatedRule","splitRule_1","ruleKey","ruleValue","WorkCellInteraction","onHover","cellMouseDown","navigateView","sameView","viewOptions","isWorkCell_1","selectCell","cellDblClick","hoverTarget","hoverArgs","FieldOptions","Field","Complex","EventSettings","Group","Resources","ResourceBase","leftPixel","renderResourceHeaderIndent","resColTd","resColDiv","events.renderCell","hideResourceRows","tBody","trCount","res","ClassName","expandedField","slicedCollection","Count","createResourceColumn","resColl","resDiv","tbl","createTableLayout","generateTreeData","countCalculation","setRenderedResources","isExpanded","rIndex","resRows","td","ntd","iconDiv","setMargin","onTreeIconClick","setResourceHeaderContent","resourceHeaderTemplate","classCollection","ntr","marginRight","marginLeft","parentCollection","wholeCollection","y","totalCount","z","trElement","eventElements_1","updateVirtualContent","pNode","rowCollection","workCellCollection","headerRowCollection","clickedRes","clonedCollection","expanded","trElem","sIndex","virtualTrack","resTable","contentTable","eventTable","renderResourceHeader","resourceWrapper","renderResourceHeaderText","menuClick","renderResourceTree","popupOverlay","treeWrapper","cls.RESOURCE_TREE_POPUP","resourceTree","treeViewObj","TreeView","child","nodeTemplate","nodeClicked","resourceClick","expandAll","treePopup","isTimeLine","treeCollection","resTreeColl","resourceTreeLevel","treeHandler","treeLevel","levelId","treeArgs","resourceName","resourceChild","tree","headerCollection","resourceLevel","levelIcon","headerWrapper","headerCollection_1","treeNodes","args_1","bindResourcesData","isSetModel","promises","Promise","all","resourceObj","getResourceModel","refreshLayout","startHourField","endHourField","workDaysField","cssClassField","renderElements","setResourceCollection","requiredResources","colorIndex","requiredResources_1","resourceColorField","generateResourceLevels","innerDates","resTreeGroup","lastColumnDates","prevResource","prevResourceData","prevOrder","resTree","dateCol","resWorkDays","resStartHour","resEndHour","getDateSlots","dateSlots","generateCustomHours","resCssClass","resourceLevelIndex","colSpan","generateHeaderLevels","dateSlots_1","dateSlot","headerDates","headerLevels","currentLevelChilds_1","currentLevelChild","_c","nextLevelChilds_1","nextLevelChild","_d","_e","lastLevelResource","dateHeaderLevels","levels","dateColSpan","_f","_g","datesColumn","_h","headerDates_1","headerDate","resGroup","_j","_k","resTd","unshift","colorFieldIndex","filterData","getResourceRenderDates","dateColl","groupEditIndex","groupEditIndex_1","length_4","addResource","addObj","removeResource","removeObj","resourceExpand","resourceScroll","scrollElement","offsetTarget","resToolBarEle","Schedule","addClasses","allowMultiDrag","cssClass_1","cls_1","validateDate","eventTooltipTemplateFn","templateParser","editorTemplateFn","quickInfoTemplatesHeaderFn","quickInfoTemplatesContentFn","quickInfoTemplatesFooterFn","createSpinner","scrollModule","workCellAction","allowKeyboardInteraction","initializeDataModule","renderTableContainer","getActiveViewOptions","initializeResources","wireEvents","renderReactTemplates","templates","isAngular","clearTemplate","isLayoutOnly","initializeView","destroyHeaderModule","showHeaderBar","isTouch","scheduleTouchModule","destroyPopups","initializePopups","getViewIndex","setViewOptions","isModuleLoad","selectedView","prevIndex","isOptions","isSelected","fieldViewName","cellHeaderTemplateName","cellHeaderTemplate","dateHeaderTemplateName","dateHeaderTemplate","cellTemplateName","cellTemplate","resourceHeaderTemplateName","currentIndex","majorSlotTemplate","minorSlotTemplate","scheduleOptions","template","showWeekNumber","internalTimeFormat","viewsData","setEditorTitles","initializeTemplates","cellHeaderTemplateFn","cellTemplateFn","dateHeaderTemplateFn","majorSlotTemplateFn","minorSlotTemplateFn","appointmentTemplateFn","resourceHeaderTemplateFn","headerTooltipTemplateFn","getDayNames","culShortNames","setCldrTimeFormat","getDateTime","setCalendarMode","allowServerDataBinding","muteOnChange","previousView","navigationArgs","animateLayout","isInitial","timingFunction","requiredModules","modules","member","allowDragAndDrop","util.isIPadDevice","Internationalization","getDefaultLocale","workWeek","agenda","weekAgenda","workWeekAgenda","monthAgenda","today","noEvents","emptyContainer","allDay","more","noTitle","deleteMultipleEvent","selectedItems","deleteSeries","edit","editSeries","editEvent","createEvent","addTitle","moreDetails","save","editContent","deleteContent","deleteMultipleContent","newEvent","recurrence","wrongPattern","seriesChangeAlert","createError","sameDayAlert","editRecurrence","repeats","startEndError","invalidDateError","blockAlert","ok","yes","no","series","previous","next","timelineDay","timelineWeek","timelineWorkWeek","timelineMonth","timelineYear","editFollowingEvent","deleteTitle","editTitle","beginFrom","endAt","expandAllDaySection","collapseAllDaySection","onScheduleResize","touchStartEvent","onDocumentClick","isAllDayCell","dateString","dateInMS","getTargetElement","targetElement","elementFromPoint","getCellHeaderTemplate","getCellTemplate","getDateHeaderTemplate","getMajorSlotTemplate","getMinorSlotTemplate","getResourceHeaderTemplate","border","padding","rtlBorder","rtlPadding","eventClone","startEndTime","startEndDate","resetColWidth","compile","trim","startDateText","endDateText","annocementString","scrollEdges","viewBoundaries","pageYOffset","pageXOffset","getWeekNumberContent","weekNumber","weekRule","util.getWeekNumber","util.getWeekLastDate","util.getWeekMiddleDate","weekFirstDate","unwireEvents","isRefresh","isResource","isDate","isView","isLayout","isDataManager","prop","highlightCurrentTime","setRtlClass","extendedPropertyChange","propertyChangeAction","onEventSettingsPropertyChanged","onGroupSettingsPropertyChanged","setWorkHours","getWorkHourCells","resetWorkHours","workHourCells","viewStartHour","viewEndHour","tempStartIndex","tempEndIndex","colIndex","tds","tdCol","firstTd","getElement","lastTd","endDateFromColSpan","getEndDateFromStartDate","getResourceCollections","setResourceCollections","resourceCol","changeCurrentView","getCurrentViewIndex","getResourcesByIndex","groupData","expandResource","collapseResource","scrollTo","hour","scrollDate","scrollToDate","scrollToHour","scrollToResource","groupName","exportToICalendar","fileName","customData","iCalendarExportModule","initializeCalendarExport","importICalendar","fileContent","iCalendarImportModule","initializeCalendarImport","exportToExcel","excelExportOptions","excelExportModule","initializeExcelExport","print","printModule","printScheduler","getEvents","includeOccurrences","getBlockEvents","eventID","getCurrentViewEvents","refreshEvents","isSlotAvailable","closeEditor","closeQuickInfoPopup","Collection","ActionBase","daysVariation","slotInterval","actionIndex","cloneElement","originalElement","excludeSelectors","navigationInterval","scrollInterval","scrollArgs","resizeEdges","getChangedData","multiData","getOriginalElement","indexCol_1","cloneIndex_1","saveChangedData","isMultiSelect","eventsCollection","selectedData","eventsCollection_1","isSameResource","eveId","calculateIntervalTime","intervalTime","getContentAreaDimension","viewElement","getResourceElements","leftOffset","rightOffset","getPageCoordinates","changedTouches","contentElements","indexes","minIndex","groupElements","updateTimePosition","timeElement","wrapperClass","offsetValue","rightValue","leftValue","table","createCloneElement","outerHTML","cloneClassLists","eventDragArea","removeCloneElementClasses","removeCloneElement","getCursorElement","pages","clientX","clientY","autoScroll","yIsScrollable","xIsScrollable","scrollBy","autoScrollValidation","actionClass","updateScrollPosition","setInterval","updateDraggingDateTime","updateResizingDirection","timeDelay","updateOriginalElement","eventWrappers","getUpdatedEvent","parse","dynamicYearlyEventsRendering","isResize","yearEvent","pointer-events","dateHeader","renderDynamicElement","dynamicEventsRendering","eventWrappers_1","Resize","resizeElement_1","element_1","resizeStart","resizeHelper","resizeTarget","resizeArgs","resizeEventArgs","hRows","tdCollections_1","touchMoveEvent","resizing","touchEndEvent","resizeStop","monthResizing","resizeValidation","leftStyles","getLeftRightStyles","horizontalResizing","rightStyles","topStyles","getTopBottomStyles","verticalResizing","bottomStyles","resizeTime","isSameCell","yearEventsRendering","monthDiff","getMonthDiff","getEventCount","monthStart","monthEnd","clearInterval","minutes","headerName","tdCollections","isLastCell","tdCollections_2","cellOffsetWidth","resizeDate","spanMinutes","cloneIndex","originalWidth","resizeEnd","clnHeight","clnTop","isTimeViews","pageWidth","targetWidth","cloneWidth","viewDimension","YearEvent","yearViewEvents","removeCellHeight","timelineResourceEvents","timelineYearViewEvents","cellHeader","wrapperCollection","eventWrapper","isSpannedCollection","wrapper_1","rowTd","dayStart","dayEnd","dayEvents","updateSpannedEvents","overlapIndex","availedHeight","isRendered","moreIndex","renderMoreIndicatior","moreData","renderEvent","isLeftRightResize","renderResourceEvent","eventDatas","createEventElement","locationEle","startTimeEle","endTimeEle","dateStart","dateEnd","appStart","appEnd","DragAndDrop","widthUptoCursorPoint","heightUptoCursorPoint","cursorPointIndex","isHeaderRows","isTimelineDayProcess","widthPerMinute","heightPerMinute","minDiff","isStepDragging","isMorePopupOpened","isAllDayDrag","updatedData","swagData","isAllDayTarget","targetTd","dragObj","Draggable","abort","isDragScroll","enableTapHold","enableTailMode","cursorAt","dragArea","dragStart","drag","dragStop","enableAutoScroll","helper","dragHelper","queryPositionInfo","dragPosition","setDragActionDefaultValues","cursor","pointerEvents","cloneBottom","eventGuid","dragArgs","getSelectedData","navigation","dragEventArgs","intDestroy","timelineEventModule","calculateMinutesDiff","updateNavigatingPosition","isAllowDrop","currentGroupIndex","currentDate_1","viewNavigation","morePopupEventDragging","calculateTimelineTime","calculateVerticalDate","calculateVerticalTime","outWrapper","tarWrapper_1","elementHeight","getAllDayEventHeight","outerWrapperCls","targetWrapper","navigationType","eventDuration","dragEnd","eventContainer","appendCloneElement","swapDragging","getEventWrapper","updateAllDayEvents","targetCellTime_1","eventObj_1","startTimeDiff","updateMultipleData","getDayIndex","updateEventHeight","timeDifference","endTimeDiff","differInDays","datesCount","timeDiff","allDayDifference","allDayElement_1","tagName","updateMultipleVerticalDate","getOffsetValue","getColumnIndex","leftVal","cursorIndex","getCursorCurrentIndex","widthDiff","getWidthDiff","eventSrt","dataIndex","calculateResourceGroupingPosition","viewEle","targetLeft","dateLength","targetDate","trCollection","scrollY","cursorElement","dropSelectors_1","ViewBase","serverRenderLayout","getDayName","getTimelineDate","createEventTable","collapseRows","cls.SCHEDULE_TABLE_CLASS","tbody","createColGroup","lastRow","reduce","prev","colGroupEle","getScrollXIndent","util.getScrollBarWidth","scrollTopPanel","getDatesHeaderElement","scrollHeaderLabels","headerTable","colWidth","classNames_1","headerCells","headerCells_1","isRtl","tdLeft","hiddenLeft","headerCells_2","addAttributes","getHeaderBarHeight","headerBarHeight","resHeader","panel","colLevels","isCurrentDate","isCurrentMonth","isWorkDay","isWorkHour","agendaDaysCount","weekLength","viewStr","formatDateRange","formattedStr","longDateFormat","toLocaleLowerCase","getMobileDateElement","tdElement","quickTemplate","renderResourceMobileLayout","addAutoHeightClass","getColElements","setColWidth","colElements","contentBody","colWidth_1","col","resourceColumn","colElements_1","getContentAreaElement","wireExpandCollapseIconEvents","treeIcons_1","icon","clearEvents","scrollWrap","setPersistence","retainScrollPosition","VerticalView","baseCssClass","event.scrollUiUpdate","appointment","onContentScroll","scrollLeftPanel","onApaptiveMove","onApaptiveScroll","leftPanel","getLeftPanelElement","timecells","getScrollableElement","scrollerHeight","setContentHeight","scrollBarWidth","scrollToWorkHour","leftPanelElement","highlight","firstWorkHourCell","getTopFromDateTime","columnLevels","workStartHour","workEndHour","renderDates_1","isWorkHourRange","showTimeIndicator","getCurrentTimeIndicatorIndex","changeCurrentTimePosition","currentTimeIndicatorTimer","clearCurrentTimeIndicatorTimer","currentDateIndex","removeCurrentTimeIndicatorElements","timeIndicator_1","indicator","firstRow","topInPx","timeCellsWrap","timeTrs","curTimeWrap","currentDateIndex_1","currentTimeEle","lastElementChild","getWorkCellHeight","getTdContent","cntEle","templateName","clsList","renderContent","event.contentReady","dateTd","renderDatesHeader","indentTd","renderLeftIndent","workTd","scrollContainer","renderTimeCells","renderContentArea","timesTd","trEle","rowCount","ntr_1","data_1","createTd","appointmentExpandCollapse","aria-disabled","cls.ALLDAY_APPOINTMENT_SECTION_CLASS","nth","lastLevel","createAllDayRow","wireCellEvents","thead","createEventWrapper","tdEle","wireMouseEvents","event.renderCell","handler","getTimeSlotRows","renderContentTable","createContentTd","renderContentTableHeader","getContentTdClass","cellDate","util.setTime","data-date","innerWrapper","cls.APPOINTMENT_WRAPPER_CLASS","msMajorInterval","msStartHour","msEndHour","util.isDaylightSavingTime","timeOffset","majorTickDivider","middle","contentScrollableEle","Day","Week","WorkWeek","Month","dayNameFormat","monthDates","onScrollUIUpdate","onDataReady","onCellClick","headerCell","getDayNameFormat","renderWeekNumberContent","contentArea","monthAgendaWrapper","renderAppointmentContainer","contentWrapper","contentWrapTable","createWeekNumberElement","createHeaderCell","dateTemplate","getContentSlots","slotDatas","prepareSlots","renderDate","includeResource","colDates","colDates_2","colDate","resourcesTd","colDates_1","updateClassList","isOtherMonth","trows","renderDateHeaderElement","cellheaderTemplate","annocementText","getMonthStart","getMonthEnd","util.WEEK_LENGTH","Year","viewTypeClass","calendarTable","calendarTBody","getRowColumnCount","columnCount","cTr","cTd","calendarWrapper","monthCollection_1","currentMonth","calendarElement","data-role","renderCalendarHeader","renderCalendarContent","headerContent","getMonthName","getMonthDates","currentWeek","weekDates","tr_1","weekDates_1","createTableColGroup","parseDate","moreEventArgs","scrollTopElement","onScrollUiUpdate","util.addYears","AgendaBase","viewBase","createAgendaContentElement","listData","aTd","listElement","ListBase","createList","moduleName","listClass","itemClass","li","appWrapper","templateEle","createAppointment","appSubjectWrap","strDate","allDayStr","displayStr","processAgendaEvents","splited","wireEventActions","eventElement_1","dateHeaderElement_1","dayNavigationClick","calculateResourceTableElement","agendaDate","agendaLastDate","lastLevelInfo","tempLastLevelInfo","tempIndex","finalDate","agendaCollection","hideEmptyAgendaDays","resDataCollection","resDayCollection","rowSpan","topResources","tempGroupedData","totalRowSpan","u","createResourceTableRow","renderEmptyContent","tContent","tContentCollection","w","rowSpanCollection","createDateHeaderElement","eTr","createTableRowElement","eTd","aria-rowindex","class","aria-colindex","dTd","Agenda","agendaDates","virtualScrollTop","agendaBase","eventLoad","renderInitialContent","refreshEvent","refreshDate","emptyTBody","contentChild","emptyTBody_1","isObject","appointmentFiltering","updateHeaderText","nTr","agendaScrolling","filterDate","totalHeight","topElement","getElementFromScrollerPosition","getPreviousNextDate","scrollToValue","filterElement","liCollection","getStartDateFromEndDate","unWireEvents","onAgendaScrollUiUpdate","MonthAgenda","monthAgendaDate","wrapperContainer","appWrap","appendAppContainer","setEventWrapperHeight","availHeight","clearElements","onEventRender","appContainer","appointmentIndicators_1","appointmentIndicator","navigateDate","TimelineHeaderRow","groupByYear","groupByMonth","dates_2","groupByWeek","dates_3","jsDate","generateSlots","colspan","cls","dateParser","tdDatas","htmlCol","viewTemplate","hourSlots","lastLevelColspan","byYear","byMonth","byWeek","TimelineViews","currDateTime","getLeftFromDateTime","generateTimeSlots","timeSlotData","tempTimeSlots_1","headerWrap","diffInDates","getWorkCellWidth","getRowCount","getResourceTdData","resLevel","resSHr","resEHr","TimelineMonth","contentTr","contentTd","TimelineYear","leftHeaderCells","innerTr","column","innerTd","colData","count_1","monthTBody","tdCollection","monthWrapper","contentTBody","colCount","renderResourceContent","renderDefaultContent","monthBody","monthTr","monthTd","isDateAvail","dayDate","cls.DATE_HEADER_CLASS","renderCellTemplate","ICalendarExport","SEPARATOR","appVersion","iCalendarEvents","filterCollection","uId","editedExDate","UID","edited","startZone","endZone","calendarEvent","convertDateToString","customFields","customFieldFilter","customField","icsString","download","defaultFields","eventDate","hours","seconds","buffer","Blob","msSaveBlob","downloadLink_1","createElementNS","href","URL","createObjectURL","initEvent","dispatchEvent","revokeObjectURL","ICalendarImport","fileReader_1","FileReader","onload","iCalString","iCalendarParser","readAsText","curEvent","calArray","RegExp","isEvent","dateParsing","processOccurrence","appoint","exdate","getDateString","newDate","exec","UTC","ExcelExport","exportFields","exportName","exportType","isIncludeOccurrences","processWorkbook","columns","columnHeader","fontSize","borders","bold","columnData","n","columnRule","styleRule","numberFormat","workSheet","Workbook","worksheets","Print","scrollableEle","links","getElementsByTagName","reference","elementWidth","printWindow","write","ready","scrolledScheduler","headerTimeCellsScroll","index.Schedule","Inject","index.Day","index.Week","index.WorkWeek","index.Month","index.Year","index.Agenda","index.MonthAgenda","index.TimelineViews","index.TimelineMonth","index.TimelineYear","index.Resize","index.DragAndDrop","index.ExcelExport","index.ICalendarExport","index.ICalendarImport","index.Print"],"mappings":"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"}